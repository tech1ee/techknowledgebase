---
title: "Cross-Platform: Decision Guide — Native vs KMP vs Flutter"
created: 2026-01-11
type: comparison
tags: [cross-platform, decision, kmp, flutter, native]
---

# Cross-Platform: Decision Guide

Руководство по выбору технологического стека для мобильной разработки.

---

## 1. TL;DR — Матрица принятия решений

### Быстрый выбор за 30 секунд

| Критерий | Native | KMP | Flutter/RN |
|----------|--------|-----|------------|
| **Максимальный UX** | ✅ Лучший | ✅ Отличный | ⚠️ Хороший |
| **Скорость разработки** | ⚠️ Медленно | ✅ Быстро | ✅ Очень быстро |
| **Размер команды** | 4+ человек | 2-4 человека | 1-3 человека |
| **Бюджет** | Высокий | Средний | Низкий |
| **Переиспользование кода** | 0% | 50-80% | 80-95% |
| **Доступ к API платформы** | ✅ Полный | ✅ Полный | ⚠️ Через плагины |

### Формула выбора

```
IF (бюджет неограничен AND нужен лучший UX AND есть 2 команды)
  → Native

ELSE IF (сложная бизнес-логика AND нужен нативный UI AND есть Kotlin/Swift опыт)
  → KMP

ELSE IF (MVP/стартап AND маленькая команда AND скорость важнее UX)
  → Flutter/RN
```

---

## 2. Когда выбирать Native iOS + Native Android

### Идеальные условия

```
┌─────────────────────────────────────────────────────────┐
│                    ВЫБИРАЙ NATIVE                        │
├─────────────────────────────────────────────────────────┤
│ ✓ Бюджет позволяет 2 отдельные команды                  │
│ ✓ Приложение — ключевой продукт компании                │
│ ✓ Нужна максимальная производительность                 │
│ ✓ Глубокая интеграция с ОС (AR, Health, Watch)          │
│ ✓ Долгосрочный проект (5+ лет поддержки)                │
│ ✓ Разные UX для iOS и Android — преимущество            │
└─────────────────────────────────────────────────────────┘
```

### Примеры продуктов

- **Банковские приложения** — безопасность, биометрия
- **Игры** — производительность критична
- **Социальные сети** — камера, AR-фильтры
- **Health/Fitness** — интеграция с HealthKit/Health Connect

### Преимущества

1. **Максимальная производительность** — нет оверхеда
2. **Первый доступ к новым API** — сразу после релиза ОС
3. **Лучшие инструменты** — Xcode Instruments, Android Profiler
4. **Нативный UX** — пользователи чувствуют разницу

### Недостатки

1. **Двойная работа** — каждая фича пишется дважды
2. **Расхождение платформ** — баги могут быть только на одной
3. **Высокая стоимость** — 2 команды = 2x зарплаты
4. **Сложность синхронизации** — разные сроки релизов

### Красные флаги (не выбирай Native если...)

```
✗ Команда < 4 человек
✗ Стартап с ограниченным бюджетом
✗ Нужен быстрый MVP
✗ Бизнес-логика доминирует над UI
```

---

## 3. Когда выбирать KMP (Kotlin Multiplatform)

### Идеальные условия

```
┌─────────────────────────────────────────────────────────┐
│                      ВЫБИРАЙ KMP                         │
├─────────────────────────────────────────────────────────┤
│ ✓ Сложная бизнес-логика (расчёты, валидация, sync)      │
│ ✓ Хочется нативный UI на каждой платформе               │
│ ✓ Команда знает Kotlin (Android) или готова учить       │
│ ✓ Постепенная миграция с существующего Native           │
│ ✓ Нужна гибкость — что шарить, решаете сами             │
│ ✓ Backend на Kotlin — можно шарить модели               │
└─────────────────────────────────────────────────────────┘
```

### Что можно шарить

```
┌─────────────────────────────────────────────────────────┐
│                    SHARED MODULE (KMP)                   │
├─────────────────────────────────────────────────────────┤
│  Networking          │  HTTP клиент, API модели         │
│  Database            │  SQLDelight, Room                │
│  Business Logic      │  Use cases, валидация            │
│  State Management    │  Redux-like stores               │
│  Utilities           │  Дата/время, форматирование      │
│  Analytics           │  События, трекинг                │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                 PLATFORM-SPECIFIC                        │
├─────────────────────────────────────────────────────────┤
│  iOS: SwiftUI/UIKit  │  Android: Jetpack Compose        │
│  Push Notifications  │  Background Tasks                │
│  Platform APIs       │  Permissions, Sensors            │
└─────────────────────────────────────────────────────────┘
```

### Архитектурный паттерн

```
         ┌──────────────────────┐
         │     iOS App          │
         │  ┌────────────────┐  │
         │  │   SwiftUI UI   │  │
         │  └───────┬────────┘  │
         │          │           │
         │  ┌───────▼────────┐  │
         │  │  KMP Framework │──┼──────┐
         │  └────────────────┘  │      │
         └──────────────────────┘      │
                                       │  ┌──────────────────┐
                                       ├──│   Shared Logic   │
                                       │  │   (Kotlin)       │
         ┌──────────────────────┐      │  └──────────────────┘
         │    Android App       │      │
         │  ┌────────────────┐  │      │
         │  │ Compose UI     │  │      │
         │  └───────┬────────┘  │      │
         │          │           │      │
         │  ┌───────▼────────┐  │      │
         │  │  Shared Module │──┼──────┘
         │  └────────────────┘  │
         └──────────────────────┘
```

### Преимущества

1. **Гибкость** — сами решаете что шарить
2. **Нативный UI** — SwiftUI + Compose = лучший UX
3. **Постепенная миграция** — можно внедрять по модулям
4. **Один язык для логики** — Kotlin везде
5. **Interop с существующим кодом** — легко интегрировать

### Недостатки

1. **Кривая обучения** — iOS разработчикам нужен Kotlin
2. **Tooling** — IDE поддержка хуже чем у Native
3. **iOS сборка** — медленнее, сложнее отладка
4. **Экосистема** — меньше библиотек чем у Flutter

### Подробнее: [[00-kmp-overview]]

---

## 4. Когда выбирать Flutter / React Native

### Идеальные условия

```
┌─────────────────────────────────────────────────────────┐
│                  ВЫБИРАЙ FLUTTER/RN                      │
├─────────────────────────────────────────────────────────┤
│ ✓ Маленькая команда (1-3 человека)                      │
│ ✓ Нужен быстрый MVP/прототип                            │
│ ✓ UI доминирует над бизнес-логикой                      │
│ ✓ Одинаковый дизайн на обеих платформах — ОК            │
│ ✓ Web версия тоже нужна (Flutter Web)                   │
│ ✓ Команда с web-бэкграундом (для RN)                    │
└─────────────────────────────────────────────────────────┘
```

### Flutter vs React Native

| Аспект | Flutter | React Native |
|--------|---------|--------------|
| **Язык** | Dart | JavaScript/TypeScript |
| **UI** | Собственный рендеринг | Нативные компоненты |
| **Производительность** | Отличная | Хорошая |
| **Hot Reload** | Мгновенный | Быстрый |
| **Экосистема** | Растущая | Зрелая |
| **Для кого** | Мобильные разработчики | Web разработчики |

### Преимущества

1. **Скорость разработки** — одна кодовая база
2. **Hot Reload** — мгновенные изменения
3. **Единый UI** — 95% кода общего
4. **Большое сообщество** — много пакетов

### Недостатки

1. **Не нативный UX** — пользователи замечают
2. **Размер приложения** — больше чем Native
3. **Производительность** — оверхед на мосту
4. **Ограниченный доступ к API** — через плагины

### Красные флаги (не выбирай Flutter/RN если...)

```
✗ Нужны сложные нативные интеграции
✗ Приложение с интенсивной графикой/анимацией
✗ Долгосрочный enterprise проект
✗ Команда не готова зависеть от фреймворка
```

---

## 5. Состав команды: кто нужен

### Native (iOS + Android)

```
Минимум: 4 человека
┌───────────────────┬───────────────────┐
│      iOS Team     │   Android Team    │
├───────────────────┼───────────────────┤
│ 1 Senior iOS      │ 1 Senior Android  │
│ 1 Middle iOS      │ 1 Middle Android  │
└───────────────────┴───────────────────┘
Опционально: Tech Lead (может быть Senior)
```

### KMP

```
Минимум: 2-3 человека
┌─────────────────────────────────────────┐
│            KMP Team                      │
├─────────────────────────────────────────┤
│ 1 Senior Kotlin (shared module)         │
│ 1 iOS разработчик (Swift/SwiftUI)       │
│ 1 Android разработчик (Compose)         │
│ * может быть 1 человек на обе платформы │
└─────────────────────────────────────────┘
```

### Flutter/RN

```
Минимум: 1-2 человека
┌─────────────────────────────────────────┐
│         Flutter/RN Team                  │
├─────────────────────────────────────────┤
│ 1 Senior Flutter/RN                      │
│ 1 Middle Flutter/RN (опционально)        │
│ * Native консультант для интеграций      │
└─────────────────────────────────────────┘
```

### Таблица скиллов

| Технология | Основной язык | Дополнительные навыки |
|------------|---------------|----------------------|
| Native iOS | Swift | SwiftUI, UIKit, Combine |
| Native Android | Kotlin | Compose, Coroutines |
| KMP | Kotlin | Gradle, iOS tooling |
| Flutter | Dart | Platform Channels |
| React Native | TypeScript | Native Modules |

---

## 6. Сравнение производительности

### Benchmark: типичные операции

```
Операция              Native    KMP      Flutter   RN
─────────────────────────────────────────────────────
Холодный старт        100ms     100ms    200ms     300ms
Список (1000 items)   16ms      16ms     18ms      25ms
Анимация 60fps        ✅        ✅       ✅        ⚠️
Сложные вычисления    1x        1x       0.8x      0.3x
Размер APK            5MB       8MB      15MB      20MB
Размер IPA            10MB      15MB     25MB      30MB
```

### Когда производительность критична

```
┌─────────────────────────────────────────────────────────┐
│ КРИТИЧНАЯ ПРОИЗВОДИТЕЛЬНОСТЬ → Native или KMP           │
├─────────────────────────────────────────────────────────┤
│ • Игры и графика                                        │
│ • Видео/аудио обработка                                 │
│ • AR/VR приложения                                      │
│ • Финтех с real-time данными                            │
│ • Приложения для слабых устройств                       │
└─────────────────────────────────────────────────────────┘
```

### Memory Footprint

| Метрика | Native | KMP | Flutter | RN |
|---------|--------|-----|---------|-----|
| Базовое потребление RAM | 30MB | 35MB | 50MB | 70MB |
| При активной работе | 80MB | 90MB | 120MB | 150MB |
| Утечки памяти | Редко | Редко | Иногда | Часто |

---

## 7. Анализ стоимости поддержки

### TCO (Total Cost of Ownership) за 3 года

```
                    Year 1      Year 2      Year 3      Total
Native iOS+Android  $400K       $300K       $300K       $1M
KMP                 $300K       $200K       $200K       $700K
Flutter             $200K       $150K       $150K       $500K
```

*Цифры условные, зависят от региона и сложности*

### Распределение затрат

```
Native:
├── Разработка новых фич: 50%
├── Баг-фиксы: 20%
├── Обновления ОС: 15%
└── Рефакторинг: 15%

KMP:
├── Разработка новых фич: 60%
├── Баг-фиксы: 15%
├── Обновления ОС: 10%
└── Shared module поддержка: 15%

Flutter:
├── Разработка новых фич: 65%
├── Баг-фиксы: 15%
├── Обновления Flutter/плагинов: 15%
└── Native интеграции: 5%
```

### Скрытые затраты

| Категория | Native | KMP | Flutter |
|-----------|--------|-----|---------|
| Обучение команды | Низкие | Средние | Средние |
| Найм специалистов | Легко | Сложнее | Средне |
| Обновление зависимостей | Низкие | Средние | Высокие |
| Breaking changes ОС | 2x работы | 1.5x работы | 1x работы |

---

## 8. Стратегии миграции

### Native → KMP (постепенная)

```
Этап 1: Выделение логики (2-3 месяца)
┌─────────────────────────────────────────┐
│ 1. Создать KMP модуль                   │
│ 2. Перенести модели данных              │
│ 3. Перенести сетевой слой               │
│ 4. Интегрировать в Android              │
│ 5. Интегрировать в iOS                  │
└─────────────────────────────────────────┘

Этап 2: Расширение (3-6 месяцев)
┌─────────────────────────────────────────┐
│ 1. Перенести бизнес-логику              │
│ 2. Перенести локальное хранение         │
│ 3. Добавить общий state management      │
│ 4. Унифицировать аналитику              │
└─────────────────────────────────────────┘
```

### Flutter → Native (если нужно)

```
⚠️ Сложная миграция — лучше избежать

Если неизбежно:
1. Использовать Flutter как Add-to-App
2. Постепенно заменять экраны нативными
3. Общий navigation через Platform Channels
4. Полная миграция за 6-12 месяцев
```

### Native → Flutter (рискованно)

```
⚠️ Обычно не рекомендуется

Когда имеет смысл:
• Полный редизайн приложения
• Смена команды
• Критическая нехватка ресурсов
```

### Гибридный подход

```
┌─────────────────────────────────────────────────────────┐
│              ГИБРИДНАЯ АРХИТЕКТУРА                       │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   ┌─────────────┐      ┌─────────────┐                  │
│   │ Native Core │      │ Flutter     │                  │
│   │ (критичные  │◄────►│ Module      │                  │
│   │  экраны)    │      │ (простые    │                  │
│   └─────────────┘      │  экраны)    │                  │
│                        └─────────────┘                  │
│                                                          │
│   Примеры: Alibaba, Tencent                             │
└─────────────────────────────────────────────────────────┘
```

---

## 9. Шесть ошибок при выборе технологии

### Ошибка 1: "Flutter быстрее, значит дешевле"

```
❌ Неправильно: Выбрали Flutter для сложного банковского приложения

Результат:
• 6 месяцев на интеграцию с биометрией
• Постоянные проблемы с безопасностью
• В итоге переписали критичные модули на Native

✅ Правильно: Анализировать требования к интеграциям ДО выбора
```

### Ошибка 2: "Команда научится по ходу"

```
❌ Неправильно: Android команда взяла KMP без обучения iOS

Результат:
• iOS сборка постоянно ломалась
• Xcode ошибки никто не понимал
• Задержка релиза на 3 месяца

✅ Правильно: Заложить 1-2 месяца на обучение
```

### Ошибка 3: "Нам нужен только MVP"

```
❌ Неправильно: Выбрали Flutter для "быстрого MVP"

Результат:
• MVP стал продакшеном
• Технический долг накопился
• Миграция стоила дороже чем Native с начала

✅ Правильно: Планировать технологию на 2-3 года вперёд
```

### Ошибка 4: "Все так делают"

```
❌ Неправильно: Выбрали технологию потому что "Google/Facebook используют"

Результат:
• Контекст компании другой
• Масштаб проблем другой
• Решение не подошло

✅ Правильно: Анализировать свой контекст, не копировать
```

### Ошибка 5: "Переиспользуем код с веба"

```
❌ Неправильно: Выбрали React Native чтобы "шарить код с React вебом"

Результат:
• Код почти не переиспользуется
• Разные парадигмы навигации
• Разные компоненты

✅ Правильно: Шарить только бизнес-логику, не UI
```

### Ошибка 6: "Производительность не важна"

```
❌ Неправильно: "Наше приложение простое, Flutter справится"

Результат:
• Пользователи жалуются на лаги
• Анимации дёргаются
• Рейтинг в сторе упал

✅ Правильно: Тестировать на слабых устройствах с начала
```

---

## 10. Три ментальные модели

### Модель 1: "Build vs Buy" для кода

```
┌─────────────────────────────────────────────────────────┐
│                     BUILD VS BUY                         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   NATIVE = Build                                         │
│   • Максимальный контроль                               │
│   • Максимальные затраты                                │
│   • Минимальные зависимости                             │
│                                                          │
│   KMP = Hybrid                                           │
│   • Контроль где нужно                                  │
│   • Оптимальные затраты                                 │
│   • Выбор зависимостей                                  │
│                                                          │
│   FLUTTER = Buy                                          │
│   • Контроль ограничен                                  │
│   • Минимальные затраты (сначала)                       │
│   • Зависимость от фреймворка                           │
│                                                          │
└─────────────────────────────────────────────────────────┘

Вопрос: Что для вас core competency?
• UI/UX → Native
• Бизнес-логика → KMP
• Time-to-market → Flutter
```

### Модель 2: "Инверсия контроля"

```
Вопрос: Кто контролирует архитектуру?

Native:    ВЫ ──────────────────► Платформа
           Полный контроль

KMP:       ВЫ ────────┬─────────► Платформа
                      │
                      └─► Shared Module
           Частичный контроль

Flutter:   Framework ───────────► ВЫ ──► Платформа
           Фреймворк диктует

┌─────────────────────────────────────────────────────────┐
│ Чем меньше контроля — тем быстрее разработка            │
│ Чем больше контроля — тем выше качество (потенциально)  │
└─────────────────────────────────────────────────────────┘
```

### Модель 3: "Технологический долг как кредит"

```
┌─────────────────────────────────────────────────────────┐
│               КРЕДИТНАЯ АНАЛОГИЯ                         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│ FLUTTER = Кредит с высокой ставкой                      │
│ • Быстро получаешь результат                            │
│ • Платишь потом (обновления, ограничения)               │
│ • Проценты растут со временем                           │
│                                                          │
│ KMP = Ипотека                                            │
│ • Первоначальный взнос (обучение)                       │
│ • Стабильные платежи                                    │
│ • В итоге владеешь активом                              │
│                                                          │
│ NATIVE = Покупка за кэш                                  │
│ • Большие затраты сразу                                 │
│ • Нет долга                                             │
│ • Полное владение                                       │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

## 11. Quiz: проверь понимание

### Вопрос 1

```
Ситуация:
• Стартап, команда 2 человека
• Оба — веб-разработчики с React опытом
• Нужен MVP за 2 месяца
• Приложение — простой e-commerce

Какую технологию выбрать?

A) Native iOS + Android
B) KMP
C) React Native
D) Flutter

────────────────────────────────────────
Ответ: C) React Native

Почему:
• Маленькая команда → кросс-платформа
• React опыт → React Native (не Flutter)
• MVP быстро → кросс-платформа
• Простой e-commerce → не нужен нативный UX
```

### Вопрос 2

```
Ситуация:
• Enterprise банк
• Команда 10+ человек
• Интеграция с биометрией, HealthKit, Face ID
• Приложение должно работать 10+ лет
• Безопасность критична

Какую технологию выбрать?

A) Native iOS + Android
B) KMP
C) React Native
D) Flutter

────────────────────────────────────────
Ответ: A) Native iOS + Android

Почему:
• Большая команда → можно Native
• Интеграции с ОС → Native лучше
• Долгосрочный проект → Native стабильнее
• Безопасность → Native даёт контроль
```

### Вопрос 3

```
Ситуация:
• Существующие Native приложения (3 года разработки)
• Много дублирующейся бизнес-логики
• Хочется ускорить разработку новых фич
• Не хочется менять UI (пользователи привыкли)
• Backend на Kotlin

Какую технологию выбрать?

A) Оставить Native
B) KMP для shared logic
C) Переписать на Flutter
D) React Native модули

────────────────────────────────────────
Ответ: B) KMP для shared logic

Почему:
• Существующие приложения → не переписывать
• Дублирующаяся логика → шарить через KMP
• Сохранить UI → KMP не трогает UI
• Kotlin backend → можно шарить модели
```

---

## 12. Связанные материалы

- [[00-kmp-overview]] — Детальный обзор Kotlin Multiplatform
- Официальная документация KMP: kotlinlang.org/docs/multiplatform.html
- Flutter vs Native сравнение: flutter.dev
- React Native: reactnative.dev

---

## Decision Tree: финальная схема

```
                         ┌──────────────────┐
                         │ Какой бюджет?    │
                         └────────┬─────────┘
                                  │
              ┌───────────────────┼───────────────────┐
              │                   │                   │
         Высокий             Средний              Низкий
              │                   │                   │
              ▼                   ▼                   ▼
    ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
    │ Нужен лучший UX?│ │ Сложная логика? │ │ Есть время на   │
    └────────┬────────┘ └────────┬────────┘ │ обучение Dart?  │
             │                   │          └────────┬────────┘
        ┌────┴────┐         ┌────┴────┐         ┌────┴────┐
        │         │         │         │         │         │
       Да        Нет       Да        Нет       Да        Нет
        │         │         │         │         │         │
        ▼         ▼         ▼         ▼         ▼         ▼
    ┌──────┐ ┌──────┐  ┌──────┐ ┌──────┐  ┌──────┐ ┌──────┐
    │NATIVE│ │ KMP  │  │ KMP  │ │NATIVE│  │FLUTTER│ │  RN  │
    └──────┘ └──────┘  └──────┘ └──────┘  └──────┘ └──────┘
```

---

*Последнее обновление: 2026-01-11*
