---
title: "Real-time –ø—Ä–æ—Ç–æ–∫–æ–ª—ã: WebSocket, SSE, WebRTC, gRPC"
created: 2025-12-18
modified: 2025-12-18
type: concept
status: published
confidence: high
sources_verified: true
tags:
  - topic/networking
  - networking/protocols
  - networking/realtime
  - type/concept
  - level/intermediate
related:
  - "[[network-http-evolution]]"
  - "[[network-transport-layer]]"
  - "[[android-networking]]"
---

# Real-time –ø—Ä–æ—Ç–æ–∫–æ–ª—ã: WebSocket, SSE, WebRTC, gRPC

---

## Prerequisites

| –¢–µ–º–∞ | –ó–∞—á–µ–º –Ω—É–∂–Ω–æ | –ì–¥–µ –∏–∑—É—á–∏—Ç—å |
|------|-------------|-------------|
| **HTTP** | WebSocket –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–∞–∫ HTTP upgrade | [[network-http-evolution]] |
| **TCP/UDP** | –ü–æ–Ω–∏–º–∞–Ω–∏–µ transport layer | [[network-transport-layer]] |
| **JavaScript async** | –î–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ | JS async/await |

### –î–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª

| –£—Ä–æ–≤–µ–Ω—å | –ü–æ–¥—Ö–æ–¥–∏—Ç? | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|--------------|
| **–ù–æ–≤–∏—á–æ–∫** | ‚ö†Ô∏è –° –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π | –°–Ω–∞—á–∞–ª–∞ HTTP |
| **Intermediate** | ‚úÖ –î–∞ | –û—Å–Ω–æ–≤–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è |
| **Advanced** | ‚úÖ –î–∞ | WebRTC P2P |

### –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

> üí° **Real-time** = –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å—Ä–∞–∑—É, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏. –ö–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä, –∞ –Ω–µ SMS.

| –¢–µ—Ä–º–∏–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ | –ê–Ω–∞–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–∞ |
|--------|----------|---------------------|
| **WebSocket** | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ | **–¢–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä** ‚Äî –æ–±–∞ –≥–æ–≤–æ—Ä—è—Ç –∫–æ–≥–¥–∞ —Ö–æ—Ç—è—Ç |
| **SSE** | Server-Sent Events ‚Äî –ø–æ—Ç–æ–∫ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ | **–†–∞–¥–∏–æ** ‚Äî —Ç—ã —Ç–æ–ª—å–∫–æ —Å–ª—É—à–∞–µ—à—å |
| **WebRTC** | P2P –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ | **–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫ –Ω–∞–ø—Ä—è–º—É—é** ‚Äî –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ |
| **gRPC** | –ë—ã—Å—Ç—Ä—ã–π RPC –æ—Ç Google | **–≠–∫—Å–ø—Ä–µ—Å—Å-–ø–æ—á—Ç–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º** |
| **Polling** | –ö–ª–∏–µ–Ω—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç "–µ—Å—Ç—å –Ω–æ–≤–æ–µ?" | **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É** |
| **Long Polling** | –°–µ—Ä–≤–µ—Ä –¥–µ—Ä–∂–∏—Ç –∑–∞–ø—Ä–æ—Å –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö | **–ñ–¥–∞—Ç—å —É –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞ –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–¥—ë—Ç** |
| **Backpressure** | –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ | **"–ü–æ–¥–æ–∂–¥–∏, –Ω–µ —É—Å–ø–µ–≤–∞—é –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å"** |
| **STUN/TURN** | NAT traversal –¥–ª—è WebRTC | **–ü–æ—Å—Ä–µ–¥–Ω–∏–∫ –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞ NAT** |
| **Full Duplex** | –û–±–∞ –≥–æ–≤–æ—Ä—è—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ | **–¢–µ–ª–µ—Ñ–æ–Ω** (vs —Ä–∞—Ü–∏—è ‚Äî half duplex) |
| **Heartbeat** | –ü—Ä–æ–≤–µ—Ä–∫–∞ "–∂–∏–≤–æ" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ | **"–¢—ã –µ—â—ë —Ç–∞–º?"** –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥ |

---

## –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è

| –¢–µ—Ä–º–∏–Ω | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|--------|----------|------------|
| **WebSocket** | –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–ª–Ω–æ–¥—É–ø–ª–µ–∫—Å–Ω–æ–π —Å–≤—è–∑–∏ –ø–æ–≤–µ—Ä—Ö TCP —Å upgrade –æ—Ç HTTP | RFC 6455, –ø–æ—Ä—Ç—ã 80/443 |
| **SSE** | Server-Sent Events - –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π push –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É | –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP |
| **WebRTC** | Web Real-Time Communication - P2P –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç UDP, DTLS, SRTP |
| **gRPC** | Google RPC —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å Protocol Buffers –∏ HTTP/2 | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 4 —Ç–∏–ø–∞ streaming |
| **Socket.IO** | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–≤–µ—Ä—Ö WebSocket —Å fallback –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏ | Event-based API, auto-reconnect |
| **ICE** | Interactive Connectivity Establishment - NAT traversal | –ö–æ–º–±–∏–Ω–∞—Ü–∏—è STUN –∏ TURN |
| **STUN** | Session Traversal Utilities for NAT - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è WebRTC |
| **TURN** | Traversal Using Relays around NAT - relay —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä | Fallback –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ NAT |
| **Backpressure** | –ú–µ—Ö–∞–Ω–∏–∑–º –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Streams API |
| **EventSource** | Browser API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SSE | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect |
| **RTCPeerConnection** | WebRTC API –¥–ª—è P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ –ø–æ—Ç–æ–∫–∞–º–∏ |
| **RTCDataChannel** | WebRTC –∫–∞–Ω–∞–ª –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | Low-latency, binary support |

---

## –ß–∞—Å—Ç—å 1: –ò–Ω—Ç—É–∏—Ü–∏—è –±–µ–∑ –∫–æ–¥–∞

> –ü—Ä–µ–∂–¥–µ —á–µ–º –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –∫–æ–¥, –ø–æ—Å—Ç—Ä–æ–∏–º –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

### –ê–Ω–∞–ª–æ–≥–∏—è 1: WebSocket –∫–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫

**HTTP ‚Äî —ç—Ç–æ –æ–±–º–µ–Ω –ø–∏—Å—å–º–∞–º–∏:**
```
–í—ã: [–ø–∏—à–µ—Ç –ø–∏—Å—å–º–æ] "–ï—Å—Ç—å –Ω–æ–≤–æ—Å—Ç–∏?"     ‚Üí –ü–æ—á—Ç–∞ ‚Üí –°–µ—Ä–≤–µ—Ä
–°–µ—Ä–≤–µ—Ä: [–ø–∏—à–µ—Ç –æ—Ç–≤–µ—Ç] "–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π"   ‚Üê –ü–æ—á—Ç–∞ ‚Üê –°–µ—Ä–≤–µ—Ä
... —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ ...
–í—ã: [–ø–∏—à–µ—Ç –ø–∏—Å—å–º–æ] "–ê —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å?"    ‚Üí –ü–æ—á—Ç–∞ ‚Üí –°–µ—Ä–≤–µ—Ä
```

**WebSocket ‚Äî —ç—Ç–æ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í—ã          [–ó–í–û–ù–û–ö –£–°–¢–ê–ù–û–í–õ–ï–ù]          –°–µ—Ä–≤–µ—Ä   ‚îÇ
‚îÇ   ‚îÇ              (–æ–¥–∏–Ω —Ä–∞–∑)                  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§      ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ      ‚îÇ
‚îÇ   ‚îÇ         –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ–±–º–µ–Ω                 ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§      ‚îÇ
‚îÇ   ‚îÇ         –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã                    ‚îÇ      ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ      ‚îÇ
‚îÇ   ‚îÇ         –ø–æ–∫–∞ —Ç—Ä—É–±–∫–∞ –ø–æ–¥–Ω—è—Ç–∞              ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:**
- HTTP: –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å —Ç—Ä–µ–±—É–µ—Ç –Ω–æ–≤–æ–≥–æ "–∫–æ–Ω–≤–µ—Ä—Ç–∞" —Å –∞–¥—Ä–µ—Å–æ–º –∏ –º–∞—Ä–∫–∞–º–∏
- WebSocket: –ª–∏–Ω–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ

---

### –ê–Ω–∞–ª–æ–≥–∏—è 2: SSE –∫–∞–∫ —Ä–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫

**Server-Sent Events ‚Äî —ç—Ç–æ —Ä–∞–¥–∏–æ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è:**
```
          üì° –†–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏—è (–°–µ—Ä–≤–µ—Ä)
              ‚îÇ
              ‚îÇ –û–¥–∏–Ω –ø–æ—Ç–æ–∫ –≤–µ—â–∞–Ω–∏—è
              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  üìª  üìª  üìª  üìª  üìª    ‚îÇ
    ‚îÇ  –°–ª—É—à–∞—Ç–µ–ª–∏ (–∫–ª–∏–µ–Ω—Ç—ã)    ‚îÇ
    ‚îÇ                         ‚îÇ
    ‚îÇ  ‚Ä¢ –¢–æ–ª—å–∫–æ –ø—Ä–∏–Ω–∏–º–∞—é—Ç     ‚îÇ
    ‚îÇ  ‚Ä¢ –ù–µ –º–æ–≥—É—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å    ‚îÇ
    ‚îÇ  ‚Ä¢ –ê–≤—Ç–æ-reconnect       ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π (Twitter-like feed)
- –ö–æ—Ç–∏—Ä–æ–≤–∫–∏ –∞–∫—Ü–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
- –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥ WebSocket:**
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π HTTP (–Ω–µ –Ω—É–∂–µ–Ω upgrade)
- –ü—Ä–æ—â–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ proxy
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect –≤—Å—Ç—Ä–æ–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä

---

### –ê–Ω–∞–ª–æ–≥–∏—è 3: WebRTC –∫–∞–∫ –ø—Ä—è–º–æ–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫

**WebSocket/HTTP ‚Äî –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ –ê–¢–° (—Å–µ—Ä–≤–µ—Ä):**
```
    –ê–ª–∏—Å–∞                 –°–µ—Ä–≤–µ—Ä                 –ë–æ–±
      ‚îÇ                     ‚îÇ                     ‚îÇ
      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¥–∞–Ω–Ω—ã–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¥–∞–Ω–Ω—ã–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ
      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¥–∞–Ω–Ω—ã–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –¥–∞–Ω–Ω—ã–µ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
      ‚îÇ                     ‚îÇ                     ‚îÇ
         –í—Å—ë –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä
         (+ –∑–∞–¥–µ—Ä–∂–∫–∞, + –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä)
```

**WebRTC ‚Äî –ø—Ä—è–º–æ–π –∑–≤–æ–Ω–æ–∫ peer-to-peer:**
```
    –ê–ª–∏—Å–∞ ‚óÑ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ñ∫ –ë–æ–±
                   ‚îÇ
                   ‚îÇ –ü—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ!
                   ‚îÇ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
                   ‚îÇ –°–µ—Ä–≤–µ—Ä –Ω–µ –Ω—É–∂–µ–Ω*
                   ‚îÇ
    * –∫—Ä–æ–º–µ —Å–∏–≥–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è "–∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞"
```

**–¢—Ä–∏ —Ä–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ WebRTC:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Signaling Server ‚Äî "–°–≤–∞—Ö–∞"                      ‚îÇ
‚îÇ     –ü–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –ø–µ—Ä–µ–¥–∞—Ç—å SDP offer   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  2. STUN Server ‚Äî "–ó–µ—Ä–∫–∞–ª–æ"                         ‚îÇ
‚îÇ     "–¢–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π IP: 73.45.123.89:49152"         ‚îÇ
‚îÇ     –ù—É–∂–µ–Ω —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å–µ–±—è –∑–∞ NAT                  ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  3. TURN Server ‚Äî "–ü–æ—á—Ç–∞–ª—å–æ–Ω-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫"             ‚îÇ
‚îÇ     –ö–æ–≥–¥–∞ P2P –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω (strict NAT/firewall)      ‚îÇ
‚îÇ     ~30% –∑–≤–æ–Ω–∫–æ–≤ —Ç—Ä–µ–±—É—é—Ç TURN                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ê–Ω–∞–ª–æ–≥–∏—è 4: gRPC –∫–∞–∫ —ç–∫—Å–ø—Ä–µ—Å—Å-–ø–æ—á—Ç–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º

**REST API ‚Äî –æ–±—ã—á–Ω–∞—è –ø–æ—á—Ç–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–∏—à–µ—Ç –Ω–∞ –±—É–º–∞–≥–µ (JSON)     ‚îÇ
‚îÇ  –£–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –≤ –∫–æ–Ω–≤–µ—Ä—Ç (HTTP)           ‚îÇ
‚îÇ  –ü–æ–ª—É—á–∞—Ç–µ–ª—å —á–∏—Ç–∞–µ—Ç –∏ –ø–æ–Ω–∏–º–∞–µ—Ç           ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  + –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ                      ‚îÇ
‚îÇ  + –ü—Ä–æ—Å—Ç–æ–π debugging                    ‚îÇ
‚îÇ  - –ú–Ω–æ–≥–æ "–±—É–º–∞–≥–∏" (overhead)            ‚îÇ
‚îÇ  - –ú–µ–¥–ª–µ–Ω–Ω–∞—è "—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞" (parsing)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**gRPC ‚Äî —ç–∫—Å–ø—Ä–µ—Å—Å-–∫—É—Ä—å–µ—Ä —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∑–∞—Ä–∞–Ω–µ–µ (.proto —Ñ–∞–π–ª):        ‚îÇ
‚îÇ  "–ü–æ—Å—ã–ª–∫–∞ –≤–µ—Å–∏—Ç X –∫–≥, —Ä–∞–∑–º–µ—Ä Y"         ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  –î–∞–Ω–Ω—ã–µ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º –≤–∏–¥–µ (Protobuf)      ‚îÇ
‚îÇ  HTTP/2 –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ             ‚îÇ
‚îÇ  –¢–∏–ø–∏–∑–∞—Ü–∏—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  + –í 7-10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ REST              ‚îÇ
‚îÇ  + Streaming –∏–∑ –∫–æ—Ä–æ–±–∫–∏                 ‚îÇ
‚îÇ  - –ù–µ—á–∏—Ç–∞–µ–º–æ –±–µ–∑ .proto                 ‚îÇ
‚îÇ  - –°–ª–æ–∂–Ω–µ–µ debugging                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ß–µ—Ç—ã—Ä–µ —Ä–µ–∂–∏–º–∞ gRPC:**
```
1. Unary:           –ö–ª–∏–µ–Ω—Ç ‚îÄ‚îÄ‚ñ∫ –°–µ—Ä–≤–µ—Ä ‚îÄ‚îÄ‚ñ∫ –û—Ç–≤–µ—Ç
                    (–∫–∞–∫ –æ–±—ã—á–Ω—ã–π REST)

2. Server Stream:   –ö–ª–∏–µ–Ω—Ç ‚îÄ‚îÄ‚ñ∫ –°–µ—Ä–≤–µ—Ä ‚ïê‚ïê‚ïê‚ñ∫ –ü–æ—Ç–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤
                    (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞)

3. Client Stream:   –ö–ª–∏–µ–Ω—Ç ‚ïê‚ïê‚ïê‚ñ∫ –°–µ—Ä–≤–µ—Ä ‚îÄ‚îÄ‚ñ∫ –û–¥–∏–Ω –æ—Ç–≤–µ—Ç
                    (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –ø–æ —á–∞—Å—Ç—è–º)

4. Bidirectional:   –ö–ª–∏–µ–Ω—Ç ‚óÑ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ñ∫ –°–µ—Ä–≤–µ—Ä
                    (—á–∞—Ç, –∏–≥—Ä—ã)
```

---

### –ê–Ω–∞–ª–æ–≥–∏—è 5: NAT Traversal –∫–∞–∫ –ø–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–∞ –∑–∞ –∑–∞–±–æ—Ä–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞: –≤–∞—à –¥–æ–º –∑–∞ –∑–∞–±–æ—Ä–æ–º (NAT)**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ò–ù–¢–ï–†–ù–ï–¢                         ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ                  –í–∞—à —Ä–æ—É—Ç–µ—Ä                         ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ              ‚îÇ NAT –ó–ê–ë–û–†   ‚îÇ                        ‚îÇ
‚îÇ              ‚îÇ             ‚îÇ                        ‚îÇ
‚îÇ     –ü—É–±–ª–∏—á–Ω—ã–π IP: 73.45.123.89                      ‚îÇ
‚îÇ              ‚îÇ             ‚îÇ                        ‚îÇ
‚îÇ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÇ
‚îÇ                    ‚îÇ                                ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ    ‚îÇ               ‚îÇ               ‚îÇ                ‚îÇ
‚îÇ  –í–∞—à –ü–ö      –í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω     IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ         ‚îÇ
‚îÇ 192.168.1.5  192.168.1.6    192.168.1.7             ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ    "–í—Å–µ 47 —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–º–µ—é—Ç –æ–¥–∏–Ω –ø—É–±–ª–∏—á–Ω—ã–π IP"       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**STUN ‚Äî —É–∑–Ω–∞—Ç—å —Å–≤–æ–π "–≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å":**
```
–í—ã: "–ö–∞–∫ —è –≤—ã–≥–ª—è–∂—É —Å–Ω–∞—Ä—É–∂–∏?"

STUN —Å–µ—Ä–≤–µ—Ä (–ø—É–±–ª–∏—á–Ω—ã–π):
   ‚îÇ
   ‚ñº
"–¢–≤–æ–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—à—ë–ª —Å 73.45.123.89:49152"
   ‚îÇ
   ‚ñº
–¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π IP:port
–∏ –º–æ–∂–µ—Ç–µ —Å–æ–æ–±—â–∏—Ç—å –µ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É
```

**TURN ‚Äî –∫–æ–≥–¥–∞ P2P –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω:**
```
–°–∏—Ç—É–∞—Ü–∏—è: –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π NAT –∏–ª–∏ —Å—Ç—Ä–æ–≥–∏–π firewall
          –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–†–µ—à–µ–Ω–∏–µ: TURN —Å–µ—Ä–≤–µ—Ä –∫–∞–∫ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫

    –ê–ª–∏—Å–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ TURN ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ë–æ–±
                  ‚îÇ
                  ‚îÇ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ relay
                  ‚îÇ –†–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞, –Ω–æ:
                  ‚îÇ - –ë–æ–ª—å—à–µ latency
                  ‚îÇ - –î–æ—Ä–æ–∂–µ (bandwidth)
```

---

## –ß–∞—Å—Ç—å 2: –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–∂–Ω–æ

> 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å real-time –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏

### –û—à–∏–±–∫–∞ 1: WebSocket –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–°–ò–ú–ü–¢–û–ú:**
```
// –î–ª—è –ø—Ä–æ—Å—Ç–æ–π –ª–µ–Ω—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–æ–∑–¥–∞—ë–º WebSocket
const ws = new WebSocket('/notifications');
ws.onmessage = (e) => showNotification(e.data);

// –ü—Ä–æ–±–ª–µ–º—ã:
// - –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ reconnect
// - –ù—É–∂–µ–Ω heartbeat
// - –ü—Ä–æ–±–ª–µ–º—ã —Å proxy/load balancers
```

**–†–ï–®–ï–ù–ò–ï:**
```javascript
// SSE –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ –¥–ª—è –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const events = new EventSource('/notifications');

events.onmessage = (e) => showNotification(e.data);
events.onerror = () => console.log('–ê–≤—Ç–æ-reconnect...');

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
// + –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect (–≤—Å—Ç—Ä–æ–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä)
// + –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTP ‚Äî –¥—Ä—É–∂–∏—Ç —Å proxy
// + Last-Event-ID –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö
```

**–ü—Ä–∞–≤–∏–ª–æ –≤—ã–±–æ—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ù—É–∂–Ω–∞ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–≤—è–∑—å?                          ‚îÇ
‚îÇ     ‚îÇ                                               ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ –î–ê ‚Üí WebSocket                              ‚îÇ
‚îÇ     ‚îÇ        (—á–∞—Ç, –∏–≥—Ä—ã, collaborative editing)     ‚îÇ
‚îÇ     ‚îÇ                                               ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ –ù–ï–¢ ‚Üí SSE                                   ‚îÇ
‚îÇ              (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ª–µ–Ω—Ç—ã, –∫–æ—Ç–∏—Ä–æ–≤–∫–∏)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –û—à–∏–±–∫–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ reconnect

**–°–ò–ú–ü–¢–û–ú:**
```javascript
// –ù–∞–∏–≤–Ω—ã–π reconnect
ws.onclose = () => {
    new WebSocket(url);  // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
};

// –ü—Ä–æ–±–ª–µ–º—ã:
// 1. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–µ—Ç–∏ ‚Äî –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
// 2. –¢—ã—Å—è—á–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ reconnect –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Üí DDoS —Å–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
// 3. –ü–æ—Ç–µ—Ä—è —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É disconnect –∏ reconnect
```

**–†–ï–®–ï–ù–ò–ï:**
```javascript
class ReconnectingWebSocket {
    constructor(url) {
        this.url = url;
        this.reconnectDelay = 1000;
        this.maxDelay = 30000;
        this.lastMessageId = null;
        this.connect();
    }

    connect() {
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        const urlWithResume = this.lastMessageId
            ? `${this.url}?lastId=${this.lastMessageId}`
            : this.url;

        this.ws = new WebSocket(urlWithResume);

        this.ws.onmessage = (e) => {
            const msg = JSON.parse(e.data);
            this.lastMessageId = msg.id;
            this.reconnectDelay = 1000;  // Reset on success
            this.onmessage?.(msg);
        };

        this.ws.onclose = () => {
            // Exponential backoff —Å jitter
            const jitter = Math.random() * 1000;
            const delay = Math.min(this.reconnectDelay + jitter, this.maxDelay);

            console.log(`Reconnecting in ${delay}ms...`);
            setTimeout(() => this.connect(), delay);

            this.reconnectDelay *= 2;  // Exponential backoff
        };
    }
}
```

---

### –û—à–∏–±–∫–∞ 3: –ó–∞–±—ã—Ç—å –ø—Ä–æ heartbeat

**–°–ò–ú–ü–¢–û–ú:**
```
–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ "–∂–∏–≤–æ–µ" –ø–æ –º–Ω–µ–Ω–∏—é –∫–ª–∏–µ–Ω—Ç–∞,
–Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ TCP connection –¥–∞–≤–Ω–æ —É–º–µ—Ä.

–ü—Ä–∏—á–∏–Ω—ã:
- NAT timeout (–æ–±—ã—á–Ω–æ 30-120 —Å–µ–∫—É–Ω–¥ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
- –ú–æ–±–∏–ª—å–Ω–∞—è —Å–µ—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–∞—Å—å
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π proxy –∑–∞–∫—Ä—ã–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

**–†–ï–®–ï–ù–ò–ï:**
```javascript
class HeartbeatWebSocket {
    constructor(url) {
        this.pingInterval = 25000;  // < NAT timeout (–æ–±—ã—á–Ω–æ 30s)
        this.pongTimeout = 5000;
        this.connect(url);
    }

    connect(url) {
        this.ws = new WebSocket(url);

        this.ws.onopen = () => {
            this.startHeartbeat();
        };

        this.ws.onmessage = (e) => {
            if (e.data === 'pong') {
                this.pongReceived = true;
                return;
            }
            // ... handle other messages
        };
    }

    startHeartbeat() {
        this.heartbeatTimer = setInterval(() => {
            this.pongReceived = false;
            this.ws.send('ping');

            // –ï—Å–ª–∏ pong –Ω–µ –ø—Ä–∏—à—ë–ª –∑–∞ 5 —Å–µ–∫—É–Ω–¥ ‚Äî connection dead
            setTimeout(() => {
                if (!this.pongReceived) {
                    console.log('Connection dead, reconnecting...');
                    this.ws.close();
                }
            }, this.pongTimeout);
        }, this.pingInterval);
    }
}
```

---

### –û—à–∏–±–∫–∞ 4: WebRTC –±–µ–∑ TURN fallback

**–°–ò–ú–ü–¢–û–ú:**
```
"WebRTC —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ–∏—Å–µ, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —É –∫–ª–∏–µ–Ω—Ç–æ–≤"

–ü—Ä–∏—á–∏–Ω–∞: ~30% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ symmetric NAT –∏–ª–∏
         —Å—Ç—Ä–æ–≥–∏–º–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ firewalls
```

**–†–ï–®–ï–ù–ò–ï:**
```javascript
// –í–°–ï–ì–î–ê –≤–∫–ª—é—á–∞–π—Ç–µ TURN —Å–µ—Ä–≤–µ—Ä –∫–∞–∫ fallback
const config = {
    iceServers: [
        // STUN ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö NAT
        { urls: 'stun:stun.l.google.com:19302' },

        // TURN ‚Äî –ø–ª–∞—Ç–Ω—ã–π, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –í–°–ï–ì–î–ê
        {
            urls: 'turn:your-turn-server.com:3478',
            username: 'user',
            credential: 'pass'
        },

        // TURNS ‚Äî TURN over TLS (—á–µ—Ä–µ–∑ 443 –ø–æ—Ä—Ç)
        // –ü—Ä–æ—Ö–æ–¥–∏—Ç –¥–∞–∂–µ —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–≥–∏–µ firewalls
        {
            urls: 'turns:your-turn-server.com:443',
            username: 'user',
            credential: 'pass'
        }
    ]
};

const pc = new RTCPeerConnection(config);

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–∏–ø–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
pc.oniceconnectionstatechange = () => {
    console.log('ICE state:', pc.iceConnectionState);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ relay (TURN)
    pc.getStats().then(stats => {
        stats.forEach(report => {
            if (report.type === 'candidate-pair' && report.state === 'succeeded') {
                console.log('Connection type:', report.remoteCandidateType);
                // 'host' = direct, 'srflx' = STUN, 'relay' = TURN
            }
        });
    });
};
```

---

### –û—à–∏–±–∫–∞ 5: gRPC streaming –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–°–ò–ú–ü–¢–û–ú:**
```protobuf
// –û–≤–µ—Ä–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥: streaming –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
service UserService {
    rpc GetUser(stream GetUserRequest) returns (stream User);
}

// –ö–ª–∏–µ–Ω—Ç:
stream = client.GetUser()
stream.write(GetUserRequest(id=123))
response = stream.read()
stream.close()

// 4 —à–∞–≥–∞ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ!
```

**–†–ï–®–ï–ù–ò–ï:**
```protobuf
// Unary RPC –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
service UserService {
    // –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç
    rpc GetUser(GetUserRequest) returns (User);

    // Streaming —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ù–£–ñ–ù–û:
    // - –ë–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ (—Ñ–∞–π–ª—ã, –ª–æ–≥–∏)
    // - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø–æ—Ç–æ–∫ (–º–µ—Ç—Ä–∏–∫–∏, —Å–æ–±—ã—Ç–∏—è)
    // - Bidirectional (—á–∞—Ç)
    rpc StreamMetrics(MetricsRequest) returns (stream Metric);
    rpc Chat(stream ChatMessage) returns (stream ChatMessage);
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å streaming:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Unary (request-response):                          ‚îÇ
‚îÇ    ‚Ä¢ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏                                  ‚îÇ
‚îÇ    ‚Ä¢ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è                                 ‚îÇ
‚îÇ    ‚Ä¢ –õ—é–±–æ–π "–≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç"                          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  Server streaming:                                  ‚îÇ
‚îÇ    ‚Ä¢ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤                      ‚îÇ
‚îÇ    ‚Ä¢ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±–µ–∑ offset                          ‚îÇ
‚îÇ    ‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è                           ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  Client streaming:                                  ‚îÇ
‚îÇ    ‚Ä¢ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ —á–∞—Å—Ç—è–º                      ‚îÇ
‚îÇ    ‚Ä¢ Batch –æ–ø–µ—Ä–∞—Ü–∏–∏                                ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  Bidirectional:                                     ‚îÇ
‚îÇ    ‚Ä¢ –ß–∞—Ç                                            ‚îÇ
‚îÇ    ‚Ä¢ –ò–≥—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏                        ‚îÇ
‚îÇ    ‚Ä¢ Collaborative editing                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –û—à–∏–±–∫–∞ 6: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ backpressure

**–°–ò–ú–ü–¢–û–ú:**
```
–°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∫–ª–∏–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.
–†–µ–∑—É–ª—å—Ç–∞—Ç: OOM, –∑–∞–≤–∏—Å–∞–Ω–∏—è, –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä: —Å—Ç—Ä–∏–º–∏–Ω–≥ 1000 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
```

**–†–ï–®–ï–ù–ò–ï:**
```javascript
// Node.js —Å —è–≤–Ω—ã–º backpressure
class BackpressureWebSocket {
    constructor(ws) {
        this.ws = ws;
        this.queue = [];
        this.sending = false;
    }

    send(data) {
        this.queue.push(data);
        this.drain();
    }

    drain() {
        if (this.sending) return;

        while (this.queue.length > 0) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º bufferedAmount
            if (this.ws.bufferedAmount > 1024 * 1024) {
                // –ë—É—Ñ–µ—Ä –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω ‚Äî –∂–¥—ë–º
                this.sending = true;
                setTimeout(() => {
                    this.sending = false;
                    this.drain();
                }, 100);
                return;
            }

            this.ws.send(this.queue.shift());
        }
    }
}

// gRPC —Å flow control
async function* generateData() {
    for (const item of largeDataset) {
        yield item;
        // gRPC –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç backpressure
        // —á–µ—Ä–µ–∑ HTTP/2 flow control
    }
}
```

---

## –ß–∞—Å—Ç—å 3: –ú–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

### –ú–æ–¥–µ–ª—å 1: –°–ø–µ–∫—Ç—Ä Latency

```
                    LATENCY / COMPLEXITY
    ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
    LOW                                            HIGH

    Polling ‚îÄ‚ñ∫ Long-Polling ‚îÄ‚ñ∫ SSE ‚îÄ‚ñ∫ WebSocket ‚îÄ‚ñ∫ WebRTC

    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Polling  ‚îÇ 1-30 —Å–µ–∫    ‚îÇ –ü—É—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã,       ‚îÇ
    ‚îÇ          ‚îÇ –∑–∞–¥–µ—Ä–∂–∫–∞    ‚îÇ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä    ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ Long-    ‚îÇ 0-30 —Å–µ–∫    ‚îÇ –î–µ—Ä–∂–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ,    ‚îÇ
    ‚îÇ Polling  ‚îÇ             ‚îÇ —Å–ª–æ–∂–Ω—ã–π –¥–ª—è –±–∞–ª–∞–Ω—Å–µ—Ä–∞ ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ SSE      ‚îÇ ~0 –º—Å       ‚îÇ –¢–æ–ª—å–∫–æ server‚Üíclient  ‚îÇ
    ‚îÇ          ‚îÇ             ‚îÇ –ü—Ä–æ—Å—Ç–æ–π, HTTP-based   ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ WebSocket‚îÇ ~0 –º—Å       ‚îÇ Bidirectional         ‚îÇ
    ‚îÇ          ‚îÇ             ‚îÇ –ù—É–∂–µ–Ω upgrade, proxy  ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ WebRTC   ‚îÇ ~0 –º—Å       ‚îÇ P2P, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π hop  ‚îÇ
    ‚îÇ          ‚îÇ             ‚îÇ –°–ª–æ–∂–Ω—ã–π setup (ICE)   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ú–æ–¥–µ–ª—å 2: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           UNIDIRECTIONAL (Server ‚Üí Client)          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  SSE, Server Push, gRPC Server Streaming    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ                                             ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  –ö–ª–∏–µ–Ω—Ç: "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  –°–µ—Ä–≤–µ—Ä: "–í–æ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ... –µ—â—ë... –µ—â—ë"   ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ           BIDIRECTIONAL (Client ‚Üî Server)           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  WebSocket, gRPC Bidirectional, WebRTC      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ                                             ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  –û–±–∞ –º–æ–≥—É—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è           ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç                             ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–í–æ–ø—Ä–æ—Å –¥–ª—è –≤—ã–±–æ—Ä–∞: "–ö–ª–∏–µ–Ω—Ç—É –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ
                   –ü–û–°–õ–ï —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è?"

    –ù–ï–¢ ‚Üí SSE (–ø—Ä–æ—â–µ, –Ω–∞–¥—ë–∂–Ω–µ–µ)
    –î–ê  ‚Üí WebSocket / gRPC / WebRTC
```

---

### –ú–æ–¥–µ–ª—å 3: –¢–æ–ø–æ–ª–æ–≥–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CLIENT-SERVER (–∑–≤–µ–∑–¥–∞)                             ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ       C1  C2  C3  C4  C5                            ‚îÇ
‚îÇ        \  |   |   |  /                              ‚îÇ
‚îÇ         \ |   |   | /                               ‚îÇ
‚îÇ          \|   |   |/                                ‚îÇ
‚îÇ           ‚ïê‚ïê‚ïê‚ïêS‚ïê‚ïê‚ïê‚ïê                                 ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ü—Ä–æ—Ç–æ–∫–æ–ª—ã: HTTP, WebSocket, SSE, gRPC              ‚îÇ
‚îÇ  –ü–ª—é—Å—ã: –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞‚îÇ
‚îÇ  –ú–∏–Ω—É—Å—ã: –°–µ—Ä–≤–µ—Ä ‚Äî —É–∑–∫–æ–µ –º–µ—Å—Ç–æ, latency —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä  ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  PEER-TO-PEER (mesh)                                ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                                ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ       C1 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê C2                                ‚îÇ
‚îÇ       ‚ïë ‚ï≤        ‚ï± ‚ïë                                ‚îÇ
‚îÇ       ‚ïë  ‚ï≤      ‚ï±  ‚ïë                                ‚îÇ
‚îÇ       ‚ïë   ‚ï≤    ‚ï±   ‚ïë                                ‚îÇ
‚îÇ       ‚ïë    ‚ï≤  ‚ï±    ‚ïë                                ‚îÇ
‚îÇ       C4 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê C3                                ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ü—Ä–æ—Ç–æ–∫–æ–ª—ã: WebRTC                                  ‚îÇ
‚îÇ  –ü–ª—é—Å—ã: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è latency, –Ω–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚îÇ
‚îÇ  –ú–∏–Ω—É—Å—ã: NAT traversal, N*(N-1)/2 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π        ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  HYBRID (SFU ‚Äî Selective Forwarding Unit)           ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ       C1  C2  C3  C4                                ‚îÇ
‚îÇ        \  |   |  /                                  ‚îÇ
‚îÇ         \ |   | /                                   ‚îÇ
‚îÇ          SFU‚ïê‚ïê‚ïê‚ïê‚ïê                                   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ü—Ä–æ—Ç–æ–∫–æ–ª—ã: WebRTC + Media Server                   ‚îÇ
‚îÇ  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: Zoom, Google Meet, Discord           ‚îÇ
‚îÇ  –ö–∞–∂–¥—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 1 –ø–æ—Ç–æ–∫, –ø–æ–ª—É—á–∞–µ—Ç N-1            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ú–æ–¥–µ–ª—å 4: NAT Traversal –∫–∞–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

```
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å—ã–ª–∫—É –¥—Ä—É–≥—É,
–Ω–æ –æ–±–∞ –∂–∏–≤—ë—Ç–µ –≤ –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ—Å—ë–ª–∫–∞—Ö (NAT).

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –®–ê–ì 1: –£–∑–Ω–∞—Ç—å —Å–≤–æ–π "–≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å" (STUN)          ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ         ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –í—ã –∑–≤–æ–Ω–∏—Ç–µ –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π –Ω–æ–º–µ—Ä:                     ‚îÇ
‚îÇ  "–° –∫–∞–∫–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —è –∑–≤–æ–Ω—é?"                         ‚îÇ
‚îÇ  "–í—ã –∑–≤–æ–Ω–∏—Ç–µ —Å +7-XXX-XXX-XXXX"                     ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –¢–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç–µ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π IP:port               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –®–ê–ì 2: –û–±–º–µ–Ω –∞–¥—Ä–µ—Å–∞–º–∏ (Signaling)                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                  ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ß–µ—Ä–µ–∑ –æ–±—â–µ–≥–æ –∑–Ω–∞–∫–æ–º–æ–≥–æ (signaling server):         ‚îÇ
‚îÇ  "–ü–µ—Ä–µ–¥–∞–π –ë–æ–±—É –º–æ–π –∞–¥—Ä–µ—Å: 73.45.123.89:49152"       ‚îÇ
‚îÇ  "–ü–µ—Ä–µ–¥–∞–π –ê–ª–∏—Å–µ –º–æ–π –∞–¥—Ä–µ—Å: 82.12.45.67:51234"       ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –®–ê–ì 3: –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä—è–º–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (ICE)            ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ICE –ø—Ä–æ–±—É–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:                          ‚îÇ
‚îÇ  1. –ü—Ä—è–º–æ–π IP (host candidate) ‚Äî –µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏  ‚îÇ
‚îÇ  2. STUN –∞–¥—Ä–µ—Å (srflx) ‚Äî –µ—Å–ª–∏ NAT "–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π"     ‚îÇ
‚îÇ  3. TURN relay ‚Äî –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç            ‚îÇ
‚îÇ                                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –®–ê–ì 4: TURN –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π resort                   ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                    ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ö–æ–≥–¥–∞ P2P –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω:                              ‚îÇ
‚îÇ  –ê–ª–∏—Å–∞ ‚Üí TURN —Å–µ—Ä–≤–µ—Ä ‚Üí –ë–æ–±                          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –ø–æ—á—Ç–æ–≤–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ:             ‚îÇ
‚îÇ  —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏ –¥–æ—Ä–æ–∂–µ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ú–æ–¥–µ–ª—å 5: –í—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∫–∞–∫ –≤—ã–±–æ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í–û–ü–†–û–°                          ‚Üí  –ü–†–û–¢–û–ö–û–õ        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  "–ù—É–∂–Ω–æ —É–≤–µ–¥–æ–º–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –æ —Å–æ–±—ã—Ç–∏—è—Ö"              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚ñ∫ SSE (–ø—Ä–æ—Å—Ç–æ–π, –Ω–∞–¥—ë–∂–Ω—ã–π, HTTP-based)           ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  "–ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚ñ∫ WebSocket (—á–∞—Ç, –∏–≥—Ä—ã, collaborative)          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  "P2P –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚ñ∫ WebRTC (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è latency, P2P)             ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  "–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π"                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚ñ∫ gRPC (—Ç–∏–ø–∏–∑–∞—Ü–∏—è, streaming, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  "–ù—É–∂–µ–Ω fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤"              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚ñ∫ Socket.IO (WS + long-polling fallback)        ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  "–ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚ñ∫ REST –∏–ª–∏ GraphQL (–Ω–µ gRPC!)                   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (2025):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚Ä¢ REST ‚Äî –ø—É–±–ª–∏—á–Ω—ã–µ API, CRUD                       ‚îÇ
‚îÇ  ‚Ä¢ gRPC ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã                   ‚îÇ
‚îÇ  ‚Ä¢ WebSocket/SSE ‚Äî real-time –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ñ–∏—á–∏        ‚îÇ
‚îÇ  ‚Ä¢ WebRTC ‚Äî P2P –º–µ–¥–∏–∞                               ‚îÇ
‚îÇ  ‚Ä¢ Kafka/NATS ‚Äî async —Å–æ–±—ã—Ç–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ü–û–ß–ï–ú–£: –ó–∞—á–µ–º –Ω—É–∂–Ω—ã real-time –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

### –ü—Ä–æ–±–ª–µ–º—ã –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ HTTP

**HTTP –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è real-time:**

1. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å polling**
   - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥
   - –ü—É—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
   - –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç
   - –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–æ N —Å–µ–∫—É–Ω–¥

2. **Long-polling –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
   - –£–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ü—Ä–æ–±–ª–µ–º—ã —Å timeout –∏ proxy
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

3. **HTTP/1.1 overhead**
   - –ü–æ–ª–Ω—ã–µ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
   - Head-of-line blocking
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å server push

### –†–µ—à–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**Real-time –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ä–µ—à–∞—é—Ç:**

- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –¥–∞–Ω–Ω—ã–µ push'—è—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏
- **–ù–∏–∑–∫–∞—è latency** - WebSocket ~50ms vs polling seconds
- **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏** - –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Ç—ã—Å—è—á –∑–∞–ø—Ä–æ—Å–æ–≤
- **Bidirectional** - –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π overhead –Ω–∞ —Ñ—Ä–µ–π–º—ã

### Use Cases

**–ö–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º real-time:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è | –ü–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª |
|----------|------------|---------------------|
| Chat –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | Bidirectional, –Ω–∏–∑–∫–∞—è latency | WebSocket, Socket.IO |
| Live updates (–±–∏—Ä–∂–∞, —Å–ø–æ—Ä—Ç) | Server-to-client push | SSE |
| Collaborative editing | Bidirectional, —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | WebSocket |
| Video/audio –∑–≤–æ–Ω–∫–∏ | P2P, –Ω–∏–∑–∫–∞—è latency, UDP | WebRTC |
| –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã communication | Binary, streaming, typed | gRPC |
| Gaming multiplayer | –ù–∏–∑–∫–∞—è latency, bidirectional | WebSocket, WebRTC |
| IoT sensor data | Continuous streaming | gRPC, WebSocket |
| Live notifications | Server push, auto-reconnect | SSE |

---

## –ß–¢–û: –û–±–∑–æ—Ä real-time –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

### WebSocket

**–ü–æ–ª–Ω–æ–¥—É–ø–ª–µ–∫—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–≤–µ—Ä—Ö TCP —Å upgrade –æ—Ç HTTP**

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** RFC 6455 (2011), Living Standard WHATWG (2025)
- **Transport:** TCP —Å upgrade –æ—Ç HTTP
- **–°—Ö–µ–º—ã URI:** `ws://` (port 80), `wss://` (port 443 TLS)
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** Bidirectional (full-duplex)
- **–î–∞–Ω–Ω—ã–µ:** Text (UTF-8) –∏ Binary (ArrayBuffer, Blob)
- **Reconnection:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

#### WebSocket Handshake

```
Client ‚Üí Server:
GET /chat HTTP/1.1
Host: example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
Sec-WebSocket-Version: 13

Server ‚Üí Client:
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
```

#### WebSocket Frame Structure

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-------+-+-------------+-------------------------------+
|F|R|R|R| opcode|M| Payload len |    Extended payload length    |
|I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |
|N|V|V|V|       |S|             |   (if payload len==126/127)   |
| |1|2|3|       |K|             |                               |
+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +
|     Extended payload length continued, if payload len == 127  |
+ - - - - - - - - - - - - - - - +-------------------------------+
|                               |Masking-key, if MASK set to 1  |
+-------------------------------+-------------------------------+
| Masking-key (continued)       |          Payload Data         |
+-------------------------------- - - - - - - - - - - - - - - - +
:                     Payload Data continued ...                :
+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
|                     Payload Data continued ...                |
+---------------------------------------------------------------+
```

**Opcodes:**
- `0x0` - Continuation frame
- `0x1` - Text frame
- `0x2` - Binary frame
- `0x8` - Connection close
- `0x9` - Ping
- `0xA` - Pong

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü–æ–ª–Ω–∞—è bidirectional –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π overhead –ø–æ—Å–ª–µ handshake
- Binary data support
- –®–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ù–∏–∑–∫–∞—è latency (~50ms)

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ reconnect
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ backpressure (—Ä–µ—à–∞–µ—Ç—Å—è WebSocketStream)
- –°–ª–æ–∂–Ω–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —á–µ–º SSE
- –¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø–æ–≤–µ—Ä—Ö –¥–ª—è room/broadcast

---

### Server-Sent Events (SSE)

**–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π server-to-client push —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP**

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** HTML5 EventSource API
- **Transport:** HTTP/HTTPS (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** Unidirectional (server ‚Üí client)
- **–î–∞–Ω–Ω—ã–µ:** Text only (UTF-8)
- **Reconnection:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å exponential backoff
- **Content-Type:** `text/event-stream`

#### SSE Message Format

```
data: Simple message\n\n

data: Multi-line\n
data: message\n\n

id: 123\n
event: userUpdate\n
data: {"user": "John", "status": "online"}\n\n

retry: 5000\n\n
```

**–ü–æ–ª—è:**
- `data:` - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–º)
- `event:` - –∏–º—è —Å–æ–±—ã—Ç–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "message")
- `id:` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è Last-Event-ID –ø—Ä–∏ reconnect
- `retry:` - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ reconnect –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

#### HTTP/2 Multiplexing

**–° HTTP/1.1:** –º–∞–∫—Å–∏–º—É–º 6 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö SSE —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–° HTTP/2:** –º–Ω–æ–∂–µ—Å—Ç–≤–æ SSE streams —á–µ—Ä–µ–∑ –æ–¥–Ω–æ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:
- Multiplexing —É—Å—Ç—Ä–∞–Ω—è–µ—Ç connection limit
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- Single TCP connection –¥–ª—è –≤—Å–µ—Ö streams

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect —Å Last-Event-ID
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP/2 multiplexing
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ proxy/firewall
- –ú–µ–Ω—å—à–µ overhead –¥–ª—è server push
- Event-based API –∏–∑ –∫–æ—Ä–æ–±–∫–∏

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –¢–æ–ª—å–∫–æ text data (–Ω–µ—Ç binary)
- –¢–æ–ª—å–∫–æ server ‚Üí client (–Ω–µ—Ç bidirectional)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è HTTP/1.1 (—Ä–µ—à–∞–µ—Ç—Å—è HTTP/2)
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ rooms/channels

---

### WebRTC (Web Real-Time Communication)

**P2P –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ**

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–°—Ç–∞–Ω–¥–∞—Ä—Ç:** W3C WebRTC + IETF –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
- **Transport:** UDP (SRTP –¥–ª—è –º–µ–¥–∏–∞, SCTP –¥–ª—è –¥–∞–Ω–Ω—ã—Ö)
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** Bidirectional P2P
- **Latency:** –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è (~50ms)
- **NAT Traversal:** ICE (STUN + TURN)
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ (DTLS, SRTP)

#### WebRTC Architecture

```
Peer A                                    Peer B
  |                                          |
  |-- Signaling (WebSocket/HTTP) ---------->|
  |<--------- Signaling ---------------------|
  |                                          |
  |======== ICE Connection Check ===========>|
  |<======== ICE Connection Check ===========|
  |                                          |
  |######## P2P Media/Data Streams #########>|
  |<####### P2P Media/Data Streams ##########|
```

#### NAT Traversal: ICE, STUN, TURN

**1. STUN (Session Traversal Utilities for NAT)**
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π IP:port
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø NAT
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ STUN

**2. TURN (Traversal Using Relays around NAT)**
- Relay —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ NAT
- Fallback –∫–æ–≥–¥–∞ P2P –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω
- –í—ã—à–µ latency, —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**3. ICE (Interactive Connectivity Establishment)**
- –ü—Ä–æ–±—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—É—Ç–∏
- –°–æ–±–∏—Ä–∞–µ—Ç candidates (local, reflexive, relay)
- –í—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å

#### WebRTC Components

**RTCPeerConnection:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
- Negotiation —á–µ—Ä–µ–∑ SDP (Session Description Protocol)
- Media streams management

**RTCDataChannel:**
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤–µ—Ä—Ö SCTP
- Binary –∏ text support
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å (ordered/unordered, reliable/unreliable)

**MediaStream:**
- –ó–∞—Ö–≤–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ
- Tracks management

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü—Ä—è–º–∞—è P2P –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (–Ω–∏–∑–∫–∞—è latency)
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ end-to-end encryption
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- RTCDataChannel –¥–ª—è –ª—é–±—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π bitrate
- –®–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ (2025)

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
- –¢—Ä–µ–±—É–µ—Ç signaling server
- TURN server –¥–ª—è ~10-20% —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Firewall/NAT issues
- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è server-based broadcasting

---

### gRPC Streaming

**High-performance RPC —Å Protocol Buffers –∏ HTTP/2**

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** HTTP/2
- **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è:** Protocol Buffers (binary)
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 4 —Ç–∏–ø–∞ (Unary, Server, Client, Bidirectional)
- **Transport:** TCP
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –°—Ç—Ä–æ–≥–∞—è —á–µ—Ä–µ–∑ .proto —Å—Ö–µ–º—ã

#### –¢–∏–ø—ã gRPC –≤—ã–∑–æ–≤–æ–≤

**1. Unary RPC (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç)**
```protobuf
rpc GetUser(GetUserRequest) returns (GetUserResponse);
```

**2. Server Streaming**
```protobuf
rpc StreamPrices(SubscribeRequest) returns (stream PriceUpdate);
```

**3. Client Streaming**
```protobuf
rpc UploadFile(stream FileChunk) returns (UploadResponse);
```

**4. Bidirectional Streaming**
```protobuf
rpc Chat(stream ChatMessage) returns (stream ChatMessage);
```

#### gRPC HTTP/2 Features

- **Multiplexing:** –º–Ω–æ–∂–µ—Å—Ç–≤–æ streams —á–µ—Ä–µ–∑ –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **Header compression:** HPACK –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Binary protocol:** –º–µ–Ω—å—à–µ overhead —á–µ–º HTTP/1.1 text
- **Flow control:** –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π backpressure
- **Server push:** –¥–ª—è proactive data delivery

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (binary, HTTP/2)
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Protocol Buffers
- Code generation –¥–ª—è –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–æ–≤
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π streaming (4 —Ç–∏–ø–∞)
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è (~3-10x –º–µ–Ω—å—à–µ JSON)
- Deadlines –∏ cancellation –∏–∑ –∫–æ—Ä–æ–±–∫–∏

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ù–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö (–Ω—É–∂–µ–Ω gRPC-Web)
- –°–ª–æ–∂–Ω–æ—Å—Ç—å debugging (binary protocol)
- –¢—Ä–µ–±—É–µ—Ç HTTP/2
- Learning curve –¥–ª—è Protocol Buffers
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —è–∑—ã–∫–∞—Ö

---

### Socket.IO

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–≤–µ—Ä—Ö WebSocket —Å fallback –∏ —É–¥–æ–±—Å—Ç–≤–∞–º–∏**

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–¢–∏–ø:** JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–Ω–µ –ø—Ä–æ—Ç–æ–∫–æ–ª)
- **–ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞:** WebSocket —Å fallback (HTTP long-polling)
- **API:** Event-based
- **Features:** Rooms, namespaces, broadcast, auto-reconnect

#### Socket.IO Message Overhead

**Native WebSocket:**
```
Binary frame: 2-14 bytes header + payload
```

**Socket.IO:**
```
Event wrapper: {"event":"message","data":"..."}
+ namespace/room metadata
+ acknowledgment callbacks
```

Overhead ~20-50% –±–æ–ª—å—à–µ —á–µ–º native WebSocket

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**1. Automatic Reconnection**
```javascript
const socket = io({
  reconnection: true,
  reconnectionDelay: 1000,
  reconnectionDelayMax: 5000,
  reconnectionAttempts: Infinity
});
```

**2. Rooms**
```javascript
// Server
socket.join('room1');
io.to('room1').emit('news', data);

// Broadcasting
socket.broadcast.emit('event', data);
```

**3. Namespaces**
```javascript
const chat = io('/chat');
const notifications = io('/notifications');
```

**4. Acknowledgments**
```javascript
socket.emit('update', data, (response) => {
  console.log(response);
});
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect —Å exponential backoff
- Fallback –Ω–∞ HTTP long-polling
- Rooms –∏ namespaces –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- Acknowledgments –¥–ª—è request-response
- –ü—Ä–æ—â–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å Redis adapter
- –£–¥–æ–±–Ω—ã–π event-based API

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

- –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä bundle (~40KB min+gzip)
- Performance overhead vs native WebSocket
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —á–∏—Å—Ç—ã–º WebSocket
- –¢—Ä–µ–±—É–µ—Ç Socket.IO –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## –ö–ê–ö: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### WebSocket: Chat Application

#### JavaScript/TypeScript Client

```typescript
// Basic WebSocket connection
const ws = new WebSocket('wss://example.com/chat');

// Connection events
ws.onopen = () => {
  console.log('Connected');
  ws.send(JSON.stringify({ type: 'join', user: 'Alice' }));
};

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  console.log('Received:', message);
};

ws.onerror = (error) => {
  console.error('WebSocket error:', error);
};

ws.onclose = (event) => {
  console.log('Closed:', event.code, event.reason);
  // Manual reconnect logic
  setTimeout(() => reconnect(), 5000);
};

// Send binary data
const buffer = new Uint8Array([1, 2, 3, 4]);
ws.send(buffer);

// Close connection
ws.close(1000, 'Normal closure');
```

**Reconnection with exponential backoff:**

```typescript
class WebSocketClient {
  private ws: WebSocket | null = null;
  private reconnectDelay = 1000;
  private maxReconnectDelay = 30000;
  private reconnectAttempts = 0;

  connect(url: string) {
    this.ws = new WebSocket(url);

    this.ws.onopen = () => {
      console.log('Connected');
      this.reconnectAttempts = 0;
      this.reconnectDelay = 1000;
    };

    this.ws.onclose = () => {
      this.reconnect(url);
    };
  }

  private reconnect(url: string) {
    this.reconnectAttempts++;
    const delay = Math.min(
      this.reconnectDelay * Math.pow(2, this.reconnectAttempts),
      this.maxReconnectDelay
    );

    console.log(`Reconnecting in ${delay}ms (attempt ${this.reconnectAttempts})`);
    setTimeout(() => this.connect(url), delay);
  }

  send(data: any) {
    if (this.ws?.readyState === WebSocket.OPEN) {
      this.ws.send(JSON.stringify(data));
    }
  }
}
```

#### Kotlin/Android Client

```kotlin
import okhttp3.*
import okio.ByteString

class ChatWebSocketClient {
    private var webSocket: WebSocket? = null
    private val client = OkHttpClient()

    fun connect(url: String) {
        val request = Request.Builder()
            .url(url)
            .build()

        webSocket = client.newWebSocket(request, object : WebSocketListener() {
            override fun onOpen(webSocket: WebSocket, response: Response) {
                println("Connected")
                sendMessage("""{"type":"join","user":"Alice"}""")
            }

            override fun onMessage(webSocket: WebSocket, text: String) {
                println("Received: $text")
                // Parse JSON and update UI
            }

            override fun onMessage(webSocket: WebSocket, bytes: ByteString) {
                println("Received binary: ${bytes.hex()}")
            }

            override fun onClosing(webSocket: WebSocket, code: Int, reason: String) {
                webSocket.close(1000, null)
                println("Closing: $code $reason")
            }

            override fun onFailure(webSocket: WebSocket, t: Throwable, response: Response?) {
                println("Error: ${t.message}")
                // Implement reconnection logic
            }
        })
    }

    fun sendMessage(message: String) {
        webSocket?.send(message)
    }

    fun disconnect() {
        webSocket?.close(1000, "Normal closure")
    }
}

// Usage
val chatClient = ChatWebSocketClient()
chatClient.connect("wss://example.com/chat")
chatClient.sendMessage("""{"type":"message","text":"Hello"}""")
```

---

### Server-Sent Events: Live Updates

#### JavaScript Client

```javascript
// Basic SSE connection
const eventSource = new EventSource('/api/updates');

// Default "message" event
eventSource.onmessage = (event) => {
  console.log('New message:', event.data);
  console.log('ID:', event.lastEventId);
};

// Custom event types
eventSource.addEventListener('priceUpdate', (event) => {
  const data = JSON.parse(event.data);
  updatePriceDisplay(data);
});

eventSource.addEventListener('userStatus', (event) => {
  const { user, status } = JSON.parse(event.data);
  updateUserStatus(user, status);
});

// Connection state
eventSource.onopen = () => {
  console.log('SSE connected');
};

eventSource.onerror = (error) => {
  console.error('SSE error:', error);
  if (eventSource.readyState === EventSource.CLOSED) {
    console.log('Connection closed');
  }
  // Browser will auto-reconnect
};

// Manual close
eventSource.close();
```

**With Last-Event-ID for resume:**

```javascript
// Server example (Node.js/Express)
app.get('/api/updates', (req, res) => {
  res.setHeader('Content-Type', 'text/event-stream');
  res.setHeader('Cache-Control', 'no-cache');
  res.setHeader('Connection', 'keep-alive');

  const lastEventId = req.headers['last-event-id'];
  console.log('Resume from:', lastEventId);

  let messageId = lastEventId ? parseInt(lastEventId) : 0;

  const interval = setInterval(() => {
    messageId++;
    res.write(`id: ${messageId}\n`);
    res.write(`event: priceUpdate\n`);
    res.write(`data: ${JSON.stringify({ symbol: 'BTC', price: 50000 })}\n\n`);
  }, 1000);

  req.on('close', () => {
    clearInterval(interval);
  });
});
```

#### Kotlin/Android Client (OkHttp SSE)

```kotlin
import okhttp3.*
import okhttp3.sse.EventSource
import okhttp3.sse.EventSourceListener
import okhttp3.sse.EventSources

class SSEClient {
    private val client = OkHttpClient()
    private var eventSource: EventSource? = null

    fun connect(url: String) {
        val request = Request.Builder()
            .url(url)
            .header("Accept", "text/event-stream")
            .build()

        eventSource = EventSources.createFactory(client)
            .newEventSource(request, object : EventSourceListener() {
                override fun onOpen(eventSource: EventSource, response: Response) {
                    println("SSE Connected")
                }

                override fun onEvent(
                    eventSource: EventSource,
                    id: String?,
                    type: String?,
                    data: String
                ) {
                    println("Event[$type] ID[$id]: $data")

                    when (type) {
                        "priceUpdate" -> handlePriceUpdate(data)
                        "userStatus" -> handleUserStatus(data)
                        else -> handleMessage(data)
                    }
                }

                override fun onClosed(eventSource: EventSource) {
                    println("SSE Closed")
                }

                override fun onFailure(
                    eventSource: EventSource,
                    t: Throwable?,
                    response: Response?
                ) {
                    println("SSE Error: ${t?.message}")
                    // Auto-reconnect handled by library
                }
            })
    }

    private fun handlePriceUpdate(data: String) {
        // Parse JSON and update UI
    }

    fun disconnect() {
        eventSource?.cancel()
    }
}

// Usage
val sseClient = SSEClient()
sseClient.connect("https://api.example.com/updates")
```

---

### WebRTC: Video Chat

#### JavaScript Implementation

```javascript
// WebRTC peer connection with signaling
class VideoChatClient {
  constructor(signalServer) {
    this.pc = new RTCPeerConnection({
      iceServers: [
        { urls: 'stun:stun.l.google.com:19302' },
        {
          urls: 'turn:turn.example.com:3478',
          username: 'user',
          credential: 'pass'
        }
      ]
    });

    this.signaling = new WebSocket(signalServer);
    this.setupSignaling();
    this.setupPeerConnection();
  }

  setupPeerConnection() {
    // ICE candidates
    this.pc.onicecandidate = (event) => {
      if (event.candidate) {
        this.signaling.send(JSON.stringify({
          type: 'ice-candidate',
          candidate: event.candidate
        }));
      }
    };

    // Remote stream
    this.pc.ontrack = (event) => {
      const remoteVideo = document.getElementById('remoteVideo');
      remoteVideo.srcObject = event.streams[0];
    };
  }

  setupSignaling() {
    this.signaling.onmessage = async (event) => {
      const message = JSON.parse(event.data);

      switch (message.type) {
        case 'offer':
          await this.handleOffer(message.offer);
          break;
        case 'answer':
          await this.handleAnswer(message.answer);
          break;
        case 'ice-candidate':
          await this.handleIceCandidate(message.candidate);
          break;
      }
    };
  }

  async startCall() {
    // Get local media
    const stream = await navigator.mediaDevices.getUserMedia({
      video: true,
      audio: true
    });

    const localVideo = document.getElementById('localVideo');
    localVideo.srcObject = stream;

    // Add tracks to peer connection
    stream.getTracks().forEach(track => {
      this.pc.addTrack(track, stream);
    });

    // Create offer
    const offer = await this.pc.createOffer();
    await this.pc.setLocalDescription(offer);

    this.signaling.send(JSON.stringify({
      type: 'offer',
      offer: offer
    }));
  }

  async handleOffer(offer) {
    await this.pc.setRemoteDescription(new RTCSessionDescription(offer));

    // Get local media
    const stream = await navigator.mediaDevices.getUserMedia({
      video: true,
      audio: true
    });

    stream.getTracks().forEach(track => {
      this.pc.addTrack(track, stream);
    });

    // Create answer
    const answer = await this.pc.createAnswer();
    await this.pc.setLocalDescription(answer);

    this.signaling.send(JSON.stringify({
      type: 'answer',
      answer: answer
    }));
  }

  async handleAnswer(answer) {
    await this.pc.setRemoteDescription(new RTCSessionDescription(answer));
  }

  async handleIceCandidate(candidate) {
    await this.pc.addIceCandidate(new RTCIceCandidate(candidate));
  }

  // Data channel for chat/metadata
  createDataChannel() {
    const dataChannel = this.pc.createDataChannel('chat');

    dataChannel.onopen = () => {
      console.log('Data channel open');
      dataChannel.send('Hello!');
    };

    dataChannel.onmessage = (event) => {
      console.log('Received:', event.data);
    };

    return dataChannel;
  }
}

// Usage
const client = new VideoChatClient('wss://signal.example.com');
client.startCall();
```

#### Kotlin/Android WebRTC

```kotlin
import org.webrtc.*

class WebRTCClient(
    private val context: Context,
    private val signalingClient: SignalingClient
) {
    private val peerConnectionFactory: PeerConnectionFactory
    private var peerConnection: PeerConnection? = null
    private val eglBase = EglBase.create()

    init {
        PeerConnectionFactory.initialize(
            PeerConnectionFactory.InitializationOptions
                .builder(context)
                .createInitializationOptions()
        )

        peerConnectionFactory = PeerConnectionFactory.builder()
            .setVideoEncoderFactory(
                DefaultVideoEncoderFactory(
                    eglBase.eglBaseContext,
                    true,
                    true
                )
            )
            .setVideoDecoderFactory(
                DefaultVideoDecoderFactory(eglBase.eglBaseContext)
            )
            .createPeerConnectionFactory()
    }

    fun createPeerConnection() {
        val iceServers = listOf(
            PeerConnection.IceServer.builder("stun:stun.l.google.com:19302").createIceServer(),
            PeerConnection.IceServer.builder("turn:turn.example.com:3478")
                .setUsername("user")
                .setPassword("pass")
                .createIceServer()
        )

        peerConnection = peerConnectionFactory.createPeerConnection(
            iceServers,
            object : PeerConnection.Observer {
                override fun onIceCandidate(candidate: IceCandidate) {
                    signalingClient.sendIceCandidate(candidate)
                }

                override fun onAddStream(stream: MediaStream) {
                    // Handle remote stream
                }

                override fun onIceConnectionChange(state: PeerConnection.IceConnectionState) {
                    println("ICE Connection: $state")
                }

                // ... other callbacks
            }
        )
    }

    fun startCall(localVideoTrack: VideoTrack, audioTrack: AudioTrack) {
        val stream = peerConnectionFactory.createLocalMediaStream("local")
        stream.addTrack(localVideoTrack)
        stream.addTrack(audioTrack)

        peerConnection?.addStream(stream)

        peerConnection?.createOffer(object : SdpObserver {
            override fun onCreateSuccess(description: SessionDescription) {
                peerConnection?.setLocalDescription(object : SdpObserver {
                    override fun onSetSuccess() {
                        signalingClient.sendOffer(description)
                    }
                    // ... other callbacks
                }, description)
            }
            // ... other callbacks
        }, MediaConstraints())
    }

    fun handleOffer(offer: SessionDescription) {
        peerConnection?.setRemoteDescription(object : SdpObserver {
            override fun onSetSuccess() {
                peerConnection?.createAnswer(object : SdpObserver {
                    override fun onCreateSuccess(answer: SessionDescription) {
                        peerConnection?.setLocalDescription(object : SdpObserver {
                            override fun onSetSuccess() {
                                signalingClient.sendAnswer(answer)
                            }
                            // ... other callbacks
                        }, answer)
                    }
                    // ... other callbacks
                }, MediaConstraints())
            }
            // ... other callbacks
        }, offer)
    }
}
```

---

### gRPC: Bidirectional Streaming

#### Protocol Buffers Definition

```protobuf
syntax = "proto3";

package chat;

service ChatService {
  // Unary
  rpc SendMessage(ChatMessage) returns (SendResponse);

  // Server streaming
  rpc StreamMessages(SubscribeRequest) returns (stream ChatMessage);

  // Client streaming
  rpc UploadImages(stream ImageChunk) returns (UploadResponse);

  // Bidirectional streaming
  rpc Chat(stream ChatMessage) returns (stream ChatMessage);
}

message ChatMessage {
  string user = 1;
  string text = 2;
  int64 timestamp = 3;
}

message SubscribeRequest {
  string room = 1;
}

message SendResponse {
  bool success = 1;
  string message_id = 2;
}

message ImageChunk {
  bytes data = 1;
  int32 chunk_number = 2;
}

message UploadResponse {
  string image_url = 1;
}
```

#### Kotlin/Android gRPC Client

```kotlin
import io.grpc.ManagedChannelBuilder
import io.grpc.stub.StreamObserver
import kotlinx.coroutines.*
import kotlinx.coroutines.flow.*

class ChatGrpcClient(serverAddress: String) {
    private val channel = ManagedChannelBuilder
        .forTarget(serverAddress)
        .usePlaintext() // Use .useTransportSecurity() for TLS
        .build()

    private val asyncStub = ChatServiceGrpc.newStub(channel)
    private val blockingStub = ChatServiceGrpc.newBlockingStub(channel)

    // Unary RPC
    fun sendMessage(user: String, text: String) {
        val request = ChatMessage.newBuilder()
            .setUser(user)
            .setText(text)
            .setTimestamp(System.currentTimeMillis())
            .build()

        asyncStub.sendMessage(request, object : StreamObserver<SendResponse> {
            override fun onNext(response: SendResponse) {
                println("Message sent: ${response.messageId}")
            }

            override fun onError(t: Throwable) {
                println("Error: ${t.message}")
            }

            override fun onCompleted() {
                println("Send completed")
            }
        })
    }

    // Server streaming
    fun streamMessages(room: String, onMessage: (ChatMessage) -> Unit) {
        val request = SubscribeRequest.newBuilder()
            .setRoom(room)
            .build()

        asyncStub.streamMessages(request, object : StreamObserver<ChatMessage> {
            override fun onNext(message: ChatMessage) {
                onMessage(message)
            }

            override fun onError(t: Throwable) {
                println("Stream error: ${t.message}")
            }

            override fun onCompleted() {
                println("Stream completed")
            }
        })
    }

    // Bidirectional streaming
    fun chat(
        onMessageReceived: (ChatMessage) -> Unit
    ): StreamObserver<ChatMessage> {
        val responseObserver = object : StreamObserver<ChatMessage> {
            override fun onNext(message: ChatMessage) {
                onMessageReceived(message)
            }

            override fun onError(t: Throwable) {
                println("Chat error: ${t.message}")
            }

            override fun onCompleted() {
                println("Chat completed")
            }
        }

        return asyncStub.chat(responseObserver)
    }

    fun shutdown() {
        channel.shutdown()
    }
}

// Usage
fun main() = runBlocking {
    val client = ChatGrpcClient("localhost:50051")

    // Send unary message
    client.sendMessage("Alice", "Hello!")

    // Stream messages from server
    client.streamMessages("general") { message ->
        println("${message.user}: ${message.text}")
    }

    // Bidirectional chat
    val chatStream = client.chat { message ->
        println("Received: ${message.user}: ${message.text}")
    }

    // Send messages
    launch {
        repeat(10) { i ->
            val message = ChatMessage.newBuilder()
                .setUser("Alice")
                .setText("Message $i")
                .setTimestamp(System.currentTimeMillis())
                .build()
            chatStream.onNext(message)
            delay(1000)
        }
        chatStream.onCompleted()
    }

    delay(15000)
    client.shutdown()
}
```

#### TypeScript gRPC-Web Client

```typescript
import { ChatServiceClient } from './generated/chat_grpc_web_pb';
import { ChatMessage, SubscribeRequest } from './generated/chat_pb';

class ChatClient {
  private client: ChatServiceClient;

  constructor(serverUrl: string) {
    this.client = new ChatServiceClient(serverUrl);
  }

  // Unary call
  async sendMessage(user: string, text: string): Promise<void> {
    const request = new ChatMessage();
    request.setUser(user);
    request.setText(text);
    request.setTimestamp(Date.now());

    return new Promise((resolve, reject) => {
      this.client.sendMessage(request, {}, (err, response) => {
        if (err) {
          reject(err);
        } else {
          console.log('Message sent:', response.getMessageId());
          resolve();
        }
      });
    });
  }

  // Server streaming
  streamMessages(room: string, onMessage: (message: ChatMessage) => void): void {
    const request = new SubscribeRequest();
    request.setRoom(room);

    const stream = this.client.streamMessages(request, {});

    stream.on('data', (message: ChatMessage) => {
      onMessage(message);
    });

    stream.on('error', (err) => {
      console.error('Stream error:', err);
    });

    stream.on('end', () => {
      console.log('Stream ended');
    });
  }

  // Note: Bidirectional streaming not supported in gRPC-Web
  // Use WebSocket or Server Streaming + Unary calls instead
}

// Usage
const client = new ChatClient('http://localhost:8080');

await client.sendMessage('Alice', 'Hello!');

client.streamMessages('general', (message) => {
  console.log(`${message.getUser()}: ${message.getText()}`);
});
```

---

### Socket.IO: Full-Featured Chat

#### JavaScript/TypeScript Client

```typescript
import { io, Socket } from 'socket.io-client';

class ChatClient {
  private socket: Socket;

  constructor(serverUrl: string) {
    this.socket = io(serverUrl, {
      transports: ['websocket', 'polling'],
      reconnection: true,
      reconnectionDelay: 1000,
      reconnectionDelayMax: 5000,
      reconnectionAttempts: Infinity,
      timeout: 20000,
      autoConnect: true
    });

    this.setupEventListeners();
  }

  private setupEventListeners() {
    this.socket.on('connect', () => {
      console.log('Connected:', this.socket.id);
    });

    this.socket.on('disconnect', (reason) => {
      console.log('Disconnected:', reason);
    });

    this.socket.on('reconnect_attempt', (attempt) => {
      console.log('Reconnecting, attempt:', attempt);
    });

    this.socket.on('error', (error) => {
      console.error('Socket error:', error);
    });
  }

  // Join room
  joinRoom(room: string, callback?: (response: any) => void) {
    this.socket.emit('join-room', { room }, callback);
  }

  // Send message with acknowledgment
  sendMessage(room: string, message: string) {
    this.socket.emit('message', { room, message }, (response) => {
      console.log('Message sent:', response);
    });
  }

  // Listen for messages
  onMessage(callback: (data: any) => void) {
    this.socket.on('message', callback);
  }

  // Typing indicator
  startTyping(room: string) {
    this.socket.emit('typing-start', { room });
  }

  stopTyping(room: string) {
    this.socket.emit('typing-stop', { room });
  }

  onTyping(callback: (data: any) => void) {
    this.socket.on('user-typing', callback);
  }

  // Broadcasting
  broadcast(event: string, data: any) {
    this.socket.emit('broadcast', { event, data });
  }

  // Disconnect
  disconnect() {
    this.socket.disconnect();
  }

  // Reconnect
  reconnect() {
    this.socket.connect();
  }
}

// Usage
const chat = new ChatClient('http://localhost:3000');

chat.joinRoom('general', (response) => {
  console.log('Joined room:', response);
});

chat.onMessage((data) => {
  console.log(`${data.user}: ${data.message}`);
});

chat.sendMessage('general', 'Hello everyone!');

chat.onTyping((data) => {
  console.log(`${data.user} is typing...`);
});
```

#### Kotlin/Android Socket.IO

```kotlin
import io.socket.client.IO
import io.socket.client.Socket
import io.socket.emitter.Emitter
import org.json.JSONObject

class ChatSocketClient(serverUrl: String) {
    private val socket: Socket

    init {
        val options = IO.Options().apply {
            transports = arrayOf("websocket", "polling")
            reconnection = true
            reconnectionDelay = 1000
            reconnectionDelayMax = 5000
            timeout = 20000
        }

        socket = IO.socket(serverUrl, options)
        setupEventListeners()
    }

    private fun setupEventListeners() {
        socket.on(Socket.EVENT_CONNECT) {
            println("Connected: ${socket.id()}")
        }

        socket.on(Socket.EVENT_DISCONNECT) { args ->
            println("Disconnected: ${args[0]}")
        }

        socket.on(Socket.EVENT_CONNECT_ERROR) { args ->
            println("Connection error: ${args[0]}")
        }

        socket.on(Socket.EVENT_RECONNECT_ATTEMPT) { args ->
            println("Reconnecting, attempt: ${args[0]}")
        }
    }

    fun connect() {
        socket.connect()
    }

    fun disconnect() {
        socket.disconnect()
    }

    // Join room
    fun joinRoom(room: String, callback: ((JSONObject) -> Unit)? = null) {
        val data = JSONObject().apply {
            put("room", room)
        }

        if (callback != null) {
            socket.emit("join-room", data) { args ->
                callback(args[0] as JSONObject)
            }
        } else {
            socket.emit("join-room", data)
        }
    }

    // Send message with acknowledgment
    fun sendMessage(room: String, message: String) {
        val data = JSONObject().apply {
            put("room", room)
            put("message", message)
        }

        socket.emit("message", data) { args ->
            println("Message sent: ${args[0]}")
        }
    }

    // Listen for messages
    fun onMessage(callback: (String, String, Long) -> Unit) {
        socket.on("message") { args ->
            val data = args[0] as JSONObject
            callback(
                data.getString("user"),
                data.getString("message"),
                data.getLong("timestamp")
            )
        }
    }

    // Typing indicator
    fun startTyping(room: String) {
        socket.emit("typing-start", JSONObject().apply {
            put("room", room)
        })
    }

    fun onTyping(callback: (String, String) -> Unit) {
        socket.on("user-typing") { args ->
            val data = args[0] as JSONObject
            callback(
                data.getString("user"),
                data.getString("room")
            )
        }
    }

    // Custom event listener
    fun on(event: String, callback: (JSONObject) -> Unit) {
        socket.on(event) { args ->
            callback(args[0] as JSONObject)
        }
    }

    // Custom event emitter
    fun emit(event: String, data: JSONObject) {
        socket.emit(event, data)
    }
}

// Usage in Activity/Fragment
class ChatActivity : AppCompatActivity() {
    private lateinit var chatClient: ChatSocketClient

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        chatClient = ChatSocketClient("http://10.0.2.2:3000")

        chatClient.onMessage { user, message, timestamp ->
            runOnUiThread {
                addMessageToUI(user, message, timestamp)
            }
        }

        chatClient.joinRoom("general") { response ->
            println("Joined: ${response.getString("message")}")
        }

        chatClient.connect()
    }

    private fun sendButtonClick() {
        val message = messageEditText.text.toString()
        chatClient.sendMessage("general", message)
    }

    override fun onDestroy() {
        super.onDestroy()
        chatClient.disconnect()
    }
}
```

---

## Decision Tree: –í—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ù—É–∂–Ω–∞ –ª–∏ P2P –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è?            ‚îÇ
‚îÇ   (–≤–∏–¥–µ–æ/–∞—É–¥–∏–æ –∑–≤–æ–Ω–∫–∏)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   WebRTC     ‚îÇ  ‚Üê Video/audio calls, P2P data
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –ù–ï–¢    ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ù—É–∂–Ω–∞ bidirectional –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è?     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –ù–ï–¢    ‚îÇ  (—Ç–æ–ª—å–∫–æ server ‚Üí client)
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ù—É–∂–Ω—ã binary –¥–∞–Ω–Ω—ã–µ?                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –ù–ï–¢    ‚îÇ  (—Ç–æ–ª—å–∫–æ text/JSON)
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ     SSE      ‚îÇ  ‚Üê Live updates, notifications
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Auto-reconnect, simple

      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ  (–Ω—É–∂–µ–Ω binary)
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ   WebSocket      ‚îÇ  ‚Üê Binary streaming server ‚Üí client
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ  (bidirectional –Ω—É–∂–µ–Ω)
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã communication?           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ù—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è?              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ gRPC Stream  ‚îÇ  ‚Üê Microservices, typed, binary
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Protocol Buffers

      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –ù–ï–¢    ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ù—É–∂–Ω—ã rooms/namespaces/broadcast?     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Socket.IO   ‚îÇ  ‚Üê Chat, collaboration, gaming
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Auto-reconnect, rooms, fallback

      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –ù–ï–¢    ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ö—Ä–∏—Ç–∏—á–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –î–ê     ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  Native WebSocket‚îÇ  ‚Üê Trading, gaming, high-frequency
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Minimal overhead

      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ    –ù–ï–¢    ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Socket.IO   ‚îÇ  ‚Üê General purpose, developer friendly
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | WebSocket | SSE | WebRTC | gRPC | Socket.IO |
|----------|-----------|-----|--------|------|-----------|
| **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** | Bidirectional | Server‚ÜíClient | P2P Bidirectional | Bidirectional | Bidirectional |
| **Transport** | TCP | HTTP/HTTPS | UDP (SRTP) | TCP (HTTP/2) | TCP (WebSocket) |
| **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** | Text, Binary | Text only | Binary, Media | Binary (Protobuf) | Text, Binary |
| **Latency** | ~50ms | ~100ms | ~50ms (P2P) | ~30ms | ~60ms |
| **Reconnect** | Manual | Auto | Manual | Manual | Auto |
| **Complexity** | Medium | Low | High | Medium-High | Low |
| **Browser support** | Excellent | Excellent | Excellent | Limited (gRPC-Web) | Excellent |
| **Overhead** | Low | Medium | Low | Very Low | Medium |
| **Best for** | Chat, realtime | Live updates | Video/audio | Microservices | General realtime |
| **Scaling** | Medium | Easy | Hard (P2P) | Easy | Medium |
| **Backpressure** | WebSocketStream | No | No | Yes (HTTP/2) | No |

---

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

### WebSocket

**1. Reconnection Hell**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ reconnect –ø—Ä–∏ –æ—à–∏–±–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
ws.onclose = () => {
  setTimeout(() => reconnect(), 1000); // –ë—É–¥–µ—Ç —Å–ø–∞–º–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
};

// –†–µ—à–µ–Ω–∏–µ: exponential backoff + max attempts
let attempts = 0;
const maxAttempts = 10;

function reconnect() {
  if (attempts >= maxAttempts) {
    console.error('Max reconnection attempts reached');
    return;
  }

  const delay = Math.min(1000 * Math.pow(2, attempts), 30000);
  setTimeout(() => {
    attempts++;
    connect();
  }, delay);
}
```

**2. Message Order**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
ws.send(message1);
ws.send(message2); // –ú–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ —Ä–∞–Ω—å—à–µ message1

// –†–µ—à–µ–Ω–∏–µ: sequence numbers –∏–ª–∏ acknowledgments
let messageSeq = 0;
function sendMessage(data) {
  ws.send(JSON.stringify({
    seq: messageSeq++,
    data: data
  }));
}
```

**3. Buffering –ø—Ä–∏ readyState !== OPEN**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –ø–æ—Ç–µ—Ä—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
function send(data) {
  ws.send(data); // –û—à–∏–±–∫–∞ –µ—Å–ª–∏ ws.readyState !== OPEN
}

// –†–µ—à–µ–Ω–∏–µ: –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π
const messageQueue = [];

function send(data) {
  if (ws.readyState === WebSocket.OPEN) {
    ws.send(data);
  } else {
    messageQueue.push(data);
  }
}

ws.onopen = () => {
  while (messageQueue.length > 0) {
    ws.send(messageQueue.shift());
  }
};
```

**4. Memory Leaks –≤ SPA**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ –∑–∞–∫—Ä—ã–ª–∏ WebSocket –ø—Ä–∏ unmount
useEffect(() => {
  const ws = new WebSocket('wss://example.com');
  // ... setup
}, []); // –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏

// –†–µ—à–µ–Ω–∏–µ: cleanup
useEffect(() => {
  const ws = new WebSocket('wss://example.com');

  return () => {
    ws.close();
  };
}, []);
```

**5. Ping/Pong –¥–ª—è Keep-Alive**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: proxy/firewall –∑–∞–∫—Ä—ã–≤–∞—é—Ç idle —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
// –†–µ—à–µ–Ω–∏–µ: —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π ping/pong
let pingInterval;

ws.onopen = () => {
  pingInterval = setInterval(() => {
    if (ws.readyState === WebSocket.OPEN) {
      ws.send(JSON.stringify({ type: 'ping' }));
    }
  }, 30000); // –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
};

ws.onclose = () => {
  clearInterval(pingInterval);
};
```

### Server-Sent Events

**1. HTTP/1.1 Connection Limit**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –º–∞–∫—Å–∏–º—É–º 6 SSE —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ HTTP/1.1
const sse1 = new EventSource('/stream1');
const sse2 = new EventSource('/stream2');
// ... 4 more ... 7-–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

// –†–µ—à–µ–Ω–∏–µ 1: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP/2
// –†–µ—à–µ–Ω–∏–µ 2: multiplexing —á–µ—Ä–µ–∑ –æ–¥–∏–Ω SSE stream
const sse = new EventSource('/multiplexed');
sse.addEventListener('stream1', handler1);
sse.addEventListener('stream2', handler2);
```

**2. Only Text Data**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ binary
// –û–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å: Base64 encoding (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –Ω–∞ ~33%)
// Server
res.write(`data: ${Buffer.from(binaryData).toString('base64')}\n\n`);

// Client
eventSource.onmessage = (event) => {
  const binaryData = Uint8Array.from(atob(event.data), c => c.charCodeAt(0));
};
```

**3. No Request Headers –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ connect
// EventSource –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç custom headers (–∫—Ä–æ–º–µ Last-Event-ID)

// –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ query params –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
const token = getAuthToken();
const eventSource = new EventSource(`/updates?token=${token}`);

// –ò–ª–∏ WebSocket –¥–ª—è bidirectional
```

**4. CORS Issues**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: CORS —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
// Server –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:
res.setHeader('Access-Control-Allow-Origin', 'https://example.com');
res.setHeader('Access-Control-Allow-Credentials', 'true');

// Client
const eventSource = new EventSource('/updates', {
  withCredentials: true // –¥–ª—è cookies
});
```

**5. Browser Caching**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: browser –º–æ–∂–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å SSE response
// –†–µ—à–µ–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ cache headers
res.setHeader('Cache-Control', 'no-cache, no-store, must-revalidate');
res.setHeader('X-Accel-Buffering', 'no'); // –¥–ª—è nginx
```

### WebRTC

**1. Symmetric NAT Problems**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: ~10-20% —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–µ –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å P2P
// –†–µ—à–µ–Ω–∏–µ: TURN server (–Ω–æ –¥–æ—Ä–æ–≥–æ –≤ –ø–ª–∞–Ω–µ —Ä–µ—Å—É—Ä—Å–æ–≤)

const config = {
  iceServers: [
    { urls: 'stun:stun.l.google.com:19302' },
    {
      urls: 'turn:turn.example.com:3478',
      username: 'user',
      credential: 'pass'
    }
  ],
  iceCandidatePoolSize: 10 // –±–æ–ª—å—à–µ candidates
};
```

**2. Firewall Restrictions**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ firewall –±–ª–æ–∫–∏—Ä—É—é—Ç UDP
// –†–µ—à–µ–Ω–∏–µ: TURN over TCP/TLS
{
  urls: 'turn:turn.example.com:443?transport=tcp',
  username: 'user',
  credential: 'pass'
}
```

**3. ICE Trickle Optimization**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –∂–¥–∞—Ç—å –≤—Å–µ ICE candidates –¥–æ–ª–≥–æ
// –†–µ—à–µ–Ω–∏–µ: trickle ICE (–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ –º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω–∏—è)

pc.onicecandidate = (event) => {
  if (event.candidate) {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É
    signalingChannel.send({
      type: 'ice-candidate',
      candidate: event.candidate
    });
  }
};

// –ë–µ–∑ trickle (–º–µ–¥–ª–µ–Ω–Ω–µ–µ):
pc.onicecandidate = (event) => {
  if (event.candidate === null) {
    // –í—Å–µ candidates —Å–æ–±—Ä–∞–Ω—ã
    signalingChannel.send({
      type: 'offer',
      sdp: pc.localDescription
    });
  }
};
```

**4. Mobile Battery Drain**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è WebRTC –ø–µ—Ä–µ–¥–∞—á–∞ –∂—Ä–µ—Ç –±–∞—Ç–∞—Ä–µ—é
// –†–µ—à–µ–Ω–∏–µ: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π bitrate –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ

const sender = pc.getSenders().find(s => s.track?.kind === 'video');
const parameters = sender.getParameters();

if (batteryLevel < 20) {
  parameters.encodings[0].maxBitrate = 500000; // 500 kbps
  parameters.encodings[0].scaleResolutionDownBy = 2; // –ø–æ–ª–æ–≤–∏–Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
  await sender.setParameters(parameters);
}
```

**5. Memory Leaks —Å MediaStream**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º tracks –ø—Ä–∏ unmount
useEffect(() => {
  let localStream;

  async function setup() {
    localStream = await navigator.mediaDevices.getUserMedia({
      video: true,
      audio: true
    });
    // ... use stream
  }

  setup();

  return () => {
    // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º tracks
    localStream?.getTracks().forEach(track => track.stop());
  };
}, []);
```

### gRPC

**1. Browser Limitations**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö
// –†–µ—à–µ–Ω–∏–µ: gRPC-Web (–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

// gRPC-Web –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
// - Client streaming
// - Bidirectional streaming

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebSocket –¥–ª—è browser real-time
```

**2. Binary Debugging**
```bash
# –ü—Ä–æ–±–ª–µ–º–∞: —Å–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å binary –ø—Ä–æ—Ç–æ–∫–æ–ª
# –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ grpcurl

# Unary call
grpcurl -plaintext -d '{"user":"Alice"}' \
  localhost:50051 chat.ChatService/SendMessage

# Server streaming
grpcurl -plaintext -d '{"room":"general"}' \
  localhost:50051 chat.ChatService/StreamMessages
```

**3. Load Balancing Issues**
```yaml
# –ü—Ä–æ–±–ª–µ–º–∞: HTTP/2 –¥–µ—Ä–∂–∏—Ç –æ–¥–Ω–æ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
# L4 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

# –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ client-side LB –∏–ª–∏ proxy
apiVersion: v1
kind: Service
metadata:
  name: grpc-service
spec:
  type: ClusterIP
  sessionAffinity: None # –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ClientIP
```

**4. Deadline Propagation**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: timeout –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
// –†–µ—à–µ–Ω–∏–µ: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ deadline —è–≤–Ω–æ

val channel = ManagedChannelBuilder
    .forTarget("service:50051")
    .build()

val stub = ServiceGrpc.newBlockingStub(channel)
    .withDeadlineAfter(5, TimeUnit.SECONDS) // –í–∞–∂–Ω–æ!

try {
    val response = stub.method(request)
} catch (e: StatusRuntimeException) {
    if (e.status.code == Status.Code.DEADLINE_EXCEEDED) {
        // Handle timeout
    }
}
```

**5. Protocol Buffers Versioning**
```protobuf
// –ü—Ä–æ–±–ª–µ–º–∞: breaking changes –ª–æ–º–∞—é—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
// –†–µ—à–µ–Ω–∏–µ: —Å–ª–µ–¥—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

// ‚úÖ –ú–û–ñ–ù–û:
message User {
  string name = 1;
  int32 age = 2;
  string email = 3;  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è
}

// ‚ùå –ù–ï–õ–¨–ó–Ø:
message User {
  string name = 1;
  string age = 2;  // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ–ª—è - BREAKING!
}

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ –ø–æ–ª–µ–π –≤–º–µ—Å—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö
```

### Socket.IO

**1. Version Incompatibility**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: Socket.IO client –∏ server –≤–µ—Ä—Å–∏–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å
// Socket.IO v2 –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å v3/v4

// –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–µ—Ä—Å–∏–∏
// package.json
{
  "socket.io": "^4.7.0",  // Server
  "socket.io-client": "^4.7.0"  // Client - —Ç–∞ –∂–µ –º–∞–∂–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è
}
```

**2. Room Scaling Issues**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: rooms –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
// –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis adapter

// Server
const io = require('socket.io')(server);
const { createAdapter } = require('@socket.io/redis-adapter');
const { createClient } = require('redis');

const pubClient = createClient({ url: 'redis://localhost:6379' });
const subClient = pubClient.duplicate();

io.adapter(createAdapter(pubClient, subClient));

// –¢–µ–ø–µ—Ä—å io.to('room').emit() —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –≤—Å–µ —Å–µ—Ä–≤–µ—Ä–∞
```

**3. Event Name Collisions**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: reserved event names
const reservedEvents = [
  'connect', 'connect_error', 'disconnect',
  'disconnecting', 'newListener', 'removeListener'
];

// ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
socket.on('disconnect', () => {}); // –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ custom prefixes
socket.on('app:disconnect', () => {});
```

**4. Acknowledgment Timeout**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: acknowledgment callbacks –Ω–µ –∏–º–µ—é—Ç timeout
socket.emit('request', data, (response) => {
  // –ú–æ–∂–µ—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑–≤–∞—Ç—å—Å—è
});

// –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤—å—Ç–µ timeout –≤—Ä—É—á–Ω—É—é
function emitWithTimeout(event, data, timeout = 5000) {
  return new Promise((resolve, reject) => {
    const timer = setTimeout(() => {
      reject(new Error('Acknowledgment timeout'));
    }, timeout);

    socket.emit(event, data, (response) => {
      clearTimeout(timer);
      resolve(response);
    });
  });
}

// Usage
try {
  const response = await emitWithTimeout('request', data);
} catch (err) {
  console.error('Timeout:', err);
}
```

**5. Memory Leaks —Å Listeners**
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –∑–∞–±—ã–ª–∏ —É–¥–∞–ª–∏—Ç—å listeners
function setupChat() {
  socket.on('message', handleMessage); // –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑
}

setupChat(); // listener 1
setupChat(); // listener 2 (—É—Ç–µ—á–∫–∞!)

// –†–µ—à–µ–Ω–∏–µ: —É–¥–∞–ª—è–π—Ç–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ once
function setupChat() {
  socket.off('message', handleMessage); // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π
  socket.on('message', handleMessage);
}

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ once –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö
socket.once('welcome', (data) => {
  console.log('Welcome message:', data);
});
```

---

## Best Practices

### WebSocket

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSS (TLS)** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ exponential backoff** –¥–ª—è reconnection
3. **–î–æ–±–∞–≤—å—Ç–µ ping/pong** –¥–ª—è keep-alive (–∫–∞–∂–¥—ã–µ 30-60 —Å–µ–∫)
4. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ message queue** –¥–ª—è buffering –ø—Ä–∏ reconnect
6. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ connection lifetime** –∏ rate limits

### SSE

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP/2** –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è connection limit
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ ID –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º** –¥–ª—è resume –ø–æ—Å–ª–µ reconnect
3. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ retry** —Ä–∞–∑—É–º–Ω–æ (5-10 —Å–µ–∫—É–Ω–¥)
4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ cache headers** (no-cache)
5. **Compression** –¥–ª—è –±–æ–ª—å—à–∏—Ö JSON payload
6. **Heartbeat messages** –∫–∞–∂–¥—ã–µ 15-30 —Å–µ–∫—É–Ω–¥

### WebRTC

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ TURN server** –¥–ª—è fallback
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ trickle ICE** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π bitrate** –¥–ª—è –ø–ª–æ—Ö–∏—Ö —Å–µ—Ç–µ–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ connection quality** (RTCStatsReport)
5. **Graceful degradation** (–æ—Ç–∫–ª—é—á–∞–π—Ç–µ –≤–∏–¥–µ–æ –ø—Ä–∏ –ø–ª–æ—Ö–æ–π —Å–µ—Ç–∏)
6. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ media tracks** –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

### gRPC

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ deadline** –¥–ª—è –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤
2. **Retry policy** —Å exponential backoff
3. **Client-side load balancing** –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
4. **Protocol Buffers versioning** –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ latency** –∏ error rates
6. **–ö–æ–º–ø—Ä–µ—Å—Å–∏—è** –¥–ª—è –±–æ–ª—å—à–∏—Ö payload (gzip)

### Socket.IO

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –≤–µ—Ä—Å–∏–∏** client/server
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis adapter** –¥–ª—è multi-server
3. **Namespace** –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
4. **Rate limiting** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö incoming events
6. **Cleanup listeners** –ø—Ä–∏ unmount

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: 2025-12-18

**WebSocket:**
- [WebSockets Standard - WHATWG Living Standard](https://websockets.spec.whatwg.org/)
- [RFC 6455 - The WebSocket Protocol](https://datatracker.ietf.org/doc/html/rfc6455)
- [WebSocket API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API)
- [Future of WebSockets: HTTP/3 and WebTransport](https://websocket.org/guides/future-of-websockets/)

**Server-Sent Events:**
- [WebSockets vs Server-Sent Events - Ably](https://ably.com/blog/websockets-vs-sse)
- [SSE vs WebSockets - RxDB](https://rxdb.info/articles/websockets-sse-polling-webrtc-webtransport.html)
- [Server-Sent Events vs WebSockets - freeCodeCamp](https://www.freecodecamp.org/news/server-sent-events-vs-websockets/)
- [SSE vs WebSockets Comparison - WebSocket.org](https://websocket.org/comparisons/sse/)

**WebRTC:**
- [Introduction to WebRTC protocols - MDN](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Protocols)
- [WebRTC Protocol in 2025 - VideoSDK](https://www.videosdk.live/developer-hub/webrtc/webrtc-protocol)
- [WebRTC W3C Specification](https://www.w3.org/TR/webrtc/)
- [Getting started with peer connections - WebRTC.org](https://webrtc.org/getting-started/peer-connections)

**gRPC:**
- [gRPC with Bidirectional Streaming - Medium](https://medium.com/@rahul.jindal57/grpc-with-bidirectional-streaming-for-real-time-updates-df07e44e209c)
- [gRPC with TypeScript in 2025](https://caisy.io/blog/grpc-typescript)
- [gRPC Streaming - Apidog](https://apidog.com/blog/grpc-streaming/)
- [gRPC in 2025: Why Companies Switch from REST - Medium](https://medium.com/@miantalha.t08/grpc-in-2025-why-top-companies-are-switching-from-rest-36e3c6e2ec4c)

**Socket.IO:**
- [WebSocket vs Socket.IO - Ably](https://ably.com/topic/socketio-vs-websocket)
- [Socket.IO vs WebSocket Guide - Velt](https://velt.dev/blog/socketio-vs-websocket-guide-developers)
- [Socket.IO vs WebSocket - VideoSDK](https://www.videosdk.live/developer-hub/websocket/socketio-vs-websocket)
- [Socket.io vs WebSockets - CometChat](https://www.cometchat.com/blog/socket-io-vs-websockets)

---

## Related Topics

- [[network-http-evolution]] - HTTP/1.1, HTTP/2, HTTP/3 –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ real-time
- [[network-transport-layer]] - TCP vs UDP, reliability vs latency
- [[android-networking]] - Android-specific networking best practices
- [[network-load-balancing]] - Load balancing –¥–ª—è WebSocket –∏ gRPC
- [[network-security-protocols]] - TLS, mTLS, encryption –¥–ª—è real-time

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-09 ‚Äî –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏: 5 –∞–Ω–∞–ª–æ–≥–∏–π (WebSocket-—Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫, SSE-—Ä–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫, WebRTC-–ø—Ä—è–º–æ–π P2P –∑–≤–æ–Ω–æ–∫, gRPC-—ç–∫—Å–ø—Ä–µ—Å—Å-–ø–æ—á—Ç–∞, NAT Traversal-–ø–æ–∏—Å–∫ –∑–∞ –∑–∞–±–æ—Ä–æ–º), 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ real-time –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π (–≤—ã–±–æ—Ä WS –≤–º–µ—Å—Ç–æ SSE, reconnect, heartbeat, TURN fallback, gRPC streaming, backpressure), 5 –º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (—Å–ø–µ–∫—Ç—Ä latency, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞, —Ç–æ–ø–æ–ª–æ–≥–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, NAT traversal, –≤—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)*
