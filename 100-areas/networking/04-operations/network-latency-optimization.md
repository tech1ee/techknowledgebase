---
title: "Network Latency Optimization"
created: 2025-01-15
modified: 2025-01-15
tags:
  - topic/networking
  - performance
  - latency
  - type/concept
  - level/advanced
related:
  - [network-performance-optimization]]
  - "[[network-transport-layer]]"
  - "[[network-http-evolution]"
prerequisites:
  - "[[network-transport-layer]]"
  - "[[network-http-evolution]]"
status: published
---

# Network Latency Optimization

---

## Prerequisites

| –¢–µ–º–∞ | –ó–∞—á–µ–º –Ω—É–∂–Ω–æ | –ì–¥–µ –∏–∑—É—á–∏—Ç—å |
|------|-------------|-------------|
| **–°–µ—Ç–µ–≤—ã–µ –æ—Å–Ω–æ–≤—ã** | –ü–æ–Ω–∏–º–∞–Ω–∏–µ TCP, HTTP | [[network-fundamentals-for-developers]] |
| **HTTP —ç–≤–æ–ª—é—Ü–∏—è** | HTTP/2, HTTP/3 –¥–ª—è latency | [[network-http-evolution]] |
| **DevTools** | –ò–∑–º–µ—Ä–µ–Ω–∏–µ TTFB, waterfall | –ë—Ä–∞—É–∑–µ—Ä F12 |

### –î–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª

| –£—Ä–æ–≤–µ–Ω—å | –ü–æ–¥—Ö–æ–¥–∏—Ç? | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|--------------|
| **–ù–æ–≤–∏—á–æ–∫** | ‚úÖ –î–∞ | –ü–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å –≤–ª–∏—è–Ω–∏–µ |
| **Intermediate** | ‚úÖ –î–∞ | –û—Å–Ω–æ–≤–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è |
| **Advanced** | ‚úÖ –î–∞ | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ |

### –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

> üí° **Latency** = –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–æ–º –∏ –æ—Ç–≤–µ—Ç–æ–º. –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è. Throughput ‚Äî —Å–∫–æ–ª—å–∫–æ, Latency ‚Äî –∫–∞–∫ –±—ã—Å—Ç—Ä–æ.

| –¢–µ—Ä–º–∏–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ | –ê–Ω–∞–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–∞ |
|--------|----------|---------------------|
| **Latency** | –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏ | **–í—Ä–µ–º—è –≤ –ø—É—Ç–∏** ‚Äî —Å–∫–æ–ª—å–∫–æ –µ—Ö–∞—Ç—å |
| **RTT** | Round-Trip Time ‚Äî —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ | **–ü–∏–Ω–≥-–ø–æ–Ω–≥** ‚Äî –º—è—á –¥–æ–ª–µ—Ç–µ–ª –∏ –≤–µ—Ä–Ω—É–ª—Å—è |
| **TTFB** | Time To First Byte | **–ö–æ–≥–¥–∞ –Ω–∞—á–Ω—ë—Ç –≥—Ä—É–∑–∏—Ç—å—Å—è** |
| **P50/P99** | Percentiles latency | **–û–±—ã—á–Ω–∞—è/—Ö—É–¥—à–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** |
| **CDN** | Content Delivery Network | **–°–∫–ª–∞–¥ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π** |
| **Edge** | –°–µ—Ä–≤–µ—Ä –±–ª–∏–∂–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é | **–ë–ª–∏–∂–∞–π—à–∏–π —Ñ–∏–ª–∏–∞–ª** |
| **Connection Reuse** | –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | **–ù–µ –≤–µ—à–∞—Ç—å —Ç—Ä—É–±–∫—É** ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä |
| **DNS Prefetch** | –ó–∞—Ä–∞–Ω–µ–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—å DNS | **–ó–∞—Ä–∞–Ω–µ–µ —É–∑–Ω–∞—Ç—å –∞–¥—Ä–µ—Å** |
| **Preconnect** | –ó–∞—Ä–∞–Ω–µ–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ | **–ó–∞—Ä–∞–Ω–µ–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å** |
| **Jitter** | –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å latency | **–¢–æ –±—ã—Å—Ç—Ä–æ, —Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ** |

---

## –ß–∞—Å—Ç—å 1: –ò–Ω—Ç—É–∏—Ü–∏—è –±–µ–∑ –∫–æ–¥–∞

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏:** –ü–æ–Ω—è—Ç—å latency —á–µ—Ä–µ–∑ –∑–Ω–∞–∫–æ–º—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏.

### –ê–Ω–∞–ª–æ–≥–∏—è 1: Latency vs Throughput ‚Äî –¢—Ä—É–±–∞ vs –ê–≤—Ç–æ–±–∞–Ω

**–ü—É—Ç–∞–Ω–∏—Ü–∞:** "–£ –º–µ–Ω—è –≥–∏–≥–∞–±–∏—Ç, –ø–æ—á–µ–º—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥—Ä—É–∑–∏—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ?"

```
THROUGHPUT (–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å) ‚Äî —Å–∫–æ–ª—å–∫–æ –º–∞—à–∏–Ω –≤ —á–∞—Å
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöóüöó  ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ
‚îÇ        –®–∏—Ä–æ–∫–∏–π –∞–≤—Ç–æ–±–∞–Ω: 10,000 –º–∞—à–∏–Ω/—á–∞—Å               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

LATENCY (–ó–∞–¥–µ—Ä–∂–∫–∞) ‚Äî —Å–∫–æ–ª—å–∫–æ –µ–¥–µ—Ç –æ–¥–Ω–∞ –º–∞—à–∏–Ω–∞
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ú–æ—Å–∫–≤–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 7500 –∫–º ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ù—å—é-–ô–æ—Ä–∫       ‚îÇ
‚îÇ  üöó ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ñ∫       ‚îÇ
‚îÇ        –í—Ä–µ–º—è –≤ –ø—É—Ç–∏: ~50ms (—Å–∫–æ—Ä–æ—Å—Ç—å —Å–≤–µ—Ç–∞!)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç:**
- **Throughput** ‚Äî —à–∏—Ä–∏–Ω–∞ —Ç—Ä—É–±—ã (—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–ª–µ–∑–µ—Ç –∑–∞ —Å–µ–∫—É–Ω–¥—É)
- **Latency** ‚Äî –¥–ª–∏–Ω–∞ —Ç—Ä—É–±—ã (—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –¥–æ–ª–µ—Ç–∏—Ç –ø–µ—Ä–≤—ã–π –±–∞–π—Ç)
- –ì–∏–≥–∞–±–∏—Ç –Ω–µ —É—Å–∫–æ—Ä–∏—Ç RTT –¥–æ –°–®–ê ‚Äî —ç—Ç–æ —Ñ–∏–∑–∏–∫–∞!

**–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä:**
> –ü—Ä–µ–¥—Å—Ç–∞–≤—å –≤–æ–¥–æ–ø—Ä–æ–≤–æ–¥ –æ—Ç –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–æ —Ç–≤–æ–µ–≥–æ –¥–æ–º–∞. –ú–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç—Ä—É–±—É —Ç–æ–ª—â–∏–Ω–æ–π –≤ 1 –º–µ—Ç—Ä (–≥–∏–≥–∞–±–∏—Ç), –Ω–æ –µ—Å–ª–∏ –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞ 100 –∫–º, –ø–µ—Ä–≤–∞—è –∫–∞–ø–ª—è –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–π–¥—ë—Ç —á–µ—Ä–µ–∑ N —Å–µ–∫—É–Ω–¥. –®–∏—Ä–∏–Ω–∞ —Ç—Ä—É–±—ã –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è –ø–µ—Ä–≤–æ–π –∫–∞–ø–ª–∏.

---

### –ê–Ω–∞–ª–æ–≥–∏—è 2: RTT –∏ TCP Handshake ‚Äî –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—á–µ–º—É TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–∫–æ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ?

```
TCP Handshake = –î–µ–ª–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫ —Å –ø–ª–æ—Ö–æ–π —Å–≤—è–∑—å—é

–ó–≤–æ–Ω—è—â–∏–π (–ö–ª–∏–µ–Ω—Ç)              –û—Ç–≤–µ—á–∞—é—â–∏–π (–°–µ—Ä–≤–µ—Ä)
      ‚îÇ                              ‚îÇ
      ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ "–ê–ª–ª–æ, —ç—Ç–æ –í–∞—Å—è?" ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  RTT #1
      ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ "–î–∞, —Å–ª—É—à–∞—é" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
      ‚îÇ                              ‚îÇ
      ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ "–û—Ç–ª–∏—á–Ω–æ, –≥–æ—Ç–æ–≤?" ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  RTT #2
      ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ "–ì–æ—Ç–æ–≤, –≥–æ–≤–æ—Ä–∏" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
      ‚îÇ                              ‚îÇ
      ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ "–ú–æ–π –∑–∞–∫–∞–∑: ..." ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  RTT #3
      ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ "–ü–æ–Ω—è–ª, –≤–æ—Ç –æ—Ç–≤–µ—Ç" ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
      ‚îÇ                              ‚îÇ

TCP = 3 RTT –¥–æ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞!
TLS –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—â—ë 1-2 RTT!
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**
| –ú–∞—Ä—à—Ä—É—Ç | RTT | TCP+TLS (3 RTT) | –ü–µ—Ä–≤—ã–π –ø–æ–ª–µ–∑–Ω—ã–π –±–∞–π—Ç |
|---------|-----|-----------------|---------------------|
| Localhost | 0.5ms | 1.5ms | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ |
| –û–¥–∏–Ω –≥–æ—Ä–æ–¥ | 10ms | 30ms | –ó–∞–º–µ—Ç–Ω–æ |
| –ö–æ–Ω—Ç–∏–Ω–µ–Ω—Ç | 100ms | 300ms | –†–∞–∑–¥—Ä–∞–∂–∞–µ—Ç |
| –°–ø—É—Ç–Ω–∏–∫ | 600ms | 1800ms | **–ù–µ–≤—ã–Ω–æ—Å–∏–º–æ** |

**–†–µ—à–µ–Ω–∏–µ:** Connection reuse ‚Äî –Ω–µ –∫–ª–∞–¥—ë–º —Ç—Ä—É–±–∫—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞!

---

### –ê–Ω–∞–ª–æ–≥–∏—è 3: Percentiles (P50/P99) ‚Äî –û—á–µ—Ä–µ–¥—å –≤ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫—É

**–ü—Ä–æ–±–ª–µ–º–∞:** "–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ 15 –º–∏–Ω—É—Ç" ‚Äî –Ω–æ —Ç—ã –∂–¥—ë—à—å —á–∞—Å!

```
–†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –í–†–ï–ú–ï–ù–ò –ü–†–ò–Å–ú–ê (100 –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤)

–í—Ä–µ–º—è:    5   10   15   20   30   45   60   90 –º–∏–Ω
          ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ    ‚îÇ
–ü–∞—Ü–∏–µ–Ω—Ç—ã: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
          ‚ñ≤ P50 = 15 –º–∏–Ω (50% –∂–¥—É—Ç –º–µ–Ω—å—à–µ)
                           ‚ñ≤ P95 = 45 –º–∏–Ω (95% –∂–¥—É—Ç –º–µ–Ω—å—à–µ)
                                    ‚ñ≤ P99 = 60 –º–∏–Ω (99% –∂–¥—É—Ç –º–µ–Ω—å—à–µ)

–°—Ä–µ–¥–Ω–µ–µ: 18 –º–∏–Ω ‚Üê –û–ë–ú–ê–ù–ß–ò–í–û! –°–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ—Ö, –∫—Ç–æ –∂–¥—ë—Ç 60-90 –º–∏–Ω
```

**–ü–æ—á–µ–º—É P99 –≤–∞–∂–Ω–µ–µ —Å—Ä–µ–¥–Ω–µ–≥–æ:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|----------------|-------------------|
| Average | –ù–∏—á–µ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–≥–æ | –ù–∏–∫–æ–≥–¥–∞ –¥–ª—è latency! |
| P50 | –¢–∏–ø–∏—á–Ω—ã–π –æ–ø—ã—Ç | –û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ |
| P95 | –ü–ª–æ—Ö–æ–π –æ–ø—ã—Ç 1 –∏–∑ 20 | SLO –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ |
| P99 | –•—É–¥—à–∏–π –æ–ø—ã—Ç 1 –∏–∑ 100 | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã |

**–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:**
> "–ï—Å–ª–∏ —É —Ç–µ–±—è 1 –º–ª–Ω –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å, P99 = 500ms –æ–∑–Ω–∞—á–∞–µ—Ç **10,000 –∑–ª—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ**"

---

### –ê–Ω–∞–ª–æ–≥–∏—è 4: Fan-Out Problem ‚Äî –°–±–æ—Ä–∫–∞ IKEA —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –¥–æ—Å—Ç–∞–≤–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–±–∏–≤–∞–µ—Ç –≤–µ—Å—å –∑–∞–ø—Ä–æ—Å

```
–°–û–ë–ò–†–ê–ï–ú –®–ö–ê–§ (–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π fan-out)

–¢—ã –∑–∞–∫–∞–∑–∞–ª 5 –¥–µ—Ç–∞–ª–µ–π —Å —Ä–∞–∑–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤:

  –ó–∞–∫–∞–∑ #1 (–ú–æ—Å–∫–≤–∞)    ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  100ms  ‚úì
  –ó–∞–∫–∞–∑ #2 (–ü–∏—Ç–µ—Ä)     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  150ms  ‚úì
  –ó–∞–∫–∞–∑ #3 (–ö–∞–∑–∞–Ω—å)    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  200ms  ‚úì
  –ó–∞–∫–∞–∑ #4 (–°–æ—á–∏)      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  250ms  ‚úì
  –ó–∞–∫–∞–∑ #5 (–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  450ms  üò± BOTTLENECK!
                       ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
                       0    100   200   300   400   450ms

  –û–±—â–µ–µ –≤—Ä–µ–º—è: 450ms (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –°–ê–ú–´–ú –ú–ï–î–õ–ï–ù–ù–´–ú!)

  –°–±–æ—Ä–∫–∞ –Ω–∞—á–Ω—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –í–°–ï –¥–µ—Ç–∞–ª–∏ –ø—Ä–∏–µ–¥—É—Ç
```

**–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —É—Å–∏–ª–µ–Ω–∏—è:**
```
–ï—Å–ª–∏ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å P99 = 100ms (99% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ):

1 —Å–µ—Ä–≤–∏—Å:  P(< 100ms) = 99%
5 —Å–µ—Ä–≤–∏—Å–æ–≤: P(–≤—Å–µ < 100ms) = 0.99^5 = 95%  ‚Üê 5% –º–µ–¥–ª–µ–Ω–Ω—ã—Ö!
10 —Å–µ—Ä–≤–∏—Å–æ–≤: P(–≤—Å–µ < 100ms) = 0.99^10 = 90% ‚Üê 10% –º–µ–¥–ª–µ–Ω–Ω—ã—Ö!
20 —Å–µ—Ä–≤–∏—Å–æ–≤: P(–≤—Å–µ < 100ms) = 0.99^20 = 82% ‚Üê 18% –º–µ–¥–ª–µ–Ω–Ω—ã—Ö!
```

**–í—ã–≤–æ–¥:** –ö–∞–∂–¥—ã–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –≤ fan-out **—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —É—Ö—É–¥—à–∞–µ—Ç** –æ–±—â–∏–π P99!

---

### –ê–Ω–∞–ª–æ–≥–∏—è 5: TTFB vs Full Load ‚Äî –ü–µ—Ä–≤–∞—è –ª–æ–∂–∫–∞ —Å—É–ø–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å?

```
–ó–ê–ö–ê–ó –í –†–ï–°–¢–û–†–ê–ù–ï

–¢–µ–±—è –ø–æ—Å–∞–¥–∏–ª–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ –û—Ñ–∏—Ü–∏–∞–Ω—Ç –ø—Ä–∏–Ω—è–ª –∑–∞–∫–∞–∑
                   ‚îÇ
     (–æ–∂–∏–¥–∞–Ω–∏–µ)    ‚îÇ
                   ‚îÇ
–ü–µ—Ä–≤–∞—è –ª–æ–∂–∫–∞ —Å—É–ø–∞ ‚îÄ‚îº‚îÄ‚îÄ‚îÄ TTFB (Time To First Byte)
                   ‚îÇ
     (–µ–¥–∏–º)        ‚îÇ
                   ‚îÇ
–°—ä–µ–ª –≤–µ—Å—å —Å—É–ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ Full Response Time

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TTFB = 200ms  ‚îÇ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚îÇ
‚îÇ Full = 1200ms ‚îÇ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚îÇ
‚îÇ               0    200   400   600   800  1000  1200ms
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ß—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
| –ú–µ—Ç—Ä–∏–∫–∞ | –ß—Ç–æ –≤–ª–∏—è–µ—Ç | –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å |
|---------|-----------|--------------|
| **TTFB** | DNS + TCP + TLS + Server processing | CDN, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, edge computing |
| **Download** | –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ + bandwidth | Compression, lazy loading |
| **Total** | TTFB + Download + Client rendering | –í—Å—ë –≤–º–µ—Å—Ç–µ |

**–ü—Ä–∞–≤–∏–ª–æ:**
> "–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π TTFB –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –û–©–£–©–ê–ï–¢ –∫–∞–∫ '—Ç–æ—Ä–º–æ–∑–∞'"

---

## –ß–∞—Å—Ç—å 2: –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–∂–Ω–æ

> ‚ö†Ô∏è **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏:** –†–∞–∑–æ–±—Ä–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –¥–∞–∂–µ –æ–ø—ã—Ç–Ω—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ latency.

### –û—à–∏–±–∫–∞ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Average –≤–º–µ—Å—Ç–æ Percentiles

**–°–ò–ú–ü–¢–û–ú:**
```
Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "Average latency: 50ms ‚úÖ"
–ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞ —Ç–æ—Ä–º–æ–∑–∞!
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤:
- 950 –∑–∞–ø—Ä–æ—Å–æ–≤: 30ms
- 49 –∑–∞–ø—Ä–æ—Å–æ–≤: 200ms
- 1 –∑–∞–ø—Ä–æ—Å: 5000ms (—Ç–∞–π–º–∞—É—Ç –±–∞–∑—ã!)

Average = (950√ó30 + 49√ó200 + 1√ó5000) / 1000 = 43ms  ‚Üê "–í—Å—ë –æ—Ç–ª–∏—á–Ω–æ!"
P99 = 200ms  ‚Üê 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Å —Å—Ç—Ä–∞–¥–∞—é—Ç
P99.9 = 5000ms  ‚Üê 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á–∞—Å –∂–¥—ë—Ç 5 —Å–µ–∫—É–Ω–¥!
```

**–†–ï–®–ï–ù–ò–ï:**
```yaml
# Prometheus alerting - –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- alert: HighLatencyP99
  expr: histogram_quantile(0.99, rate(http_request_duration_seconds_bucket[5m])) > 0.5
  for: 5m

# –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô average –¥–ª—è latency!
# - alert: HighLatencyAvg  ‚Üê –ü–õ–û–•–û
#   expr: rate(http_request_duration_sum[5m]) / rate(http_request_duration_count[5m]) > 0.5
```

---

### –û—à–∏–±–∫–∞ 2: Naive Retries —É–±–∏–≤–∞—é—Ç —Å–∏—Å—Ç–µ–º—É

**–°–ò–ú–ü–¢–û–ú:**
```
–°–µ—Ä–≤–∏—Å –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω ‚Üí —Ç–∞–π–º–∞—É—Ç—ã ‚Üí retry storm ‚Üí –ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ù–æ—Ä–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: 1000 req/s

–°–µ—Ä–≤–∏—Å –∑–∞–º–µ–¥–ª–∏–ª—Å—è (P99: 100ms ‚Üí 500ms):
  - –ö–ª–∏–µ–Ω—Ç—ã: "–¢–∞–π–º–∞—É—Ç 200ms! –ü–æ–≤—Ç–æ—Ä—è—é!"
  - 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–µ–ª–∞—é—Ç retry

–ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É:
  - –ù–∞–≥—Ä—É–∑–∫–∞: 1000 + 200 = 1200 req/s
  - –ï—â—ë –±–æ–ª—å—à–µ —Ç–∞–π–º–∞—É—Ç–æ–≤ ‚Üí –µ—â—ë –±–æ–ª—å—à–µ retry

–ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥:
  - –ù–∞–≥—Ä—É–∑–∫–∞: 2000+ req/s (retry storm!)
  - –°–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª—ë–≥ üíÄ
```

**–†–ï–®–ï–ù–ò–ï:**
```kotlin
// Exponential backoff + jitter
val retryConfig = RetryConfig.custom<Any>()
    .maxAttempts(3)
    .waitDuration(Duration.ofMillis(100))
    .retryOnResult { response -> response.status >= 500 }
    .intervalFunction(IntervalFunction.ofExponentialRandomBackoff(
        initialInterval = Duration.ofMillis(100),
        multiplier = 2.0,
        randomizationFactor = 0.5  // Jitter!
    ))
    .build()

// Circuit breaker –¥–ª—è –∑–∞—â–∏—Ç—ã downstream
val circuitBreaker = CircuitBreaker.ofDefaults("downstream-service")
```

---

### –û—à–∏–±–∫–∞ 3: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ tail latency –≤ fan-out

**–°–ò–ú–ü–¢–û–ú:**
```
–ö–∞–∂–¥—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç P99 = 100ms (–æ—Ç–ª–∏—á–Ω–æ!)
–ù–æ –æ–±—â–∏–π P99 —Å–∏—Å—Ç–µ–º—ã = 500ms (–ø–æ—á–µ–º—É?!)
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Gateway –¥–µ–ª–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π fan-out –∫ 10 —Å–µ—Ä–≤–∏—Å–∞–º:

  –°–µ—Ä–≤–∏—Å A: P99 = 100ms
  –°–µ—Ä–≤–∏—Å B: P99 = 100ms
  ...
  –°–µ—Ä–≤–∏—Å J: P99 = 100ms

P(–≤—Å–µ 10 < 100ms) = 0.99^10 = 90.4%
P(—Ö–æ—Ç—è –±—ã 1 > 100ms) = 9.6%  ‚Üê –ü–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π 10-–π –∑–∞–ø—Ä–æ—Å!

–ï—Å–ª–∏ "–º–µ–¥–ª–µ–Ω–Ω—ã–π" —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç 300ms:
  –û–±—â–∏–π P99 —Å–∏—Å—Ç–µ–º—ã ‚âà 300ms (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è slowest!)
```

**–†–ï–®–ï–ù–ò–ï:**
```kotlin
// 1. Request hedging - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
suspend fun fetchWithHedging(services: List<Service>): Response {
    return select {
        services.forEach { service ->
            async { service.fetch() }.onAwait { it }
        }
    }
}

// 2. Deadline propagation - –æ–±—â–∏–π —Ç–∞–π–º–∞—É—Ç –Ω–∞ –≤—Å—é —Ü–µ–ø–æ—á–∫—É
val deadline = Deadline.after(500, TimeUnit.MILLISECONDS)
val response = stub.withDeadline(deadline).getData(request)

// 3. –¢—Ä–µ–±—É–π P99.9, –∞ –Ω–µ P99 –æ—Ç –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞!
```

---

### –û—à–∏–±–∫–∞ 4: CDN –∫—ç—à–∏—Ä—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç

**–°–ò–ú–ü–¢–û–ú:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B (—É—Ç–µ—á–∫–∞!)
–ò–ª–∏: "–ü–æ—á–µ–º—É –ø–æ—Å–ª–µ logout —è –≤–∏–∂—É —Å—Ç–∞—Ä—ã–π dashboard?"
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
# Nginx/CDN –∫–æ–Ω—Ñ–∏–≥ - –û–ü–ê–°–ù–û
location /api/ {
    proxy_cache_valid 200 60s;  # –ö—ç—à–∏—Ä—É–µ–º –í–°–Å –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
}

–ó–∞–ø—Ä–æ—Å 1 (User A): GET /api/profile ‚Üí {"name": "Alice", "balance": 1000}
  ‚îî‚îÄ‚îÄ CDN –∫—ç—à–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç

–ó–∞–ø—Ä–æ—Å 2 (User B): GET /api/profile ‚Üí {"name": "Alice", "balance": 1000}
  ‚îî‚îÄ‚îÄ CDN –æ—Ç–¥–∞—ë—Ç –∫—ç—à User A –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é B! üíÄ
```

**–†–ï–®–ï–ù–ò–ï:**
```nginx
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
location /api/static/ {
    # –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏–∫–∞: —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏, –∫–æ–Ω—Ñ–∏–≥–∏ –±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    proxy_cache_valid 200 3600s;
    add_header Cache-Control "public, max-age=3600";
}

location /api/user/ {
    # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –ù–ò–ö–û–ì–î–ê –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ CDN
    proxy_cache off;
    add_header Cache-Control "private, no-store, no-cache";
    add_header Vary "Authorization";  # –†–∞–∑–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ = —Ä–∞–∑–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
}
```

---

### –û—à–∏–±–∫–∞ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ baseline –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–°–ò–ú–ü–¢–û–ú:**
```
"–ú—ã –≤–∫–ª—é—á–∏–ª–∏ HTTP/2 ‚Äî —Å—Ç–∞–ª–æ –±—ã—Å—Ç—Ä–µ–µ!"
"–ê –Ω–∞—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–µ–µ?" ‚Äî "–ù—É... –±—ã—Å—Ç—Ä–µ–µ..."
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Å–ª–µ–ø—É—é:
1. –í–∫–ª—é—á–∏–ª–∏ gzip ‚Üí "–ö–∞–∂–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ"
2. –í–∫–ª—é—á–∏–ª–∏ HTTP/2 ‚Üí "–ï—â—ë –±—ã—Å—Ç—Ä–µ–µ"
3. –í–∫–ª—é—á–∏–ª–∏ BBR ‚Üí "–í—Ä–æ–¥–µ –±—ã—Å—Ç—Ä–µ–µ"
4. –ß—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å ‚Üí "–ù–µ–ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å"

–ë–µ–∑ baseline –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:
- –ò–∑–º–µ—Ä–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ü–æ–Ω—è—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ–º–æ–≥–ª–æ
- –û–±–æ—Å–Ω–æ–≤–∞—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
```

**–†–ï–®–ï–ù–ò–ï:**
```bash
# 1. Baseline –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
wrk -t4 -c100 -d60s --latency https://api.example.com/endpoint > baseline.txt

# 2. –û–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ —Ä–∞–∑
# –í–∫–ª—é—á–∞–µ–º HTTP/2

# 3. –ò–∑–º–µ—Ä—è–µ–º –ø–æ—Å–ª–µ
wrk -t4 -c100 -d60s --latency https://api.example.com/endpoint > after_http2.txt

# 4. –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º
# Baseline: P99 = 250ms
# After HTTP/2: P99 = 180ms  ‚Üê –£–ª—É—á—à–µ–Ω–∏–µ 28%!

# 5. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º
echo "HTTP/2 enabled: P99 250ms ‚Üí 180ms (-28%)" >> optimization_log.md
```

---

### –û—à–∏–±–∫–∞ 6: Connection per request –≤–º–µ—Å—Ç–æ Connection pooling

**–°–ò–ú–ü–¢–û–ú:**
```
TTFB —Ä–µ–∑–∫–æ —Ä–∞—Å—Ç—ë—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
TIME_WAIT —Å–æ–∫–µ—Ç–æ–≤ > 10,000
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ö–∞–∂–¥—ã–π HTTP –∑–∞–ø—Ä–æ—Å –±–µ–∑ connection pool:

  Request #1: DNS(20ms) + TCP(30ms) + TLS(60ms) + Request(10ms) = 120ms
  Request #2: DNS(20ms) + TCP(30ms) + TLS(60ms) + Request(10ms) = 120ms
  Request #3: DNS(20ms) + TCP(30ms) + TLS(60ms) + Request(10ms) = 120ms
  ...

  1000 –∑–∞–ø—Ä–æ—Å–æ–≤ = 120 —Å–µ–∫—É–Ω–¥ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ overhead!

  –ü–ª—é—Å: –∏—Å—á–µ—Ä–ø–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤ (65535 –º–∞–∫—Å–∏–º—É–º)
  netstat -an | grep TIME_WAIT | wc -l  ‚Üí 50,000 üò±
```

**–†–ï–®–ï–ù–ò–ï:**
```kotlin
// OkHttp —Å connection pool
val client = OkHttpClient.Builder()
    .connectionPool(ConnectionPool(
        maxIdleConnections = 100,
        keepAliveDuration = 5,
        timeUnit = TimeUnit.MINUTES
    ))
    .build()

// Ktor —Å connection pool
val client = HttpClient(CIO) {
    engine {
        maxConnectionsCount = 1000
        endpoint {
            maxConnectionsPerRoute = 100
            pipelineMaxSize = 20
            keepAliveTime = 5000
            connectTimeout = 5000
        }
    }
}
```

```
–° Connection Pool:
  Request #1: DNS(20ms) + TCP(30ms) + TLS(60ms) + Request(10ms) = 120ms
  Request #2-1000: Request(10ms) = 10ms  ‚Üê –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ!

  1000 –∑–∞–ø—Ä–æ—Å–æ–≤ = 120ms + 999√ó10ms = ~10 —Å–µ–∫—É–Ω–¥ (vs 120 —Å–µ–∫—É–Ω–¥!)
```

---

## –ß–∞—Å—Ç—å 3: –ú–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

> üß† **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏:** –î–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥—É–º–∞—Ç—å –æ latency optimization, —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.

### –ú–æ–¥–µ–ª—å 1: Waterfall Analysis ‚Äî –†–∞–∑–±–∏—Ä–∞–µ–º –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

**–ü—Ä–∏–Ω—Ü–∏–ø:** Latency = —Å—É–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π.

```
WATERFALL –∑–∞–ø—Ä–æ—Å–∞ –∫ API:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ DNS Lookup         ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  50ms       ‚îÇ
‚îÇ TCP Connect        ‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  30ms       ‚îÇ
‚îÇ TLS Handshake      ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  60ms       ‚îÇ
‚îÇ Request Send       ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  5ms        ‚îÇ
‚îÇ Server Processing  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  200ms ‚ö†Ô∏è   ‚îÇ
‚îÇ Response Download  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà  40ms       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TOTAL: 385ms       DNS(13%) TCP(8%) TLS(16%) Server(52%) DL(10%)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Server Processing = 52% –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –°–Æ–î–ê –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é!
```

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
```bash
# curl —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º timing
curl -w "DNS: %{time_namelookup}s\nTCP: %{time_connect}s\nTLS: %{time_appconnect}s\nTTFB: %{time_starttransfer}s\nTotal: %{time_total}s\n" -o /dev/null -s https://api.example.com
```

**–ß–µ–∫-–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ï—Å–ª–∏ > X | –†–µ—à–µ–Ω–∏–µ |
|-----------|----------|---------|
| DNS | > 50ms | DNS prefetch, –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à |
| TCP | > 1 RTT | Connection reuse, TCP Fast Open |
| TLS | > 2 RTT | TLS 1.3, session resumption |
| Server | > 100ms | Profiling, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, DB –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
| Download | > 100ms | Compression, CDN, lazy loading |

---

### –ú–æ–¥–µ–ª—å 2: Latency Budget ‚Äî –ë—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥

**–ü—Ä–∏–Ω—Ü–∏–ø:** –†–∞–∑–¥–∞–π –±—é–¥–∂–µ—Ç –Ω–∞ latency –∫–∞–∂–¥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É —Å–∏—Å—Ç–µ–º—ã.

```
–û–ë–©–ò–ô –ë–Æ–î–ñ–ï–¢: P99 < 500ms –¥–ª—è checkout API

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    BUDGET ALLOCATION                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        ‚îÇ –ë—é–¥–∂–µ—Ç (P99) ‚îÇ –°—Ç–∞—Ç—É—Å                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ API Gateway      ‚îÇ    30ms      ‚îÇ ‚úÖ Actual: 25ms           ‚îÇ
‚îÇ Auth Service     ‚îÇ    50ms      ‚îÇ ‚úÖ Actual: 40ms           ‚îÇ
‚îÇ Cart Service     ‚îÇ    80ms      ‚îÇ ‚ö†Ô∏è Actual: 90ms (over!)   ‚îÇ
‚îÇ Inventory Check  ‚îÇ   100ms      ‚îÇ ‚úÖ Actual: 80ms           ‚îÇ
‚îÇ Payment Service  ‚îÇ   150ms      ‚îÇ ‚úÖ Actual: 120ms          ‚îÇ
‚îÇ Order Creation   ‚îÇ    50ms      ‚îÇ ‚úÖ Actual: 45ms           ‚îÇ
‚îÇ Buffer/Overhead  ‚îÇ    40ms      ‚îÇ –†–µ–∑–µ—Ä–≤ –Ω–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TOTAL            ‚îÇ   500ms      ‚îÇ Actual: 400ms + Buffer    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Cart Service –ø—Ä–µ–≤—ã—Å–∏–ª –±—é–¥–∂–µ—Ç ‚Üí –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω–Ω–æ —Ç–∞–º!
```

**–ü—Ä–∞–≤–∏–ª–∞ –±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. **–†–µ–∑–µ—Ä–≤ 10-20%** ‚Äî –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–ª—è–π buffer
2. **–ö—Ä–∏—Ç–∏—á–Ω—ã–π –ø—É—Ç—å** ‚Äî –ø–æ–ª—É—á–∞–µ—Ç –±–æ–ª—å—à–∏–π –±—é–¥–∂–µ—Ç
3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã** ‚Äî –±—é–¥–∂–µ—Ç = max(–≤—Å–µ), –Ω–µ —Å—É–º–º–∞
4. **–ü–µ—Ä–µ—Å–º–æ—Ç—Ä –∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ** ‚Äî —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–µ–Ω—è—é—Ç—Å—è

---

### –ú–æ–¥–µ–ª—å 3: 80/20 Rule –¥–ª—è Latency ‚Äî –ì–¥–µ –∏—Å–∫–∞—Ç—å bottleneck

**–ü—Ä–∏–Ω—Ü–∏–ø:** 80% latency –æ–±—ã—á–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è 20% –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

```
–¢–ò–ü–ò–ß–ù–û–ï –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï LATENCY:

–ö–∞—Ç–µ–≥–æ—Ä–∏—è             ‚îÇ % –≤—Ä–µ–º–µ–Ω–∏ ‚îÇ –ì–¥–µ –∏—Å–∫–∞—Ç—å
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Database queries      ‚îÇ    40%    ‚îÇ Slow query log, N+1, –∏–Ω–¥–µ–∫—Å—ã
Network I/O           ‚îÇ    25%    ‚îÇ RTT, DNS, TLS, fan-out
Serialization         ‚îÇ    15%    ‚îÇ JSON parsing, protobuf
Business logic        ‚îÇ    10%    ‚îÇ CPU-bound –æ–ø–µ—Ä–∞—Ü–∏–∏
Framework overhead    ‚îÇ     5%    ‚îÇ Middleware, interceptors
Other                 ‚îÇ     5%    ‚îÇ GC pauses, locks, etc.

GOLDEN RULE:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Database ‚Üí 2. Network ‚Üí 3. Serialization ‚Üí 4. Code    ‚îÇ
‚îÇ  –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞!    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Quick wins –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | Quick Win | –≠—Ñ—Ñ–µ–∫—Ç |
|-----------|-----------|--------|
| Database | –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ WHERE clause | -50-90% query time |
| Database | –£—Å—Ç—Ä–∞–Ω–∏—Ç—å N+1 (batch fetch) | -80% –∑–∞–ø—Ä–æ—Å–æ–≤ |
| Network | Connection pooling | -60% –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö |
| Network | CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ | -70% TTFB |
| Serialization | Protobuf –≤–º–µ—Å—Ç–æ JSON | -40% parsing time |

---

### –ú–æ–¥–µ–ª—å 4: Tail Latency Amplification ‚Äî –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ

**–ü—Ä–∏–Ω—Ü–∏–ø:** –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö tail latency —Ä–∞—Å—Ç—ë—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Å fan-out.

```
–§–û–†–ú–£–õ–ê –£–°–ò–õ–ï–ù–ò–Ø:

P(–æ–±—â–∏–π –∑–∞–ø—Ä–æ—Å < T) = P(—Å–µ—Ä–≤–∏—Å < T)^N

–ì–¥–µ N = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

–ü–†–ò–ú–ï–†:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å P99 = 100ms (99% –∑–∞–ø—Ä–æ—Å–æ–≤ < 100ms)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Fan-out (N)    ‚îÇ P(–≤—Å–µ < T)   ‚îÇ % –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1 —Å–µ—Ä–≤–∏—Å       ‚îÇ 99.0%        ‚îÇ 1.0%                         ‚îÇ
‚îÇ 5 —Å–µ—Ä–≤–∏—Å–æ–≤     ‚îÇ 95.1%        ‚îÇ 4.9%                         ‚îÇ
‚îÇ 10 —Å–µ—Ä–≤–∏—Å–æ–≤    ‚îÇ 90.4%        ‚îÇ 9.6% ‚Üê –ø–æ—á—Ç–∏ 1 –∏–∑ 10!        ‚îÇ
‚îÇ 20 —Å–µ—Ä–≤–∏—Å–æ–≤    ‚îÇ 81.8%        ‚îÇ 18.2% ‚Üê –ø–æ—á—Ç–∏ 1 –∏–∑ 5!        ‚îÇ
‚îÇ 50 —Å–µ—Ä–≤–∏—Å–æ–≤    ‚îÇ 60.5%        ‚îÇ 39.5% ‚Üê 2 –∏–∑ 5 –º–µ–¥–ª–µ–Ω–Ω—ã–µ!    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–æ—Ä—å–±—ã:**
```
1. HEDGED REQUESTS
   –û—Ç–ø—Ä–∞–≤–ª—è–µ–º 2+ –∫–æ–ø–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ ‚Üí –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç

   Request ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚ñ∫ Service Instance A ‚îÄ‚îÄ‚ñ∫ Response (–±—ã—Å—Ç—Ä—ã–π)
             ‚îî‚îÄ‚îÄ‚ñ∫ Service Instance B ‚îÄ‚îÄ‚ñ∫ Response (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º)

2. BACKUP REQUESTS
   –ñ–¥—ë–º T –º—Å, –µ—Å–ª–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º backup

   t=0:   Request ‚îÄ‚îÄ‚ñ∫ Instance A
   t=T:   –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞? ‚îÄ‚îÄ‚ñ∫ Instance B (backup)
   t=T+x: –ë–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç

3. DEADLINE PROPAGATION
   –û–±—â–∏–π deadline –¥–ª—è –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏

   Gateway (deadline=500ms)
     ‚Üí Service A (remaining=480ms)
       ‚Üí Service B (remaining=400ms)
         ‚Üí –û—Ç–º–µ–Ω—è–µ–º –µ—Å–ª–∏ deadline –∏—Å—Ç—ë–∫
```

---

### –ú–æ–¥–µ–ª—å 5: Latency vs Consistency Trade-off ‚Äî –°–∫–æ—Ä–æ—Å—Ç—å vs –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ß–∞—Å—Ç–æ –º–æ–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å consistency –Ω–∞ latency (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç).

```
–°–ü–ï–ö–¢–† TRADE-OFFS:

Strong Consistency                         Eventual Consistency
(–º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —Ç–æ—á–Ω–æ)                       (–±—ã—Å—Ç—Ä–æ, –Ω–æ "–ø–æ—á—Ç–∏" —Ç–æ—á–Ω–æ)
        ‚îÇ                                            ‚îÇ
        ‚ñº                                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ
‚îÇ ‚îÇ       ‚îÇ           ‚îÇ              ‚îÇ                ‚îÇ         ‚îÇ
‚îÇ Sync    2PC     Read-your-    Async         CDN Cache        ‚îÇ
‚îÇ Writes           writes      Replication    (stale data)     ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ Latency: 500ms+ ‚Üí 200ms  ‚Üí  100ms    ‚Üí   50ms   ‚Üí   10ms     ‚îÇ
‚îÇ Consistency: ‚ñà‚ñà‚ñà‚ñà ‚Üí ‚ñà‚ñà‚ñà   ‚Üí  ‚ñà‚ñà      ‚Üí   ‚ñà      ‚Üí   ‚ñë        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ—à–∞—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:**
| –í–æ–ø—Ä–æ—Å | –ï—Å–ª–∏ –î–ê | –ï—Å–ª–∏ –ù–ï–¢ |
|--------|---------|----------|
| –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏? | Strong consistency | Eventual OK |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ? | Read-your-writes | Eventual OK |
| –î–∞–Ω–Ω—ã–µ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ? | Aggressive caching | Short TTL |
| –û—à–∏–±–∫–∞ = –ø–æ—Ç–µ—Ä—è –¥–µ–Ω–µ–≥? | Strong + latency penalty | Eventual + speed |

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
```
1. READ-YOUR-WRITES (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å)
   - Write ‚Üí Primary DB (slow, consistent)
   - Read —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö ‚Üí Primary DB
   - Read —á—É–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö ‚Üí Replica (fast, eventually consistent)

2. STALE-WHILE-REVALIDATE (–¥–ª—è –∫—ç—à–∞)
   - –û—Ç–¥–∞—ë–º stale –¥–∞–Ω–Ω—ã–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (fast!)
   - –í —Ñ–æ–Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à (consistency)

   Cache-Control: max-age=60, stale-while-revalidate=3600

3. OPTIMISTIC UI (–¥–ª—è UX)
   - UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (optimistic)
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª–æ–Ω–∏–ª ‚Üí rollback
   - Latency = 0ms (perceived), consistency = eventual
```

---

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

**Latency (–∑–∞–¥–µ—Ä–∂–∫–∞)** ‚Äî —ç—Ç–æ –≤—Ä–µ–º—è –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ–º –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞ –æ—Ç–≤–µ—Ç–∞. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç throughput (–ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏), latency –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è–µ—Ç –Ω–∞ **–≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º**.

### –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏

| –ü–æ—Ä–æ–≥        | –í–æ—Å–ø—Ä–∏—è—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º                      |
|-------------|----------------------------------------------|
| < 100ms     | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç —Å—Ä–∞–∑—É           |
| 100-300ms   | –ó–∞–º–µ—Ç–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, –Ω–æ –ø—Ä–∏–µ–º–ª–µ–º–æ              |
| 300-1000ms  | –°–∏—Å—Ç–µ–º–∞ "–¥—É–º–∞–µ—Ç", –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∂–¥—ë—Ç          |
| > 1 —Å–µ–∫—É–Ω–¥—ã | –ü–æ—Ç–µ—Ä—è –≤–Ω–∏–º–∞–Ω–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–ª–µ–∫–∞–µ—Ç—Å—è    |
| > 10 —Å–µ–∫—É–Ω–¥ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ö–æ–¥–∏—Ç                          |

> **Google –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:** –∫–∞–∂–¥—ã–µ 100ms –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–Ω–∏–∂–∞—é—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é –Ω–∞ 1%.

### –ë–∏–∑–Ω–µ—Å-–≤–ª–∏—è–Ω–∏–µ

- **Amazon:** 100ms –∑–∞–¥–µ—Ä–∂–∫–∏ = -1% –ø—Ä–æ–¥–∞–∂ (~$1.6 –º–ª—Ä–¥/–≥–æ–¥)
- **Google:** 500ms –∑–∞–¥–µ—Ä–∂–∫–∏ = -20% –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–§–∏–Ω—Ç–µ—Ö:** >10ms = –ø–æ—Ç–µ—Ä—è –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ latency

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã latency

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   DNS   ‚îÇ TCP      ‚îÇ    TLS     ‚îÇ   Request    ‚îÇ Server   ‚îÇResponse‚îÇ
‚îÇ Lookup  ‚îÇHandshake ‚îÇ Handshake  ‚îÇ  Transfer    ‚îÇProcessing‚îÇTransfer‚îÇ
‚îÇ  20-    ‚îÇ  1 RTT   ‚îÇ  1-2 RTT   ‚îÇ   Network    ‚îÇ Backend  ‚îÇNetwork ‚îÇ
‚îÇ 200ms   ‚îÇ          ‚îÇ            ‚îÇ              ‚îÇ          ‚îÇ        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Round-Trip Time (RTT)

**RTT** ‚Äî –≤—Ä–µ–º—è –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∞–∫–µ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞. –≠—Ç–æ –±–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è latency.

| –ú–∞—Ä—à—Ä—É—Ç                    | –¢–∏–ø–∏—á–Ω—ã–π RTT     |
|---------------------------|------------------|
| Localhost                  | < 1ms            |
| –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (LAN)       | 1-5ms            |
| –ì–æ—Ä–æ–¥ ‚Üí –≥–æ—Ä–æ–¥ (–æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω)| 10-30ms          |
| –ú–µ–∂–∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–ª—å–Ω—ã–π         | 100-200ms        |
| –°–ø—É—Ç–Ω–∏–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç       | 500-700ms        |

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π RTT –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–∫–æ—Ä–æ—Å—Ç—å—é —Å–≤–µ—Ç–∞:**
- –ú–æ—Å–∫–≤–∞ ‚Üí –ù—å—é-–ô–æ—Ä–∫ (7500 –∫–º): –º–∏–Ω–∏–º—É–º ~50ms (—Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–µ–ª)
- –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: 100-150ms –∏–∑-–∑–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

### –¢–∏–ø—ã latency –º–µ—Ç—Ä–∏–∫

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|----------|-------------------|
| **P50** (–º–µ–¥–∏–∞–Ω–∞) | 50% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è | –û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ |
| **P95** | 95% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ | SLO –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ |
| **P99** | 99% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ | –í—ã—è–≤–ª–µ–Ω–∏–µ "—Ö–≤–æ—Å—Ç–æ–≤—ã—Ö" –∑–∞–¥–µ—Ä–∂–µ–∫ |
| **P99.9** | 99.9% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã |

> **–í–∞–∂–Ω–æ:** –°—Ä–µ–¥–Ω–µ–µ (average) ‚Äî –ø–ª–æ—Ö–∞—è –º–µ—Ç—Ä–∏–∫–∞! –û–Ω–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Ö–≤–æ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫.

### –£—Å–∏–ª–µ–Ω–∏–µ latency –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ 5 —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –∫–∞–∂–¥—ã–π —Å P99 = 100ms:

```
P(–≤—Å–µ 5 —Å–µ—Ä–≤–∏—Å–æ–≤ < 100ms) = 0.99^5 ‚âà 95%
```

–¢–æ –µ—Å—Ç—å **5% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—É–¥—É—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ 100ms!** –î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–±—â–µ–≥–æ P99 = 100ms –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å P99.8 ‚âà 100ms.

---

## –ò–∑–º–µ—Ä–µ–Ω–∏–µ latency

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```bash
# –ë–∞–∑–æ–≤—ã–π ping (ICMP)
ping -c 10 google.com

# –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π: TCP ping (–Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ ICMP ping
hping3 -S -p 443 -c 10 google.com

# MTR - traceroute + ping (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π)
mtr --report --report-cycles 100 google.com

# HTTP latency —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
curl -w "@curl-format.txt" -o /dev/null -s https://example.com
```

**curl-format.txt** –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏:
```
     time_namelookup:  %{time_namelookup}s\n
        time_connect:  %{time_connect}s\n
     time_appconnect:  %{time_appconnect}s\n
    time_pretransfer:  %{time_pretransfer}s\n
       time_redirect:  %{time_redirect}s\n
  time_starttransfer:  %{time_starttransfer}s\n
                     ----------\n
          time_total:  %{time_total}s\n
```

### TTFB vs Total Time

| –ú–µ—Ç—Ä–∏–∫–∞ | –ß—Ç–æ –∏–∑–º–µ—Ä—è–µ—Ç | –§–æ—Ä–º—É–ª–∞ |
|---------|-------------|---------|
| **TTFB** | DNS + Connect + TLS + Server Response | –î–æ –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞ –¥–∞–Ω–Ω—ã—Ö |
| **Total Time** | TTFB + Content Transfer | –ü–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ |

### –°–µ—Ç–µ–≤—ã–µ —Ç–µ—Å—Ç–µ—Ä—ã

```bash
# Netperf - TCP latency (–ª—É—á—à–µ —á–µ–º ping –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
netperf -H server -t TCP_RR -l 60

# –†–µ–∑—É–ª—å—Ç–∞—Ç: Transaction Rate (trans/sec)
# Latency = 1000 / Transaction Rate (ms)

# iPerf3 - —Ç–æ–ª—å–∫–æ throughput –∏ jitter, –ù–ï latency
iperf3 -c server -t 30
```

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è TCP latency

### –ü–æ—á–µ–º—É TCP –¥–æ–±–∞–≤–ª—è–µ—Ç latency

**TCP —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏, –Ω–µ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏.** –ö–∞–∂–¥—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:
- **Handshake** ‚Äî –ø—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **Slow Start** ‚Äî –Ω–µ –¥–æ–≤–µ—Ä—è–µ–º —Å–µ—Ç–∏, –Ω–∞—á–∏–Ω–∞–µ–º —Å –º–∞–ª–µ–Ω—å–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- **ACK –æ–∂–∏–¥–∞–Ω–∏–µ** ‚Äî –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
- **Retransmissions** ‚Äî –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç stream

**–¶–µ–ª—å TCP latency optimization:** —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, —É–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—É—é –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å. –ú—ã –∑–Ω–∞–µ–º —Å–≤–æ—é —Å–µ—Ç—å –ª—É—á—à–µ, —á–µ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ defaults 1980-—Ö –≥–æ–¥–æ–≤.

### TCP Handshake (1 RTT)

–ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç **3-way handshake**:

```
Client                    Server
  |                          |
  |-------- SYN ------------>|  RTT/2
  |<------ SYN-ACK ---------|  RTT/2
  |-------- ACK ------------>|  (–¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –∏–¥—Ç–∏ –≤–º–µ—Å—Ç–µ)
  |                          |
  ========= 1 RTT ============
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π handshake = –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏.

### TCP Fast Open (TFO)

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —É–∂–µ –≤ SYN-–ø–∞–∫–µ—Ç–µ:

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Linux —Å–µ—Ä–≤–µ—Ä–µ
echo 3 > /proc/sys/net/ipv4/tcp_fastopen
# 1 = –∫–ª–∏–µ–Ω—Ç, 2 = —Å–µ—Ä–≤–µ—Ä, 3 = –æ–±–∞

# Nginx
listen 443 ssl fastopen=256;
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è TFO:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–Ω—É–∂–µ–Ω cookie)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ SYN
- –£—è–∑–≤–∏–º –∫ replay-–∞—Ç–∞–∫–∞–º (–±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)

### TCP Slow Start

–ù–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç —Å –º–∞–ª–µ–Ω—å–∫–æ–≥–æ **congestion window (cwnd)**:

```
Initial cwnd = 10 segments (14KB –ø—Ä–∏–º–µ—Ä–Ω–æ)
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ ACK: cwnd —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–º, –¥–∞–∂–µ –Ω–∞ –±—ã—Å—Ç—Ä–æ–º –∫–∞–Ω–∞–ª–µ.

**–†–µ—à–µ–Ω–∏–µ ‚Äî —É–≤–µ–ª–∏—á–∏—Ç—å initial cwnd:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
ip route show | grep initcwnd

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å initcwnd = 10 (RFC 6928)
ip route change default via 192.168.1.1 initcwnd 10 initrwnd 10
```

> **Google:** —É–≤–µ–ª–∏—á–µ–Ω–∏–µ initcwnd –¥–æ 10 —É–ª—É—á—à–∞–µ—Ç latency –Ω–∞ ~10% –¥–ª—è –≤—ã—Å–æ–∫–æ-RTT —Å–µ—Ç–µ–π.

### Keep-Alive –∏ Connection Reuse

**–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** ‚Äî —Å–∞–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–Ω–∏–∂–µ–Ω–∏—è latency:

```nginx
# Nginx upstream keepalive
upstream backend {
    server 127.0.0.1:8080;
    keepalive 32;  # –ü—É–ª –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
}

server {
    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";  # –û—Ç–∫–ª—é—á–∞–µ–º "close"
        proxy_pass http://backend;
    }
}
```

---

## TLS Latency –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ü–æ—á–µ–º—É TLS ‚Äî –≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ latency –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤–µ–±–µ

**HTTPS —Å—Ç–∞–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º.** –ë—Ä–∞—É–∑–µ—Ä—ã –ø–æ–º–µ—á–∞—é—Ç HTTP –∫–∞–∫ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π, Google –ø–æ–Ω–∏–∂–∞–µ—Ç HTTP —Å–∞–π—Ç—ã –≤ –ø–æ–∏—Å–∫–µ, HTTP/2 –∏ HTTP/3 —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ TLS. –ù–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç latency:
- **Key exchange** ‚Äî –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ–± –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö –∏ –∫–ª—é—á–∞—Ö
- **Certificate verification** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–µ—Ä–≤–µ—Ä–∞
- **OCSP check** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –æ—Ç–æ–∑–≤–∞–Ω

**TLS 1.2 = 2 RTT –¥–æ –ø–µ—Ä–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.** –î–ª—è WAN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å 100ms RTT ‚Äî —ç—Ç–æ 200ms —Ç–æ–ª—å–∫–æ –Ω–∞ handshake. TLS 1.3 —Å–æ–∫—Ä–∞—Ç–∏–ª –¥–æ 1 RTT, –∞ 0-RTT –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π).

### TLS 1.2 vs TLS 1.3

| –í–µ—Ä—Å–∏—è | Handshake RTT | –° Session Resumption |
|--------|---------------|---------------------|
| TLS 1.2 | 2 RTT | 1 RTT |
| TLS 1.3 | 1 RTT | 0-RTT (Early Data) |

### TLS 1.3 0-RTT (Early Data)

–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ **–¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è handshake**:

```
Client                           Server
  |                                |
  |-- ClientHello + Early Data --->|  –î–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É!
  |<----- ServerHello + ... ------|
  |                                |
```

**Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```nginx
ssl_early_data on;
ssl_session_cache shared:SSL:10m;
ssl_session_timeout 1d;

# –ó–∞—â–∏—Ç–∞ –æ—Ç replay-–∞—Ç–∞–∫
proxy_set_header Early-Data $ssl_early_data;
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å 0-RTT:**
- –£—è–∑–≤–∏–º –∫ **replay-–∞—Ç–∞–∫–∞–º**
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è **GET/HEAD** –±–µ–∑ side effects
- –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞

### Session Resumption

```nginx
# Session tickets (stateless)
ssl_session_tickets on;
ssl_session_ticket_key /etc/nginx/ticket.key;

# Session cache (stateful, –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)
ssl_session_cache shared:SSL:50m;
```

**~40% HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** ‚Äî —ç—Ç–æ resumption, —ç–∫–æ–Ω–æ–º–∏—è 1 RTT –¥–ª—è –∫–∞–∂–¥–æ–≥–æ!

---

## DNS Latency –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –°–∫—Ä—ã—Ç—ã–π –≤—Ä–∞–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**DNS lookup –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ.** –ü–æ–∫–∞ –±—Ä–∞—É–∑–µ—Ä –Ω–µ —É–∑–Ω–∞–µ—Ç IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –¥–∞–∂–µ –Ω–∞—á–∞—Ç—å TCP handshake. –ù–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å 50+ —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ (fonts, analytics, ads, CDN, API) ‚Äî —ç—Ç–æ 50 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

**–ü–æ—á–µ–º—É DNS latency –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏–≤–∞—é—Ç:**
- –û–±—ã—á–Ω–æ —ç—Ç–æ 20-50ms ‚Äî –∫–∞–∂–µ—Ç—Å—è –º–µ–ª–æ—á—å—é
- –ù–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ü–ï–†–ï–î –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç rendering
- –ü—Ä–∏ cache miss ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ 200ms
- –ú–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –¥–æ–±–∞–≤–ª—è—é—Ç –µ—â—ë –±–æ–ª—å—à–µ latency

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –∏ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞—Ç—å DNS –¥–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö.

### DNS Lookup –≤—Ä–µ–º—è

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –í—Ä–µ–º—è |
|-----------|-------|
| –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ | 0ms |
| –ö—ç—à –û–° | 0-1ms |
| –õ–æ–∫–∞–ª—å–Ω—ã–π DNS-—Ä–µ–∑–æ–ª–≤–µ—Ä | 1-10ms |
| –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å | 20-200ms |

### DNS Prefetch

–†–µ–∑–æ–ª–≤–∏—Ç DNS –∑–∞—Ä–∞–Ω–µ–µ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤:

```html
<!-- DNS prefetch –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//cdn.example.com">
<link rel="dns-prefetch" href="//analytics.google.com">
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –¥–ª—è –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã.

### Preconnect

–í—ã–ø–æ–ª–Ω—è–µ—Ç DNS + TCP + TLS –∑–∞—Ä–∞–Ω–µ–µ:

```html
<!-- Preconnect –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://api.example.com">

<!-- Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ -->
<link rel="dns-prefetch" href="//fonts.gstatic.com">
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–∞–∫—Å–∏–º—É–º **4-6 preconnect** (—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–æ—Ä–æ–≥–∏–µ)
- –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π `dns-prefetch`

> **Chrome:** preconnect —É–ª—É—á—à–∏–ª Time To Interactive –ø–æ—á—Ç–∏ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É.

### –ë—ã—Å—Ç—Ä—ã–π DNS-—Ä–µ–∑–æ–ª–≤–µ—Ä

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å DNS
dig @8.8.8.8 example.com | grep "Query time"
dig @1.1.1.1 example.com | grep "Query time"

# Cloudflare 1.1.1.1 ‚Äî –æ–±—ã—á–Ω–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π
# Google 8.8.8.8 ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω—ã–π
```

---

## HTTP/2 –∏ HTTP/3

### –≠–≤–æ–ª—é—Ü–∏—è HTTP –∏ –±–æ—Ä—å–±–∞ —Å latency

**HTTP/1.1 –±—ã–ª —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –Ω–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.** –û–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∑–∞ —Ä–∞–∑. –ë—Ä–∞—É–∑–µ—Ä—ã –æ–±—Ö–æ–¥–∏–ª–∏ —ç—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º 6-8 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –Ω–æ –∫–∞–∂–¥–æ–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π handshake, –æ—Ç–¥–µ–ª—å–Ω—ã–π TLS negotiation, –æ—Ç–¥–µ–ª—å–Ω—ã–π slow start.

**HTTP/2 –¥–æ–±–∞–≤–∏–ª multiplexing:** –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö streams. –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ handshakes, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ "–ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ù–æ –æ—Å—Ç–∞–ª–∞—Å—å –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî TCP-level blocking: –ø–æ—Ç–µ—Ä—è –æ–¥–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –í–°–ï streams.

**HTTP/3 (QUIC) —Ä–µ—à–∞–µ—Ç TCP blocking:** –∫–∞–∂–¥—ã–π stream –Ω–µ–∑–∞–≤–∏—Å–∏–º –Ω–∞ —É—Ä–æ–≤–Ω–µ transport. –ü–ª—é—Å 0-RTT connection establishment. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π —Å packet loss.

### HTTP/2 Multiplexing

HTTP/1.1 –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî **Head-of-Line Blocking (HOL)**:
- –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç 6-8 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –¥–æ–º–µ–Ω—É
- –ö–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 1 –∑–∞–ø—Ä–æ—Å –∑–∞ —Ä–∞–∑

HTTP/2 —Ä–µ—à–µ–Ω–∏–µ ‚Äî **multiplexing**:
- 1 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö streams
- –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ handshakes

```
HTTP/1.1:  [====]  [====]  [====]  (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)

HTTP/2:    [====]
           [======]
           [===]                   (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
```

### TCP-level HOL –≤ HTTP/2

–ü—Ä–æ–±–ª–µ–º–∞: –ø–æ—Ç–µ—Ä—è 1 –ø–∞–∫–µ—Ç–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç **–≤—Å–µ** streams:

```
Stream 1: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  (–∂–¥—ë—Ç –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –ø–∞–∫–µ—Ç)
Stream 2: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  (—Ç–æ–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω!)
Stream 3: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  (–∏ —ç—Ç–æ—Ç —Ç–æ–∂–µ!)
```

### HTTP/3 (QUIC)

QUIC —Ä–µ—à–∞–µ—Ç TCP HOL ‚Äî –∫–∞–∂–¥—ã–π stream –Ω–µ–∑–∞–≤–∏—Å–∏–º:

```
Stream 1: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  (–∂–¥—ë—Ç)
Stream 2: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  (–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç!)
Stream 3: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  (–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç!)
```

**Latency –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ QUIC:**
- 0-RTT connection establishment
- –ù–µ—Ç TCP HOL blocking
- –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–µ—Ç–∏ (connection migration)

**Google —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- -3.6% latency –¥–ª—è Google Search
- -15.3% buffering –¥–ª—è YouTube

**–ö–æ–≥–¥–∞ QUIC –≤—ã–≥–æ–¥–µ–Ω:**
- –í—ã—Å–æ–∫–∏–π packet loss (>1%)
- –ú–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏
- –ö–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (< 1MB –¥–∞–Ω–Ω—ã—Ö)

**–ö–æ–≥–¥–∞ TCP –ª—É—á—à–µ:**
- –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏ —Å –Ω–∏–∑–∫–∏–º loss
- –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã, –¥–æ–ª–≥–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –í—ã—Å–æ–∫–∏–π throughput (QUIC –∏–º–µ–µ—Ç –±–æ–ª—å—à–∏–π CPU overhead)

---

## Mobile Network Latency

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –¢–∏–ø–∏—á–Ω—ã–π Latency | Throughput |
|-----------|-----------------|------------|
| 3G        | 100-500ms       | 1-5 Mbps   |
| 4G/LTE    | 20-50ms         | 10-50 Mbps |
| 5G        | 1-10ms          | 100+ Mbps  |
| WiFi (–¥–æ–º–∞—à–Ω–∏–π) | 2-50ms   | Varies     |
| WiFi (–ø—É–±–ª–∏—á–Ω—ã–π) | 50-200ms | Varies   |

### 5G Latency: —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å vs –º–∞—Ä–∫–µ—Ç–∏–Ω–≥

| –ó–∞—è–≤–ª–µ–Ω–∏—è | –†–µ–∞–ª—å–Ω–æ—Å—Ç—å |
|-----------|-----------|
| < 1ms | –¢–æ–ª—å–∫–æ –≤ –∏–¥–µ–∞–ª—å–Ω—ã—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö |
| 1-5ms | Edge computing, –ø—Ä—è–º–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –¥–æ –≤—ã—à–∫–∏ |
| 8-12ms | –¢–∏–ø–∏—á–Ω—ã–π air latency –±–µ–∑ –ø–æ–º–µ—Ö |
| 10-30ms | –†–µ–∞–ª—å–Ω—ã–π end-to-end latency |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö

1. **–ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤** ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = radio wake-up latency
2. **Bundling** ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–π –º–µ–ª–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
3. **HTTP/3** ‚Äî –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å packet loss –≤ cellular
4. **Offline-first** ‚Äî Service Workers –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

## Connection Pooling

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –ë–î:
1. TCP handshake: 1 RTT
2. TLS (–µ—Å–ª–∏ –µ—Å—Ç—å): 1-2 RTT
3. Database authentication: 1+ RTT
4. **PostgreSQL:** fork –ø—Ä–æ—Ü–µ—Å—Å–∞ + –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–ë–µ–∑ –ø—É–ª–∞:** –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = 50-100ms overhead

### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞

```
pool_size = (2 √ó CPU cores) –¥–æ (4 √ó CPU cores)
```

**HikariCP —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è PostgreSQL:**
```java
maximumPoolSize = 10  // –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
minimumIdle = 10      // = maximumPoolSize –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ latency
connectionTimeout = 30000  // 30 —Å–µ–∫—É–Ω–¥
idleTimeout = 600000  // 10 –º–∏–Ω—É—Ç
```

### PgBouncer –¥–ª—è PostgreSQL

```ini
# /etc/pgbouncer/pgbouncer.ini
[databases]
mydb = host=localhost port=5432 dbname=mydb

[pgbouncer]
pool_mode = transaction  # –ò–ª–∏ session/statement
default_pool_size = 20
max_client_conn = 1000
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +4x throughput, -40% connection latency

### HTTP Connection Pool

```python
# Python requests —Å –ø—É–ª–æ–º
import requests
from requests.adapters import HTTPAdapter

session = requests.Session()
adapter = HTTPAdapter(
    pool_connections=10,  # –ü—É–ª –Ω–∞ —Ö–æ—Å—Ç
    pool_maxsize=10,      # –°–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ –ø—É–ª–µ
    max_retries=3
)
session.mount('https://', adapter)

# –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ session –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
response = session.get('https://api.example.com/data')
```

---

## CDN –∏ Edge Computing

### –ö–∞–∫ CDN —Å–Ω–∏–∂–∞–µ—Ç latency

```
–ë–µ–∑ CDN:
User (Tokyo) ‚Üí Origin (New York)
RTT: 150-200ms

–° CDN:
User (Tokyo) ‚Üí Edge (Tokyo) ‚Üí Origin (New York)
Cached:  RTT: 5-10ms
Dynamic: RTT: 5-10ms + Origin processing
```

### Edge Computing

**CDN 2.0:** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ edge-—Å–µ—Ä–≤–µ—Ä–∞—Ö:
- Cloudflare Workers
- AWS Lambda@Edge
- Fastly Compute@Edge

```javascript
// Cloudflare Worker ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ edge
addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request))
})

async function handleRequest(request) {
  const country = request.cf.country
  // –õ–æ–≥–∏–∫–∞ –±–µ–∑ roundtrip –¥–æ origin
  return new Response(`Hello from ${country}!`)
}
```

### Video Streaming Latency (2024)

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –¢–∏–ø–∏—á–Ω—ã–π Latency |
|-----------|-----------------|
| –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π HLS | 15-30 —Å–µ–∫—É–Ω–¥ |
| Low-Latency HLS | 2-5 —Å–µ–∫—É–Ω–¥ |
| LL-DASH | 2-5 —Å–µ–∫—É–Ω–¥ |
| WebRTC | < 1 —Å–µ–∫—É–Ω–¥—ã |
| Edge + CMAF | 3-5 —Å–µ–∫—É–Ω–¥ |

---

## P99 Latency Optimization

### –ü–æ—á–µ–º—É P99 –≤–∞–∂–Ω–µ–µ —Å—Ä–µ–¥–Ω–µ–≥–æ

```
–ó–∞–ø—Ä–æ—Å—ã: [10, 12, 11, 13, 10, 11, 12, 11, 10, 500]ms

Average: 60ms  ‚Üê –í—ã–≥–ª—è–¥–∏—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
P50:     11ms  ‚Üê –¢–∏–ø–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å
P99:     500ms ‚Üê 1% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∂–¥—É—Ç 0.5 —Å–µ–∫—É–Ω–¥—ã!
```

### –ü—Ä–∏—á–∏–Ω—ã –≤—ã—Å–æ–∫–æ–≥–æ P99

| –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|
| GC –ø–∞—É–∑—ã | –¢—é–Ω–∏–Ω–≥ GC, ZGC/Shenandoah |
| Cold starts | Pre-warming, provisioned concurrency |
| Noisy neighbors | Dedicated instances, CPU pinning |
| Network retries | Hedged requests, circuit breakers |
| DB connection storms | Connection pooling |

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–Ω–∏–∂–µ–Ω–∏—è P99

**1. Hedged Requests:**
```python
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π
async def hedged_request(url, timeout=50):
    primary = asyncio.create_task(fetch(url))
    await asyncio.sleep(0.050)  # –ñ–¥—ë–º 50ms

    if not primary.done():
        backup = asyncio.create_task(fetch(url))
        done, _ = await asyncio.wait(
            [primary, backup],
            return_when=asyncio.FIRST_COMPLETED
        )
        return done.pop().result()

    return await primary
```

**2. Circuit Breaker:**
```python
# –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–ª ‚Äî fail fast
if circuit_breaker.is_open:
    return fallback_response()  # –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ
else:
    response = await service.call()
```

**3. Request Deadlines:**
```go
// Go context —Å —Ç–∞–π–º–∞—É—Ç–æ–º
ctx, cancel := context.WithTimeout(context.Background(), 100*time.Millisecond)
defer cancel()

result, err := service.Call(ctx)
if err == context.DeadlineExceeded {
    // Fail fast, –Ω–µ –∂–¥—ë–º
}
```

---

## Latency Budget

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞

**Latency Budget** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –≤—Ä–µ–º—è –Ω–∞ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```
–û–±—â–∏–π –±—é–¥–∂–µ—Ç: 200ms

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:
‚îú‚îÄ‚îÄ DNS:        10ms (5%)
‚îú‚îÄ‚îÄ TCP+TLS:    30ms (15%)
‚îú‚îÄ‚îÄ Network:    40ms (20%)
‚îú‚îÄ‚îÄ Backend:    80ms (40%)
‚îú‚îÄ‚îÄ Rendering:  40ms (20%)
‚îî‚îÄ‚îÄ –ë—É—Ñ–µ—Ä:      0ms  (0%) ‚Äî –æ–ø–∞—Å–Ω–æ!
```

### –ü—Ä–∞–≤–∏–ª–∞ latency budget

1. **–û—Å—Ç–∞–≤–ª—è–π –±—É—Ñ–µ—Ä 20%** ‚Äî –¥–ª—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
2. **–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å = –±—é–¥–∂–µ—Ç / N √ó 0.8** ‚Äî –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ –∏–∑ N —Å–µ—Ä–≤–∏—Å–æ–≤
3. **P99 –±—é–¥–∂–µ—Ç = 2-3√ó P50 –±—é–¥–∂–µ—Ç–∞**
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—é–¥–∂–µ—Ç–∞**

### Performance Budget –¥–ª—è Web

```yaml
# lighthouse-budget.json
{
  "timings": [
    { "metric": "first-contentful-paint", "budget": 1500 },
    { "metric": "largest-contentful-paint", "budget": 2500 },
    { "metric": "total-blocking-time", "budget": 200 },
    { "metric": "time-to-interactive", "budget": 3000 }
  ]
}
```

---

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

### 1. –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ average latency

**–ü—Ä–æ–±–ª–µ–º–∞:** Average —Å–∫—Ä—ã–≤–∞–µ—Ç tail latency.

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏ P95, P99, P99.9.

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è throughput –≤–º–µ—Å—Ç–æ latency

**–ü—Ä–æ–±–ª–µ–º–∞:** Batching —É–ª—É—á—à–∞–µ—Ç throughput, –Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç latency.

```
–ë–µ–∑ batching:  –ó–∞–ø—Ä–æ—Å 1 ‚Üí –û—Ç–≤–µ—Ç 1 (10ms)
–° batching:    –ó–∞–ø—Ä–æ—Å 1 ‚Üí ... –∂–¥—ë–º 50ms ... ‚Üí Batch response
```

**–†–µ—à–µ–Ω–∏–µ:** –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π batch size –∏ max delay.

### 3. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** Cold start –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ:
- –ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (TCP + TLS)
- –ù–µ—Ç –ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ –∫—ç—à–∞
- Lazy initialization –∫–æ–¥–∞

**–†–µ—à–µ–Ω–∏–µ:** Pre-warming, –ø—Ä–æ–≤–µ—Ä—è–π latency –ø–µ—Ä–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ.

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–∫–∞–ª—å–Ω–æ RTT = 0.5ms, –≤ production = 50-200ms.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è —Ç–µ—Å—Ç–æ–≤
tc qdisc add dev eth0 root netem delay 100ms 20ms

# –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
tc qdisc del dev eth0 root netem
```

### 5. –ù–µ–¥–æ–æ—Ü–µ–Ω–∫–∞ DNS latency

**–ü—Ä–æ–±–ª–µ–º–∞:** DNS lookup –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å 20-200ms –Ω–∞ –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:** dns-prefetch, preconnect, –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤.

### 6. –ü–µ—Ä–µ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è preconnect

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ preconnect —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –∑—Ä—è.

**–†–µ—à–µ–Ω–∏–µ:** –ú–∞–∫—Å–∏–º—É–º 4-6 preconnect, –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî dns-prefetch.

### 7. –ù–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** LTE latency = 20-50ms, 3G = 100-500ms.

**–†–µ—à–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä—É–π —Å Network Throttling, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –¥–ª—è worst case.

---

## –ß–µ–∫-–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
- [ ] TCP Fast Open –≤–∫–ª—é—á—ë–Ω
- [ ] Initial cwnd = 10+
- [ ] BBR congestion control
- [ ] Keep-alive connections

### TLS
- [ ] TLS 1.3 —Å 0-RTT
- [ ] Session resumption –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] OCSP stapling –≤–∫–ª—é—á—ë–Ω

### DNS
- [ ] dns-prefetch –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- [ ] preconnect –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö (max 4-6)
- [ ] –ú–∏–Ω–∏–º—É–º –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤

### HTTP
- [ ] HTTP/2 –∏–ª–∏ HTTP/3
- [ ] Connection pooling
- [ ] Gzip/Brotli —Å–∂–∞—Ç–∏–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [ ] CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ –∏ edge computing
- [ ] Connection pools –¥–ª—è –ë–î
- [ ] Circuit breakers –∏ timeouts
- [ ] Hedged requests –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] P50, P95, P99 –º–µ—Ç—Ä–∏–∫–∏
- [ ] Latency budgets –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é
- [ ] Distributed tracing (OpenTelemetry)

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [[network-performance-optimization]] ‚Äî –æ–±—â–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏
- [[network-transport-layer]] ‚Äî TCP/UDP –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–µ—Ç–∞–ª—å–Ω–æ
- [[network-http-evolution]] ‚Äî HTTP/2 –∏ HTTP/3
- [[network-dns-tls]] ‚Äî DNS –∏ TLS –ø–æ–¥—Ä–æ–±–Ω–µ–µ
- [[network-troubleshooting-advanced]] ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º latency
- [[network-cloud-modern]] ‚Äî CDN –∏ edge computing

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏

| # | –ò—Å—Ç–æ—á–Ω–∏–∫ | –¢–∏–ø | –ö–ª—é—á–µ–≤–æ–π –≤–∫–ª–∞–¥ |
|---|----------|-----|----------------|
| 1 | [High Performance Browser Networking](https://hpbn.co) | –ö–Ω–∏–≥–∞ | TCP/TLS latency, fundamentals |
| 2 | [Cloudflare TLS 1.3 0-RTT](https://blog.cloudflare.com/introducing-0-rtt/) | –ë–ª–æ–≥ | 0-RTT implementation |
| 3 | [KeyCDN Latency Optimization](https://www.keycdn.com/blog/latency-optimization) | –ë–ª–æ–≥ | CDN –∏ –æ–±—â–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ |
| 4 | [MDN dns-prefetch](https://developer.mozilla.org/en-US/docs/Web/Performance/Guides/dns-prefetch) | Docs | Resource hints |
| 5 | [Aerospike P99 Latency](https://aerospike.com/blog/what-is-p99-latency/) | –ë–ª–æ–≥ | Percentile –º–µ—Ç—Ä–∏–∫–∏ |
| 6 | [Control Plane P99 Tips](https://controlplane.com/community-blog/post/4-tips-to-improve-p99-latency) | –ë–ª–æ–≥ | P99 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
| 7 | [Stack Overflow Connection Pooling](https://stackoverflow.blog/2020/10/14/improve-database-performance-with-connection-pooling/) | –ë–ª–æ–≥ | DB connection pools |
| 8 | [Microsoft HTTP Connection Pool](https://devblogs.microsoft.com/premier-developer/the-art-of-http-connection-pooling-how-to-optimize-your-connections-for-peak-performance/) | –ë–ª–æ–≥ | HTTP pooling |
| 9 | [QUIC Benchmarks Study](https://cs.brown.edu/~tab/papers/QUIC_WWW21.pdf) | Paper | QUIC vs TCP production |
| 10 | [Salesforce HTTP/2 HOL](https://engineering.salesforce.com/the-full-picture-on-http-2-and-hol-blocking-7f964b34d205/) | –ë–ª–æ–≥ | HOL blocking deep dive |
| 11 | [CableFree LTE Latency](https://www.cablefree.net/wirelesstechnology/4glte/lte-network-latency/) | –°–ø—Ä–∞–≤–∫–∞ | Mobile network latency |
| 12 | [SpeedCurve Performance Budgets](https://www.speedcurve.com/web-performance-guide/complete-guide-performance-budgets/) | –ì–∞–π–¥ | Latency budgets |
| 13 | [Google Cloud Netperf](https://cloud.google.com/blog/products/networking/using-netperf-and-ping-to-measure-network-latency) | –ë–ª–æ–≥ | Latency measurement |
| 14 | [DigitalOcean Network Latency](https://www.digitalocean.com/resources/articles/network-latency) | –ì–∞–π–¥ | –û–±—â–∏–π –æ–±–∑–æ—Ä |
| 15 | [Expedia dns-prefetch Tips](https://medium.com/expedia-group-tech/dns-prefetch-preconnect-7-tips-tricks-and-pitfalls-82d633c7f210) | –ë–ª–æ–≥ | –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã |

---

## –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —Ç–µ–º–∞–º–∏

**[[network-performance-optimization]]** ‚Äî Performance optimization ‚Äî —ç—Ç–æ –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∞—è —Ç–µ–º–∞, –≤–∫–ª—é—á–∞—é—â–∞—è TCP tuning, —Å–∏—Å—Ç–µ–º–Ω—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —è–¥—Ä–∞ –∏ benchmarking, —Ç–æ–≥–¥–∞ –∫–∞–∫ latency optimization —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –Ω–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–µ–∫. –ú–Ω–æ–≥–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è (connection pooling, buffer tuning), –Ω–æ latency optimization –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ö–æ–¥—ã: prefetching, percentile-based –∞–Ω–∞–ª–∏–∑, fan-out –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –∏–∑—É—á–∏—Ç—å latency optimization –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

**[[network-transport-layer]]** ‚Äî TCP –∏ UDP ‚Äî —ç—Ç–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞–ø—Ä—è–º—É—é –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç latency: TCP-handshake –¥–æ–±–∞–≤–ª—è–µ—Ç 1 RTT, slow start —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏, –∞ congestion control –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∑–∞–¥–µ—Ä–∂–µ–∫. QUIC –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç transport –∏ TLS handshake –≤ 1 RTT (–∏–ª–∏ 0-RTT –ø—Ä–∏ reconnect), —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ —Å–Ω–∏–∂–∞—è latency. –ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–µ–∫.

**[[network-http-evolution]]** ‚Äî HTTP/1.1, HTTP/2 –∏ HTTP/3 –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø–æ latency-—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º: head-of-line blocking –≤ HTTP/1.1, –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ HTTP/2, –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ HOL blocking –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ –≤ HTTP/3. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç–≤–æ–ª—é—Ü–∏–∏ HTTP –æ–±—ä—è—Å–Ω—è–µ—Ç, –ø–æ—á–µ–º—É –ø—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å latency –Ω–∞ –¥–µ—Å—è—Ç–∫–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤. –ò–∑—É—á–∞–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å latency optimization.

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —á—Ç–µ–Ω–∏–µ

- **Grigorik (2013).** *High Performance Browser Networking.* ‚Äî –ª—É—á—à–µ–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ latency optimization: TCP, TLS, HTTP/2, WebSocket, WebRTC; –¥–æ—Å—Ç—É–ø–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ hpbn.co; –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–ª—è –ª—é–±–æ–≥–æ, –∫—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏.
- **Fall, Stevens (2011).** *TCP/IP Illustrated, Vol. 1 (2nd ed).* ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä TCP-—Ç–∞–π–º–µ—Ä–æ–≤, retransmission –∏ congestion control —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–º–ø–∞–º–∏ –ø–∞–∫–µ—Ç–æ–≤; –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ.
- **Kurose, Ross (2021).** *Computer Networking: A Top-Down Approach.* ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è queueing delay, propagation delay –∏ transmission delay; –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å –∑–∞–¥–µ—Ä–∂–µ–∫ –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–µ–ª—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-09 ‚Äî –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏: 5 –∞–Ω–∞–ª–æ–≥–∏–π (latency vs throughput —Ç—Ä—É–±–∞/–∞–≤—Ç–æ–±–∞–Ω, RTT –∏ TCP handshake –∫–∞–∫ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É, percentiles P50/P99 –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å –≤ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–µ, fan-out problem –∫–∞–∫ —Å–±–æ—Ä–∫–∞ IKEA, TTFB vs full load –∫–∞–∫ –ø–µ—Ä–≤–∞—è –ª–æ–∂–∫–∞ —Å—É–ø–∞), 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ —Å –°–ò–ú–ü–¢–û–ú/–†–ï–®–ï–ù–ò–ï (average –≤–º–µ—Å—Ç–æ percentiles, naive retries‚Üíretry storm, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ tail latency –≤ fan-out, CDN –∫—ç—à–∏—Ä—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ baseline, connection per request), 5 –º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (waterfall analysis, latency budget, 80/20 rule –¥–ª—è latency, tail latency amplification —Ñ–æ—Ä–º—É–ª–∞, latency vs consistency trade-off)*
