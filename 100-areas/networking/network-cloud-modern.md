---
title: "–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ç–∏: VPC, Load Balancing, CDN"
created: 2025-12-18
modified: 2025-12-18
type: concept
status: published
confidence: high
sources_verified: true
tags:
  - topic/networking
  - networking/cloud
  - devops/infrastructure
  - type/concept
  - level/intermediate
related:
  - "[[cloud-platforms-essentials]]"
  - "[[infrastructure-as-code]]"
  - "[[network-ip-routing]]"
---

# –û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ç–∏: VPC, Load Balancing, CDN

---

## Prerequisites

| –¢–µ–º–∞ | –ó–∞—á–µ–º –Ω—É–∂–Ω–æ | –ì–¥–µ –∏–∑—É—á–∏—Ç—å |
|------|-------------|-------------|
| **IP-–∞–¥—Ä–µ—Å–∞—Ü–∏—è** | VPC –∏—Å–ø–æ–ª—å–∑—É—é—Ç CIDR-–Ω–æ—Ç–∞—Ü–∏—é | [[network-ip-routing]] |
| **–ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ–±–ª–∞–∫–æ–≤** | –ß—Ç–æ —Ç–∞–∫–æ–µ AWS/GCP/Azure | [[cloud-platforms-essentials]] |
| **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏** | L4/L7 –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ | [[network-transport-layer]] |

### –î–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª

| –£—Ä–æ–≤–µ–Ω—å | –ü–æ–¥—Ö–æ–¥–∏—Ç? | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|--------------|
| **–ù–æ–≤–∏—á–æ–∫** | ‚ö†Ô∏è –° –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π | –°–Ω–∞—á–∞–ª–∞ –æ—Å–Ω–æ–≤—ã —Å–µ—Ç–µ–π |
| **Intermediate** | ‚úÖ –î–∞ | –û—Å–Ω–æ–≤–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è |
| **Advanced** | ‚úÖ –î–∞ | Transit Gateway, Service Mesh |

### –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

> üí° **VPC (Virtual Private Cloud)** = –≤–∞—à–∞ "—á–∞—Å—Ç–Ω–∞—è —Å–µ—Ç—å" –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞–∫–∞. –ö–∞–∫ –æ—Ñ–∏—Å–Ω–∞—è —Å–µ—Ç—å, —Ç–æ–ª—å–∫–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∏ –≤ AWS/GCP/Azure.

| –¢–µ—Ä–º–∏–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ | –ê–Ω–∞–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–∞ |
|--------|----------|---------------------|
| **VPC** | –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å | **–ß–∞—Å—Ç–Ω—ã–π –æ—Ñ–∏—Å** ‚Äî —Å–≤–æ—è —Å–µ—Ç—å, —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞ |
| **Subnet** | –ß–∞—Å—Ç—å VPC —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º IP | **–≠—Ç–∞–∂ –≤ –∑–¥–∞–Ω–∏–∏** ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–æ–Ω–∞ |
| **Public Subnet** | –ü–æ–¥—Å–µ—Ç—å —Å –¥–æ—Å—Ç—É–ø–æ–º –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç | **–†–µ—Ü–µ–ø—Ü–∏—è** ‚Äî –æ—Ç–∫—Ä—ã—Ç–∞ –¥–ª—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π |
| **Private Subnet** | –ü–æ–¥—Å–µ—Ç—å –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ | **–°–µ—Ä–≤–µ—Ä–Ω–∞—è** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ |
| **Security Group** | –§–∞–π—Ä–≤–æ–ª –¥–ª—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ | **–û—Ö—Ä–∞–Ω–Ω–∏–∫ —É –¥–≤–µ—Ä–∏** ‚Äî –∫–æ–≥–æ –ø—É—Å–∫–∞—Ç—å |
| **NAT Gateway** | –í—ã—Ö–æ–¥ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è private subnet | **–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä** ‚Äî –≤—ã—Ö–æ–¥–∏–º –æ—Ç –∏–º–µ–Ω–∏ –æ–¥–Ω–æ–≥–æ IP |
| **ALB** | L7 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (HTTP) | **–£–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** ‚Äî —á–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç |
| **NLB** | L4 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (TCP/UDP) | **–ü—Ä–æ—Å—Ç–æ–π —à–≤–µ–π—Ü–∞—Ä** ‚Äî –±—ã—Å—Ç—Ä–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ –ø–æ—Ä—Ç—É |
| **CDN** | –°–µ—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | **–ö—ç—à —Ä—è–¥–æ–º —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º** ‚Äî –∫–∞—Ä—Ç–∏–Ω–∫–∏ –±–ª–∏–∂–µ |
| **PoP** | –¢–æ—á–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è CDN | **–§–∏–ª–∏–∞–ª –ø–æ—á—Ç—ã** ‚Äî –±–ª–∏–∂–∞–π—à–∏–π –∫ —Ç–µ–±–µ |
| **PrivateLink** | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º | **–ü—Ä—è–º–æ–π –ø—Ä–æ–≤–æ–¥** ‚Äî –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |

---

## –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è

| –¢–µ—Ä–º–∏–Ω | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ |
|--------|-------------|
| **VPC** | Virtual Private Cloud - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –≤ –æ–±–ª–∞–∫–µ |
| **Subnet** | –ü–æ–¥—Å–µ—Ç—å - —Å–µ–≥–º–µ–Ω—Ç IP-–∞–¥—Ä–µ—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ VPC |
| **CIDR** | Classless Inter-Domain Routing - –Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ IP |
| **Security Group** | Stateful —Ñ–∞–π—Ä–≤–æ–ª –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞ (L4) |
| **NACL** | Network Access Control List - stateless —Ñ–∞–π—Ä–≤–æ–ª –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–¥—Å–µ—Ç–∏ |
| **NAT Gateway** | –°–µ—Ä–≤–∏—Å –¥–ª—è –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø–∞ –∏–∑ private subnet |
| **Internet Gateway** | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ç—Ä–∞—Ñ–∏–∫–∞ VPC |
| **ALB** | Application Load Balancer - L7 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (HTTP/HTTPS) |
| **NLB** | Network Load Balancer - L4 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (TCP/UDP) |
| **GLB** | Gateway Load Balancer - L3 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è appliances |
| **CDN** | Content Delivery Network - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–µ—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ |
| **PoP** | Point of Presence - —Ç–æ—á–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è CDN |
| **Edge Location** | –ü–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä CDN, –±–ª–∏–∂–∞–π—à–∏–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
| **Transit Gateway** | –•–∞–± –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ VPC –∏ on-premises —Å–µ—Ç–µ–π |
| **VPC Peering** | –ü—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è VPC |
| **PrivateLink** | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |
| **Service Mesh** | –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è east-west —Ç—Ä–∞—Ñ–∏–∫–æ–º |
| **Sidecar Proxy** | –ü—Ä–æ–∫—Å–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä—è–¥–æ–º —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ |
| **mTLS** | Mutual TLS - –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º |

---

## –ß–∞—Å—Ç—å 1: –ò–Ω—Ç—É–∏—Ü–∏—è –±–µ–∑ –∫–æ–¥–∞

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏**: –ü–æ–Ω—è—Ç—å –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ç–∏ —á–µ—Ä–µ–∑ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏–∏ ‚Äî –±–µ–∑ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –ê–Ω–∞–ª–æ–≥–∏—è 1: VPC –∫–∞–∫ –æ—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ

```
+------------------------------------------------------------------+
|                        –†–ï–ì–ò–û–ù AWS (–ú–æ—Å–∫–≤–∞)                        |
|                     = –ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä "–û–±–ª–∞–∫–æ"                       |
|                                                                    |
|  +----------------------------+  +----------------------------+   |
|  |     AVAILABILITY ZONE A    |  |     AVAILABILITY ZONE B    |   |
|  |     = –ö–æ—Ä–ø—É—Å "–ê–ª—å—Ñ–∞"       |  |     = –ö–æ—Ä–ø—É—Å "–ë–µ—Ç–∞"        |   |
|  |                            |  |                            |   |
|  |  +----------------------+  |  |  +----------------------+  |   |
|  |  |      VPC             |  |  |  |      VPC             |  |   |
|  |  |   = –û—Ñ–∏—Å –∫–æ–º–ø–∞–Ω–∏–∏    |  |  |  |   = –û—Ñ–∏—Å –∫–æ–º–ø–∞–Ω–∏–∏    |  |   |
|  |  |                      |  |  |  |                      |  |   |
|  |  | +--------+ +-------+ |  |  |  | +--------+ +-------+ |  |   |
|  |  | |Public  | |Private| |  |  |  | |Public  | |Private| |  |   |
|  |  | |Subnet  | |Subnet | |  |  |  | |Subnet  | |Subnet | |  |   |
|  |  | |=–†–µ—Ü–µ–ø- | |=–°–µ—Ä–≤–µ—Ä| |  |  |  | |=–†–µ—Ü–µ–ø- | |=–°–µ—Ä–≤–µ—Ä| |  |   |
|  |  | | —Ü–∏—è    | | –Ω–∞—è   | |  |  |  | | —Ü–∏—è    | | –Ω–∞—è   | |  |   |
|  |  | +--------+ +-------+ |  |  |  | +--------+ +-------+ |  |   |
|  |  +----------------------+  |  |  +----------------------+  |   |
|  +----------------------------+  +----------------------------+   |
+------------------------------------------------------------------+
```

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- **–†–µ–≥–∏–æ–Ω** = –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –≥–æ—Ä–æ–¥–µ
- **Availability Zone** = –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ—Ä–ø—É—Å (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —ç–ª–µ–∫—Ç—Ä–æ–ø–∏—Ç–∞–Ω–∏–µ, –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ)
- **VPC** = –æ—Ñ–∏—Å –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä–ø—É—Å–∞
- **Public Subnet** = —Ä–µ—Ü–µ–ø—Ü–∏—è ‚Äî –æ—Ç–∫—Ä—ã—Ç–∞ –¥–ª—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- **Private Subnet** = —Å–µ—Ä–≤–µ—Ä–Ω–∞—è ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- **Security Group** = –æ—Ö—Ä–∞–Ω–Ω–∏–∫ —É –¥–≤–µ—Ä–∏ –∫–∞–±–∏–Ω–µ—Ç–∞

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ**: –ï—Å–ª–∏ –≤ –∫–æ—Ä–ø—É—Å–µ "–ê–ª—å—Ñ–∞" –æ—Ç–∫–ª—é—á–∞—Ç —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, –∫–æ—Ä–ø—É—Å "–ë–µ—Ç–∞" –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. Multi-AZ deployment = –æ—Ñ–∏—Å—ã –≤ –¥–≤—É—Ö –∫–æ—Ä–ø—É—Å–∞—Ö.

---

### –ê–Ω–∞–ª–æ–≥–∏—è 2: Load Balancer –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–∞

```
                      –ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ (–∑–∞–ø—Ä–æ—Å—ã)
                             |
                             v
                    +------------------+
                    |  –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†   |
                    |  (Load Balancer) |
                    +------------------+
                      /      |       \
                     v       v        v
              +-------+  +-------+  +-------+
              |–û—Ñ–∏—Å 1 |  |–û—Ñ–∏—Å 2 |  |–û—Ñ–∏—Å 3 |
              |Server1|  |Server2|  |Server3|
              +-------+  +-------+  +-------+

    ALB (L7) = "–£–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
    - –ß–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å: "–ú–Ω–µ –Ω—É–∂–µ–Ω –±—É—Ö–≥–∞–ª—Ç–µ—Ä"
    - –ù–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –Ω—É–∂–Ω—ã–π –æ—Ñ–∏—Å –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
    - –ú–æ–∂–µ—Ç –æ—Ç–∫–∞–∑–∞—Ç—å: "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –∑–∞–∫—Ä—ã—Ç–∞"

    NLB (L4) = "–ü—Ä–æ—Å—Ç–æ–π –æ—Ö—Ä–∞–Ω–Ω–∏–∫"
    - –°–º–æ—Ç—Ä–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ (–ø–æ—Ä—Ç)
    - –ë—ã—Å—Ç—Ä–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç, –Ω–µ –≤–Ω–∏–∫–∞—è –≤ —Å—É—Ç—å
    - –ù–µ —á–∏—Ç–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–ø—Ä–æ—Å–∞
```

**–ö–æ–≥–¥–∞ –∫–∞–∫–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
| –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–∏–ø LB | –ü–æ—á–µ–º—É |
|----------|--------|--------|
| HTTP API —Å —Ä–æ—É—Ç–∏–Ω–≥–æ–º –ø–æ path | ALB | –ù—É–∂–Ω–æ —á–∏—Ç–∞—Ç—å URL |
| WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | ALB | –ù—É–∂–µ–Ω HTTP upgrade |
| TCP –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | NLB | –ß–∏—Å—Ç—ã–π TCP, –Ω–∏–∑–∫–∞—è latency |
| UDP –∏–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä | NLB | UDP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ALB |
| –ú–∏–ª–ª–∏–æ–Ω —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | NLB | –ú–µ–Ω—å—à–µ overhead |

---

### –ê–Ω–∞–ª–æ–≥–∏—è 3: CDN –∫–∞–∫ —Å–µ—Ç—å –ø–æ—á—Ç–æ–≤—ã—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π

```
                         –ò–ù–¢–ï–†–ù–ï–¢
                            |
    +-------------------------------------------------------+
    |                                                       |
    |   –ú–æ—Å–∫–≤–∞        –õ–æ–Ω–¥–æ–Ω        –ù—å—é-–ô–æ—Ä–∫       –¢–æ–∫–∏–æ   |
    |     üìÆ            üìÆ            üìÆ            üìÆ      |
    |    PoP           PoP           PoP           PoP     |
    |     |             |             |             |       |
    +-----|-------------|-------------|-------------|-------+
          |             |             |             |
          v             v             v             v
       –Æ–∑–µ—Ä –≤        –Æ–∑–µ—Ä –≤        –Æ–∑–µ—Ä –≤       –Æ–∑–µ—Ä –≤
       –ú–æ—Å–∫–≤–µ        –ü–∞—Ä–∏–∂–µ        –ë–æ—Å—Ç–æ–Ω–µ      –°–µ—É–ª–µ

    –ë–µ–∑ CDN: –í—Å–µ –ø–∏—Å—å–º–∞ –∏–¥—É—Ç –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –æ—Ñ–∏—Å–∞ (origin)
             –ú–æ—Å–∫–≤–∞ -> Origin (–§—Ä–∞–Ω–∫—Ñ—É—Ä—Ç) -> –ú–æ—Å–∫–≤–∞ = 50ms

    –° CDN:   –ö–æ–ø–∏–∏ –ø–∏—Å–µ–º —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–º –æ—Ç–¥–µ–ª–µ–Ω–∏–∏
             –ú–æ—Å–∫–≤–∞ -> PoP (–ú–æ—Å–∫–≤–∞) = 5ms
```

**–ß—Ç–æ –∫—ç—à–∏—Ä—É–µ—Ç CDN:**
- ‚úÖ –°—Ç–∞—Ç–∏–∫–∞: –∫–∞—Ä—Ç–∏–Ω–∫–∏, CSS, JS, —à—Ä–∏—Ñ—Ç—ã, –≤–∏–¥–µ–æ
- ‚úÖ API –æ—Ç–≤–µ—Ç—ã —Å Cache-Control –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- ‚ùå –î–∏–Ω–∞–º–∏–∫–∞: –∫–æ—Ä–∑–∏–Ω–∞, –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- ‚ùå POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å—ã

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **Cache Hit Ratio** = % –∑–∞–ø—Ä–æ—Å–æ–≤, –æ—Ç–¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫—ç—à–∞ (—Ü–µ–ª—å: >90%)
- **Time to First Byte** = –≤—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞ (—Ü–µ–ª—å: <50ms)
- **Origin Shield** = –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫—ç—à –ø–µ—Ä–µ–¥ origin (—Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É)

---

### –ê–Ω–∞–ª–æ–≥–∏—è 4: Security Group vs NACL –∫–∞–∫ –æ—Ö—Ä–∞–Ω–Ω–∏–∫ vs —Ç—É—Ä–Ω–∏–∫–µ—Ç

```
+------------------------------------------------------------------+
|                         –ó–î–ê–ù–ò–ï (VPC)                              |
|                                                                    |
|   +----------------------------------------------------------+   |
|   |              –¢–£–†–ù–ò–ö–ï–¢ –ù–ê –í–•–û–î–ï (NACL)                     |   |
|   |                                                           |   |
|   |   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –ò –≤—ã—Ö–æ–¥—è—â–∏—Ö                  |   |
|   |   - –ù–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç: "–¢—ã —É–∂–µ –∑–∞—Ö–æ–¥–∏–ª"                      |   |
|   |   - –ü—Ä–∞–≤–∏–ª–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É (–ø–µ—Ä–≤–æ–µ —Å—Ä–∞–±–æ—Ç–∞–≤—à–µ–µ)              |   |
|   |   - –£—Ä–æ–≤–µ–Ω—å: –≤–µ—Å—å —ç—Ç–∞–∂ (subnet)                          |   |
|   +----------------------------------------------------------+   |
|                              |                                    |
|                              v                                    |
|   +----------------------------------------------------------+   |
|   |              –û–•–†–ê–ù–ù–ò–ö –£ –ö–ê–ë–ò–ù–ï–¢–ê (Security Group)         |   |
|   |                                                           |   |
|   |   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥—è—â–∏—Ö                            |   |
|   |   - –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç: "–ï—Å–ª–∏ –≤–ø—É—Å—Ç–∏–ª ‚Äî –≤—ã–ø—É—â—É –æ–±—Ä–∞—Ç–Ω–æ"          |   |
|   |   - –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤–º–µ—Å—Ç–µ (OR)                  |   |
|   |   - –£—Ä–æ–≤–µ–Ω—å: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (instance)               |   |
|   +----------------------------------------------------------+   |
+------------------------------------------------------------------+
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ:**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Security Group | NACL |
|---------------|----------------|------|
| **Stateful/Stateless** | Stateful | Stateless |
| **Return traffic** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | –ù—É–∂–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ |
| **–£—Ä–æ–≤–µ–Ω—å** | Instance/ENI | Subnet |
| **–ü—Ä–∞–≤–∏–ª–∞** | Allow only | Allow + Deny |
| **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∞–≤–∏–ª** | –í—Å–µ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è | –ü–æ –Ω–æ–º–µ—Ä–∞–º (–ø–µ—Ä–≤–æ–µ wins) |
| **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** | –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP, compliance |

---

### –ê–Ω–∞–ª–æ–≥–∏—è 5: NAT Gateway –∫–∞–∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏

```
+------------------------------------------------------------------+
|                         VPC (–û—Ñ–∏—Å)                                |
|                                                                    |
|  PRIVATE SUBNET                          PUBLIC SUBNET            |
|  (–°–µ—Ä–≤–µ—Ä–Ω–∞—è)                             (–†–µ—Ü–µ–ø—Ü–∏—è)               |
|                                                                    |
|  +-------------+                        +---------------+         |
|  | DB Server   |                        | NAT Gateway   |         |
|  | 10.0.2.50   |----> –•–æ—á—É –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç   | 52.10.20.30   |         |
|  +-------------+      –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã   +---------------+         |
|        |                                       |                  |
|        |                                       |                  |
|        +----------> –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è ------------>+                  |
|                                                |                  |
+------------------------------------------------|------------------+
                                                 |
                                                 v
                                         +---------------+
                                         |   –ò–ù–¢–ï–†–ù–ï–¢    |
                                         | –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ  |
                                         | 52.10.20.30   |
                                         +---------------+

    –í–ê–ñ–ù–û: –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –ù–ï –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ 10.0.2.50!
           NAT Gateway ‚Äî —ç—Ç–æ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –¥–≤–µ—Ä—å –Ω–∞—Ä—É–∂—É.
```

**–ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----------|-------------|---------------|
| **Internet Gateway** | –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ | Public subnet, web-—Å–µ—Ä–≤–µ—Ä—ã |
| **NAT Gateway** | –¢–æ–ª—å–∫–æ outbound | Private subnet, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, API calls |
| **NAT Instance** | –¢–æ–ª—å–∫–æ outbound | –ë—é–¥–∂–µ—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (—É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç) |
| **VPC Endpoint** | –ë–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ | –î–æ—Å—Ç—É–ø –∫ AWS —Å–µ—Ä–≤–∏—Å–∞–º –ø—Ä–∏–≤–∞—Ç–Ω–æ |

---

## –ß–∞—Å—Ç—å 2: –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–∂–Ω–æ

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏**: –ò–∑—É—á–∏—Ç—å 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ–±–ª–∞—á–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏.

### –û—à–∏–±–∫–∞ 1: –°–ª–∏—à–∫–æ–º —É–∑–∫–∏–π CIDR –±–ª–æ–∫ –¥–ª—è VPC

**–°–ò–ú–ü–¢–û–ú:**
```
Terraform apply:
Error: Error creating subnet: InvalidSubnet.Range:
The CIDR '10.0.0.0/24' has only 256 addresses.
Cannot create subnet for 128 instances + reserves.
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–∏—Ä–∞—é—Ç /24 (256 IP) "–ø–æ—Ç–æ–º—É —á—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ", –∑–∞–±—ã–≤–∞—è:
- AWS —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç 5 IP –Ω–∞ subnet (network, gateway, DNS, future, broadcast)
- Blue-green deployment —É–¥–≤–∞–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- Auto-scaling –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å 3x –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –≤ –ø–∏–∫–µ

**–†–ï–®–ï–ù–ò–ï:**
```
# –ü–õ–û–•–û: —Ç–µ—Å–Ω—ã–π CIDR
VPC CIDR:    10.0.0.0/24  (256 IP –Ω–∞ –í–°–Æ VPC)
Subnet:      10.0.0.0/26  (64 IP –Ω–∞ subnet)
–î–æ—Å—Ç—É–ø–Ω–æ:    59 IP (64 - 5 reserved)

# –•–û–†–û–®–û: —Å –∑–∞–ø–∞—Å–æ–º
VPC CIDR:    10.0.0.0/16  (65536 IP –Ω–∞ VPC)
Subnet:      10.0.1.0/24  (256 IP –Ω–∞ subnet)
–î–æ—Å—Ç—É–ø–Ω–æ:    251 IP –Ω–∞ subnet, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å 256 subnets
```

**–ü—Ä–∞–≤–∏–ª–æ**: –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å /16 –¥–ª—è VPC, /24 –¥–ª—è subnet. –°—É–∂–∞—Ç—å –ø—Ä–æ—â–µ, —á–µ–º —Ä–∞—Å—à–∏—Ä—è—Ç—å.

---

### –û—à–∏–±–∫–∞ 2: Security Group —Ä–∞–∑—Ä–µ—à–∞–µ—Ç 0.0.0.0/0

**–°–ò–ú–ü–¢–û–ú:**
```bash
# AWS Security Hub / GuardDuty alert:
[CRITICAL] Security group sg-12345 allows unrestricted
inbound traffic on port 22 from 0.0.0.0/0
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
"–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—ã—Å—Ç—Ä–æ –æ—Ç–∫—Ä—ã–ª SSH —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞, –ø–æ—Ç–æ–º –∑–∞–±—ã–ª –∑–∞–∫—Ä—ã—Ç—å."

**–†–ï–®–ï–ù–ò–ï:**
```
# –ü–õ–û–•–û: –æ—Ç–∫—Ä—ã—Ç–æ –º–∏—Ä—É
Type: SSH
Port: 22
Source: 0.0.0.0/0  # –í–ï–°–¨ –ò–ù–¢–ï–†–ù–ï–¢!

# –•–û–†–û–®–û: —Ç–æ–ª—å–∫–æ —Å bastion/VPN
Type: SSH
Port: 22
Source: sg-bastion-host  # –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ jump-—Å–µ—Ä–≤–µ—Ä

# –ï–©–Å –õ–£–ß–®–ï: AWS Session Manager (–±–µ–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤)
# –í–æ–æ–±—â–µ –Ω–µ –Ω—É–∂–µ–Ω –ø–æ—Ä—Ç 22!
```

**–ü—Ä–∞–≤–∏–ª–æ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ 0.0.0.0/0 –¥–ª—è SSH (22), RDP (3389), –∏–ª–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ bastion host –∏–ª–∏ Session Manager.

---

### –û—à–∏–±–∫–∞ 3: ALB –≤ private subnet

**–°–ò–ú–ü–¢–û–ú:**
```
curl https://my-alb.region.elb.amazonaws.com
curl: (7) Failed to connect: Connection timed out
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
ALB —Å–æ–∑–¥–∞–Ω –≤ private subnet –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É, –ø–æ—ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–µ –º–æ–≥—É—Ç –¥–æ –Ω–µ–≥–æ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è.

**–†–ï–®–ï–ù–ò–ï:**
```
+------------------------------------------------------------------+
|                            VPC                                    |
|                                                                    |
|   PUBLIC SUBNETS (2+ AZ)          PRIVATE SUBNETS (2+ AZ)        |
|   +-------------------+           +---------------------+         |
|   |     ALB ‚úÖ        |           |    EC2 instances    |         |
|   | (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-facing) |---------->|    (target group)   |         |
|   +-------------------+           +---------------------+         |
|           |                                                       |
|           v                                                       |
|   Internet Gateway                                                |
+------------------------------------------------------------------+

–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:
- Internet-facing ALB ‚Üí Public Subnets (–º–∏–Ω–∏–º—É–º 2 AZ!)
- Internal ALB ‚Üí Private Subnets
- Target instances ‚Üí Private Subnets (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
```

---

### –û—à–∏–±–∫–∞ 4: CDN –∫—ç—à–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–°–ò–ú–ü–¢–û–ú:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê –≤–∏–¥–∏—Ç –∫–æ—Ä–∑–∏–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë!
Cache-Control: public, max-age=3600
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ CDN –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

**–†–ï–®–ï–ù–ò–ï:**
```
# –ü–õ–û–•–û: –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö
GET /api/cart
Cache-Control: public, max-age=3600  # CDN –∫—ç—à–∏—Ä—É–µ—Ç!

# –•–û–†–û–®–û: –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
GET /api/cart
Cache-Control: private, no-store     # –¢–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞
Vary: Authorization                   # –†–∞–∑–Ω—ã–π –∫—ç—à –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —é–∑–µ—Ä–æ–≤

# CDN bypass –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏:
Cloudflare Page Rule: /api/* ‚Üí Cache Level: Bypass
CloudFront Behavior: /api/* ‚Üí TTL: 0, Forward all headers
```

**–ü—Ä–∞–≤–∏–ª–æ**: `Cache-Control: public` —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏. –í—Å—ë —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π ‚Äî `private` –∏–ª–∏ `no-store`.

---

### –û—à–∏–±–∫–∞ 5: DNS loop –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ CDN

**–°–ò–ú–ü–¢–û–ú:**
```
curl https://example.com
curl: (7) Failed to connect: Too many redirects
# –∏–ª–∏
502 Bad Gateway
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
CDN –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –¥–æ–º–µ–Ω example.com, –∞ origin —Ç–æ–∂–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ example.com:
```
                  +----------+
                  |   CDN    |
         +------->| example  |<-------+
         |        | .com     |        |
         |        +----------+        |
         |              |             |
         |              v             |
         |        +----------+        |
         +--------|  Origin  |--------+
                  | example  |
                  | .com     |  <- LOOP!
                  +----------+
```

**–†–ï–®–ï–ù–ò–ï:**
```
# –ü–õ–û–•–û: origin = —Ç–æ—Ç –∂–µ –¥–æ–º–µ–Ω
CDN Domain:    example.com
Origin:        example.com  # LOOP!

# –•–û–†–û–®–û: origin = –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –∏–ª–∏ IP
CDN Domain:    example.com
Origin:        origin.example.com  # –∏–ª–∏ IP –Ω–∞–ø—Ä—è–º—É—é
               (DNS –∑–∞–ø–∏—Å—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Load Balancer)

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ DNS:
example.com         ‚Üí CNAME ‚Üí cdn.cloudflare.com
origin.example.com  ‚Üí A     ‚Üí 52.1.2.3 (ALB IP)
```

---

### –û—à–∏–±–∫–∞ 6: –ó–∞–±—ã–ª–∏ egress rules –¥–ª—è NAT Gateway

**–°–ò–ú–ü–¢–û–ú:**
```
# –ò–∑ EC2 –≤ private subnet:
curl https://api.github.com
curl: (7) Failed to connect: Connection timed out

# –ù–æ NAT Gateway —Å–æ–∑–¥–∞–Ω –∏ route table –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
NACL –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫, –Ω–æ –µ—Å–ª–∏ –≤—ã –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ ‚Äî –∑–∞–±—ã–ª–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å ephemeral ports –¥–ª—è return traffic.

**–†–ï–®–ï–ù–ò–ï:**
```
# NACL –¥–ª—è Private Subnet:

# Outbound (–æ—Ç –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤):
Rule 100: ALLOW | HTTPS (443) | 0.0.0.0/0      # –ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
Rule 110: ALLOW | HTTP  (80)  | 0.0.0.0/0      # –ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

# Inbound (return traffic!):
Rule 100: ALLOW | TCP | 1024-65535 | 0.0.0.0/0 # Ephemeral ports!
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
          –ë–ï–ó –≠–¢–û–ì–û –ü–†–ê–í–ò–õ–ê NAT –ù–ï –†–ê–ë–û–¢–ê–ï–¢!

# –ü–æ—á–µ–º—É 1024-65535?
# –≠—Ç–æ ephemeral (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ) –ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –û–° –≤—ã–±–∏—Ä–∞–µ—Ç
# –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. Return traffic –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –Ω–∏—Ö.
```

**–ü—Ä–∞–≤–∏–ª–æ**: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ NACL ‚Äî –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–∞–π—Ç–µ ephemeral ports (1024-65535) –¥–ª—è inbound –≤ private subnet.

---

## –ß–∞—Å—Ç—å 3: –ú–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏**: 5 —Å–ø–æ—Å–æ–±–æ–≤ –¥—É–º–∞—Ç—å –æ–± –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ç—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–æ—â–∞—é—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π.

### –ú–æ–¥–µ–ª—å 1: –õ—É–∫–æ–≤–∏—Ü–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Defense in Depth)

```
+------------------------------------------------------------------+
|                                                                    |
|   –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (—É–≥—Ä–æ–∑—ã)                                               |
|       |                                                            |
|       v                                                            |
|   +------------------------------------------------------+        |
|   |  WAF / Shield (L7 –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS, SQL injection)     |        |
|   |  +----------------------------------------------+    |        |
|   |  |  CloudFront / CDN (–∫—ç—à + geo-blocking)       |    |        |
|   |  |  +--------------------------------------+    |    |        |
|   |  |  |  ALB (SSL termination, rate limiting)|    |    |        |
|   |  |  |  +------------------------------+    |    |    |        |
|   |  |  |  |  Security Group (L4 firewall)|    |    |    |        |
|   |  |  |  |  +----------------------+    |    |    |    |        |
|   |  |  |  |  |  NACL (subnet ACL)   |    |    |    |    |        |
|   |  |  |  |  |  +---------------+   |    |    |    |    |        |
|   |  |  |  |  |  |   Instance    |   |    |    |    |    |        |
|   |  |  |  |  |  |   (iptables)  |   |    |    |    |    |        |
|   |  |  |  |  |  +---------------+   |    |    |    |    |        |
|   |  |  |  |  +----------------------+    |    |    |    |        |
|   |  |  |  +------------------------------+    |    |    |        |
|   |  |  +--------------------------------------+    |    |        |
|   |  +----------------------------------------------+    |        |
|   +------------------------------------------------------+        |
+------------------------------------------------------------------+

–ö–∞–∂–¥—ã–π —Å–ª–æ–π –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–≤–æ–π —Ç–∏–ø –∞—Ç–∞–∫–∏:
- WAF: SQL injection, XSS, OWASP Top 10
- CDN: DDoS volumetric, geo-based attacks
- ALB: Protocol attacks, slow loris
- SG:  Port scanning, unauthorized access
- NACL: IP-based blocking, compliance
- Instance: Application-level protection
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å. –ï—Å–ª–∏ –∞—Ç–∞–∫—É—é—â–∏–π –ø—Ä–æ–π–¥—ë—Ç CDN ‚Äî ALB –µ–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç. –ï—Å–ª–∏ –ø—Ä–æ–π–¥—ë—Ç ALB ‚Äî Security Group –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç.

---

### –ú–æ–¥–µ–ª—å 2: –î–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –≤—ã–±–æ—Ä–∞ Load Balancer

```
                    –ö–∞–∫–æ–π Load Balancer –≤—ã–±—Ä–∞—Ç—å?
                              |
                    –ù—É–∂–Ω–∞ –ª–∏ —Ä–∞–±–æ—Ç–∞ —Å HTTP?
                         /          \
                       –î–∞            –ù–µ—Ç
                       |              |
                      ALB          –ù—É–∂–µ–Ω –ª–∏
                       |          ultra-low
                       |          latency?
                       |          /      \
                       |        –î–∞        –ù–µ—Ç
                       |         |         |
                       |        NLB       NLB
                       |         |
                       |    –ò–ª–∏ GLB –µ—Å–ª–∏
                       |    –Ω—É–∂–Ω—ã appliances
                       |
            +----------+-----------+
            |                      |
    –ù—É–∂–µ–Ω –ª–∏ routing         –ù—É–∂–Ω—ã –ª–∏
    –ø–æ path/host?            WebSockets?
         |                       |
        –î–∞                      –î–∞
         |                       |
    Path-based            Sticky sessions
    routing –≤ ALB         + connection
                          draining
```

**–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä:**

| –ï—Å–ª–∏... | –¢–æ –∏—Å–ø–æ–ª—å–∑—É–π |
|---------|--------------|
| HTTP/HTTPS API | ALB |
| gRPC | ALB (—Å HTTP/2) |
| WebSocket | ALB |
| TCP database proxy | NLB |
| UDP (gaming, DNS) | NLB |
| –ú–∏–ª–ª–∏–æ–Ω—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | NLB |
| Network appliances | GLB |

---

### –ú–æ–¥–µ–ª—å 3: –ü–æ—Ç–æ–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (Traffic Flow)

```
North-South Traffic (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π):
+------------------------------------------------------------------+
|                         –ò–ù–¢–ï–†–ù–ï–¢                                  |
|                            ‚Üï                                      |
|                      +-----------+                                |
|                      | CDN / WAF |                                |
|                            ‚Üï                                      |
|                      +-----------+                                |
|                      |    ALB    |                                |
|                            ‚Üï                                      |
|                      +-----------+                                |
|                      | Instances |                                |
+------------------------------------------------------------------+

East-West Traffic (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π):
+------------------------------------------------------------------+
|                            VPC                                    |
|                                                                    |
|   Service A ‚Üê----‚Üí Service B ‚Üê----‚Üí Service C ‚Üê----‚Üí Service D   |
|       ‚Üë                 ‚Üë                 ‚Üë                ‚Üë      |
|       +------------ Service Mesh (Istio/Linkerd) ---------+      |
|                                                                    |
|   - mTLS –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏                                          |
|   - Retry/timeout policies                                        |
|   - Circuit breaker                                               |
|   - Observability (traces, metrics)                               |
+------------------------------------------------------------------+

–ü—Ä–∞–≤–∏–ª–æ:
- North-South = ALB/NLB + WAF + CDN
- East-West = Service Mesh + Internal ALB + PrivateLink
```

---

### –ú–æ–¥–µ–ª—å 4: –°—Ç–æ–∏–º–æ—Å—Ç—å vs –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å vs –ø—Ä–æ—Å—Ç–æ—Ç–∞

```
                    –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨
                          ‚Üë
                          |
            Global        |        Dedicated
            Accelerator   |        Host
                 ‚òÖ        |           ‚òÖ
                          |
                    ALB + |  NLB
                    CDN ‚òÖ |   ‚òÖ
                          |
    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ+‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí –°–¢–û–ò–ú–û–°–¢–¨
                          |
              NAT         |
              Gateway ‚òÖ   |
                          |
           VPC       ‚òÖ    |
           Endpoints      |
                          |
                    –ü–†–û–°–¢–û–¢–ê

–ú–∞—Ç—Ä–∏—Ü–∞ –≤—ã–±–æ—Ä–∞:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç       ‚îÇ –°—Ç–æ–∏–º–æ—Å—Ç—å   ‚îÇ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å. ‚îÇ –°–ª–æ–∂–Ω–æ—Å—Ç—å  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ NAT Gateway     ‚îÇ $0.045/—á–∞—Å  ‚îÇ –°—Ä–µ–¥–Ω—è—è        ‚îÇ –ù–∏–∑–∫–∞—è     ‚îÇ
‚îÇ NAT Instance    ‚îÇ EC2 —Ü–µ–Ω–∞    ‚îÇ –ù–∏–∑–∫–∞—è         ‚îÇ –í—ã—Å–æ–∫–∞—è    ‚îÇ
‚îÇ ALB             ‚îÇ $0.025/—á–∞—Å  ‚îÇ –í—ã—Å–æ–∫–∞—è        ‚îÇ –°—Ä–µ–¥–Ω—è—è    ‚îÇ
‚îÇ NLB             ‚îÇ $0.025/—á–∞—Å  ‚îÇ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è  ‚îÇ –ù–∏–∑–∫–∞—è     ‚îÇ
‚îÇ CloudFront      ‚îÇ $0.085/GB   ‚îÇ –í—ã—Å–æ–∫–∞—è        ‚îÇ –°—Ä–µ–¥–Ω—è—è    ‚îÇ
‚îÇ Global Accel.   ‚îÇ $0.025/—á–∞—Å  ‚îÇ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è  ‚îÇ –í—ã—Å–æ–∫–∞—è    ‚îÇ
‚îÇ PrivateLink     ‚îÇ $0.01/—á–∞—Å   ‚îÇ –í—ã—Å–æ–∫–∞—è        ‚îÇ –°—Ä–µ–¥–Ω—è—è    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –ú–æ–¥–µ–ª—å 5: –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è production-ready VPC

```
‚ñ° VPC DESIGN
  ‚îú‚îÄ‚îÄ ‚ñ° CIDR –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π (/16 –¥–ª—è VPC)
  ‚îú‚îÄ‚îÄ ‚ñ° –ù–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å on-premises –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ VPC
  ‚îú‚îÄ‚îÄ ‚ñ° Subnets –≤ –º–∏–Ω–∏–º—É–º 2 AZ
  ‚îî‚îÄ‚îÄ ‚ñ° –û—Ç–¥–µ–ª—å–Ω—ã–µ subnets: public, private, isolated (DB)

‚ñ° CONNECTIVITY
  ‚îú‚îÄ‚îÄ ‚ñ° Internet Gateway –¥–ª—è public subnets
  ‚îú‚îÄ‚îÄ ‚ñ° NAT Gateway –¥–ª—è private subnets (–≤ –∫–∞–∂–¥–æ–π AZ!)
  ‚îú‚îÄ‚îÄ ‚ñ° VPC Endpoints –¥–ª—è AWS —Å–µ—Ä–≤–∏—Å–æ–≤ (S3, DynamoDB)
  ‚îî‚îÄ‚îÄ ‚ñ° Transit Gateway –µ—Å–ª–∏ >3 VPC

‚ñ° SECURITY
  ‚îú‚îÄ‚îÄ ‚ñ° Security Groups: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞, –Ω–µ—Ç 0.0.0.0/0
  ‚îú‚îÄ‚îÄ ‚ñ° NACL: —Ç–æ–ª—å–∫–æ –¥–ª—è compliance –∏–ª–∏ IP blocking
  ‚îú‚îÄ‚îÄ ‚ñ° Flow Logs –≤–∫–ª—é—á–µ–Ω—ã (CloudWatch –∏–ª–∏ S3)
  ‚îî‚îÄ‚îÄ ‚ñ° WAF –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏—á–Ω—ã–º–∏ ALB

‚ñ° DNS
  ‚îú‚îÄ‚îÄ ‚ñ° Route 53 private hosted zone –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–º—ë–Ω
  ‚îú‚îÄ‚îÄ ‚ñ° DNS hostnames –∏ resolution –≤–∫–ª—é—á–µ–Ω—ã –≤ VPC
  ‚îî‚îÄ‚îÄ ‚ñ° –ó–∞–ø–∏—Å–∏ –¥–ª—è internal ALB

‚ñ° MONITORING
  ‚îú‚îÄ‚îÄ ‚ñ° VPC Flow Logs ‚Üí CloudWatch Insights
  ‚îú‚îÄ‚îÄ ‚ñ° ALB access logs ‚Üí S3
  ‚îú‚îÄ‚îÄ ‚ñ° CloudWatch alarms –Ω–∞ NAT Gateway
  ‚îî‚îÄ‚îÄ ‚ñ° AWS Config rules –¥–ª—è Security Groups

‚ñ° COST OPTIMIZATION
  ‚îú‚îÄ‚îÄ ‚ñ° NAT Gateway –≤ –∫–∞–∂–¥–æ–π AZ vs –æ–¥–∏–Ω shared (trade-off)
  ‚îú‚îÄ‚îÄ ‚ñ° VPC Endpoints –≤–º–µ—Å—Ç–æ NAT –¥–ª—è AWS —Å–µ—Ä–≤–∏—Å–æ–≤
  ‚îú‚îÄ‚îÄ ‚ñ° Reserved capacity –¥–ª—è ALB/NLB –µ—Å–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ
  ‚îî‚îÄ‚îÄ ‚ñ° –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö EIP, NAT, endpoints
```

---

## –ü–û–ß–ï–ú–£: –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ç–∏ (15-20%)

### –ü—Ä–æ–±–ª–µ–º—ã —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```
+------------------------------------------------------------------+
|              –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è vs –û–±–ª–∞—á–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞               |
+------------------------------------------------------------------+
|                                                                    |
|  –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è (on-premises):                                       |
|  +------------------------------------------------------------+   |
|  | - –ó–∞–∫—É–ø–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è: 3-6 –º–µ—Å—è—Ü–µ–≤                        |   |
|  | - –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å "–Ω–∞ –≤—ã—Ä–æ—Å—Ç" (30-40% –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç)     |   |
|  | - –§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è                    |   |
|  | - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞ (–æ–¥–∏–Ω –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä)                    |   |
|  | - –°–ª–æ–∂–Ω–æ—Å—Ç—å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è                   |   |
|  | - –í—ã—Å–æ–∫–∏–µ –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã (CapEx)                       |   |
|  +------------------------------------------------------------+   |
|                                                                    |
|  –û–±–ª–∞—á–Ω–∞—è:                                                         |
|  +------------------------------------------------------------+   |
|  | + –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞ –º–∏–Ω—É—Ç—ã —á–µ—Ä–µ–∑ API/IaC                    |   |
|  | + –≠–ª–∞—Å—Ç–∏—á–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é                 |   |
|  | + –û–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (OpEx)           |   |
|  | + –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –º—É–ª—å—Ç–∏–∑–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å            |   |
|  | + –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ (20+ —Ä–µ–≥–∏–æ–Ω–æ–≤)                    |   |
|  | + Managed services —Å–Ω–∏–∂–∞—é—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É           |   |
|  +------------------------------------------------------------+   |
|                                                                    |
+------------------------------------------------------------------+
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—é—Ç –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ç–∏

**1. –ò–∑–æ–ª—è—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –õ–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤/–∫–æ–º–∞–Ω–¥
- –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º –¥–æ—Å—Ç—É–ø–∞ (public/private/isolated)
- Zero-trust networking —Å mTLS –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- Compliance requirements (PCI DSS, HIPAA, SOC2)

**2. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ auto-scaling groups
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ –∏ —Ä–µ–≥–∏–æ–Ω–∞–º–∏
- CDN –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**3. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**
- Multi-AZ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (99.99% SLA)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover –ø—Ä–∏ —Å–±–æ—è—Ö
- Geographic redundancy –¥–ª—è disaster recovery

**4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ù–∏–∑–∫–∞—è latency —á–µ—Ä–µ–∑ edge computing
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ inter-connect –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω—ã—Ö —Å—Ä–µ–¥

**5. –°—Ç–æ–∏–º–æ—Å—Ç—å**
- Pay-as-you-go –≤–º–µ—Å—Ç–æ –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç
- Reserved instances –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
- FinOps –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

### –ö–æ–≥–¥–∞ –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã

```
+------------------------------------------------------------------+
|                  Use Cases –¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ç–µ–π                      |
+------------------------------------------------------------------+
|                                                                    |
|  [High Traffic Web Applications]                                   |
|  - –ú–∏–ª–ª–∏–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–ª–æ–±–∞–ª—å–Ω–æ                               |
|  - –ü–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (Black Friday, launches)                      |
|  - CDN + Auto-scaling + Multi-region                              |
|                                                                    |
|  [Microservices Architecture]                                      |
|  - 50-500+ —Å–µ—Ä–≤–∏—Å–æ–≤                                               |
|  - Service mesh –¥–ª—è observability                                 |
|  - Zero-trust security –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏                            |
|                                                                    |
|  [Hybrid Cloud]                                                    |
|  - Legacy —Å–∏—Å—Ç–µ–º—ã on-premises                                     |
|  - –ù–æ–≤—ã–µ workloads –≤ –æ–±–ª–∞–∫–µ                                       |
|  - VPN/Direct Connect –¥–ª—è —Å–≤—è–∑–∏                                   |
|                                                                    |
|  [Multi-Region DR]                                                 |
|  - RPO < 1 hour, RTO < 4 hours                                    |
|  - Cross-region replication                                       |
|  - Global load balancing                                          |
|                                                                    |
|  [Regulated Industries]                                            |
|  - –ë–∞–Ω–∫–∏, –∑–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –≥–æ—Å—Å–µ–∫—Ç–æ—Ä                              |
|  - –°—Ç—Ä–æ–≥–∏–µ compliance —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è                                  |
|  - Network segmentation + audit logging                           |
|                                                                    |
+------------------------------------------------------------------+
```

---

## –ß–¢–û: –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ç–µ–π (25-35%)

### VPC Architecture

```
+------------------------------------------------------------------+
|                    VPC Architecture Overview                       |
+------------------------------------------------------------------+
|                                                                    |
|                          Internet                                  |
|                              |                                     |
|                      +-------v-------+                             |
|                      |    Internet   |                             |
|                      |    Gateway    |                             |
|                      +-------+-------+                             |
|                              |                                     |
|  +----------------------------------------------------------+     |
|  |                     VPC (10.0.0.0/16)                     |     |
|  |                                                           |     |
|  |    Availability Zone A         Availability Zone B        |     |
|  |  +------------------------+  +------------------------+   |     |
|  |  |   Public Subnet        |  |   Public Subnet        |   |     |
|  |  |   10.0.1.0/24          |  |   10.0.2.0/24          |   |     |
|  |  |                        |  |                        |   |     |
|  |  |   [ALB]    [NAT GW]    |  |   [ALB]    [NAT GW]    |   |     |
|  |  |                        |  |                        |   |     |
|  |  +------------|----------+  +------------|----------+   |     |
|  |               |                          |               |     |
|  |  +------------v----------+  +------------v----------+   |     |
|  |  |   Private Subnet      |  |   Private Subnet      |   |     |
|  |  |   10.0.11.0/24        |  |   10.0.12.0/24        |   |     |
|  |  |                       |  |                       |   |     |
|  |  |   [App Servers]       |  |   [App Servers]       |   |     |
|  |  |   [Containers]        |  |   [Containers]        |   |     |
|  |  |                       |  |                       |   |     |
|  |  +------------|----------+  +------------|----------+   |     |
|  |               |                          |               |     |
|  |  +------------v----------+  +------------v----------+   |     |
|  |  |   Isolated Subnet     |  |   Isolated Subnet     |   |     |
|  |  |   10.0.21.0/24        |  |   10.0.22.0/24        |   |     |
|  |  |                       |  |                       |   |     |
|  |  |   [RDS Primary]       |  |   [RDS Standby]       |   |     |
|  |  |   [ElastiCache]       |  |   [ElastiCache]       |   |     |
|  |  |                       |  |                       |   |     |
|  |  +-----------------------+  +-----------------------+   |     |
|  |                                                           |     |
|  +----------------------------------------------------------+     |
|                                                                    |
+------------------------------------------------------------------+
```

### –¢–∏–ø—ã –ø–æ–¥—Å–µ—Ç–µ–π

| –¢–∏–ø | –ú–∞—Ä—à—Ä—É—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç | –í—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----|-------------------|-----------------|---------------|
| **Public** | Internet Gateway (–ø—Ä—è–º–æ–π) | –î–∞ (—á–µ—Ä–µ–∑ IGW) | Load balancers, Bastion hosts, NAT Gateway |
| **Private** | NAT Gateway (—Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥—è—â–∏–π) | –ù–µ—Ç | Application servers, containers |
| **Isolated/Intra** | –ù–µ—Ç | –ù–µ—Ç | Databases, internal services |

### CIDR Planning Best Practices

```
+------------------------------------------------------------------+
|                    CIDR Planning Guidelines                        |
+------------------------------------------------------------------+
|                                                                    |
|  AWS —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç 5 IP –≤ –∫–∞–∂–¥–æ–π –ø–æ–¥—Å–µ—Ç–∏:                           |
|  +---------------------------------------+                        |
|  | 10.0.1.0   - Network address          |                        |
|  | 10.0.1.1   - VPC Router               |                        |
|  | 10.0.1.2   - DNS Server               |                        |
|  | 10.0.1.3   - Future use (AWS)         |                        |
|  | 10.0.1.255 - Broadcast                |                        |
|  +---------------------------------------+                        |
|                                                                    |
|  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:                                                    |
|  +---------------------------------------------------------------+|
|  | VPC Size    | CIDR   | Usable IPs | Use Case                 ||
|  |-------------|--------|------------|--------------------------|
|  | /16         | Large  | 65,531     | Enterprise, many subnets ||
|  | /20         | Medium | 4,091      | Standard applications    ||
|  | /24         | Small  | 251        | Single workload          ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –ò–∑–±–µ–≥–∞–π—Ç–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å:                                         |
|  - On-premises —Å–µ—Ç—è–º–∏ (–¥–ª—è VPN/Direct Connect)                    |
|  - –î—Ä—É–≥–∏–º–∏ VPC (–¥–ª—è peering)                                      |
|  - –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 |
|                                                                    |
+------------------------------------------------------------------+
```

### Security Groups vs NACLs

```
+------------------------------------------------------------------+
|              Security Groups vs Network ACLs                       |
+------------------------------------------------------------------+
|                                                                    |
|  Security Group (Stateful)           NACL (Stateless)             |
|  +----------------------------+      +----------------------------+|
|  | Level: Instance/ENI        |      | Level: Subnet              ||
|  | State: Stateful            |      | State: Stateless           ||
|  | Rules: Allow only          |      | Rules: Allow + Deny        ||
|  | Evaluation: All rules      |      | Evaluation: By rule number ||
|  | Return traffic: Automatic  |      | Return traffic: Explicit   ||
|  +----------------------------+      +----------------------------+|
|                                                                    |
|  –ü—Ä–∏–º–µ—Ä Security Group:                                           |
|  +---------------------------------------------------------------+|
|  | Inbound:                                                       ||
|  |   HTTPS (443) from 0.0.0.0/0                                  ||
|  |   HTTP (80) from 0.0.0.0/0                                    ||
|  |   SSH (22) from sg-bastion (–¥—Ä—É–≥–∞—è SG)                        ||
|  | Outbound:                                                      ||
|  |   All traffic to 0.0.0.0/0 (default)                          ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –ü—Ä–∏–º–µ—Ä NACL:                                                     |
|  +---------------------------------------------------------------+|
|  | Inbound:                                                       ||
|  |   Rule 100: Allow HTTPS (443) from 0.0.0.0/0                  ||
|  |   Rule 110: Allow HTTP (80) from 0.0.0.0/0                    ||
|  |   Rule 120: Allow Ephemeral (1024-65535) from 0.0.0.0/0       ||
|  |   Rule *:   Deny all (implicit)                               ||
|  | Outbound:                                                      ||
|  |   Rule 100: Allow Ephemeral (1024-65535) to 0.0.0.0/0         ||
|  |   Rule *:   Deny all (implicit)                               ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Security Groups –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞—â–∏—Ç—ã,               |
|                NACLs –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π (deny blacklisted IPs)|
|                                                                    |
+------------------------------------------------------------------+
```

### Load Balancing Types

```
+------------------------------------------------------------------+
|                    AWS Load Balancer Comparison                    |
+------------------------------------------------------------------+
|                                                                    |
|  +------------------------+----------------------------------------+
|  | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞         | ALB          | NLB          | GLB     |
|  +------------------------+----------------------------------------+
|  | OSI Layer              | Layer 7      | Layer 4      | Layer 3 |
|  | Protocols              | HTTP/HTTPS   | TCP/UDP/TLS  | IP      |
|  | Routing                | Path, Host,  | IP:Port      | Route   |
|  |                        | Header, Query|              | tables  |
|  | Latency                | ~400ms scale | ~100us       | Varies  |
|  | Static IP              | No (DNS)     | Yes          | Yes     |
|  | SSL Termination        | Yes          | Yes (TLS)    | No      |
|  | WebSocket              | Yes          | Yes          | No      |
|  | gRPC                   | Yes          | Yes          | No      |
|  | Health Checks          | HTTP/HTTPS   | TCP/HTTP     | TCP/HTTP|
|  | Price                  | Lower        | Higher       | Per hour|
|  +------------------------+----------------------------------------+
|                                                                    |
|  –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:                                              |
|                                                                    |
|  ALB: Web applications, microservices, REST APIs                  |
|       Path-based routing (/api -> svc-a, /web -> svc-b)          |
|       Host-based routing (api.example.com, www.example.com)      |
|                                                                    |
|  NLB: High performance (millions RPS), low latency                |
|       TCP/UDP protocols (gaming, IoT, streaming)                  |
|       Static IP required (firewall whitelisting)                  |
|       HTTP/3 (QUIC)                                               |
|                                                                    |
|  GLB: Third-party virtual appliances                              |
|       Firewalls, IDS/IPS, deep packet inspection                  |
|       Transparent network gateway                                  |
|                                                                    |
+------------------------------------------------------------------+
```

### CDN –∏ Edge Computing

```
+------------------------------------------------------------------+
|                     CDN Architecture                               |
+------------------------------------------------------------------+
|                                                                    |
|     User (Tokyo)           User (Berlin)          User (NYC)      |
|          |                      |                      |          |
|          v                      v                      v          |
|     +--------+             +--------+             +--------+      |
|     |Edge PoP|             |Edge PoP|             |Edge PoP|      |
|     | Tokyo  |             | Berlin |             |New York|      |
|     +---+----+             +---+----+             +---+----+      |
|         |                      |                      |          |
|         | Cache HIT?           | Cache MISS?          |          |
|         | -> Return            | -> Fetch             |          |
|         |                      |                      |          |
|         +----------------------+----------------------+          |
|                                |                                  |
|                    +-----------v-----------+                      |
|                    |   Regional Edge Cache  |                     |
|                    |     (Second tier)      |                     |
|                    +-----------+-----------+                      |
|                                |                                  |
|                    +-----------v-----------+                      |
|                    |    Origin Server       |                     |
|                    |    (S3, EC2, etc.)     |                     |
|                    +-----------------------+                      |
|                                                                    |
+------------------------------------------------------------------+
```

**CloudFront Edge Computing (2025)**

| –§—É–Ω–∫—Ü–∏—è | CloudFront Functions | Lambda@Edge |
|---------|---------------------|-------------|
| Runtime | JavaScript | Node.js, Python |
| Execution time | < 1ms | Up to 30s |
| Memory | 2 MB | 128-10240 MB |
| Network access | No | Yes |
| Cold start | None (pre-warmed) | Possible |
| Price | $0.10/million | $0.60/million |
| Use cases | Header manipulation, URL rewrites, A/B testing | Auth, SSR, image optimization |

**–ì–ª–æ–±–∞–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (2025)**
- CloudFront: 600+ PoPs –≤ 100+ –≥–æ—Ä–æ–¥–∞—Ö, 50+ —Å—Ç—Ä–∞–Ω
- Cloudflare: 310+ PoPs –≤ 120+ —Å—Ç—Ä–∞–Ω
- Akamai: 4,100+ PoPs

### Service Mesh: Istio vs Linkerd

```
+------------------------------------------------------------------+
|                  Service Mesh Comparison (2025)                    |
+------------------------------------------------------------------+
|                                                                    |
|  +------------------------+----------------------------------------+
|  | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞         | Istio              | Linkerd           |
|  +------------------------+----------------------------------------+
|  | Data Plane             | Envoy (C++)        | linkerd2-proxy    |
|  |                        |                    | (Rust)            |
|  | Control Plane          | istiod             | destination,      |
|  |                        |                    | identity, proxy-  |
|  |                        |                    | injector          |
|  | Latency overhead       | +5-10ms p99        | +2-3ms p99        |
|  | Memory per proxy       | ~50-100 MB         | ~10-20 MB         |
|  | CPU overhead           | Higher             | 10x lower         |
|  | mTLS                   | Optional (config)  | On by default     |
|  | HTTP/3 support         | Yes                | No                |
|  | Multi-cluster          | Yes (complex)      | Yes (simpler)     |
|  | Learning curve         | Steep              | Gentle            |
|  | CNCF status            | Graduated          | Graduated         |
|  +------------------------+----------------------------------------+
|                                                                    |
|  2025 Benchmarks (Linkerd vs Istio Ambient):                      |
|  - At 200 RPS: Linkerd 22.83ms faster at p99                      |
|  - At 2000 RPS: Linkerd 163ms faster at p99                       |
|                                                                    |
|  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:                                                    |
|  - Linkerd: –ø—Ä–æ—Å—Ç–æ—Ç–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–µ–±–æ–ª—å—à–∏–µ –∫–æ–º–∞–Ω–¥—ã       |
|  - Istio: —Å–ª–æ–∂–Ω—ã–µ L7 routing, WASM extensibility, enterprise      |
|                                                                    |
+------------------------------------------------------------------+
```

### VPC Connectivity Options

```
+------------------------------------------------------------------+
|                  VPC Connectivity Options                          |
+------------------------------------------------------------------+
|                                                                    |
|  VPC Peering:                                                     |
|  +---------------------------------------------------------------+|
|  | - Direct connection between 2 VPCs                             ||
|  | - Non-transitive (A-B, B-C does not mean A-C)                 ||
|  | - No overlapping CIDR                                          ||
|  | - Cross-region supported (Global VPC Peering)                  ||
|  | - Up to 125 peering connections per VPC (default)              ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  Transit Gateway:                                                  |
|  +---------------------------------------------------------------+|
|  | - Hub-and-spoke for multiple VPCs                              ||
|  | - Transitive routing                                           ||
|  | - Cross-region peering                                         ||
|  | - VPN and Direct Connect attachment                            ||
|  | - Up to 5,000 VPCs per gateway                                 ||
|  | - Route tables for traffic control                             ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  PrivateLink:                                                     |
|  +---------------------------------------------------------------+|
|  | - Private access to services (no public IP needed)             ||
|  | - Unidirectional (consumer -> provider)                        ||
|  | - Interface endpoints: AWS services, custom services           ||
|  | - Gateway endpoints: S3, DynamoDB (free)                       ||
|  | - Cross-region support (2025): S3, IAM, ECR, Firehose         ||
|  | - Cost: $0.01/hour + $0.01/GB                                  ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  +---------------------------------------------------------------+|
|  | Comparison Matrix:                                             ||
|  +-------------+-------------+----------------+-------------------+|
|  |             | VPC Peering | Transit Gateway| PrivateLink       ||
|  +-------------+-------------+----------------+-------------------+|
|  | Connectivity| 1:1         | Many:Many      | Consumer:Provider ||
|  | Transitive  | No          | Yes            | N/A               ||
|  | Data cost   | Standard    | $0.02/GB       | $0.01/GB          ||
|  | Latency     | Lowest      | Low            | Low               ||
|  | Complexity  | Simple      | Medium         | Medium            ||
|  +-------------+-------------+----------------+-------------------+|
|                                                                    |
+------------------------------------------------------------------+
```

---

## –ö–ê–ö: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (35-45%)

### Terraform: Production VPC Module

```hcl
# main.tf - Production VPC —Å public/private/isolated subnets

terraform {
  required_version = ">= 1.5.0"
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

variable "environment" {
  description = "Environment name"
  type        = string
  default     = "production"
}

variable "vpc_cidr" {
  description = "VPC CIDR block"
  type        = string
  default     = "10.0.0.0/16"
}

variable "availability_zones" {
  description = "List of AZs"
  type        = list(string)
  default     = ["eu-west-1a", "eu-west-1b", "eu-west-1c"]
}

locals {
  # Subnet CIDR calculation
  public_subnets   = [for i, az in var.availability_zones : cidrsubnet(var.vpc_cidr, 8, i)]
  private_subnets  = [for i, az in var.availability_zones : cidrsubnet(var.vpc_cidr, 8, i + 10)]
  isolated_subnets = [for i, az in var.availability_zones : cidrsubnet(var.vpc_cidr, 8, i + 20)]

  common_tags = {
    Environment = var.environment
    ManagedBy   = "terraform"
    Project     = "cloud-infrastructure"
  }
}

# VPC
resource "aws_vpc" "main" {
  cidr_block           = var.vpc_cidr
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = merge(local.common_tags, {
    Name = "${var.environment}-vpc"
  })
}

# Internet Gateway
resource "aws_internet_gateway" "main" {
  vpc_id = aws_vpc.main.id

  tags = merge(local.common_tags, {
    Name = "${var.environment}-igw"
  })
}

# Public Subnets
resource "aws_subnet" "public" {
  count                   = length(var.availability_zones)
  vpc_id                  = aws_vpc.main.id
  cidr_block              = local.public_subnets[count.index]
  availability_zone       = var.availability_zones[count.index]
  map_public_ip_on_launch = true

  tags = merge(local.common_tags, {
    Name                        = "${var.environment}-public-${var.availability_zones[count.index]}"
    Type                        = "public"
    "kubernetes.io/role/elb"    = "1"
  })
}

# Private Subnets
resource "aws_subnet" "private" {
  count             = length(var.availability_zones)
  vpc_id            = aws_vpc.main.id
  cidr_block        = local.private_subnets[count.index]
  availability_zone = var.availability_zones[count.index]

  tags = merge(local.common_tags, {
    Name                              = "${var.environment}-private-${var.availability_zones[count.index]}"
    Type                              = "private"
    "kubernetes.io/role/internal-elb" = "1"
  })
}

# Isolated Subnets (no internet access)
resource "aws_subnet" "isolated" {
  count             = length(var.availability_zones)
  vpc_id            = aws_vpc.main.id
  cidr_block        = local.isolated_subnets[count.index]
  availability_zone = var.availability_zones[count.index]

  tags = merge(local.common_tags, {
    Name = "${var.environment}-isolated-${var.availability_zones[count.index]}"
    Type = "isolated"
  })
}

# Elastic IPs for NAT Gateways
resource "aws_eip" "nat" {
  count  = length(var.availability_zones)
  domain = "vpc"

  tags = merge(local.common_tags, {
    Name = "${var.environment}-nat-eip-${var.availability_zones[count.index]}"
  })

  depends_on = [aws_internet_gateway.main]
}

# NAT Gateways (one per AZ for HA)
resource "aws_nat_gateway" "main" {
  count         = length(var.availability_zones)
  allocation_id = aws_eip.nat[count.index].id
  subnet_id     = aws_subnet.public[count.index].id

  tags = merge(local.common_tags, {
    Name = "${var.environment}-nat-${var.availability_zones[count.index]}"
  })

  depends_on = [aws_internet_gateway.main]
}

# Route Tables
resource "aws_route_table" "public" {
  vpc_id = aws_vpc.main.id

  route {
    cidr_block = "0.0.0.0/0"
    gateway_id = aws_internet_gateway.main.id
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-public-rt"
  })
}

resource "aws_route_table" "private" {
  count  = length(var.availability_zones)
  vpc_id = aws_vpc.main.id

  route {
    cidr_block     = "0.0.0.0/0"
    nat_gateway_id = aws_nat_gateway.main[count.index].id
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-private-rt-${var.availability_zones[count.index]}"
  })
}

resource "aws_route_table" "isolated" {
  vpc_id = aws_vpc.main.id

  # No routes to internet

  tags = merge(local.common_tags, {
    Name = "${var.environment}-isolated-rt"
  })
}

# Route Table Associations
resource "aws_route_table_association" "public" {
  count          = length(var.availability_zones)
  subnet_id      = aws_subnet.public[count.index].id
  route_table_id = aws_route_table.public.id
}

resource "aws_route_table_association" "private" {
  count          = length(var.availability_zones)
  subnet_id      = aws_subnet.private[count.index].id
  route_table_id = aws_route_table.private[count.index].id
}

resource "aws_route_table_association" "isolated" {
  count          = length(var.availability_zones)
  subnet_id      = aws_subnet.isolated[count.index].id
  route_table_id = aws_route_table.isolated.id
}

# VPC Flow Logs
resource "aws_flow_log" "main" {
  vpc_id          = aws_vpc.main.id
  traffic_type    = "ALL"
  iam_role_arn    = aws_iam_role.flow_logs.arn
  log_destination = aws_cloudwatch_log_group.flow_logs.arn

  tags = merge(local.common_tags, {
    Name = "${var.environment}-flow-logs"
  })
}

resource "aws_cloudwatch_log_group" "flow_logs" {
  name              = "/aws/vpc/flow-logs/${var.environment}"
  retention_in_days = 30

  tags = local.common_tags
}

resource "aws_iam_role" "flow_logs" {
  name = "${var.environment}-vpc-flow-logs-role"

  assume_role_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [{
      Action = "sts:AssumeRole"
      Effect = "Allow"
      Principal = {
        Service = "vpc-flow-logs.amazonaws.com"
      }
    }]
  })

  tags = local.common_tags
}

resource "aws_iam_role_policy" "flow_logs" {
  name = "${var.environment}-vpc-flow-logs-policy"
  role = aws_iam_role.flow_logs.id

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [{
      Action = [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "logs:DescribeLogGroups",
        "logs:DescribeLogStreams"
      ]
      Effect   = "Allow"
      Resource = "*"
    }]
  })
}

# Outputs
output "vpc_id" {
  description = "VPC ID"
  value       = aws_vpc.main.id
}

output "public_subnet_ids" {
  description = "Public subnet IDs"
  value       = aws_subnet.public[*].id
}

output "private_subnet_ids" {
  description = "Private subnet IDs"
  value       = aws_subnet.private[*].id
}

output "isolated_subnet_ids" {
  description = "Isolated subnet IDs"
  value       = aws_subnet.isolated[*].id
}
```

### Terraform: Application Load Balancer

```hcl
# alb.tf - Production ALB with HTTPS

resource "aws_lb" "main" {
  name               = "${var.environment}-alb"
  internal           = false
  load_balancer_type = "application"
  security_groups    = [aws_security_group.alb.id]
  subnets            = aws_subnet.public[*].id

  enable_deletion_protection = true
  enable_http2               = true

  # Access logs to S3
  access_logs {
    bucket  = aws_s3_bucket.alb_logs.id
    prefix  = "alb"
    enabled = true
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-alb"
  })
}

resource "aws_security_group" "alb" {
  name        = "${var.environment}-alb-sg"
  description = "Security group for ALB"
  vpc_id      = aws_vpc.main.id

  ingress {
    description = "HTTPS from internet"
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  ingress {
    description = "HTTP for redirect"
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-alb-sg"
  })
}

# HTTPS Listener
resource "aws_lb_listener" "https" {
  load_balancer_arn = aws_lb.main.arn
  port              = "443"
  protocol          = "HTTPS"
  ssl_policy        = "ELBSecurityPolicy-TLS13-1-2-2021-06"
  certificate_arn   = var.acm_certificate_arn

  default_action {
    type = "fixed-response"
    fixed_response {
      content_type = "text/plain"
      message_body = "Not Found"
      status_code  = "404"
    }
  }
}

# HTTP to HTTPS redirect
resource "aws_lb_listener" "http_redirect" {
  load_balancer_arn = aws_lb.main.arn
  port              = "80"
  protocol          = "HTTP"

  default_action {
    type = "redirect"
    redirect {
      port        = "443"
      protocol    = "HTTPS"
      status_code = "HTTP_301"
    }
  }
}

# Target Group
resource "aws_lb_target_group" "app" {
  name        = "${var.environment}-app-tg"
  port        = 8080
  protocol    = "HTTP"
  vpc_id      = aws_vpc.main.id
  target_type = "ip"

  health_check {
    enabled             = true
    healthy_threshold   = 2
    interval            = 30
    matcher             = "200-299"
    path                = "/health"
    port                = "traffic-port"
    protocol            = "HTTP"
    timeout             = 5
    unhealthy_threshold = 3
  }

  # Slow start for gradual traffic shift
  slow_start = 60

  # Deregistration delay for graceful shutdown
  deregistration_delay = 30

  tags = merge(local.common_tags, {
    Name = "${var.environment}-app-tg"
  })
}

# Listener Rule for API
resource "aws_lb_listener_rule" "api" {
  listener_arn = aws_lb_listener.https.arn
  priority     = 100

  action {
    type             = "forward"
    target_group_arn = aws_lb_target_group.app.arn
  }

  condition {
    path_pattern {
      values = ["/api/*"]
    }
  }

  condition {
    host_header {
      values = ["api.${var.domain_name}"]
    }
  }
}
```

### Terraform: CloudFront Distribution

```hcl
# cloudfront.tf - CDN with S3 origin and caching

resource "aws_cloudfront_distribution" "main" {
  enabled             = true
  is_ipv6_enabled     = true
  comment             = "${var.environment} CDN"
  default_root_object = "index.html"
  price_class         = "PriceClass_100"  # US, Canada, Europe

  aliases = [var.domain_name, "www.${var.domain_name}"]

  # S3 Origin for static assets
  origin {
    domain_name              = aws_s3_bucket.static.bucket_regional_domain_name
    origin_id                = "S3-static"
    origin_access_control_id = aws_cloudfront_origin_access_control.main.id
  }

  # ALB Origin for API
  origin {
    domain_name = aws_lb.main.dns_name
    origin_id   = "ALB-api"

    custom_origin_config {
      http_port              = 80
      https_port             = 443
      origin_protocol_policy = "https-only"
      origin_ssl_protocols   = ["TLSv1.2"]
    }
  }

  # Default behavior - S3 static
  default_cache_behavior {
    allowed_methods        = ["GET", "HEAD", "OPTIONS"]
    cached_methods         = ["GET", "HEAD"]
    target_origin_id       = "S3-static"
    viewer_protocol_policy = "redirect-to-https"
    compress               = true

    cache_policy_id            = aws_cloudfront_cache_policy.static.id
    origin_request_policy_id   = data.aws_cloudfront_origin_request_policy.cors_s3.id
    response_headers_policy_id = aws_cloudfront_response_headers_policy.security.id

    # CloudFront Functions for URL rewrite
    function_association {
      event_type   = "viewer-request"
      function_arn = aws_cloudfront_function.url_rewrite.arn
    }
  }

  # API behavior - pass to ALB
  ordered_cache_behavior {
    path_pattern           = "/api/*"
    allowed_methods        = ["DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT"]
    cached_methods         = ["GET", "HEAD"]
    target_origin_id       = "ALB-api"
    viewer_protocol_policy = "https-only"
    compress               = true

    cache_policy_id          = data.aws_cloudfront_cache_policy.disabled.id
    origin_request_policy_id = data.aws_cloudfront_origin_request_policy.all_viewer.id
  }

  # Custom error responses
  custom_error_response {
    error_code         = 404
    response_code      = 200
    response_page_path = "/index.html"  # SPA fallback
  }

  restrictions {
    geo_restriction {
      restriction_type = "none"
    }
  }

  viewer_certificate {
    acm_certificate_arn      = var.acm_certificate_arn
    ssl_support_method       = "sni-only"
    minimum_protocol_version = "TLSv1.2_2021"
  }

  # WAF integration
  web_acl_id = aws_wafv2_web_acl.main.arn

  tags = local.common_tags
}

# Cache Policy for static assets
resource "aws_cloudfront_cache_policy" "static" {
  name        = "${var.environment}-static-cache"
  comment     = "Cache policy for static assets"
  default_ttl = 86400    # 1 day
  max_ttl     = 31536000 # 1 year
  min_ttl     = 0

  parameters_in_cache_key_and_forwarded_to_origin {
    cookies_config {
      cookie_behavior = "none"
    }
    headers_config {
      header_behavior = "none"
    }
    query_strings_config {
      query_string_behavior = "none"
    }
    enable_accept_encoding_brotli = true
    enable_accept_encoding_gzip   = true
  }
}

# Security headers policy
resource "aws_cloudfront_response_headers_policy" "security" {
  name    = "${var.environment}-security-headers"
  comment = "Security headers policy"

  security_headers_config {
    strict_transport_security {
      access_control_max_age_sec = 31536000
      include_subdomains         = true
      preload                    = true
      override                   = true
    }
    content_type_options {
      override = true
    }
    frame_options {
      frame_option = "DENY"
      override     = true
    }
    xss_protection {
      mode_block = true
      protection = true
      override   = true
    }
    content_security_policy {
      content_security_policy = "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"
      override                = true
    }
  }
}

# CloudFront Function for URL rewrite
resource "aws_cloudfront_function" "url_rewrite" {
  name    = "${var.environment}-url-rewrite"
  runtime = "cloudfront-js-2.0"
  comment = "URL rewrite for SPA"
  publish = true

  code = <<-EOF
    function handler(event) {
      var request = event.request;
      var uri = request.uri;

      // Add index.html for directory requests
      if (uri.endsWith('/')) {
        request.uri += 'index.html';
      }
      // Add .html extension if no extension
      else if (!uri.includes('.')) {
        request.uri += '/index.html';
      }

      return request;
    }
  EOF
}

# Origin Access Control for S3
resource "aws_cloudfront_origin_access_control" "main" {
  name                              = "${var.environment}-oac"
  description                       = "OAC for S3"
  origin_access_control_origin_type = "s3"
  signing_behavior                  = "always"
  signing_protocol                  = "sigv4"
}
```

### Istio Service Mesh Configuration

```yaml
# istio-config.yaml - Production Istio configuration

---
# Gateway for ingress traffic
apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: main-gateway
  namespace: istio-system
spec:
  selector:
    istio: ingressgateway
  servers:
    - port:
        number: 443
        name: https
        protocol: HTTPS
      tls:
        mode: SIMPLE
        credentialName: tls-secret
      hosts:
        - "*.example.com"
    - port:
        number: 80
        name: http
        protocol: HTTP
      hosts:
        - "*.example.com"
      tls:
        httpsRedirect: true

---
# VirtualService with traffic management
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: api-service
  namespace: production
spec:
  hosts:
    - api.example.com
  gateways:
    - istio-system/main-gateway
  http:
    # Canary deployment - 10% to v2
    - match:
        - uri:
            prefix: /api/v1
      route:
        - destination:
            host: api-service
            subset: stable
            port:
              number: 8080
          weight: 90
        - destination:
            host: api-service
            subset: canary
            port:
              number: 8080
          weight: 10
      # Timeouts and retries
      timeout: 30s
      retries:
        attempts: 3
        perTryTimeout: 10s
        retryOn: connect-failure,refused-stream,unavailable,cancelled,retriable-4xx,503

---
# DestinationRule with circuit breaker
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: api-service
  namespace: production
spec:
  host: api-service
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
        connectTimeout: 5s
      http:
        h2UpgradePolicy: UPGRADE
        http1MaxPendingRequests: 100
        http2MaxRequests: 1000
        maxRequestsPerConnection: 10
        maxRetries: 3
    loadBalancer:
      simple: LEAST_REQUEST
    outlierDetection:
      consecutive5xxErrors: 5
      interval: 30s
      baseEjectionTime: 30s
      maxEjectionPercent: 50
      minHealthPercent: 30
  subsets:
    - name: stable
      labels:
        version: v1
    - name: canary
      labels:
        version: v2

---
# PeerAuthentication for mTLS
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: production
spec:
  mtls:
    mode: STRICT

---
# AuthorizationPolicy
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: api-authz
  namespace: production
spec:
  selector:
    matchLabels:
      app: api-service
  rules:
    # Allow from frontend service
    - from:
        - source:
            principals: ["cluster.local/ns/production/sa/frontend-service"]
      to:
        - operation:
            methods: ["GET", "POST"]
            paths: ["/api/v1/*"]
    # Allow from gateway
    - from:
        - source:
            namespaces: ["istio-system"]
      to:
        - operation:
            methods: ["GET", "POST", "PUT", "DELETE"]
```

### Security Groups Best Practices

```hcl
# security-groups.tf - Layered security group design

# ALB Security Group
resource "aws_security_group" "alb" {
  name        = "${var.environment}-alb-sg"
  description = "ALB security group - internet facing"
  vpc_id      = aws_vpc.main.id

  ingress {
    description = "HTTPS from CloudFront"
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    # CloudFront IP ranges (managed prefix list)
    prefix_list_ids = [data.aws_ec2_managed_prefix_list.cloudfront.id]
  }

  egress {
    description     = "To app servers"
    from_port       = 8080
    to_port         = 8080
    protocol        = "tcp"
    security_groups = [aws_security_group.app.id]
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-alb-sg"
  })
}

# Application Security Group
resource "aws_security_group" "app" {
  name        = "${var.environment}-app-sg"
  description = "Application servers security group"
  vpc_id      = aws_vpc.main.id

  ingress {
    description     = "From ALB"
    from_port       = 8080
    to_port         = 8080
    protocol        = "tcp"
    security_groups = [aws_security_group.alb.id]
  }

  ingress {
    description = "Inter-service communication"
    from_port   = 8080
    to_port     = 8080
    protocol    = "tcp"
    self        = true
  }

  egress {
    description     = "To database"
    from_port       = 5432
    to_port         = 5432
    protocol        = "tcp"
    security_groups = [aws_security_group.db.id]
  }

  egress {
    description     = "To Redis"
    from_port       = 6379
    to_port         = 6379
    protocol        = "tcp"
    security_groups = [aws_security_group.cache.id]
  }

  egress {
    description = "HTTPS to internet (APIs, package managers)"
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-app-sg"
  })
}

# Database Security Group
resource "aws_security_group" "db" {
  name        = "${var.environment}-db-sg"
  description = "Database security group"
  vpc_id      = aws_vpc.main.id

  ingress {
    description     = "PostgreSQL from app"
    from_port       = 5432
    to_port         = 5432
    protocol        = "tcp"
    security_groups = [aws_security_group.app.id]
  }

  # No egress rules - database doesn't initiate connections

  tags = merge(local.common_tags, {
    Name = "${var.environment}-db-sg"
  })
}

# Cache Security Group
resource "aws_security_group" "cache" {
  name        = "${var.environment}-cache-sg"
  description = "Redis cache security group"
  vpc_id      = aws_vpc.main.id

  ingress {
    description     = "Redis from app"
    from_port       = 6379
    to_port         = 6379
    protocol        = "tcp"
    security_groups = [aws_security_group.app.id]
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-cache-sg"
  })
}

# Bastion Security Group
resource "aws_security_group" "bastion" {
  name        = "${var.environment}-bastion-sg"
  description = "Bastion host security group"
  vpc_id      = aws_vpc.main.id

  ingress {
    description = "SSH from allowed IPs"
    from_port   = 22
    to_port     = 22
    protocol    = "tcp"
    cidr_blocks = var.allowed_ssh_cidrs
  }

  egress {
    description     = "SSH to app servers"
    from_port       = 22
    to_port         = 22
    protocol        = "tcp"
    security_groups = [aws_security_group.app.id]
  }

  tags = merge(local.common_tags, {
    Name = "${var.environment}-bastion-sg"
  })
}
```

### Multi-Cloud VPC Comparison

```hcl
# AWS VPC
module "aws_vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "~> 5.0"

  name = "production"
  cidr = "10.0.0.0/16"

  azs             = ["eu-west-1a", "eu-west-1b", "eu-west-1c"]
  private_subnets = ["10.0.1.0/24", "10.0.2.0/24", "10.0.3.0/24"]
  public_subnets  = ["10.0.101.0/24", "10.0.102.0/24", "10.0.103.0/24"]

  enable_nat_gateway     = true
  single_nat_gateway     = false
  one_nat_gateway_per_az = true

  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = {
    Environment = "production"
  }
}

# Azure Virtual Network
resource "azurerm_virtual_network" "main" {
  name                = "production-vnet"
  location            = azurerm_resource_group.main.location
  resource_group_name = azurerm_resource_group.main.name
  address_space       = ["10.1.0.0/16"]

  tags = {
    environment = "production"
  }
}

resource "azurerm_subnet" "public" {
  name                 = "public-subnet"
  resource_group_name  = azurerm_resource_group.main.name
  virtual_network_name = azurerm_virtual_network.main.name
  address_prefixes     = ["10.1.1.0/24"]
}

resource "azurerm_subnet" "private" {
  name                 = "private-subnet"
  resource_group_name  = azurerm_resource_group.main.name
  virtual_network_name = azurerm_virtual_network.main.name
  address_prefixes     = ["10.1.2.0/24"]

  # Service endpoints for Azure services
  service_endpoints = ["Microsoft.Storage", "Microsoft.Sql"]
}

# Google Cloud VPC
resource "google_compute_network" "main" {
  name                    = "production-vpc"
  auto_create_subnetworks = false
  routing_mode            = "GLOBAL"
}

resource "google_compute_subnetwork" "private" {
  name                     = "private-subnet"
  ip_cidr_range            = "10.2.1.0/24"
  region                   = "europe-west1"
  network                  = google_compute_network.main.id
  private_ip_google_access = true

  # Secondary ranges for GKE
  secondary_ip_range {
    range_name    = "pods"
    ip_cidr_range = "10.3.0.0/16"
  }
  secondary_ip_range {
    range_name    = "services"
    ip_cidr_range = "10.4.0.0/20"
  }
}

# Cloud NAT for private instances
resource "google_compute_router" "router" {
  name    = "production-router"
  region  = "europe-west1"
  network = google_compute_network.main.id
}

resource "google_compute_router_nat" "nat" {
  name                               = "production-nat"
  router                             = google_compute_router.router.name
  region                             = google_compute_router.router.region
  nat_ip_allocate_option             = "AUTO_ONLY"
  source_subnetwork_ip_ranges_to_nat = "ALL_SUBNETWORKS_ALL_IP_RANGES"
}
```

---

## –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ (10-15%)

### 1. CIDR Planning Mistakes

```
+------------------------------------------------------------------+
|                   CIDR Planning Pitfalls                           |
+------------------------------------------------------------------+
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è CIDR                                    |
|  +---------------------------------------------------------------+|
|  | VPC A: 10.0.0.0/16                                             ||
|  | VPC B: 10.0.0.0/16  <- –ù–ï–õ–¨–ó–Ø –°–û–ï–î–ò–ù–ò–¢–¨ —á–µ—Ä–µ–∑ peering!        ||
|  |                                                                ||
|  | On-premises: 10.0.0.0/8 <- –ö–û–ù–§–õ–ò–ö–¢ —Å VPC –ø—Ä–∏ VPN!            ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ CIDR –∑–∞—Ä–∞–Ω–µ–µ                                 |
|  - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å–µ—Ç–∏                                        |
|  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ /16 –±–ª–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ä–µ–¥—ã                  |
|  - –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –∑–∞–ø–∞—Å –¥–ª—è —Ä–æ—Å—Ç–∞                                     |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–¥—Å–µ—Ç–∏                              |
|  +---------------------------------------------------------------+|
|  | /24 = 251 usable IPs (256 - 5 reserved)                       ||
|  | Kubernetes pod per node: 30-110                                ||
|  | 100 nodes * 30 pods = –Ω—É–∂–Ω–æ 3000 IPs –º–∏–Ω–∏–º—É–º!                 ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: –î–ª—è EKS/GKE –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /19 –∏–ª–∏ –±–æ–ª—å—à–µ –¥–ª—è pods        |
|                                                                    |
+------------------------------------------------------------------+
```

### 2. NAT Gateway Costs

```
+------------------------------------------------------------------+
|                  NAT Gateway Cost Explosion                        |
+------------------------------------------------------------------+
|                                                                    |
|  –¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π "–Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–≥–æ —Å—á–µ—Ç–∞":                          |
|  +---------------------------------------------------------------+|
|  | NAT Gateway hour: $0.045/hour = $32.40/month                  ||
|  | Data processing: $0.045/GB                                     ||
|  |                                                                ||
|  | Container pulls: 100 nodes * 5GB/day = 500GB                  ||
|  | 500GB * 30 days * $0.045 = $675/month –¢–û–õ–¨–ö–û –∑–∞ pulls!        ||
|  |                                                                ||
|  | + Logs to CloudWatch —á–µ—Ä–µ–∑ NAT                                 ||
|  | + API calls –∫ AWS services —á–µ—Ä–µ–∑ NAT                          ||
|  | + Dependency downloads                                         ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏—è:                                                         |
|  1. VPC Endpoints –¥–ª—è AWS services (S3, ECR, CloudWatch)         |
|     - Gateway endpoints: –ë–ï–°–ü–õ–ê–¢–ù–û (S3, DynamoDB)                 |
|     - Interface endpoints: $0.01/hour + $0.01/GB                  |
|                                                                    |
|  2. ECR pull-through cache                                        |
|                                                                    |
|  3. Private subnets —Å VPC endpoints –≤–º–µ—Å—Ç–æ NAT –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ       |
|                                                                    |
|  4. –û–¥–∏–Ω NAT Gateway –¥–ª—è dev/staging (–Ω–µ HA, –Ω–æ –¥–µ—à–µ–≤–ª–µ)          |
|                                                                    |
+------------------------------------------------------------------+
```

### 3. Security Group Complexity

```
+------------------------------------------------------------------+
|                 Security Group Anti-patterns                       |
+------------------------------------------------------------------+
|                                                                    |
|  Anti-pattern: –û—Ç–∫—Ä—ã—Ç—ã–π 0.0.0.0/0                                 |
|  +---------------------------------------------------------------+|
|  | ingress {                                                      ||
|  |   from_port   = 22                                            ||
|  |   to_port     = 22                                            ||
|  |   protocol    = "tcp"                                         ||
|  |   cidr_blocks = ["0.0.0.0/0"]  # –ù–ò–ö–û–ì–î–ê –¥–ª—è SSH!            ||
|  | }                                                              ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  Anti-pattern: –í—Å–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã                                  |
|  +---------------------------------------------------------------+|
|  | ingress {                                                      ||
|  |   from_port   = 0                                             ||
|  |   to_port     = 65535          # –í–ï–°–¨ –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤        ||
|  |   protocol    = "-1"           # –í–°–ï –ø—Ä–æ—Ç–æ–∫–æ–ª—ã               ||
|  | }                                                              ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  Anti-pattern: –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ SG                         |
|  +---------------------------------------------------------------+|
|  | SG-A references SG-B                                          ||
|  | SG-B references SG-A                                          ||
|  | -> Terraform circular dependency error                         ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ aws_security_group_rule –æ—Ç–¥–µ–ª—å–Ω–æ            |
|                                                                    |
+------------------------------------------------------------------+
```

### 4. Load Balancer Misconfiguration

```
+------------------------------------------------------------------+
|                 Load Balancer Pitfalls                             |
+------------------------------------------------------------------+
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ health checks                             |
|  +---------------------------------------------------------------+|
|  | - Path /health –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç -> –≤—Å–µ targets unhealthy         ||
|  | - Interval —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π -> –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞                      ||
|  | - Threshold —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π -> flapping                         ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:                                                    |
|  - interval: 30s, healthy_threshold: 2, unhealthy_threshold: 3   |
|  - –û—Ç–¥–µ–ª—å–Ω—ã–π endpoint /health (–Ω–µ / - –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—è–∂–µ–ª—ã–º)        |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–±—ã–ª–∏ –ø—Ä–æ deregistration_delay                        |
|  +---------------------------------------------------------------+|
|  | Default: 300 —Å–µ–∫—É–Ω–¥ (5 –º–∏–Ω—É—Ç!)                                ||
|  | Deployment –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—á–Ω–æ—Å—Ç—å                                   ||
|  | Connections –æ–±—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º drain                       ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 30-60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π            |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: ALB vs NLB –≤—ã–±–æ—Ä                                       |
|  +---------------------------------------------------------------+|
|  | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ ALB –¥–ª—è gRPC –±–µ–∑ HTTP/2 -> –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç           ||
|  | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ ALB –¥–ª—è WebSocket –±–µ–∑ sticky -> —Ä–∞–∑—Ä—ã–≤—ã          ||
|  | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ NLB –¥–ª—è path routing -> –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ               ||
|  +---------------------------------------------------------------+|
|                                                                    |
+------------------------------------------------------------------+
```

### 5. CDN Cache Issues

```
+------------------------------------------------------------------+
|                    CDN Caching Problems                            |
+------------------------------------------------------------------+
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–∫–µ—à–∏—Ä–æ–≤–∞–ª—Å—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç                        |
|  +---------------------------------------------------------------+|
|  | User A –ª–æ–≥–∏–Ω–∏—Ç—Å—è -> –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è                 ||
|  | CDN –∫–µ—à–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É                                         ||
|  | User B -> –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å User A –∏–∑ –∫–µ—à–∞!                    ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ:                                                         |
|  - Cache-Control: private, no-store –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö      |
|  - Vary: Cookie –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞                |
|  - –û—Ç–¥–µ–ª—å–Ω—ã–µ behaviors –≤ CloudFront –¥–ª—è /api/*                   |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: Stale content –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è                             |
|  +---------------------------------------------------------------+|
|  | –ó–∞–¥–µ–ø–ª–æ–∏–ª–∏ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é JS                                    ||
|  | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–¥ (TTL 1 –≥–æ–¥)                     ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: Content hashing                                         |
|  - app.abc123.js –≤–º–µ—Å—Ç–æ app.js                                   |
|  - Cache-Control: immutable –¥–ª—è versioned assets                 |
|  - Invalidation —Ç–æ–ª—å–∫–æ –¥–ª—è index.html                            |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: Origin overload –ø—Ä–∏ cache miss storm                   |
|  +---------------------------------------------------------------+|
|  | –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–ª–∏ –≤–µ—Å—å –∫–µ—à                                       ||
|  | 1M –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–¥—É—Ç –∫ origin                        ||
|  | Origin –ø–∞–¥–∞–µ—Ç                                                  ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: Stale-while-revalidate, request collapsing             |
|                                                                    |
+------------------------------------------------------------------+
```

### 6. Service Mesh Overhead

```
+------------------------------------------------------------------+
|                  Service Mesh Pitfalls                             |
+------------------------------------------------------------------+
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: Latency overhead                                       |
|  +---------------------------------------------------------------+|
|  | Istio sidecar –¥–æ–±–∞–≤–ª—è–µ—Ç 5-10ms –Ω–∞ –∫–∞–∂–¥—ã–π hop                  ||
|  | Service A -> B -> C -> D = +40ms –∫ latency                    ||
|  | –î–ª—è latency-critical –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ                  ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: Linkerd (2-3ms), –∏–ª–∏ bypass –¥–ª—è internal traffic       |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: Resource consumption                                   |
|  +---------------------------------------------------------------+|
|  | 1000 pods * Envoy sidecar (100MB) = 100GB RAM —Ç–æ–ª—å–∫–æ –Ω–∞ mesh ||
|  | CPU overhead 5-15% –Ω–∞ pod                                     ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ:                                                         |
|  - Linkerd proxy: ~10-20MB                                       |
|  - Istio Ambient mode (–±–µ–∑ sidecar per pod)                      |
|  - Resource limits –Ω–∞ sidecars                                   |
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: Complexity explosion                                   |
|  +---------------------------------------------------------------+|
|  | Istio VirtualService + DestinationRule + Gateway +            ||
|  | PeerAuthentication + AuthorizationPolicy + ...                ||
|  | Debugging —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è nightmare                                ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ—à–µ–Ω–∏–µ: –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç–æ–≥–æ (mTLS + observability),             |
|           –¥–æ–±–∞–≤–ª—è–π—Ç–µ features –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏               |
|                                                                    |
+------------------------------------------------------------------+
```

### 7. Multi-Cloud Networking Challenges

```
+------------------------------------------------------------------+
|              Multi-Cloud Networking Issues                         |
+------------------------------------------------------------------+
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è                                    |
|  +---------------------------------------------------------------+|
|  | AWS Security Group = Azure NSG = GCP Firewall Rule            ||
|  | AWS NAT Gateway = Azure NAT Gateway = GCP Cloud NAT           ||
|  | AWS Transit Gateway = Azure Virtual WAN = GCP Network         ||
|  |                                           Connectivity Center ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–Ω—ã–µ default behaviors                               |
|  +---------------------------------------------------------------+|
|  | AWS VPC: default deny all                                     ||
|  | GCP: default allow internal, deny external                    ||
|  | Azure: default allow outbound, deny inbound                   ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –ü—Ä–æ–±–ª–µ–º–∞: Cross-cloud latency                                    |
|  +---------------------------------------------------------------+|
|  | AWS eu-west-1 <-> GCP europe-west1: ~10-20ms                  ||
|  | –ß–µ—Ä–µ–∑ public internet: variable, higher                       ||
|  | Dedicated interconnect: expensive but consistent              ||
|  +---------------------------------------------------------------+|
|                                                                    |
|  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:                                                    |
|  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é (Terraform modules, Pulumi)            |
|  - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–∏—è                                        |
|  - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ latency –ø–µ—Ä–µ–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏             |
|                                                                    |
+------------------------------------------------------------------+
```

---

## –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã 2024-2025

### AWS VPC Lattice: –∑–∞–º–µ–Ω–∞ App Mesh

#### –ü–æ—á–µ–º—É AWS –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç App Mesh

**–ò—Å—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø—Ä–æ–±–ª–µ–º—ã App Mesh.** –í 2019 –≥–æ–¥—É AWS –∑–∞–ø—É—Å—Ç–∏–ª App Mesh –∫–∞–∫ –æ—Ç–≤–µ—Ç –Ω–∞ —Ä–∞—Å—Ç—É—â—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å Istio –∏ service mesh –≤ —Ü–µ–ª–æ–º. –ò–¥–µ—è –±—ã–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π: –≤ –º–∏—Ä–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω—É–∂–µ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ ‚Äî –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞, —Ä–µ—Ç—Ä–∞–∏, —Ç–∞–π–º–∞—É—Ç—ã, mTLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.

**–ù–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–∫–∞–∑–∞–ª–∞—Å—å —Å–ª–æ–∂–Ω–æ–π.** App Mesh —Ä–∞–±–æ—Ç–∞–ª —á–µ—Ä–µ–∑ Envoy sidecar –ø—Ä–æ–∫—Å–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–ª—Å—è —Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –ø–æ–¥–æ–º –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:

1. **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å.** –ù—É–∂–Ω–æ –±—ã–ª–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏—è–º–∏ Envoy, –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Ö –∑–¥–æ—Ä–æ–≤—å–µ, –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏. –£ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∞ —Ç–µ–ø–µ—Ä—å –±—ã–ª–æ –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ.

2. **Overhead —Ä–µ—Å—É—Ä—Å–æ–≤.** –ö–∞–∂–¥—ã–π Envoy sidecar –ø–æ—Ç—Ä–µ–±–ª—è–ª –ø–∞–º—è—Ç—å –∏ CPU. –ü—Ä–∏ 100 –ø–æ–¥–∞—Ö —ç—Ç–æ —É–∂–µ –æ—â—É—Ç–∏–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.

3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.** App Mesh —Ä–∞–±–æ—Ç–∞–ª —Ç–æ–ª—å–∫–æ —Å ECS –∏ EKS. Lambda, EC2 Auto Scaling Groups ‚Äî –≤—Å—ë —ç—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–ª–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.

4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å cross-VPC –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.** –ß—Ç–æ–±—ã —Å–µ—Ä–≤–∏—Å—ã –≤ —Ä–∞–∑–Ω—ã—Ö VPC –æ–±—â–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ App Mesh, –Ω—É–∂–Ω–æ –±—ã–ª–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Transit Gateway, VPC Peering, NAT ‚Äî –æ–≥—Ä–æ–º–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞.

**Adoption –±—ã–ª –Ω–∏–∑–∫–∏–º.** AWS –ø—Ä–∏–∑–Ω–∞–ª —ç—Ç–æ –≤ 2024 –≥–æ–¥—É, –æ–±—ä—è–≤–∏–≤ –æ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–∏ App Mesh —Å 30 —Å–µ–Ω—Ç—è–±—Ä—è 2026 –≥–æ–¥–∞. –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å 24 —Å–µ–Ω—Ç—è–±—Ä—è 2024 –≥–æ–¥–∞.

**VPC Lattice ‚Äî —ç—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥.** –í–º–µ—Å—Ç–æ sidecar –ø—Ä–æ–∫—Å–∏ –≤ –∫–∞–∂–¥–æ–º –ø–æ–¥–µ, Lattice —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∞–º–æ–π —Å–µ—Ç–∏ AWS. –≠—Ç–æ "managed data plane" ‚Äî –≤—ã –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –ø—Ä–æ–∫—Å–∏, AWS –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∑–∞ –≤–∞—Å. –¢—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É AWS –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –≤–∞—à–∏—Ö –ø–æ–¥–∞—Ö.

**–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** VPC Lattice –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∏—Ä–∞, –≥–¥–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å Lambda-—Ñ—É–Ω–∫—Ü–∏—è–º–∏, ECS-–∑–∞–¥–∞—á–∞–º–∏, EKS-–ø–æ–¥–∞–º–∏ –∏ EC2-–∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ò –≤—Å–µ –æ–Ω–∏ –º–æ–≥—É—Ç –∂–∏—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö VPC –∏ –¥–∞–∂–µ —Ä–∞–∑–Ω—ã—Ö AWS-–∞–∫–∫–∞—É–Ω—Ç–∞—Ö. Lattice —Ä–µ—à–∞–µ—Ç cross-VPC routing –Ω–∞—Ç–∏–≤–Ω–æ, —á–µ—Ä–µ–∑ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ Service Networks.

```
AWS Service Mesh Evolution:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                 ‚îÇ
‚îÇ  AWS App Mesh (DEPRECATED)              VPC Lattice (NEW)       ‚îÇ
‚îÇ  +-----------------------------+   +---------------------------+‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Envoy sidecar proxies    ‚îÇ   ‚îÇ ‚Ä¢ No sidecars required    ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Complex configuration    ‚îÇ   ‚îÇ ‚Ä¢ Managed data plane      ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Manual observability     ‚îÇ   ‚îÇ ‚Ä¢ Built-in CloudWatch     ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Per-pod overhead         ‚îÇ   ‚îÇ ‚Ä¢ Service Networks        ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ K8s/ECS only             ‚îÇ   ‚îÇ ‚Ä¢ Lambda/EC2/ECS/EKS      ‚îÇ‚îÇ
‚îÇ  +-----------------------------+   +---------------------------+‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  re:Invent 2024 –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:                                     ‚îÇ
‚îÇ  ‚Ä¢ ECS native integration                                       ‚îÇ
‚îÇ  ‚Ä¢ TCP protocol support (–Ω–µ —Ç–æ–ª—å–∫–æ HTTP/HTTPS/gRPC)             ‚îÇ
‚îÇ  ‚Ä¢ VPC Resources –¥–ª—è on-premises connectivity                   ‚îÇ
‚îÇ  ‚Ä¢ Cross-region PrivateLink support                             ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPC Lattice:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|--------------|
| Multi-VPC service-to-service | **VPC Lattice** ‚Äî native cross-VPC |
| Lambda + ECS + EKS hybrid | **VPC Lattice** ‚Äî unified networking |
| Simple ECS-only | **Service Connect** ‚Äî –ø—Ä–æ—â–µ |
| Name resolution only | **Cloud Map** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| Overlapping CIDRs | **VPC Lattice** ‚Äî link-local addresses |

```hcl
# Terraform: VPC Lattice Service Network
resource "aws_vpclattice_service_network" "main" {
  name      = "production-network"
  auth_type = "AWS_IAM"

  tags = {
    Environment = "production"
  }
}

resource "aws_vpclattice_service_network_vpc_association" "app_vpc" {
  vpc_identifier             = aws_vpc.app.id
  service_network_identifier = aws_vpclattice_service_network.main.id
  security_group_ids         = [aws_security_group.lattice.id]
}

# VPC Lattice Service
resource "aws_vpclattice_service" "api" {
  name               = "api-service"
  auth_type          = "AWS_IAM"
  custom_domain_name = "api.internal.example.com"
}

resource "aws_vpclattice_target_group" "api" {
  name = "api-targets"
  type = "IP"

  config {
    vpc_identifier = aws_vpc.app.id
    port           = 8080
    protocol       = "HTTP"

    health_check {
      enabled             = true
      path                = "/health"
      protocol            = "HTTP"
      healthy_threshold   = 2
      unhealthy_threshold = 3
    }
  }
}

resource "aws_vpclattice_listener" "api" {
  name               = "api-listener"
  protocol           = "HTTPS"
  port               = 443
  service_identifier = aws_vpclattice_service.api.id

  default_action {
    forward {
      target_groups {
        target_group_identifier = aws_vpclattice_target_group.api.id
        weight                  = 100
      }
    }
  }
}

# Auth Policy (IAM-based)
resource "aws_vpclattice_auth_policy" "api" {
  resource_identifier = aws_vpclattice_service.api.arn

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [{
      Effect    = "Allow"
      Principal = "*"
      Action    = "vpc-lattice-svcs:Invoke"
      Resource  = "*"
      Condition = {
        StringEquals = {
          "aws:PrincipalTag/Team" = "backend"
        }
      }
    }]
  })
}
```

### Cilium –∏ eBPF Networking

#### –ü–æ—á–µ–º—É iptables –∏ kube-proxy –±–æ–ª—å—à–µ –Ω–µ —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.** –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–ª—Å—è Kubernetes –≤ 2014 –≥–æ–¥—É, –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤—ã–±—Ä–∞–ª–∏ iptables ‚Äî –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–ª–∞ –≤ Linux –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏—è–º–∏. Kube-proxy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç iptables –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∫ –Ω—É–∂–Ω—ã–º –ø–æ–¥–∞–º –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–∏—Å–∞–º. –≠—Ç–æ –±—ã–ª–æ –ø—Ä–∞–≥–º–∞—Ç–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: iptables –ø–æ–Ω—è—Ç–µ–Ω, —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω, "–ø—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç".

**–ù–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ iptables –∏–º–µ–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

1. **O(n) —Å–ª–æ–∂–Ω–æ—Å—Ç—å.** Iptables —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –∫–∞–∫ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫. –ö–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –í –∫–ª–∞—Å—Ç–µ—Ä–µ —Å 5,000 —Å–µ—Ä–≤–∏—Å–æ–≤ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç 5,000+ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç.

2. **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª iptables –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç –≤—Å—é —Ü–µ–ø–æ—á–∫—É –ø—Ä–∞–≤–∏–ª —Ü–µ–ª–∏–∫–æ–º, –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª.

3. **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç.** –ü–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª —Ä–∞—Å—Ç—ë—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ. –ò–∑–º–µ—Ä–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é latency –∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å —Ä–æ—Å—Ç–æ–º —á–∏—Å–ª–∞ —Å–µ—Ä–≤–∏—Å–æ–≤.

4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ L7-awareness.** Iptables —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ IP –∏ –ø–æ—Ä—Ç–æ–≤. –û–Ω –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç HTTP, gRPC, –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤. –î–ª—è L7-–ø–æ–ª–∏—Ç–∏–∫ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–∫—Å–∏.

**IPVS –±—ã–ª –ø–æ–ø—ã—Ç–∫–æ–π —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É.** Kubernetes –¥–æ–±–∞–≤–∏–ª —Ä–µ–∂–∏–º IPVS –¥–ª—è kube-proxy, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã –≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∫–æ–≤ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ª—É—á—à–µ. –ù–æ IPVS –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ kernel-–º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä–∞—è –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–æ—Ç–æ–ª–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–¥–∏–Ω–∞–º–∏—á–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö.

**eBPF (extended Berkeley Packet Filter) ‚Äî —ç—Ç–æ —Ä–µ–≤–æ–ª—é—Ü–∏—è –≤ —Å–µ—Ç–µ–≤–æ–º —Å—Ç–µ–∫–µ Linux.** –≠—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä—è–º–æ –≤ —è–¥—Ä–µ Linux, –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Å–æ—á–Ω–∏—Ü–µ. –í–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª, –∫–æ—Ç–æ—Ä—ã–µ —è–¥—Ä–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç, eBPF –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —è–¥—Ä–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∞–ø—Ä—è–º—É—é.

**Cilium –∏—Å–ø–æ–ª—å–∑—É–µ—Ç eBPF –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞–º–µ–Ω—ã kube-proxy:**

- **O(1) lookup.** –í–º–µ—Å—Ç–æ —Å–ø–∏—Å–∫–∞ –ø—Ä–∞–≤–∏–ª ‚Äî —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–∏—Å–æ–≤.
- **Socket-level load balancing.** eBPF –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–æ–∫–µ—Ç–∞, –º–∏–Ω—É—è —á–∞—Å—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ —Å—Ç–µ–∫–∞ —è–¥—Ä–∞.
- **XDP (eXpress Data Path).** –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä—è–º–æ –≤ –¥—Ä–∞–π–≤–µ—Ä–µ —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç—ã, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –ø–∞–∫–µ—Ç –ø–æ–ø–∞–ª –≤ –ø–æ–ª–Ω—ã–π —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫.
- **L7-–ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑ sidecar.** eBPF –º–æ–∂–µ—Ç –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä—è–º–æ –≤ —è–¥—Ä–µ.

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–ø–µ—á–∞—Ç–ª—è—é—Ç:** 10-100x –º–µ–Ω—å—à–µ latency, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –ø–∞–∫–µ—Ç–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –Ω–∞ –æ–¥–Ω–æ–º –Ω–æ–¥–µ. Benchmark'–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ eBPF-—Ä–µ—à–µ–Ω–∏—è –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—è—Ç –¥–∞–∂–µ baseline "–Ω–æ–¥–∞-–∫-–Ω–æ–¥–µ" –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —è–¥—Ä–∞—Ö ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ eBPF –æ–±—Ö–æ–¥–∏—Ç —Å–ª–æ–π iptables –ø–æ–ª–Ω–æ—Å—Ç—å—é.

**Adoption –≤ managed Kubernetes:** GKE –≤–∫–ª—é—á–∏–ª Cilium Dataplane V2 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å –≤–µ—Ä—Å–∏–∏ 1.26. EKS –∏ AKS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç Cilium —á–µ—Ä–µ–∑ BYOCNI. –≠—Ç–æ —É–∂–µ –Ω–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è ‚Äî —ç—Ç–æ production-ready –∑–∞–º–µ–Ω–∞ kube-proxy.

```
Cilium Architecture –≤ Kubernetes:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ                     Cilium Agent (per node)                 ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                  eBPF Programs                       ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ Networking ‚îÇ  ‚îÇ  Security  ‚îÇ  ‚îÇObservability‚îÇ     ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  (L3/L4)   ‚îÇ  ‚îÇ  (L7 pol)  ‚îÇ  ‚îÇ  (Hubble)   ‚îÇ     ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ‚îÇ
‚îÇ  ‚îÇ                           ‚îÇ                                  ‚îÇ‚îÇ
‚îÇ  ‚îÇ                           ‚ñº                                  ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ                  Linux Kernel                        ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ        (XDP, TC, Socket-level hooks)                 ‚îÇ   ‚îÇ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ eBPF vs iptables/kube-proxy:                      ‚îÇ
‚îÇ  ‚îú‚îÄ 10-100x –º–µ–Ω—å—à–µ latency                                      ‚îÇ
‚îÇ  ‚îú‚îÄ O(1) lookup –≤–º–µ—Å—Ç–æ O(n) rules                               ‚îÇ
‚îÇ  ‚îú‚îÄ Socket-level LB (bypass kernel network stack)               ‚îÇ
‚îÇ  ‚îú‚îÄ L7 policy –±–µ–∑ sidecar                                       ‚îÇ
‚îÇ  ‚îî‚îÄ Native Kubernetes Network Policies + —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ            ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Cilium –≤ managed Kubernetes:**

| Cloud | CNI Support | Features |
|-------|-------------|----------|
| **EKS** | Cilium (self-managed –∏–ª–∏ EKS Anywhere) | Full feature set |
| **GKE** | Cilium Dataplane V2 (default since 1.26) | Native integration |
| **AKS** | Cilium via BYOCNI | Full feature set |

```yaml
# Cilium Network Policy (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)
apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: api-policy
  namespace: production
spec:
  endpointSelector:
    matchLabels:
      app: api
  ingress:
    - fromEndpoints:
        - matchLabels:
            app: frontend
      toPorts:
        - ports:
            - port: "8080"
              protocol: TCP
          rules:
            http:
              - method: "GET"
                path: "/api/v1/.*"
              - method: "POST"
                path: "/api/v1/users"
                headers:
                  - "Content-Type: application/json"
  egress:
    - toEndpoints:
        - matchLabels:
            app: database
      toPorts:
        - ports:
            - port: "5432"
    # Allow DNS
    - toEndpoints:
        - matchLabels:
            k8s:io.kubernetes.pod.namespace: kube-system
            k8s-app: kube-dns
      toPorts:
        - ports:
            - port: "53"
              protocol: UDP

---
# Cilium Cluster Mesh –¥–ª—è multi-cluster
apiVersion: cilium.io/v2alpha1
kind: CiliumClusterwideNetworkPolicy
metadata:
  name: cross-cluster-policy
spec:
  endpointSelector:
    matchLabels:
      app: api
  ingress:
    - fromEndpoints:
        - matchLabels:
            app: frontend
            io.cilium.k8s.policy.cluster: cluster-eu  # Cross-cluster selector
```

```bash
# Hubble observability
cilium hubble enable
hubble observe --namespace production --follow

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Cilium —Å—Ç–∞—Ç—É—Å–∞
cilium status
cilium connectivity test
```

### Zero Trust Networking –≤ Multi-Cloud

#### –ü–æ—á–µ–º—É –ø–µ—Ä–∏–º–µ—Ç—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å "–∑–∞–º–æ–∫ –∏ —Ä–æ–≤".** –î–µ—Å—è—Ç–∏–ª–µ—Ç–∏—è–º–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å—Ç—Ä–æ–∏–ª–∞—Å—å –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –∫—Ä–µ–ø–æ—Å—Ç–∏: —Å–Ω–∞—Ä—É–∂–∏ ‚Äî –≤—Ä–∞–∂–¥–µ–±–Ω—ã–π –º–∏—Ä, –≤–Ω—É—Ç—Ä–∏ ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞. Firewall –Ω–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–µ —Å–µ—Ç–∏, VPN –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, –∏ –ø–æ–ª–Ω–æ–µ –¥–æ–≤–µ—Ä–∏–µ –∫–æ –≤—Å–µ–º—É —Ç—Ä–∞—Ñ–∏–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–∏. –ï—Å–ª–∏ —Ç—ã –ø—Ä–æ—à—ë–ª firewall ‚Äî –∑–Ω–∞—á–∏—Ç, —Ç—ã —Å–≤–æ–π.

**–≠—Ç–∞ –º–æ–¥–µ–ª—å –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å.**

**–°–ª—É—á–∞–π SolarWinds (2020)** —Å—Ç–∞–ª –ø–µ—Ä–µ–ª–æ–º–Ω—ã–º –º–æ–º–µ–Ω—Ç–æ–º. 13 –¥–µ–∫–∞–±—Ä—è 2020 –≥–æ–¥–∞ FireEye –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥ –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ü–û SolarWinds Orion ‚Äî —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –±–æ–ª–µ–µ 18,000 –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤–∫–ª—é—á–∞—è –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤, —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –°–®–ê, –∞ —Ç–∞–∫–∂–µ Microsoft –∏ Deloitte. –•–∞–∫–µ—Ä—ã –∏–º–µ–ª–∏ –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–∞–º –¥–æ 14 –º–µ—Å—è—Ü–µ–≤.

**–ü–æ—á–µ–º—É —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞:**

1. **–î–æ–≤–µ—Ä–∏–µ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Ç—Ä–∞—Ñ–∏–∫—É.** SolarWinds Orion —Å—á–∏—Ç–∞–ª—Å—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ü–û –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞. –ï–≥–æ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ "–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø–ª–æ—Ö–∏–µ" –∞–¥—Ä–µ—Å–∞.

2. **Lateral movement.** –ü–æ–ª—É—á–∏–≤ –Ω–∞—á–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ü–û, –∞—Ç–∞–∫—É—é—â–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–ª–∏—Å—å –ø–æ —Å–µ—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è.

3. **Implicit trust.** –í—Å–µ —Å–∏—Å—Ç–µ–º—ã –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞ –¥–æ–≤–µ—Ä—è–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–ö–∞–∫ —ç—Ç–æ –º–æ–≥–ª–æ –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å Zero Trust:** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±—ã–ª–∞ –±—ã –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –æ—Ç–∫—É–¥–∞ –∏—Å—Ö–æ–¥–∏—Ç —Ç—Ä–∞—Ñ–∏–∫ ‚Äî "–∏–∑–Ω—É—Ç—Ä–∏" –∏–ª–∏ "—Å–Ω–∞—Ä—É–∂–∏". –ö–∞–∂–¥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞. –î–∞–∂–µ –µ—Å–ª–∏ —Ö–∞–∫–µ—Ä –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø, –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±—ã–ª–∏ –±—ã —Ä–µ–∑–∫–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã.

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è Zero Trust –ø–æ—è–≤–∏–ª–∞—Å—å –≤ 2010 –≥–æ–¥—É,** –∫–æ–≥–¥–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫ Forrester –î–∂–æ–Ω –ö–∏–Ω–¥–µ—Ä–≤–∞–≥ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –ø–µ—Ä–≤—ã–π –æ—Ç—á—ë—Ç, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—è –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–ª–µ–ø–æ–≥–æ –¥–æ–≤–µ—Ä–∏—è –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–µ–π. –ù–æ adoption –±—ã–ª –º–µ–¥–ª–µ–Ω–Ω—ã–º ‚Äî –∏–Ω–¥—É—Å—Ç—Ä–∏—è –±—ã–ª–∞ —Å–∫–µ–ø—Ç–∏—á–Ω–∞, –∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–¥–∏–≥–º—ã —Ç—Ä–µ–±–æ–≤–∞–ª–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π.

**SolarWinds –≤—Å—ë –∏–∑–º–µ–Ω–∏–ª.** –í –º–∞–µ 2021 –≥–æ–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –ë–∞–π–¥–µ–Ω–∞ –≤—ã–ø—É—Å—Ç–∏–ª–∞ —É–∫–∞–∑ "–û–± —É–ª—É—á—à–µ–Ω–∏–∏ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω—ã", —Ç—Ä–µ–±—É—é—â–∏–π –æ—Ç —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç—Å—Ç–≤ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Zero Trust. –ö –∫–æ–Ω—Ü—É 2024 –≥–æ–¥–∞ –≤—Å–µ —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ –°–®–ê –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –≤–Ω–µ–¥—Ä–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã Zero Trust.

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ 2024 –≥–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å:** 71% —Ä–æ—Å—Ç –∞—Ç–∞–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–∫—Ä–∞–¥–µ–Ω–Ω—ã—Ö –∏–ª–∏ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö credentials –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–æ—à–ª—ã–º –≥–æ–¥–æ–º. –ê—Ç–∞–∫—É—é—â–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–µ–≥–∏—Ç–∏–º–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã "–≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–¥–Ω—É—é –¥–≤–µ—Ä—å". 68% –≤–∑–ª–æ–º–æ–≤ –≤ 2024 –≥–æ–¥—É –≤–∫–ª—é—á–∞–ª–∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä ‚Äî –æ—à–∏–±–∫–∏, —Ñ–∏—à–∏–Ω–≥, –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∏–Ω—Å–∞–π–¥–µ—Ä–æ–≤.

**–ü—Ä–∏–Ω—Ü–∏–ø—ã Zero Trust –¥–ª—è –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

- **Never trust, always verify.** –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
- **Least privilege access.** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏.
- **Assume breach.** –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Ç–∞–∫, –±—É–¥—Ç–æ –≤–∑–ª–æ–º —É–∂–µ –ø—Ä–æ–∏–∑–æ—à—ë–ª ‚Äî –æ–≥—Ä–∞–Ω–∏—á—å blast radius.
- **Verify explicitly.** –ü—Ä–æ–≤–µ—Ä—è–π identity, device, location, behavior ‚Äî –≤—Å—ë –≤–º–µ—Å—Ç–µ.
- **Micro-segmentation everywhere.** –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö workloads, –Ω–µ —Å–µ—Ç–µ–π.

```
Zero Trust Multi-Cloud Architecture:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                 ‚îÇ
‚îÇ   Traditional (Perimeter-based)         Zero Trust              ‚îÇ
‚îÇ   +---------------------------+   +---------------------------+ ‚îÇ
‚îÇ   ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ    Every request verified ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ  Trust boundary ‚îÇ   ‚îÇ   ‚îÇ                           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ   (VPN/FW)      ‚îÇ   ‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ   ‚îÇ  ‚îÇApp A‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§Auth ‚îÇ       ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ   ‚îÇAll trusted‚îÇ  ‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò       ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ   ‚îÇ inside   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ     ‚îÇ mTLS    ‚îÇ           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê       ‚îÇ ‚îÇ
‚îÇ   ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ  ‚îÇApp B‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§Policy‚îÇ      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                           ‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ ‚îÇ
‚îÇ   +---------------------------+   +---------------------------+ ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ   –ü—Ä–∏–Ω—Ü–∏–ø—ã Zero Trust:                                          ‚îÇ
‚îÇ   ‚îú‚îÄ Never trust, always verify                                 ‚îÇ
‚îÇ   ‚îú‚îÄ Least privilege access                                     ‚îÇ
‚îÇ   ‚îú‚îÄ Assume breach                                              ‚îÇ
‚îÇ   ‚îú‚îÄ Verify explicitly (identity, device, location, behavior)   ‚îÇ
‚îÇ   ‚îî‚îÄ Micro-segmentation everywhere                              ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Cloud-native Zero Trust tools:**

| Cloud | Native ZTNA | Service-to-Service | Remote Access |
|-------|-------------|-------------------|---------------|
| **AWS** | Verified Access | VPC Lattice + IAM | IAM Identity Center |
| **Azure** | Entra Private Access | Managed Identities | Entra ID |
| **GCP** | BeyondCorp Enterprise | Workload Identity | IAP (Identity-Aware Proxy) |

```hcl
# AWS Verified Access (ZTNA –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
resource "aws_verifiedaccess_instance" "main" {
  description = "Production Verified Access"

  tags = {
    Name = "prod-verified-access"
  }
}

resource "aws_verifiedaccess_trust_provider" "oidc" {
  policy_reference_name    = "OktaProvider"
  trust_provider_type      = "user"
  user_trust_provider_type = "oidc"

  oidc_options {
    authorization_endpoint = "https://example.okta.com/oauth2/v1/authorize"
    client_id              = var.okta_client_id
    client_secret          = var.okta_client_secret
    issuer                 = "https://example.okta.com"
    scope                  = "openid profile email groups"
    token_endpoint         = "https://example.okta.com/oauth2/v1/token"
    user_info_endpoint     = "https://example.okta.com/oauth2/v1/userinfo"
  }
}

resource "aws_verifiedaccess_endpoint" "app" {
  application_domain     = "app.example.com"
  attachment_type        = "vpc"
  domain_certificate_arn = aws_acm_certificate.app.arn
  endpoint_type          = "load-balancer"
  load_balancer_options {
    load_balancer_arn = aws_lb.app.arn
    port              = 443
    protocol          = "https"
    subnet_ids        = aws_subnet.private[*].id
  }
  security_group_ids           = [aws_security_group.verified_access.id]
  verified_access_group_id     = aws_verifiedaccess_group.main.id
}

# Access Policy (Cedar language)
resource "aws_verifiedaccess_group" "main" {
  verified_access_instance_id = aws_verifiedaccess_instance.main.id

  policy_document = <<-EOT
    permit(principal, action, resource)
    when {
      context.http_request.http_method == "GET" &&
      context.identity.groups.contains("engineering") &&
      context.identity.verified_email == true
    };
  EOT
}
```

### Serverless VPC Networking

#### –ü—Ä–æ–±–ª–µ–º–∞ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ Lambda –≤ VPC

**–ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π design Lambda (2014-2019).** –ö–æ–≥–¥–∞ AWS Lambda –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º –≤–Ω—É—Ç—Ä–∏ VPC ‚Äî RDS –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, ElastiCache, –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É API ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (ENI) –≤ —ç—Ç–æ–π VPC. –í –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π execution environment Lambda —Å–æ–∑–¥–∞–≤–∞–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π ENI. –≠—Ç–æ –±—ã–ª–æ –ª–æ–≥–∏—á–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∏–∑–æ–ª—è—Ü–∏–∏, –Ω–æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Ç–∞–∫ –º–µ–¥–ª–µ–Ω–Ω–æ:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ ENI ‚Äî —Ç—è–∂—ë–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è.** Elastic Network Interface —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ EC2 API, –ø–æ–ª—É—á–∞–µ—Ç IP-–∞–¥—Ä–µ—Å, –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ security groups, –ø–æ–ª—É—á–∞–µ—Ç route –∫ –ø–æ–¥—Å–µ—Ç–∏. –í—Å—ë —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç —Å–µ–∫—É–Ω–¥—ã.

2. **10-15 —Å–µ–∫—É–Ω–¥ cold start.** –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏, —á—Ç–æ Lambda —Å 3GB –ø–∞–º—è—Ç–∏ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å –≤ 30 —Ä–∞–∑ –¥–æ–ª—å—à–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ VPC –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Lambda –±–µ–∑ VPC.

3. **–ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤.** –ö–∞–∂–¥—ã–π ENI –∑–∞–Ω–∏–º–∞–µ—Ç IP-–∞–¥—Ä–µ—Å –≤ –ø–æ–¥—Å–µ—Ç–∏. –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ—Ç–µ–Ω Lambda-—Ñ—É–Ω–∫—Ü–∏–π –ø–æ–¥—Å–µ—Ç–∏ /24 (251 –¥–æ—Å—Ç—É–ø–Ω—ã–π IP) –∑–∞–∫–∞–Ω—á–∏–≤–∞–ª–∏—Å—å –±—ã—Å—Ç—Ä–æ.

4. **–õ–∏–º–∏—Ç—ã ENI.** AWS –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ENI –≤ —Ä–µ–≥–∏–æ–Ω–µ. –ü—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö —É–ø–∏—Ä–∞–ª–∏—Å—å –≤ —ç—Ç–∏ –ª–∏–º–∏—Ç—ã.

5. **Rate limiting EC2 API.** –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ENI –º–æ–≥–ª–æ —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ throttling EC2 API.

**–†–µ–∑—É–ª—å—Ç–∞—Ç: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–±–µ–≥–∞–ª–∏ VPC.** –ï—Å–ª–∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPC ‚Äî –æ–±—Ö–æ–¥–∏–ª–∏—Å—å. –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–ª–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –∏–Ω–æ–≥–¥–∞ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Ä–µ—à–µ–Ω–∏—è–º (–æ—Ç–∫—Ä—ã—Ç–∏–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç).

**–†–µ—à–µ–Ω–∏–µ 2019 –≥–æ–¥–∞: AWS Hyperplane ENI.** –ù–∞ re:Invent 2018 AWS –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–ª –ø–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã, –∞ –≤ —Å–µ–Ω—Ç—è–±—Ä–µ 2019 –≤—ã–∫–∞—Ç–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è: –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è ENI –¥–ª—è –∫–∞–∂–¥–æ–≥–æ execution environment, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ ENI, pre-provisioned –∑–∞—Ä–∞–Ω–µ–µ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Hyperplane:** —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è AWS (—Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Network Load Balancer –∏ NAT Gateway), –∫–æ—Ç–æ—Ä–∞—è –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–∞–∫–µ—Ç–Ω—ã–π forwarder. ENI –≤ –≤–∞—à–µ–π VPC –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Hyperplane, –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ Lambda execution environments –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –Ω–µ–º—É —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª–∏.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

- ENI —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Lambda —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ VPC-–Ω–∞—Å—Ç—Ä–æ–µ–∫, –∞ –Ω–µ –ø—Ä–∏ invocation.
- –§—É–Ω–∫—Ü–∏–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π security group + subnet –¥–µ–ª—è—Ç –æ–¥–∏–Ω ENI.
- –ü—Ä–∏ invocation execution environment –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Ç—É–Ω–Ω–µ–ª—å –∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É ENI.
- –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ 90 —Å–µ–∫—É–Ω–¥ (–æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ deploy), –Ω–æ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ cold starts ‚Äî –º–µ–Ω–µ–µ —Å–µ–∫—É–Ω–¥—ã.

**–†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:** cold start —Å–Ω–∏–∑–∏–ª—Å—è —Å 12 —Å–µ–∫—É–Ω–¥ –¥–æ 5 —Å–µ–∫—É–Ω–¥ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è, –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —É–ª—É—á—à–∞—Ç—å—Å—è. –î–ª—è latency-critical –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π AWS –¥–æ–±–∞–≤–∏–ª Provisioned Concurrency (pre-warmed execution environments) –∏ SnapStart –¥–ª—è Java (JVM snapshot restoration).

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

- DynamoDB, S3, SQS ‚Äî –Ω–µ —Ç—Ä–µ–±—É—é—Ç VPC, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPC Endpoints –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- RDS, ElastiCache, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ API ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPC, Hyperplane ENI –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º—ã–º
- –î–ª—è latency-critical ‚Äî Provisioned Concurrency –∏–ª–∏ SnapStart
- ARM64 (Graviton2) –¥–∞—ë—Ç –ª—É—á—à–∏–π cold start –±–ª–∞–≥–æ–¥–∞—Ä—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```
Lambda VPC Evolution:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                 ‚îÇ
‚îÇ  –î–æ 2019:                               –ü–æ—Å–ª–µ 2019:             ‚îÇ
‚îÇ  +-----------------------------+   +---------------------------+‚îÇ
‚îÇ  ‚îÇ Cold Start —Å VPC:           ‚îÇ   ‚îÇ Hyperplane ENIs:          ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ ENI creation per invoke  ‚îÇ   ‚îÇ ‚Ä¢ Shared ENIs              ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ 10-15 —Å–µ–∫—É–Ω–¥ latency     ‚îÇ   ‚îÇ ‚Ä¢ Pre-provisioned          ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ IP exhaustion issues     ‚îÇ   ‚îÇ ‚Ä¢ <1 —Å–µ–∫—É–Ω–¥–∞ cold start   ‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Scaling bottlenecks      ‚îÇ   ‚îÇ ‚Ä¢ Better IP management    ‚îÇ‚îÇ
‚îÇ  +-----------------------------+   +---------------------------+‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:                                      ‚îÇ
‚îÇ  ‚îú‚îÄ DynamoDB/S3/SQS ‚Üí –ù–ï –Ω—É–∂–µ–Ω VPC (–∏—Å–ø–æ–ª—å–∑—É–π VPC Endpoints)    ‚îÇ
‚îÇ  ‚îú‚îÄ RDS/ElastiCache/internal APIs ‚Üí –Ω—É–∂–µ–Ω VPC                   ‚îÇ
‚îÇ  ‚îú‚îÄ Provisioned Concurrency –¥–ª—è latency-critical                ‚îÇ
‚îÇ  ‚îú‚îÄ SnapStart –¥–ª—è Java (JVM snapshot)                           ‚îÇ
‚îÇ  ‚îî‚îÄ ARM64 (Graviton2) –¥–ª—è –ª—É—á—à–µ–≥–æ cold start                    ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

```hcl
# Lambda —Å VPC –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π cold start
resource "aws_lambda_function" "api" {
  function_name = "api-handler"
  role          = aws_iam_role.lambda.arn
  handler       = "index.handler"
  runtime       = "nodejs20.x"
  architectures = ["arm64"]  # Graviton2 –¥–ª—è –ª—É—á—à–µ–≥–æ cold start

  # VPC Configuration
  vpc_config {
    subnet_ids         = aws_subnet.private[*].id
    security_group_ids = [aws_security_group.lambda.id]
  }

  # Provisioned Concurrency –¥–ª—è latency-critical
  # (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ aws_lambda_provisioned_concurrency_config)

  environment {
    variables = {
      RDS_ENDPOINT = aws_db_instance.main.endpoint
    }
  }

  depends_on = [
    aws_iam_role_policy_attachment.lambda_vpc,
  ]
}

# Provisioned Concurrency
resource "aws_lambda_provisioned_concurrency_config" "api" {
  function_name                     = aws_lambda_function.api.function_name
  provisioned_concurrent_executions = 5
  qualifier                         = aws_lambda_alias.live.name
}

# VPC Endpoints –¥–ª—è AWS services (–∏–∑–±–µ–≥–∞–µ–º NAT)
resource "aws_vpc_endpoint" "dynamodb" {
  vpc_id            = aws_vpc.main.id
  service_name      = "com.amazonaws.${var.region}.dynamodb"
  vpc_endpoint_type = "Gateway"
  route_table_ids   = aws_route_table.private[*].id
}

resource "aws_vpc_endpoint" "s3" {
  vpc_id            = aws_vpc.main.id
  service_name      = "com.amazonaws.${var.region}.s3"
  vpc_endpoint_type = "Gateway"
  route_table_ids   = aws_route_table.private[*].id
}

resource "aws_vpc_endpoint" "secretsmanager" {
  vpc_id              = aws_vpc.main.id
  service_name        = "com.amazonaws.${var.region}.secretsmanager"
  vpc_endpoint_type   = "Interface"
  subnet_ids          = aws_subnet.private[*].id
  security_group_ids  = [aws_security_group.vpc_endpoints.id]
  private_dns_enabled = true
}
```

### Network Cost Optimization (FinOps)

#### –°–∫—Ä—ã—Ç—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–µ—Ç–µ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –æ–±–ª–∞–∫–µ

**"–í–∞—à AWS-—Å—á—ë—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞—Å—Ç–∏, –∏ –≤—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –ø–æ—á–µ–º—É."** –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –¥–ª—è –º–Ω–æ–≥–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π. Compute-—Ä–µ—Å—É—Ä—Å—ã (EC2, Lambda) –æ–±—ã—á–Ω–æ —Ö–æ—Ä–æ—à–æ –ø–æ–Ω—è—Ç–Ω—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –ù–æ —Å–µ—Ç–µ–≤—ã–µ —Ä–∞—Å—Ö–æ–¥—ã —á–∞—Å—Ç–æ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ ‚Äî –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π.

**NAT Gateway ‚Äî –≥–ª–∞–≤–Ω—ã–π –≤–∏–Ω–æ–≤–Ω–∏–∫.** –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–∞–≤–∞—Ç—å –∫–∞–∂–¥–æ–º—É –∏–Ω—Å—Ç–∞–Ω—Å—É –ø—É–±–ª–∏—á–Ω—ã–π IP, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç NAT Gateway –¥–ª—è –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ç—Ä–∞—Ñ–∏–∫–∞ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–æ–¥—Å–µ—Ç–µ–π. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ù–æ —Ü–µ–Ω–∞: $0.045 –≤ —á–∞—Å –∑–∞ —Å–∞–º gateway + $0.045 –∑–∞ –∫–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≥–∏–≥–∞–±–∞–π—Ç.

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:** 50TB —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ NAT Gateway –≤ –º–µ—Å—è—Ü:
- NAT Gateway hourly: $0.045 √ó 24 √ó 30 = $32.40
- Data processing: 50,000 GB √ó $0.045 = $2,250
- **–ò—Ç–æ–≥–æ: $2,282.40 –≤ –º–µ—Å—è—Ü —Ç–æ–ª—å–∫–æ –∑–∞ NAT**

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

1. **–¢—Ä–∞—Ñ–∏–∫ –∫ AWS-—Å–µ—Ä–≤–∏—Å–∞–º —á–µ—Ä–µ–∑ NAT –≤–º–µ—Å—Ç–æ VPC Endpoints.** –í–∞—à–∏ Lambda-—Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ S3 —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (NAT), —Ö–æ—Ç—è –º–æ–≥–ª–∏ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Gateway Endpoint.

2. **Cross-AZ —Ç—Ä–∞—Ñ–∏–∫.** –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∑–æ–Ω–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å—Ç–æ–∏—Ç $0.01 –∑–∞ GB –≤ –∫–∞–∂–¥–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. –ï—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–∏—Å –≤ AZ-a –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–µ –≤ AZ-b ‚Äî —ç—Ç–æ –ø–ª–∞—Ç–Ω–æ.

3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Elastic IP.** AWS –Ω–µ –±–µ—Ä—ë—Ç –¥–µ–Ω—å–≥–∏ –∑–∞ EIP, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —Ä–∞–±–æ—Ç–∞—é—â–µ–º—É –∏–Ω—Å—Ç–∞–Ω—Å—É. –ù–æ –∑–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π EIP ‚Äî $0.005 –≤ —á–∞—Å (‚âà$3.60 –≤ –º–µ—Å—è—Ü –∑–∞ –∫–∞–∂–¥—ã–π).

4. **Interface VPC Endpoints "–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π".** Interface Endpoints —Å—Ç–æ—è—Ç $0.01 –≤ —á–∞—Å + $0.01 –∑–∞ GB. Gateway Endpoints (S3, DynamoDB) ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã.

**FinOps-–ø–æ–¥—Ö–æ–¥ –∫ networking:** —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ "—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤", –∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ cloud-—Ä–∞—Å—Ö–æ–¥—ã. –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

1. **Visibility.** –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç–µ. CloudWatch metrics, Cost Explorer —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º –∏ —Ç–µ–≥–∞–º.

2. **Allocation.** –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, –ª–∏–Ω–∏—è–º –±–∏–∑–Ω–µ—Å–∞. –ö—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ ‚Äî —Ç–æ—Ç –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é.

3. **Optimization.** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å —É—á—ë—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏: co-location —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –æ–¥–Ω–æ–π AZ, VPC Endpoints, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:** –∫–æ–º–ø–∞–Ω–∏–∏ —Å–æ–æ–±—â–∞—é—Ç –æ —Å–Ω–∏–∂–µ–Ω–∏–∏ NAT Gateway costs –Ω–∞ 40% –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ VPC Endpoints. –¢–∏–ø–∏—á–Ω—ã–π enterprise –º–æ–∂–µ—Ç —Ç—Ä–∞—Ç–∏—Ç—å $2,250/–º–µ—Å—è—Ü –Ω–∞ NAT processing –¥–ª—è 50TB –¥–∞–Ω–Ω—ã—Ö ‚Äî –∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —ç—Ç–æ –≤ —Ä–∞–∑—ã.

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:** CloudWatch VPC Flow Logs –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ç—Ä–∞—Ñ–∏–∫–∞. AWS Cost Explorer –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Kentik, CloudHealth, Spot.io) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≥–ª—É–±–æ–∫—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

```
Cloud Networking Cost Breakdown:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                                 ‚îÇ
‚îÇ  –¢–∏–ø–∏—á–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ network costs:                          ‚îÇ
‚îÇ  ‚îú‚îÄ NAT Gateway: 30-40% (data processing $0.045/GB!)            ‚îÇ
‚îÇ  ‚îú‚îÄ Data Transfer: 25-35%                                       ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ Cross-AZ: $0.01/GB each way                             ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ Cross-Region: $0.02-0.09/GB                             ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ Internet egress: $0.09/GB (first 10TB)                  ‚îÇ
‚îÇ  ‚îú‚îÄ Load Balancers: 15-20%                                      ‚îÇ
‚îÇ  ‚îú‚îÄ VPC Endpoints: 5-10% (Interface: $0.01/hour + $0.01/GB)     ‚îÇ
‚îÇ  ‚îî‚îÄ Elastic IPs: 5% (unused: $0.005/hour)                       ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:                                                   ‚îÇ
‚îÇ  1. Gateway VPC Endpoints (S3, DynamoDB) ‚Äî –ë–ï–°–ü–õ–ê–¢–ù–û            ‚îÇ
‚îÇ  2. –û–¥–∏–Ω NAT Gateway –¥–ª—è dev/staging                            ‚îÇ
‚îÇ  3. S3 Transfer Acceleration —Ç–æ–ª—å–∫–æ –≥–¥–µ –Ω—É–∂–Ω–æ                   ‚îÇ
‚îÇ  4. CloudFront –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–Ω–∏–∂–∞–µ—Ç origin traffic)         ‚îÇ
‚îÇ  5. Same-AZ placement –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ                              ‚îÇ
‚îÇ  6. Reserved capacity –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö workloads                  ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —ç–∫–æ–Ω–æ–º–∏–∏:**

```
–ü—Ä–∏–º–µ—Ä: 100 EC2 instances pulling 5GB images daily —á–µ—Ä–µ–∑ NAT

–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
‚îú‚îÄ NAT Gateway hours: 3 NAT √ó $0.045 √ó 730 = $98.55/month
‚îú‚îÄ NAT data processing: 100 √ó 5GB √ó 30 √ó $0.045 = $675/month
‚îú‚îÄ Total: $773.55/month

–° VPC Endpoint –¥–ª—è ECR:
‚îú‚îÄ Interface Endpoint: $0.01 √ó 730 √ó 3 AZ = $21.90/month
‚îú‚îÄ Data: 100 √ó 5GB √ó 30 √ó $0.01 = $150/month
‚îú‚îÄ Total: $171.90/month
‚îú‚îÄ –≠–∫–æ–Ω–æ–º–∏—è: $601.65/month (78%)
```

```hcl
# FinOps: Cost-optimized VPC Endpoints
locals {
  # Gateway endpoints - FREE
  gateway_endpoints = ["s3", "dynamodb"]

  # Interface endpoints - $0.01/hour each
  # Only add if traffic justifies cost
  interface_endpoints = [
    "ecr.api",
    "ecr.dkr",
    "logs",
    "ssm",
    "secretsmanager"
  ]
}

# Free gateway endpoints
resource "aws_vpc_endpoint" "gateway" {
  for_each = toset(local.gateway_endpoints)

  vpc_id            = aws_vpc.main.id
  service_name      = "com.amazonaws.${var.region}.${each.key}"
  vpc_endpoint_type = "Gateway"
  route_table_ids   = aws_route_table.private[*].id

  tags = {
    Name = "${var.environment}-${each.key}-endpoint"
    Cost = "free"
  }
}

# Paid interface endpoints (evaluate ROI)
resource "aws_vpc_endpoint" "interface" {
  for_each = toset(local.interface_endpoints)

  vpc_id              = aws_vpc.main.id
  service_name        = "com.amazonaws.${var.region}.${each.key}"
  vpc_endpoint_type   = "Interface"
  subnet_ids          = aws_subnet.private[*].id
  security_group_ids  = [aws_security_group.vpc_endpoints.id]
  private_dns_enabled = true

  tags = {
    Name = "${var.environment}-${each.key}-endpoint"
    Cost = "0.01-per-hour-per-az"
  }
}

# Cost monitoring
resource "aws_ce_anomaly_monitor" "network" {
  name              = "network-cost-anomaly"
  monitor_type      = "DIMENSIONAL"
  monitor_dimension = "SERVICE"

  monitor_specification = jsonencode({
    And = null
    CostCategories = null
    Dimensions = {
      Key          = "SERVICE"
      MatchOptions = null
      Values       = [
        "Amazon Virtual Private Cloud",
        "EC2 - Other"
      ]
    }
    Not  = null
    Or   = null
    Tags = null
  })
}

resource "aws_ce_anomaly_subscription" "network" {
  name      = "network-cost-alerts"
  frequency = "DAILY"

  monitor_arn_list = [
    aws_ce_anomaly_monitor.network.arn
  ]

  subscriber {
    type    = "EMAIL"
    address = "finops@example.com"
  }

  threshold_expression {
    dimension {
      key           = "ANOMALY_TOTAL_IMPACT_ABSOLUTE"
      match_options = ["GREATER_THAN_OR_EQUAL"]
      values        = ["100"]  # Alert if anomaly > $100
    }
  }
}
```

**FinOps Checklist –¥–ª—è Networking:**

```
‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
‚îú‚îÄ Gateway endpoints –¥–ª—è S3/DynamoDB
‚îú‚îÄ Interface endpoints –¥–ª—è heavy AWS API usage
‚îú‚îÄ –û–¥–∏–Ω NAT –≤ non-production environments
‚îú‚îÄ –£–¥–∞–ª–∏—Ç—å unused Elastic IPs
‚îî‚îÄ Tag everything –¥–ª—è cost allocation

üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
‚îú‚îÄ Cost Explorer dimension = SERVICE
‚îú‚îÄ VPC Flow Logs ‚Üí Athena –¥–ª—è traffic analysis
‚îú‚îÄ NAT Gateway CloudWatch metrics (BytesOutToDestination)
‚îî‚îÄ Weekly cost review meetings

üéØ Advanced:
‚îú‚îÄ Reserved NAT Gateway (1-year commitment = savings)
‚îú‚îÄ Direct Connect –¥–ª—è high-volume hybrid traffic
‚îú‚îÄ CloudFront –¥–ª—è origin offload
‚îî‚îÄ Multi-region: evaluate transfer costs vs latency needs
```

---

## Best Practices Summary

### VPC Design
1. **Plan CIDR early** - –∏–∑–±–µ–≥–∞–π—Ç–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å on-premises –∏ –¥—Ä—É–≥–∏–º–∏ VPC
2. **Multi-AZ deployment** - –º–∏–Ω–∏–º—É–º 2 AZ –¥–ª—è production
3. **Subnet segmentation** - public/private/isolated –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
4. **VPC Flow Logs** - –≤–∫–ª—é—á–∏—Ç–µ –¥–ª—è troubleshooting –∏ compliance
5. **IPv6 ready** - –ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ dual-stack —Å –Ω–∞—á–∞–ª–∞

### Security
1. **Least privilege** - –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
2. **Security groups as primary** - NACLs –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π
3. **Reference SGs, not CIDRs** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ security group ID –∫–∞–∫ source
4. **No 0.0.0.0/0 for SSH/RDP** - —Ç–æ–ª—å–∫–æ VPN –∏–ª–∏ bastion
5. **Encrypt in transit** - TLS –≤–µ–∑–¥–µ, mTLS –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

### Load Balancing
1. **ALB for HTTP/HTTPS** - path routing, header routing
2. **NLB for TCP/UDP** - –Ω–∏–∑–∫–∞—è latency, static IP
3. **Health checks tuning** - –ø–æ–¥–±–µ—Ä–∏—Ç–µ interval –∏ thresholds
4. **Graceful shutdown** - deregistration_delay = connection drain time

### CDN
1. **Version static assets** - hash –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
2. **Separate behaviors** - —Ä–∞–∑–Ω—ã–µ cache policies –¥–ª—è static/dynamic
3. **Security headers** - CSP, HSTS, X-Frame-Options
4. **Monitor hit ratio** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å >90% –¥–ª—è static

### Cost Optimization
1. **VPC Endpoints** - –∏–∑–±–µ–≥–∞–π—Ç–µ NAT –¥–ª—è AWS services
2. **Single NAT for dev** - –Ω–µ –Ω—É–∂–µ–Ω HA –≤ non-production
3. **Reserved capacity** - –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö workloads
4. **Data transfer awareness** - cross-AZ/region transfers cost money

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏

### 2024-2025 Updates
- [AWS VPC Lattice](https://aws.amazon.com/vpc/lattice/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [Migrating from App Mesh to VPC Lattice](https://aws.amazon.com/blogs/containers/migrating-from-aws-app-mesh-to-amazon-vpc-lattice/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [AWS VPC Guide 2025](https://cloudurable.com/blog/aws-vpc-2025/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [Cilium eBPF Networking](https://cilium.io/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [CNCF: Unlocking Cloud Native Security with Cilium](https://www.cncf.io/blog/2025/01/02/unlocking-cloud-native-security-with-cilium-and-ebpf/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [Zero Trust Multi-Cloud](https://netfoundry.io/resources/zero-trust-multi-cloud-networking/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [AWS Verified Access](https://docs.aws.amazon.com/verified-access/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [Lambda VPC Networking](https://aws.amazon.com/blogs/compute/announcing-improved-vpc-networking-for-aws-lambda-functions/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [Lambda Cold Starts](https://aws.amazon.com/blogs/compute/understanding-and-remediating-cold-starts-an-aws-lambda-perspective/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [FinOps Cloud Cost Optimization](https://www.finops.org/wg/how-to-optimize-cloud-usage/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26
- [Cloud Cost Management 2025](https://www.itprotoday.com/cloud-computing/cloud-cost-management-and-finops-will-accelerate-it-operations-in-2025) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-26

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [AWS VPC Documentation](https://docs.aws.amazon.com/vpc/latest/userguide/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [AWS Security Best Practices for VPC](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-best-practices.html) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Azure Virtual Network Documentation](https://learn.microsoft.com/en-us/azure/virtual-network/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Google Cloud VPC Documentation](https://cloud.google.com/vpc/docs) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [AWS Load Balancer Comparison](https://aws.amazon.com/compare/the-difference-between-the-difference-between-application-network-and-gateway-load-balancing/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [CloudFront Features](https://aws.amazon.com/cloudfront/features/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Istio Documentation](https://istio.io/docs/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Linkerd Documentation](https://linkerd.io/docs/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18

### Terraform Resources
- [Terraform AWS VPC Module](https://registry.terraform.io/modules/terraform-aws-modules/vpc/aws/latest) - v6.5.1, –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Terraform Best Practices](https://www.hashicorp.com/en/blog/terraform-modules-on-aws) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18

### –°—Ç–∞—Ç—å–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- [AWS VPC Guide 2025](https://cloudurable.com/blog/aws-vpc-2025/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Security Groups vs NACLs](https://digitalcloud.training/aws-security-group-vs-nacl-key-differences/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Linkerd vs Istio 2025 Benchmarks](https://linkerd.io/2025/04/24/linkerd-vs-ambient-mesh-2025-benchmarks/) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Service Mesh Comparison 2025](https://www.elysiate.com/blog/service-mesh-istio-linkerd-comparison-guide-2025) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18
- [Choosing AWS PrivateLink vs Transit Gateway](https://plainenglish.io/blog/choosing-between-aws-privatelink-and-transit-gateway) - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-12-18

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[cloud-platforms-essentials]] - –æ—Å–Ω–æ–≤—ã –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- [[infrastructure-as-code]] - Terraform, CloudFormation, Pulumi
- [[network-ip-routing]] - IP –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
- [[kubernetes-networking]] - —Å–µ—Ç–µ–≤–∞—è –º–æ–¥–µ–ª—å Kubernetes
- [[security-zero-trust]] - Zero Trust –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [[devops-observability]] - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ observability

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-09 ‚Äî –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏: 5 –∞–Ω–∞–ª–æ–≥–∏–π (VPC –∫–∞–∫ –æ—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ —Å –∫–æ—Ä–ø—É—Å–∞–º–∏-AZ, Load Balancer –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–∞ ALB/NLB, CDN –∫–∞–∫ —Å–µ—Ç—å –ø–æ—á—Ç–æ–≤—ã—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π —Å PoP, Security Group vs NACL –∫–∞–∫ –æ—Ö—Ä–∞–Ω–Ω–∏–∫ vs —Ç—É—Ä–Ω–∏–∫–µ—Ç, NAT Gateway –∫–∞–∫ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏), 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ —Å –°–ò–ú–ü–¢–û–ú/–†–ï–®–ï–ù–ò–ï (—Å–ª–∏—à–∫–æ–º —É–∑–∫–∏–π CIDR, 0.0.0.0/0 –≤ Security Group, ALB –≤ private subnet, CDN –∫—ç—à–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, DNS loop –ø—Ä–∏ CDN, –∑–∞–±—ã–ª–∏ ephemeral ports –≤ NACL), 5 –º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (–ª—É–∫–æ–≤–∏—Ü–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Defense in Depth, –¥–µ—Ä–µ–≤–æ –≤—ã–±–æ—Ä–∞ Load Balancer, –ø–æ—Ç–æ–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ North-South/East-West, —Å—Ç–æ–∏–º–æ—Å—Ç—å vs –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å vs –ø—Ä–æ—Å—Ç–æ—Ç–∞, —á–µ–∫–ª–∏—Å—Ç production-ready VPC)*
