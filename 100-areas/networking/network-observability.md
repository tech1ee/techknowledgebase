---
title: "Network Observability"
created: 2025-01-15
modified: 2025-01-15
tags: [networking, observability, monitoring, prometheus, grafana, tracing]
related: [[network-debugging-basics]], [[network-performance-optimization]], [[network-kubernetes-deep-dive]]
---

# Network Observability

---

## Prerequisites

| ะขะตะผะฐ | ะะฐัะตะผ ะฝัะถะฝะพ | ะะดะต ะธะทััะธัั |
|------|-------------|-------------|
| **ะกะตัะตะฒัะต ะพัะฝะพะฒั** | ะงัะพ ะผะพะฝะธัะพัะธะผ | [[network-fundamentals-for-developers]] |
| **Debugging** | ะะธะฐะณะฝะพััะธะบะฐ ะฟัะพะฑะปะตะผ | [[network-debugging-basics]] |
| **Docker/K8s basics** | ะะพะฝัะตะนะฝะตัะฝะฐั observability | [[network-kubernetes-deep-dive]] |

### ะะปั ะบะพะณะพ ััะพั ะผะฐัะตัะธะฐะป

| ะฃัะพะฒะตะฝั | ะะพะดัะพะดะธั? | ะะตะบะพะผะตะฝะดะฐัะธั |
|---------|-----------|--------------|
| **ะะพะฒะธัะพะบ** | โ๏ธ ะก ะฟะพะดะณะพัะพะฒะบะพะน | ะกะฝะฐัะฐะปะฐ debugging basics |
| **Intermediate** | โ ะะฐ | ะัะฝะพะฒะฝะฐั ะฐัะดะธัะพัะธั |
| **Advanced** | โ ะะฐ | Distributed tracing |

### ะขะตัะผะธะฝะพะปะพะณะธั ะดะปั ะฝะพะฒะธัะบะพะฒ

> ๐ก **Observability** = ัะฟะพัะพะฑะฝะพััั ะฟะพะฝััั ััะพ ะฟัะพะธััะพะดะธั ะฒะฝัััะธ ัะธััะตะผั ะฟะพ ะฒะฝะตัะฝะธะผ ัะธะณะฝะฐะปะฐะผ. ะะฐะบ ะฟัะธะฑะพัะฝะฐั ะฟะฐะฝะตะปั ะฒ ะผะฐัะธะฝะต.

| ะขะตัะผะธะฝ | ะะฝะฐัะตะฝะธะต | ะะฝะฐะปะพะณะธั ะดะปั ะฝะพะฒะธัะบะฐ |
|--------|----------|---------------------|
| **Metrics** | ะงะธัะปะพะฒัะต ะฟะพะบะฐะทะฐัะตะปะธ | **ะกะฟะธะดะพะผะตัั** โ ัะบะพัะพััั ะฟััะผะพ ัะตะนัะฐั |
| **Logs** | ะะฐะฟะธัะธ ัะพะฑััะธะน | **ะะพััะพะฒะพะน ะถััะฝะฐะป** โ ััะพ ะฟัะพะธะทะพัะปะพ |
| **Traces** | ะััั ะทะฐะฟัะพัะฐ ัะตัะตะท ัะธััะตะผั | **GPS-ััะตะบ** โ ะพัะบัะดะฐ ะบัะดะฐ ะตัะฐะปะธ |
| **Prometheus** | ะกะธััะตะผะฐ ัะฑะพัะฐ ะผะตััะธะบ | **ะฆะตะฝัั ัะฑะพัะฐ ะฟะพะบะฐะทะฐะฝะธะน** |
| **Grafana** | ะะธะทัะฐะปะธะทะฐัะธั ะผะตััะธะบ | **ะัะธะฑะพัะฝะฐั ะฟะฐะฝะตะปั** โ ะบัะฐัะธะฒัะต ะณัะฐัะธะบะธ |
| **Alerting** | ะะฟะพะฒะตัะตะฝะธะต ะพ ะฟัะพะฑะปะตะผะฐั | **ะกะธะณะฝะฐะปะธะทะฐัะธั** โ ะตัะปะธ ััะพ-ัะพ ะฝะต ัะฐะบ |
| **SLI/SLO** | Service Level Indicators/Objectives | **KPI ะดะปั ัะตัะฒะธัะฐ** โ ะบะฐะบะพะน ััะพะฒะตะฝั ะบะฐัะตััะฒะฐ |
| **MTTR** | Mean Time To Recovery | **ะะฐะบ ะฑััััะพ ัะธะฝะธะผ** |
| **Latency percentile** | p50, p99 โ ะฟัะพัะตะฝัะธะปะธ ะทะฐะดะตัะถะบะธ | **ะะฑััะฝะฐั vs ััะดัะฐั ัะบะพัะพััั** |
| **Golden Signals** | Latency, Traffic, Errors, Saturation | **4 ะณะปะฐะฒะฝัั ะฟะพะบะฐะทะฐัะตะปั** |

---

## ะงะฐััั 1: ะะฝััะธัะธั ะฑะตะท ะบะพะดะฐ

> ๐ฏ **ะฆะตะปั ัะตะบัะธะธ**: ะะพะฝััั observability ัะตัะตะท ะฟะพะฒัะตะดะฝะตะฒะฝัะต ะฐะฝะฐะปะพะณะธะธ โ ะฑะตะท ะตะดะธะฝะพะน ัััะพะบะธ ะบะพะฝัะธะณััะฐัะธะธ ะธะปะธ ะทะฐะฟัะพัะพะฒ.

### ะะฝะฐะปะพะณะธั 1: Observability ะบะฐะบ ะฟัะธะฑะพัะฝะฐั ะฟะฐะฝะตะปั ัะฐะผะพะปััะฐ

```
+------------------------------------------------------------------+
|                    ะะะะะะ ะะะะะขะ                                  |
|                                                                    |
|   +-------------+  +-------------+  +-------------+               |
|   |  ะกะะะะะะะขะ  |  |   ะะะะขะะะะ  |  |  GPS-ะขะะะ   |               |
|   |  (Metrics)  |  |   ะะฃะะะะ    |  |  (Traces)   |               |
|   |             |  |   (Logs)    |  |             |               |
|   |  "ะกะบะพัะพััั  |  |  "ะงัะพ       |  | "ะัะบัะดะฐ     |               |
|   |   ัะตะนัะฐั    |  |   ะฟัะพะธะทะพัะปะพ |  |  ะฟัะธะปะตัะตะปะธ, |               |
|   |   280 ะบะผ/ั" |  |   ะฒ 14:32?" |  |  ะบะฐะบ ะปะตัะตะปะธ"|               |
|   +-------------+  +-------------+  +-------------+               |
|                                                                    |
|   Monitoring: "ะกะบะพัะพััั ะฒ ะฝะพัะผะต? ะะ/ะะะข"                          |
|   Observability: "ะะะงะะะฃ ัะบะพัะพััั ัะฟะฐะปะฐ ะฒ ะทะพะฝะต ัััะฑัะปะตะฝัะฝะพััะธ?"   |
+------------------------------------------------------------------+
```

**ะะปััะตะฒะพะต ัะฐะทะปะธัะธะต:**
- **Monitoring** = "ะัั ะฒ ะฟะพััะดะบะต?" (ะดะฐ/ะฝะตั)
- **Observability** = "ะะพัะตะผั ััะพ ะฟัะพะธะทะพัะปะพ?" (ะฟะพะฝะธะผะฐะฝะธะต)

ะะธะปะพั ะฝะต ะฟัะพััะพ ัะผะพััะธั: "ะะฒะธะณะฐัะตะปั ัะฐะฑะพัะฐะตั". ะะฝ ะฒะธะดะธั ัะตะผะฟะตัะฐัััั, ะดะฐะฒะปะตะฝะธะต, ัะฐััะพะด ัะพะฟะปะธะฒะฐ, ะธััะพัะธั ะธะทะผะตะฝะตะฝะธะน โ ะธ ะผะพะถะตั ะฟะพะฝััั ะะะงะะะฃ ะดะฒะธะณะฐัะตะปั ะฒะตะดัั ัะตะฑั ัััะฐะฝะฝะพ.

---

### ะะฝะฐะปะพะณะธั 2: ะขัะธ ััะพะปะฟะฐ ะบะฐะบ ััะธ ัะธะฟะฐ ะฒัะฐัะตะน

```
+------------------------------------------------------------------+
|                     ะะะะฌะะะฆะ (ะะฐัะฐ ัะธััะตะผะฐ)                       |
|                                                                    |
|   +----------------+  +----------------+  +----------------+      |
|   |   ะขะะะะะะะข     |  |    ะะกะขะะะะ     |  |   ะฅะะะฃะะ       |      |
|   |   (Metrics)    |  |    (Logs)      |  |   (Traces)     |      |
|   +----------------+  +----------------+  +----------------+      |
|   |                |  |                |  |                |      |
|   | "ะขะตะผะฟะตัะฐัััะฐ   |  | "ะะฐัะธะตะฝั       |  | "ะัะพัะปะตะดะธะผ     |      |
|   |  37.5, ะฟัะปัั   |  |  ะถะฐะปะพะฒะฐะปัั     |  |  ะฟััั ะธะฝัะตะบัะธะธ |      |
|   |  85, ะดะฐะฒะปะตะฝะธะต  |  |  ะฝะฐ ะณะพะปะพะฒะฝัั   |  |  ะพั ัะพัะบะธ      |      |
|   |  120/80"       |  |  ะฑะพะปั ะฒ 14:00, |  |  ะฒัะพะดะฐ ะดะพ      |      |
|   |                |  |  ะฟะพัะพะผ ะฝะฐ      |  |  ะพัะณะฐะฝะฐ"       |      |
|   | ะะะะะะะะะะะะะซะ |  |  ัะพัะฝะพัั..."   |  |                |      |
|   | ะงะะกะะ          |  | ะกะะะซะขะะฏ        |  | ะะฃะขะฌ           |      |
|   +----------------+  +----------------+  +----------------+      |
|                                                                    |
|   ะัะต ััะธ ะฒะผะตััะต = ะฟะพะปะฝะฐั ะบะฐััะธะฝะฐ ัะพััะพัะฝะธั ะฟะฐัะธะตะฝัะฐ              |
+------------------------------------------------------------------+
```

**ะะพะณะดะฐ ััะพ ะธัะฟะพะปัะทะพะฒะฐัั:**

| ะะพะฟัะพั | ะกัะพะปะฟ | ะะพัะตะผั |
|--------|-------|--------|
| "ะกะบะพะปัะบะพ ะทะฐะฟัะพัะพะฒ ะฒ ัะตะบัะฝะดั?" | Metrics | ะะณัะตะณะธัะพะฒะฐะฝะฝัะต ัะธัะปะฐ |
| "ะงัะพ ะธะผะตะฝะฝะพ ะฒะตัะฝัะป API ะฒ 14:32?" | Logs | ะะพะฝะบัะตัะฝะพะต ัะพะฑััะธะต |
| "ะะพัะตะผั ะทะฐะฟัะพั ััะป 5 ัะตะบัะฝะด?" | Traces | ะััั ัะตัะตะท ัะตัะฒะธัั |

---

### ะะฝะฐะปะพะณะธั 3: Prometheus + Grafana ะบะฐะบ ัะฑะพััะธะบ ะฝะพะฒะพััะตะน + ัะตะปะตะบะฐะฝะฐะป

```
    ะกะะะะะกะซ (ะธััะพัะฝะธะบะธ ะฝะพะฒะพััะตะน)
    +-------+  +-------+  +-------+  +-------+
    |App A  |  |App B  |  |DB     |  |Cache  |
    |:8080  |  |:8080  |  |:9104  |  |:9121  |
    +---+---+  +---+---+  +---+---+  +---+---+
        |          |          |          |
        v          v          v          v
    +------------------------------------------+
    |           PROMETHEUS                      |
    |        (ะะพััะตัะฟะพะฝะดะตะฝั)                    |
    |                                           |
    |  "ะะฐะถะดัะต 15 ัะตะบัะฝะด ั ะพะฑัะพะถั ะฒัะต          |
    |   ะธััะพัะฝะธะบะธ ะธ ะทะฐะฟะธััะฒะฐั ะฟะพะบะฐะทะฐะฝะธั"        |
    |                                           |
    |  Pull-ะผะพะดะตะปั: Prometheus ะกะะะ             |
    |  ะฟัะธัะพะดะธั ะทะฐ ะผะตััะธะบะฐะผะธ                    |
    +---------------------+--------------------+
                          |
                          v
    +------------------------------------------+
    |           GRAFANA                         |
    |        (ะขะตะปะตะบะฐะฝะฐะป)                        |
    |                                           |
    |  "ะฏ ะฑะตัั ะดะฐะฝะฝัะต ะพั ะบะพััะตัะฟะพะฝะดะตะฝัะฐ         |
    |   ะธ ะฟะพะบะฐะทัะฒะฐั ะบัะฐัะธะฒัะต ะณัะฐัะธะบะธ"           |
    |                                           |
    |  Dashboards, Alerts, Annotations          |
    +------------------------------------------+

    Prometheus ะะ ัะธััะตั ะณัะฐัะธะบะธ โ ัะพะปัะบะพ ัะพะฑะธัะฐะตั ะธ ััะฐะฝะธั.
    Grafana ะะ ัะพะฑะธัะฐะตั ะผะตััะธะบะธ โ ัะพะปัะบะพ ะฒะธะทัะฐะปะธะทะธััะตั.
```

**ะะพัะตะผั pull-ะผะพะดะตะปั ะปัััะต push:**
- Prometheus ะบะพะฝััะพะปะธััะตั ัะฐััะพัั ะพะฟัะพัะฐ
- ะัะปะธ ัะตัะฒะธั ัะฟะฐะป โ ััะพ ะฒะธะดะฝะพ (scrape failed)
- ะัะพัะต ะผะฐัััะฐะฑะธัะพะฒะฐัั โ ะดะพะฑะฐะฒะปัะตัั targets
- ะะตั "ััะพัะผะพะฒ" ะพั ัะตัะฒะธัะพะฒ, ะบะพัะพััะต ะฟััะฐั ะผะฝะพะณะพ ะดะฐะฝะฝัั

---

### ะะฝะฐะปะพะณะธั 4: Golden Signals ะบะฐะบ ัะตัััะต ะฟะพะบะฐะทะฐัะตะปั ะทะดะพัะพะฒัั

```
+------------------------------------------------------------------+
|                    GOLDEN SIGNALS (Google SRE)                    |
|                                                                    |
|   +---------------+  +---------------+                            |
|   |   LATENCY     |  |   TRAFFIC     |                            |
|   |   (ะัะปัั)     |  |   (ะััะฐะฝะธะต)   |                            |
|   +---------------+  +---------------+                            |
|   | ะะฐะบ ะฑััััะพ    |  | ะกะบะพะปัะบะพ       |                            |
|   | ะพัะฒะตัะฐะตะผ?     |  | ัะฐะฑะพัั        |                            |
|   |               |  | ะดะตะปะฐะตะผ?       |                            |
|   | p50 = 100ms   |  | 1000 req/s    |                            |
|   | p99 = 500ms   |  |               |                            |
|   +---------------+  +---------------+                            |
|                                                                    |
|   +---------------+  +---------------+                            |
|   |   ERRORS      |  |  SATURATION   |                            |
|   | (ะขะตะผะฟะตัะฐัััะฐ) |  | (ะะฐะฒะปะตะฝะธะต)    |                            |
|   +---------------+  +---------------+                            |
|   | ะกะบะพะปัะบะพ       |  | ะะฐัะบะพะปัะบะพ     |                            |
|   | ะพัะธะฑะพะบ?       |  | ะทะฐะณััะถะตะฝั?    |                            |
|   |               |  |               |                            |
|   | 0.1% 5xx      |  | CPU 70%       |                            |
|   | 0.5% timeout  |  | Memory 85%    |                            |
|   +---------------+  +---------------+                            |
|                                                                    |
|   ะัะปะธ ััะธ 4 ะฟะพะบะฐะทะฐัะตะปั ะฒ ะฝะพัะผะต โ ัะตัะฒะธั ะทะดะพัะพะฒ.                  |
|   ะัะปะธ ัะพัั ะฑั ะพะดะธะฝ ะฒััะพะดะธั ะทะฐ ะฟัะตะดะตะปั โ ะฒัะตะผั ัะฐะทะฑะธัะฐัััั.       |
+------------------------------------------------------------------+
```

**ะะปััะตัะฝะฐัะธะฒะฐ โ RED Method:**
- **R**ate: ะทะฐะฟัะพัะพะฒ ะฒ ัะตะบัะฝะดั
- **E**rrors: ะพัะธะฑะพะบ ะฒ ัะตะบัะฝะดั
- **D**uration: ะฒัะตะผั ะพัะฒะตัะฐ

USE Method (ะดะปั ะธะฝััะฐััััะบัััั):
- **U**tilization: % ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- **S**aturation: ะพัะตัะตะดั/backlog
- **E**rrors: ะบะพะปะธัะตััะฒะพ ะพัะธะฑะพะบ

---

### ะะฝะฐะปะพะณะธั 5: Distributed Tracing ะบะฐะบ GPS-ััะตะบ ะฟะพััะปะบะธ

```
    ะั ะทะฐะบะฐะทะฐะปะธ ัะพะฒะฐั. ะะดะต ะพะฝ ัะตะนัะฐั?

    +------------------------------------------------------------------+
    |  TRACE ID: abc-123 (ะะพะผะตั ะพััะปะตะถะธะฒะฐะฝะธั ะฟะพััะปะบะธ)                  |
    +------------------------------------------------------------------+
    |                                                                   |
    |  SPAN 1: API Gateway (ะัะธัะผ ะทะฐะบะฐะทะฐ)                              |
    |  +--[============]----------------------------------------+      |
    |  | 0ms                                            50ms    |      |
    |                                                                   |
    |      SPAN 2: Auth Service (ะัะพะฒะตัะบะฐ ะดะพะบัะผะตะฝัะพะฒ)                  |
    |      +-----[====]----------------------------------------+       |
    |      |    50ms    80ms                                    |       |
    |                                                                   |
    |          SPAN 3: Order Service (ะะฑัะฐะฑะพัะบะฐ ะทะฐะบะฐะทะฐ)                |
    |          +-------[====================]-----------------+        |
    |          |       80ms                  200ms             |        |
    |                                                                   |
    |              SPAN 4: Database (ะกะพััะฐะฝะตะฝะธะต ะฒ ะะ)                  |
    |              +----------[========]--------------------+          |
    |              |         100ms    150ms                  |          |
    |                                                                   |
    |              SPAN 5: Notification (ะัะฟัะฐะฒะบะฐ SMS)                 |
    |              +----------[====]------------------------+          |
    |              |         100ms 120ms                     |          |
    |                                                                   |
    +------------------------------------------------------------------+
    |  Total: 200ms | Bottleneck: Order Service (120ms = 60%)          |
    +------------------------------------------------------------------+

    ะะตะท ััะตะนัะธะฝะณะฐ: "ะะฐะฟัะพั ััะป 200ms, ะฝะต ะทะฝะฐั ะณะดะต ะทะฐะดะตัะถะบะฐ"
    ะก ััะตะนัะธะฝะณะพะผ: "Order Service ะทะฐะฝัะป 60% ะฒัะตะผะตะฝะธ โ ะบะพะฟะฐะตะผ ััะดะฐ"
```

**ะะปััะตะฒัะต ะบะพะฝัะตะฟัะธะธ:**
- **Trace** = ะฒะตัั ะฟััั ะทะฐะฟัะพัะฐ (ะพะดะฝะฐ ะฟะพััะปะบะฐ)
- **Span** = ะพะดะธะฝ ััะฐะฟ ะฟััะธ (ะพะดะธะฝ ัะบะปะฐะด/ััะฐะฝัะฟะพัั)
- **Parent-Child** = ะฒะปะพะถะตะฝะฝะพััั (span ะฒะฝัััะธ span)
- **Context Propagation** = ะฟะตัะตะดะฐัะฐ trace-id ะผะตะถะดั ัะตัะฒะธัะฐะผะธ

---

## ะงะฐััั 2: ะะพัะตะผั ััะพ ัะปะพะถะฝะพ

> ๐ฏ **ะฆะตะปั ัะตะบัะธะธ**: ะะทััะธัั 6 ัะธะฟะธัะฝัั ะพัะธะฑะพะบ, ั ะบะพัะพััะผะธ ััะฐะปะบะธะฒะฐัััั ะบะพะผะฐะฝะดั ะฟัะธ ะฒะฝะตะดัะตะฝะธะธ observability.

### ะัะธะฑะบะฐ 1: ะัะผะฐัั ััะพ Prometheus + Grafana = Observability

**ะกะะะะขะะ:**
```
"ะฃ ะฝะฐั ะตััั observability โ ะฒะพั ะฝะฐัะธ ะดะฐัะฑะพัะดั ะฒ Grafana!"
(ะฟะพะบะฐะทัะฒะฐะตั 50 ะณัะฐัะธะบะพะฒ CPU/Memory/Disk)

ะัะธ ะธะฝัะธะดะตะฝัะต:
- "ะะพัะตะผั ะทะฐะฟัะพัั ะผะตะดะปะตะฝะฝัะต?" โ "ะะต ะทะฝะฐั, CPU ะฒ ะฝะพัะผะต"
- "ะะฐะบะธะต ะทะฐะฟัะพัั ะทะฐััะพะฝััั?" โ "ะะต ะทะฝะฐั, ะฝะตั ะปะพะณะพะฒ"
- "ะะดะต ะธะผะตะฝะฝะพ ะทะฐะดะตัะถะบะฐ?" โ "ะะต ะทะฝะฐั, ะฝะตั ััะตะนัะพะฒ"
```

**ะะพัะตะผั ะฟัะพะธััะพะดะธั:**
ะะพะผะฐะฝะดั ะฟััะฐัั **monitoring** (ัะปะตะถะตะฝะธะต ะทะฐ ะธะทะฒะตััะฝัะผะธ ะผะตััะธะบะฐะผะธ) ั **observability** (ัะฟะพัะพะฑะฝะพััั ะธััะปะตะดะพะฒะฐัั ะฝะตะธะทะฒะตััะฝัะต ะฟัะพะฑะปะตะผั).

**ะะะจะะะะ:**
```
Monitoring:                    Observability:
"CPU > 80%? Alert!"            "ะะะงะะะฃ CPU > 80%?"
"Error rate > 1%? Alert!"      "ะะะะะ ะทะฐะฟัะพัั ะฒัะทัะฒะฐัั ะพัะธะฑะบะธ?"
"Latency > 500ms? Alert!"      "ะะะ ะฒ ัะตะฟะพัะบะต ัะตัะฒะธัะพะฒ ะทะฐะดะตัะถะบะฐ?"

ะงัะพ ะฝัะถะฝะพ ะดะพะฑะฐะฒะธัั ะบ Prometheus + Grafana:
+---------------+  +---------------+  +---------------+
|   Metrics     |  |     Logs      |  |    Traces     |
|  Prometheus   |  |     Loki      |  |    Tempo      |
|   Grafana     |  |    Grafana    |  |   Grafana     |
+---------------+  +---------------+  +---------------+
        |                  |                 |
        +------------------+-----------------+
                           |
                   ะะะะะะะฏะฆะะฏ!
            (ะพะดะธะฝ ะธะฝััััะผะตะฝั ะดะปั ะฒัะตั ัััั)
```

---

### ะัะธะฑะบะฐ 2: Alert Fatigue โ ัะปะธัะบะพะผ ะผะฝะพะณะพ ะฐะปะตััะพะฒ

**ะกะะะะขะะ:**
```
Slack ะบะฐะฝะฐะป #alerts:
08:00 [WARN] CPU > 70% on node-1
08:01 [WARN] CPU > 70% on node-2
08:02 [WARN] Memory > 80% on node-3
08:03 [WARN] Disk > 75% on node-1
08:04 [WARN] CPU > 70% on node-1  (ะพะฟััั)
...
(100+ ะฐะปะตััะพะฒ ะฒ ะดะตะฝั, ะบะพะผะฐะฝะดะฐ ะธะณะฝะพัะธััะตั ะบะฐะฝะฐะป)

09:30 [CRITICAL] Database connection pool exhausted
      ^^^ ะะธะบัะพ ะฝะต ะทะฐะผะตัะธะป ััะตะดะธ ััะผะฐ
```

**ะะพัะตะผั ะฟัะพะธััะพะดะธั:**
- ะะปะตััั ะฝะฐ ะบะฐะถะดัั ะผะตััะธะบั "ะฝะฐ ะฒััะบะธะน ัะปััะฐะน"
- ะกะปะธัะบะพะผ ะฝะธะทะบะธะต ะฟะพัะพะณะธ (CPU 70% โ ััะพ ะฝะพัะผะฐะปัะฝะพ!)
- ะะตั ะฐะณัะตะณะฐัะธะธ ะธ ะดะตะดัะฟะปะธะบะฐัะธะธ
- ะะปะตััั ะฝะฐ ัะธะผะฟัะพะผั, ะฐ ะฝะต ะฝะฐ ะฒะปะธัะฝะธะต ะฝะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

**ะะะจะะะะ:**
```
ะะะะฅะ: ะะปะตัั ะฝะฐ ะบะฐะถะดัั ะฝะพะดั ะพัะดะตะปัะฝะพ
ะฅะะะะจะ: ะะปะตัั ะบะพะณะดะฐ >30% ะฝะพะด ะธะผะตัั ะฟัะพะฑะปะตะผั

ะะะะฅะ: CPU > 70% (ััะพ ะฝะพัะผะฐะปัะฝะฐั ะฝะฐะณััะทะบะฐ)
ะฅะะะะจะ: CPU > 95% ะฑะพะปะตะต 5 ะผะธะฝัั ะ latency ะฒััะพัะปะฐ

ะะะะฅะ: 100 ะฐะปะตััะพะฒ "Pod restarted"
ะฅะะะะจะ: "5+ ะฟะพะดะพะฒ ัะตัะฒะธัะฐ X ัะตััะฐััะพะฒะฐะปะธ ะทะฐ 10 ะผะธะฝัั"

ะัะฐะฒะธะปะพ SRE: ะะปะตัั ะดะพะปะถะตะฝ ััะตะฑะพะฒะฐัั ะดะตะนััะฒะธั.
ะัะปะธ ะดะตะนััะฒะธะต ะฝะต ะฝัะถะฝะพ โ ััะพ ะฝะต ะฐะปะตัั, ััะพ ะปะพะณ.

ะะธัะฐะผะธะดะฐ ะฐะปะตััะพะฒ:
        /\
       /  \  Page (ะฑัะดะธั ะฝะพััั) โ ัะพะปัะบะพ critical
      /----\
     /      \ Ticket (ะฝะฐ ัััะพ) โ ะฒะฐะถะฝะพ, ะฝะพ ะฝะต ััะพัะฝะพ
    /--------\
   /          \ Dashboard (ะธะฝัะพัะผะฐัะธั) โ ะฝะต ะฐะปะตัั!
```

---

### ะัะธะฑะบะฐ 3: ะกะพะฑะธัะฐัั ะฒัั ะฟะพะดััะด ะฑะตะท ัััะฐัะตะณะธะธ

**ะกะะะะขะะ:**
```
- 10,000+ ะผะตััะธะบ ะฝะฐ ัะตัะฒะธั
- 500GB ะปะพะณะพะฒ ะฒ ะดะตะฝั
- Prometheus OOM ะบะฐะถะดัั ะฝะตะดะตะปั
- Loki ัะพัะผะพะทะธั ะฝะฐ ะทะฐะฟัะพัะฐั
- ะกััั ะทะฐ storage ัะฐัััั ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝะพ

"ะั ัะพะฑะธัะฐะตะผ ะฒัั, ะฟะพัะพะผั ััะพ ะฝะต ะทะฝะฐะตะผ ััะพ ะฟะพะฝะฐะดะพะฑะธััั"
```

**ะะพัะตะผั ะฟัะพะธััะพะดะธั:**
- ะญะบัะฟะพััะตัั ะฟะพ ัะผะพะปัะฐะฝะธั ะฒะบะปััะฐัั ะฒัะต ะผะตััะธะบะธ
- ะะพะณะธ ะฟะธััั ะฝะฐ DEBUG ััะพะฒะฝะต ะฒ production
- ะะตั retention policy
- "ะะดััะณ ะฟะพะฝะฐะดะพะฑะธััั"

**ะะะจะะะะ:**
```
ะกััะฐัะตะณะธั "80/20":
- 80% ะฟัะพะฑะปะตะผ ัะตัะฐัััั 20% ะผะตััะธะบ
- ะะฐัะฝะธัะต ั Golden Signals ะดะปั ะบะฐะถะดะพะณะพ ัะตัะฒะธัะฐ
- ะะพะฑะฐะฒะปัะนัะต ะผะตััะธะบะธ ะบะพะณะดะฐ ะพะฝะธ ะะฃะะะซ, ะฝะต ะทะฐัะฐะฝะตะต

ะัะธะผะตั node_exporter:
# ะะะะฅะ: ะฒัะต 1000+ ะผะตััะธะบ
--collector.enabled

# ะฅะะะะจะ: ัะพะปัะบะพ ะฝัะถะฝัะต
--collector.cpu
--collector.meminfo
--collector.diskstats
--collector.netdev
--no-collector.wifi  # ะฝะต ะฝัะถะฝะพ ะฝะฐ ัะตัะฒะตัะฐั

Retention policy:
- Raw metrics: 15 ะดะฝะตะน
- Downsampled (1h): 90 ะดะฝะตะน
- Downsampled (1d): 1 ะณะพะด
- ะะพะณะธ DEBUG: 1 ะดะตะฝั
- ะะพะณะธ ERROR: 30 ะดะฝะตะน
```

---

### ะัะธะฑะบะฐ 4: ะะตััะธะบะธ ะฑะตะท ะบะพะฝัะตะบััะฐ (missing labels)

**ะกะะะะขะะ:**
```
# ะะธะดะธัะต ะฒััะพะบัั latency:
http_request_duration_seconds{quantile="0.99"} 2.5

# ะะพะฟัะพั: "ะะฐะบะพะน ัะฝะดะฟะพะธะฝั? ะะฐะบะพะน ะผะตัะพะด? ะะฐะบะพะน ััะฐััั?"
# ะัะฒะตั: "ะะต ะทะฝะฐั, ะฝะตั labels"

# ะัะธัะพะดะธััั ัะณะฐะดัะฒะฐัั ะธะปะธ ะฟะตัะตะทะฐะฟััะบะฐัั ั ะฝะพะฒัะผะธ ะผะตััะธะบะฐะผะธ
```

**ะะพัะตะผั ะฟัะพะธััะพะดะธั:**
- Labels ะดะพะฑะฐะฒะปััั ะฝะต ััะฐะทั
- ะะพัะทะฝั cardinality explosion
- ะะพะฟะธัะพะฒะฐะฝะธะต ะบะพะฝัะธะณะพะฒ ะฑะตะท ะฟะพะฝะธะผะฐะฝะธั

**ะะะจะะะะ:**
```
# ะะะะฅะ: ะพะดะฝะฐ ะผะตััะธะบะฐ ะฝะฐ ะฒัั
http_requests_total 15000

# ะฅะะะะจะ: labels ะดะปั ัะธะปัััะฐัะธะธ
http_requests_total{
  method="GET",           # HTTP ะผะตัะพะด
  endpoint="/api/users",  # ะะฐะบะพะน ัะฝะดะฟะพะธะฝั
  status="200",           # ะะพะด ะพัะฒะตัะฐ
  service="user-api"      # ะะฐะบะพะน ัะตัะฒะธั
} 12000

http_requests_total{
  method="POST",
  endpoint="/api/orders",
  status="500",
  service="order-api"
} 50

# ะขะตะฟะตัั ะผะพะถะฝะพ:
sum by (endpoint) (rate(http_requests_total[5m]))
sum by (status) (rate(http_requests_total{status=~"5.."}[5m]))

โ๏ธ ะะ: ะะทะฑะตะณะฐะนัะต ะฒััะพะบะพะน cardinality!
ะะะะฅะ: label user_id (ะผะธะปะปะธะพะฝั ัะฝะธะบะฐะปัะฝัั ะทะฝะฐัะตะฝะธะน)
ะฅะะะะจะ: label user_type (free, premium, enterprise)
```

---

### ะัะธะฑะบะฐ 5: ะะตั ะบะพััะตะปััะธะธ ะผะตะถะดั ััะตะผั ััะพะปะฟะฐะผะธ

**ะกะะะะขะะ:**
```
ะะฝัะธะดะตะฝั: "API ะผะตะดะปะตะฝะฝัะน"

ะ Grafana (metrics): ะะธะดะธะผ spike latency ะฒ 14:32
ะ Loki (logs): ะะธะดะธะผ ะพัะธะฑะบะธ... ะฝะพ ะฒ ะบะฐะบะพะผ ัะตัะฒะธัะต?
ะ Jaeger (traces): ะะดะต trace ะดะปั ััะพะณะพ ะทะฐะฟัะพัะฐ?

ะัะธัะพะดะธััั ะฒัััะฝัั ัะพะฟะพััะฐะฒะปััั timestamp'ั,
ะฟะตัะตะบะปััะฐัััั ะผะตะถะดั 3 ะธะฝัะตััะตะนัะฐะผะธ,
ัะณะฐะดัะฒะฐัั ัะฒัะทะธ.

ะัะตะผั ะฝะฐ ะดะธะฐะณะฝะพััะธะบั: 45 ะผะธะฝัั ะฒะผะตััะพ 5.
```

**ะะพัะตะผั ะฟัะพะธััะพะดะธั:**
- ะขัะธ ัะฐะทะฝัั ะธะฝััััะผะตะฝัะฐ ะฑะตะท ะธะฝัะตะณัะฐัะธะธ
- ะะตั ะพะฑัะตะณะพ ะธะดะตะฝัะธัะธะบะฐัะพัะฐ (trace_id) ะฒะพ ะฒัะตั ัะธะณะฝะฐะปะฐั
- ะะฐะทะฝัะต retention/timestamp precision

**ะะะจะะะะ:**
```
ะะฝัะตะณัะฐัะธั ัะตัะตะท trace_id:

1. ะะตะฝะตัะธััะนัะต trace_id ะฝะฐ ะฒัะพะดะต (API Gateway)
2. ะัะพะฑัะฐััะฒะฐะนัะต ะฒ ะปะพะณะฐั:
   logger.info("Order created", extra={"trace_id": trace_id})
3. ะะพะฑะฐะฒะปัะนัะต ะฒ ะผะตััะธะบะธ ะบะฐะบ exemplar:
   http_requests_total{...} 1 # trace_id=abc123

ะ Grafana:
+------------------------------------------------------------------+
|  [ะัะฐัะธะบ latency spike ะฒ 14:32]                                  |
|                    |                                              |
|                    v (ะบะปะธะบ ะฝะฐ ัะพัะบั)                              |
|  "ะะพะบะฐะทะฐัั exemplar traces" โ Tempo                              |
|                    |                                              |
|                    v (ะบะปะธะบ ะฝะฐ trace)                              |
|  "ะะพะบะฐะทะฐัั ะปะพะณะธ ะดะปั trace_id=abc123" โ Loki                      |
+------------------------------------------------------------------+

Grafana + Tempo + Loki + Prometheus = ะตะดะธะฝะฐั ะบะฐััะธะฝะฐ
```

---

### ะัะธะฑะบะฐ 6: ะะฐัะฑะพัะดั ะฑะตะท ัะผััะปะฐ (vanity dashboards)

**ะกะะะะขะะ:**
```
Dashboard "ะกะธััะตะผะฐ ะะพะฝะธัะพัะธะฝะณะฐ v2.0":
- 47 ะณัะฐัะธะบะพะฒ
- 12 ะบััะณะพะฒัั ะดะธะฐะณัะฐะผะผ
- ะัั ะทะตะปัะฝะพะต
- ะะธะบัะพ ะฝะต ัะผะพััะธั
- ะัะธ ะธะฝัะธะดะตะฝัะต: "ะะดะต ะฟะพัะผะพััะตัั ััะพ ัะปะพะผะฐะปะพัั?"

"Dashboard ะฒัะณะปัะดะธั ะบัััะพ ะฝะฐ ะดะตะผะพ, ะฝะพ ะฑะตัะฟะพะปะตะทะตะฝ ะฒ ะฑะพั"
```

**ะะพัะตะผั ะฟัะพะธััะพะดะธั:**
- ะะฐัะฑะพัะดั ัะพะทะดะฐัััั "ะดะปั ะบัะฐัะพัั"
- ะะตั ะพัะฒะตัะฐ ะฝะฐ ะบะพะฝะบัะตัะฝัะน ะฒะพะฟัะพั
- ะกะปะธัะบะพะผ ะผะฝะพะณะพ ะธะฝัะพัะผะฐัะธะธ
- ะะตั ัะธะปัััะพะฒ/drill-down

**ะะะจะะะะ:**
```
ะะฐะถะดัะน dashboard ะดะพะปะถะตะฝ ะพัะฒะตัะฐัั ะฝะฐ ะะะะ ะฒะพะฟัะพั:

+------------------------------------------------------------------+
|  Dashboard: "ะะดะพัะพะฒัะต API Gateway"                               |
|  ะะพะฟัะพั: "ะะฐะฑะพัะฐะตั ะปะธ API ะฝะพัะผะฐะปัะฝะพ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน?"          |
+------------------------------------------------------------------+
|                                                                   |
|  [Request Rate]     [Error Rate]    [P99 Latency]                |
|   โโโโโโโโโโโ        โ                โโโโโโโโโโ                  |
|   1.2k req/s         0.1%             120ms                       |
|                                                                   |
|  [Top 5 Slow Endpoints]              [Recent Errors]             |
|  1. /api/search - 450ms              POST /api/orders - 500      |
|  2. /api/export - 320ms              GET /api/users - 502        |
|                                                                   |
|  [Drill-down ะฟะพ endpoint] [Drill-down ะฟะพ ััะฐัััั]                |
+------------------------------------------------------------------+

ะัะฐะฒะธะปะฐ ัะพัะพัะตะณะพ dashboard:
1. ะะดะธะฝ dashboard = ะพะดะธะฝ use case
2. ะกะฒะตััั โ ะพะฑัะฐั ะบะฐััะธะฝะฐ (SLIs)
3. ะกะฝะธะทั โ ะดะตัะฐะปะธ ะดะปั ะดะธะฐะณะฝะพััะธะบะธ
4. ะคะธะปัััั: ะฟะพ ัะตัะฒะธัั, ะฒัะตะผะตะฝะธ, endpoint
5. ะกััะปะบะธ ะฝะฐ ัะฒัะทะฐะฝะฝัะต dashboards ะธ traces
```

---

## ะงะฐััั 3: ะะตะฝัะฐะปัะฝัะต ะผะพะดะตะปะธ

> ๐ฏ **ะฆะตะปั ัะตะบัะธะธ**: 5 ัะฟะพัะพะฑะพะฒ ะดัะผะฐัั ะพะฑ observability, ะบะพัะพััะต ัะฟัะพัะฐัั ะฟะพะฝะธะผะฐะฝะธะต ะธ ะฟัะธะฝััะธะต ัะตัะตะฝะธะน.

### ะะพะดะตะปั 1: ะะพะฟัะพั ะพะฟัะตะดะตะปัะตั ะธะฝััััะผะตะฝั

```
+------------------------------------------------------------------+
|                 ะะะะะ ะะะะะะก ะะซ ะะะะะะขะ?                         |
+------------------------------------------------------------------+
|                                                                   |
|  "ะงัะพ ะฟัะพะธััะพะดะธั         "ะงัะพ ะบะพะฝะบัะตัะฝะพ       "ะะฐะบ ะทะฐะฟัะพั        |
|   ะกะะะงะะก?"               ัะปััะธะปะพัั?"           ะฟัะพััะป?"           |
|       |                       |                    |              |
|       v                       v                    v              |
|   METRICS                   LOGS                TRACES            |
|       |                       |                    |              |
|       v                       v                    v              |
|   "Latency              "Connection           "Auth Service      |
|    ะฒััะพัะปะฐ               refused from         ะทะฐะฝัะป 80%          |
|    ะดะพ 500ms"             DB at 14:32:15"      ะฒัะตะผะตะฝะธ"           |
|                                                                   |
+------------------------------------------------------------------+

Workflow ะฟัะธ ะธะฝัะธะดะตะฝัะต:
1. METRICS: "ะงัะพ ัะปะพะผะฐะปะพัั?" โ ะะธะดะธะผ spike errors ะฝะฐ ะณัะฐัะธะบะต
2. LOGS: "ะะพะณะดะฐ ะธ ััะพ ะธะผะตะฝะฝะพ?" โ ะะฐัะพะดะธะผ error message
3. TRACES: "ะะดะต ะฒ ัะตะฟะพัะบะต?" โ ะะธะดะธะผ bottleneck ัะตัะฒะธั
```

---

### ะะพะดะตะปั 2: MELT Framework

```
+------------------------------------------------------------------+
|                    MELT Framework                                 |
|           (Metrics, Events, Logs, Traces)                        |
+------------------------------------------------------------------+
|                                                                   |
|   M - Metrics    โ ะะณัะตะณะธัะพะฒะฐะฝะฝัะต ัะธัะปะฐ over time                |
|                  โ "ะกัะตะดะฝะตะต", "ััะผะผะฐ", "ะฟัะพัะตะฝัะธะปั"              |
|                  โ ะัะธะผะตั: p99 latency = 200ms                   |
|   โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    |
|   E - Events     โ ะะธัะบัะตัะฝัะต ะทะฝะฐัะธะผัะต ัะพะฑััะธั                   |
|                  โ "ะะตะฟะปะพะน", "ัะตััะฐัั", "config change"          |
|                  โ ะัะธะผะตั: Deployed v2.3.1 at 14:00              |
|   โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    |
|   L - Logs       โ ะะตัะฐะปัะฝัะต ะทะฐะฟะธัะธ ัะพะณะพ ััะพ ะฟัะพะธะทะพัะปะพ           |
|                  โ ะขะตะบัั + ััััะบัััะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต              |
|                  โ ะัะธะผะตั: {"level":"error","msg":"timeout"}     |
|   โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    |
|   T - Traces     โ ะััั ะทะฐะฟัะพัะฐ ัะตัะตะท ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะธััะตะผั     |
|                  โ Spans, timing, parent-child                   |
|                  โ ะัะธะผะตั: Request abc โ A โ B โ C (250ms)       |
|                                                                   |
+------------------------------------------------------------------+

Events ัะฐััะพ ัะฟััะบะฐัั!
Annotations ะฒ Grafana = ะบะพะณะดะฐ ะฑัะป ะดะตะฟะปะพะน, ะบะพะณะดะฐ ะผะตะฝัะปะธ ะบะพะฝัะธะณ.
ะะพััะตะปััะธั: "Latency ะฒััะพัะปะฐ ััะฐะทั ะฟะพัะปะต ะดะตะฟะปะพั v2.3.1"
```

---

### ะะพะดะตะปั 3: SLI โ SLO โ SLA Pipeline

```
                      ะะะะะะะะะะะฏ
    +----------------------------------------------------------+
    |                                                          |
    |  SLI (Service Level Indicator)                           |
    |  = ะงะขะ ะธะทะผะตััะตะผ                                          |
    |  "ะัะพัะตะฝั ะทะฐะฟัะพัะพะฒ ั latency < 200ms"                    |
    |                                                          |
    |           โ                                              |
    |                                                          |
    |  SLO (Service Level Objective)                           |
    |  = ะฆะะะฌ ะบะพัะพััั ัะพัะธะผ ะดะพััะธัั                            |
    |  "99.9% ะทะฐะฟัะพัะพะฒ ะดะพะปะถะฝั ะฑััั < 200ms"                    |
    |                                                          |
    |           โ                                              |
    |                                                          |
    |  SLA (Service Level Agreement)                           |
    |  = ะะะะขะะะะข ั ะฟะพัะปะตะดััะฒะธัะผะธ                              |
    |  "ะัะปะธ < 99.9% โ ะฒะพะทะฒัะฐั ะดะตะฝะตะณ ะบะปะธะตะฝัั"                  |
    |                                                          |
    +----------------------------------------------------------+

    Error Budget = ัะบะพะปัะบะพ ะผะพะถะฝะพ "ัะปะพะผะฐัั":
    +----------------------------------------------------------+
    |  SLO: 99.9% availability                                  |
    |                                                           |
    |  ะะฐ ะผะตััั (30 ะดะฝะตะน):                                      |
    |  - ะัะตะณะพ ะผะธะฝัั: 30 ร 24 ร 60 = 43,200                    |
    |  - ะะพะฟัััะธะผัะน downtime: 0.1% = 43.2 ะผะธะฝััั               |
    |                                                           |
    |  ะัะปะธ ะทะฐ ะผะตััั ะฑัะปะพ 20 ะผะธะฝัั downtime:                   |
    |  - ะััะฐะปะพัั: 23.2 ะผะธะฝััั error budget                    |
    |  - ะะพะถะฝะพ ะดะตะปะฐัั ัะธัะบะพะฒะฐะฝะฝัะต ะดะตะฟะปะพะธ!                      |
    |                                                           |
    |  ะัะปะธ ะทะฐ ะผะตััั ะฑัะปะพ 50 ะผะธะฝัั downtime:                   |
    |  - Error budget ะธััะตัะฟะฐะฝ!                                 |
    |  - ะกัะพะฟ ะดะตะฟะปะพะธ, ัะพะบัั ะฝะฐ ััะฐะฑะธะปัะฝะพััั                    |
    +----------------------------------------------------------+
```

---

### ะะพะดะตะปั 4: Observability Maturity Model

```
Level 0: ะกะะะะะขะ
+------------------------------------------------------------------+
| "ะฃะทะฝะฐัะผ ะพ ะฟัะพะฑะปะตะผะฐั ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน"                            |
| โข ะะตั ะผะตััะธะบ                                                      |
| โข ะะพะณะธ ะฝะฐ ัะตัะฒะตัะต (ะตัะปะธ ะฟะพะฒะตะทัั)                                 |
| โข MTTR: ัะฐัั-ะดะฝะธ                                                  |
+------------------------------------------------------------------+
        โ
Level 1: ะะะะะะซะ ะะะะะขะะะะะ
+------------------------------------------------------------------+
| "ะะฝะฐะตะผ ััะพ ัะปะพะผะฐะปะพัั, ะฝะพ ะฝะต ะฟะพัะตะผั"                              |
| โข Infrastructure metrics (CPU, memory, disk)                     |
| โข Basic alerting                                                 |
| โข MTTR: 30-60 ะผะธะฝัั                                              |
+------------------------------------------------------------------+
        โ
Level 2: APPLICATION METRICS
+------------------------------------------------------------------+
| "ะะฝะฐะตะผ ะบะฐะบะพะน ัะตัะฒะธั ัะปะพะผะฐะปัั"                                    |
| โข Golden Signals ะดะปั ะบะฐะถะดะพะณะพ ัะตัะฒะธัะฐ                             |
| โข ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝัะต ะปะพะณะธ                                          |
| โข MTTR: 15-30 ะผะธะฝัั                                              |
+------------------------------------------------------------------+
        โ
Level 3: DISTRIBUTED TRACING
+------------------------------------------------------------------+
| "ะะฝะฐะตะผ ะณะดะต ะธะผะตะฝะฝะพ ะฒ ัะตะฟะพัะบะต ะฟัะพะฑะปะตะผะฐ"                            |
| โข End-to-end tracing                                             |
| โข ะะพััะตะปััะธั metrics โ logs โ traces                             |
| โข MTTR: 5-15 ะผะธะฝัั                                               |
+------------------------------------------------------------------+
        โ
Level 4: PROACTIVE OBSERVABILITY
+------------------------------------------------------------------+
| "ะะฐัะพะดะธะผ ะฟัะพะฑะปะตะผั ะะ ัะพะณะพ ะบะฐะบ ะพะฝะธ ะฒะปะธััั ะฝะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน"       |
| โข Anomaly detection                                               |
| โข SLO-based alerting                                              |
| โข Chaos engineering                                               |
| โข MTTR: ะผะธะฝััั (ะธะปะธ ะฟัะพะฑะปะตะผะฐ ะฟัะตะดะพัะฒัะฐัะตะฝะฐ)                      |
+------------------------------------------------------------------+
```

---

### ะะพะดะตะปั 5: Observability ะบะฐะบ ะธััะปะตะดะพะฒะฐะฝะธะต unknown unknowns

```
+------------------------------------------------------------------+
|                    ะะฐััะธัะฐ ะทะฝะฐะฝะธั ะฟัะพะฑะปะตะผ                        |
+------------------------------------------------------------------+
|                                                                   |
|              โ     ะะะะะกะขะะ          ะะะะะะะกะขะะ                  |
|              โ     (ััะพ ะธัะบะฐัั)      (ััะพ ะธัะบะฐัั)                |
|   โโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ         |
|   ะะะะะกะขะะ   โ  Known Knowns         Unknown Knowns              |
|   (ััะพ       โ  "CPU > 90% = ะฟะปะพัะพ"  "ะััั ะผะตััะธะบะฐ,              |
|   ะฟัะพะธััะพะดะธั)โ                        ะฝะพ ะฝะต ัะผะพััะธะผ"             |
|              โ  โ ะะะะะขะะะะะ          โ DASHBOARD                |
|   โโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ         |
|   ะะะะะะะกะขะะ โ  Known Unknowns       Unknown Unknowns            |
|   (ััะพ       โ  "ะะฝะฐะตะผ ััะพ ะผะพะถะตั     "ะะต ะทะฝะฐะตะผ ััะพ              |
|   ะฟัะพะธััะพะดะธั)โ   ัะปะพะผะฐัััั DNS"      ะผะพะถะตั ัะปะพะผะฐัััั"           |
|              โ                                                    |
|              โ  โ ALERTING           โ OBSERVABILITY             |
|                                                                   |
+------------------------------------------------------------------+

Monitoring ะพัะฒะตัะฐะตั ะฝะฐ: "ะะฐะฑะพัะฐะตั ะปะธ X?" (known knowns)
Observability ะพัะฒะตัะฐะตั ะฝะฐ: "ะงัะพ ะฟะพัะปะพ ะฝะต ัะฐะบ?" (unknown unknowns)

ะัะธะผะตั unknown unknown:
- Memory leak ัะพะปัะบะพ ะฟัะธ ะพะฟัะตะดะตะปัะฝะฝะพะผ ะฟะฐััะตัะฝะต ะทะฐะฟัะพัะพะฒ
- Race condition ะฟัะธ ะฒััะพะบะพะน ะฝะฐะณััะทะบะต
- Cascade failure ะธะท-ะทะฐ timeout ะฒ ะพะดะฝะพะผ ัะตัะฒะธัะต

ะงัะพะฑั ะฝะฐะนัะธ unknown unknowns ะฝัะถะฝั:
1. High-cardinality ะดะฐะฝะฝัะต (ะฝะต ัะพะปัะบะพ ะฐะณัะตะณะฐัั)
2. ะะพะทะผะพะถะฝะพััั ad-hoc ะทะฐะฟัะพัะพะฒ (ะฝะต ัะพะปัะบะพ ะฟัะตะดะทะฐะดะฐะฝะฝัะต dashboard)
3. ะะพััะตะปััะธั ะผะตะถะดั ัะฐะทะฝัะผะธ ัะธะณะฝะฐะปะฐะผะธ
4. Context propagation (trace_id ะฒะตะทะดะต)
```

---

## ะะพัะตะผั ััะพ ะฒะฐะถะฝะพ

**Observability** โ ััะพ ัะฟะพัะพะฑะฝะพััั ะฟะพะฝััั ะฒะฝัััะตะฝะฝะตะต ัะพััะพัะฝะธะต ัะธััะตะผั ะฟะพ ะตั ะฒะฝะตัะฝะธะผ ัะธะณะฝะฐะปะฐะผ. ะะปั ัะตัะตะน ััะพ ะพะทะฝะฐัะฐะตั ะฒะพะทะผะพะถะฝะพััั ะพัะฒะตัะธัั ะฝะฐ ะฒะพะฟัะพั: **"ะะพัะตะผั ะทะฐะฟัะพั ะฑัะป ะผะตะดะปะตะฝะฝัะผ?"** ะฑะตะท ัะณะฐะดัะฒะฐะฝะธั.

### Three Pillars of Observability

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    Observability                            โ
โ                                                             โ
โ  โโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโ        โ
โ  โ   Metrics   โ   โ    Logs     โ   โ   Traces    โ        โ
โ  โ (ัะธัะปะฐ, ััะดั)โ   โ (ัะพะฑััะธั)  โ   โ (ะฟััั req)  โ        โ
โ  โ             โ   โ             โ   โ             โ        โ
โ  โ Prometheus  โ   โ   Loki      โ   โ   Jaeger    โ        โ
โ  โ Grafana     โ   โ   ELK       โ   โ   Tempo     โ        โ
โ  โโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

| Pillar | ะัะฒะตัะฐะตั ะฝะฐ ะฒะพะฟัะพั | ะะฝััััะผะตะฝัั |
|--------|-------------------|-------------|
| **Metrics** | "ะงัะพ ะฟัะพะธััะพะดะธั?" (ะฐะณัะตะณะธัะพะฒะฐะฝะพ) | Prometheus, Grafana |
| **Logs** | "ะงัะพ ะบะพะฝะบัะตัะฝะพ ะฟัะพะธะทะพัะปะพ?" | Loki, ELK, Fluentd |
| **Traces** | "ะะฐะบ ะทะฐะฟัะพั ะฟัะพััะป ัะตัะตะท ัะธััะตะผั?" | Jaeger, Tempo, Zipkin |

### ะัะพะฑะปะตะผั ะฑะตะท observability

- **MTTR ะฒััะต** โ ัะณะฐะดัะฒะฐะตัั, ะฐ ะฝะต ะดะธะฐะณะฝะพััะธััะตัั
- **Blind spots** โ ะฝะต ะฒะธะดะธัั, ะณะดะต ัะตััะตััั ะฒัะตะผั
- **Reactive** โ ัะทะฝะฐััั ะพ ะฟัะพะฑะปะตะผะฐั ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

---

## Metrics ั Prometheus

### ะะพัะตะผั Prometheus โ ััะฐะฝะดะฐัั

> **75% ะพัะณะฐะฝะธะทะฐัะธะน** ะธัะฟะพะปัะทััั Prometheus ะฒ production (Grafana Survey 2024)

- Pull-based ะผะพะดะตะปั โ Prometheus ัะฐะผ ัะพะฑะธัะฐะตั ะผะตััะธะบะธ
- PromQL โ ะผะพัะฝัะน ัะทัะบ ะทะฐะฟัะพัะพะฒ
- Multi-dimensional โ labels ะดะปั ัะธะปัััะฐัะธะธ
- Integrations โ ัััััะธ exporters

### ะะปััะตะฒัะต ัะตัะตะฒัะต ะผะตััะธะบะธ

```yaml
# ะะตััะธะบะธ ะพั node_exporter
node_network_receive_bytes_total     # ะัะธะฝัััะต ะฑะฐะนัั
node_network_transmit_bytes_total    # ะัะฟัะฐะฒะปะตะฝะฝัะต ะฑะฐะนัั
node_network_receive_packets_total   # ะัะธะฝัััะต ะฟะฐะบะตัั
node_network_transmit_drop_total     # Dropped ะฟัะธ ะพัะฟัะฐะฒะบะต
node_network_receive_errs_total      # ะัะธะฑะบะธ ะฟัะธัะผะฐ

# ะะตััะธะบะธ ะพั kube-state-metrics (K8s)
kube_pod_container_status_restarts_total  # ะะตััะฐััั (ัะตัะตะฒัะต ะฟัะพะฑะปะตะผั?)
```

### PromQL ะฟัะธะผะตัั

```promql
# Bandwidth per interface (bytes/sec)
rate(node_network_receive_bytes_total[5m])

# Packet loss rate
rate(node_network_transmit_drop_total[5m]) /
rate(node_network_transmit_packets_total[5m]) * 100

# HTTP latency P99
histogram_quantile(0.99,
  rate(http_request_duration_seconds_bucket[5m])
)

# Requests per second by service
sum by (service) (
  rate(http_requests_total[1m])
)
```

### SNMP Exporter ะดะปั ัะตัะตะฒะพะณะพ ะพะฑะพััะดะพะฒะฐะฝะธั

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'snmp'
    static_configs:
      - targets:
          - 192.168.1.1  # Router
          - 192.168.1.2  # Switch
    metrics_path: /snmp
    params:
      module: [if_mib]
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: snmp-exporter:9116
```

### Blackbox Exporter โ ะฟัะพะฒะตัะบะฐ connectivity

```yaml
modules:
  http_2xx:
    prober: http
    http:
      preferred_ip_protocol: "ip4"
  tcp_connect:
    prober: tcp
  icmp:
    prober: icmp
```

```yaml
# prometheus.yml
- job_name: 'blackbox'
  metrics_path: /probe
  params:
    module: [http_2xx]
  static_configs:
    - targets:
        - https://api.example.com
        - https://website.example.com
  relabel_configs:
    - source_labels: [__address__]
      target_label: __param_target
    - target_label: __address__
      replacement: blackbox-exporter:9115
```

---

## Distributed Tracing

### ะัะพะฑะปะตะผะฐ, ะบะพัะพััั ัะตัะฐะตั ััะตะนัะธะฝะณ

**ะะพะณะธ ะฟะพะบะฐะทัะฒะฐัั "ััะพ ัะปััะธะปะพัั", ะฝะพ ะฝะต "ะบะฐะบ ัะฒัะทะฐะฝะพ".** ะ ะผะพะฝะพะปะธัะต ะทะฐะฟัะพั ะฟัะพัะพะดะธั ัะตัะตะท ะพะดะธะฝ ะฟัะพัะตัั โ stack trace ะฟะพะบะฐะทัะฒะฐะตั ะฒะตัั ะฟััั. ะ ะผะธะบัะพัะตัะฒะธัะฐั ะทะฐะฟัะพั ะฟัะพัะพะดะธั ัะตัะตะท ะดะตัััะบะธ ะฟัะพัะตััะพะฒ ะฝะฐ ัะฐะทะฝัั ะผะฐัะธะฝะฐั. ะะฐะถะดัะน ัะตัะฒะธั ะปะพะณะธััะตั ัะฒะพั ัะฐััั, ะฝะพ ะบะฐะบ ัะพะฑัะฐัั ัะตะปัั ะบะฐััะธะฝั?

**ะะตะท ััะตะนัะธะฝะณะฐ ะดะธะฐะณะฝะพััะธะบะฐ ะฒัะณะปัะดะธั ัะฐะบ:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะถะฐะปัะตััั ะฝะฐ ะผะตะดะปะตะฝะฝัะน checkout
2. ะกะผะพััะธะผ ะปะพะณะธ API gateway โ ะฒัั ะพะบ
3. ะกะผะพััะธะผ ะปะพะณะธ payment service โ ัะพะถะต ะพะบ
4. ะะพััะฐัะธะปะธ ัะฐั, ะฒัััะฝะธะปะธ ััะพ ะฟัะพะฑะปะตะผะฐ ะฒ inventory service

**ะก ััะตะนัะธะฝะณะพะผ:**
1. ะะฐัะพะดะธะผ trace ะฟะพ request_id
2. ะะธะดะธะผ timeline: API (10ms) โ Auth (5ms) โ Inventory (890ms) โ Payment (15ms)
3. ะกัะฐะทั ะฟะพะฝััะฝะพ ะณะดะต bottleneck

### ะะฐัะตะผ ะฝัะถะตะฝ ััะตะนัะธะฝะณ

ะ ะผะธะบัะพัะตัะฒะธัะฐั ะพะดะธะฝ ะทะฐะฟัะพั ะฟัะพัะพะดะธั ัะตัะตะท **ะดะตัััะบะธ ัะตัะฒะธัะพะฒ**. ะะตะท ััะตะนัะธะฝะณะฐ ะฝะตะฒะพะทะผะพะถะฝะพ ะฟะพะฝััั:
- ะะดะต ัะตััะตััั ะฒัะตะผั?
- ะะฐะบะพะน ัะตัะฒะธั ะฒัะทะฒะฐะป ะพัะธะฑะบั?
- ะะฐะบ ัะฒัะทะฐะฝั ัะพะฑััะธั?

```
User Request โ API Gateway โ Auth Service โ User Service โ DB
                    โ
              Product Service โ Inventory โ Cache
                    โ
              Order Service โ Payment API (external)
```

### ะะพะฝัะตะฟัะธะธ

| ะขะตัะผะธะฝ | ะะฟะธัะฐะฝะธะต |
|--------|----------|
| **Trace** | ะััั ะพะดะฝะพะณะพ ะทะฐะฟัะพัะฐ ัะตัะตะท ะฒัั ัะธััะตะผั |
| **Span** | ะะดะฝะฐ ะพะฟะตัะฐัะธั ะฒ ัะฐะผะบะฐั trace |
| **Context Propagation** | ะะตัะตะดะฐัะฐ trace ID ะผะตะถะดั ัะตัะฒะธัะฐะผะธ |
| **Sampling** | ะกะฑะพั ัะพะปัะบะพ ัะฐััะธ traces (ัะบะพะฝะพะผะธั) |

### OpenTelemetry

> OpenTelemetry โ **#2 ะฟะพ ะฐะบัะธะฒะฝะพััะธ CNCF ะฟัะพะตะบั** (ะฟะพัะปะต Kubernetes)

OpenTelemetry ะพะฑัะตะดะธะฝัะตั:
- Instrumentation SDK (ะฐะฒัะพ + manual)
- Collector (ัะฑะพั ะธ ะฟะตัะตััะปะบะฐ)
- Semantic Conventions (ััะฐะฝะดะฐััั ะธะผะตะฝะพะฒะฐะฝะธั)

```python
# Python instrumentation
from opentelemetry import trace
from opentelemetry.sdk.trace import TracerProvider
from opentelemetry.sdk.trace.export import BatchSpanProcessor
from opentelemetry.exporter.otlp.proto.grpc.trace_exporter import OTLPSpanExporter

# Setup
trace.set_tracer_provider(TracerProvider())
tracer = trace.get_tracer(__name__)

# Auto-instrumentation (HTTP, DB, etc.)
from opentelemetry.instrumentation.requests import RequestsInstrumentor
RequestsInstrumentor().instrument()

# Manual span
with tracer.start_as_current_span("process_payment") as span:
    span.set_attribute("payment.amount", 99.99)
    span.set_attribute("payment.currency", "USD")
    # ... business logic
```

### Jaeger

```yaml
# docker-compose.yml ะดะปั Jaeger
services:
  jaeger:
    image: jaegertracing/all-in-one:latest
    ports:
      - "16686:16686"  # UI
      - "4317:4317"    # OTLP gRPC
      - "4318:4318"    # OTLP HTTP
    environment:
      - COLLECTOR_OTLP_ENABLED=true
```

**Jaeger UI ะฟะพะบะฐะทัะฒะฐะตั:**
- Timeline ะบะฐะถะดะพะณะพ span
- Service dependency map
- Latency breakdown
- Error traces

### Sampling ัััะฐัะตะณะธะธ

| ะกััะฐัะตะณะธั | ะะฟะธัะฐะฝะธะต | ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั |
|-----------|----------|-------------------|
| **Always** | 100% traces | Dev/staging |
| **Probabilistic** | % ะพั ััะฐัะธะบะฐ | High-volume production |
| **Rate Limiting** | N traces/sec | ะะพะฝััะพะปั ััะพะธะผะพััะธ |
| **Tail-based** | ะะตัะตะฝะธะต ะฟะพัะปะต trace | ะขะพะปัะบะพ ะพัะธะฑะบะธ/slow requests |

```yaml
# OTel Collector config
processors:
  probabilistic_sampler:
    sampling_percentage: 10  # 10% traces
```

---

## Grafana Dashboards

### ะกะตัะตะฒะพะน Dashboard

ะะปััะตะฒัะต ะฟะฐะฝะตะปะธ:

1. **Bandwidth** โ `rate(node_network_*_bytes_total[5m])`
2. **Packets/sec** โ `rate(node_network_*_packets_total[5m])`
3. **Errors** โ `rate(node_network_*_errs_total[5m])`
4. **Latency P50/P95/P99** โ `histogram_quantile(...)`
5. **Availability** โ `up{job="blackbox"}` + probe_success

### ะัะธะผะตั Dashboard JSON (snippet)

```json
{
  "panels": [
    {
      "title": "Network Throughput",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(node_network_receive_bytes_total[5m])) by (device)",
          "legendFormat": "{{device}} RX"
        },
        {
          "expr": "sum(rate(node_network_transmit_bytes_total[5m])) by (device)",
          "legendFormat": "{{device}} TX"
        }
      ]
    }
  ]
}
```

### RED Metrics ะดะปั Services

| Metric | ะงัะพ ะฟะพะบะฐะทัะฒะฐะตั | PromQL |
|--------|---------------|--------|
| **R**ate | Requests/sec | `rate(http_requests_total[5m])` |
| **E**rrors | Error rate | `rate(http_requests_total{status=~"5.."}[5m])` |
| **D**uration | Latency | `histogram_quantile(0.99, rate(http_request_duration_seconds_bucket[5m]))` |

### USE Metrics ะดะปั Infrastructure

| Metric | ะงัะพ ะฟะพะบะฐะทัะฒะฐะตั | ะัะธะผะตั |
|--------|---------------|--------|
| **U**tilization | % ะธัะฟะพะปัะทะพะฒะฐะฝะธั | CPU, memory, bandwidth |
| **S**aturation | ะัะตัะตะดั/backlog | TCP retransmits, queue depth |
| **E**rrors | ะัะธะฑะบะธ | Packet drops, CRC errors |

---

## Alerting Best Practices

### ะัะฐะฒะธะปะฐ alerting

1. **Actionable** โ ะบะฐะถะดัะน alert ััะตะฑัะตั ะดะตะนััะฒะธั
2. **Duration-based** โ ะฝะต ัะตะฐะณะธััะน ะฝะฐ ัะฟะฐะนะบะธ
3. **Prioritized** โ critical vs warning
4. **Documented** โ runbook ะดะปั ะบะฐะถะดะพะณะพ alert

### ะัะธะผะตัั alert rules

```yaml
# prometheus/rules.yml
groups:
  - name: network
    rules:
      # High packet loss
      - alert: HighPacketLoss
        expr: |
          rate(node_network_transmit_drop_total[5m]) /
          rate(node_network_transmit_packets_total[5m]) > 0.01
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High packet loss on {{ $labels.device }}"
          runbook_url: "https://wiki/runbooks/packet-loss"

      # Service down
      - alert: ServiceDown
        expr: probe_success == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "{{ $labels.instance }} is down"

      # High latency
      - alert: HighLatencyP99
        expr: |
          histogram_quantile(0.99,
            rate(http_request_duration_seconds_bucket[5m])
          ) > 0.5
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "P99 latency > 500ms for {{ $labels.service }}"
```

### ะะทะฑะตะถะฐะฝะธะต Alert Fatigue

| ะัะพะฑะปะตะผะฐ | ะะตัะตะฝะธะต |
|----------|---------|
| ะกะปะธัะบะพะผ ะผะฝะพะณะพ alerts | ะฃะฒะตะปะธัั duration (for: 5m โ 10m) |
| ะะพะถะฝัะต ััะฐะฑะฐััะฒะฐะฝะธั | ะะฐัััะพะน thresholds ะฟะพ baseline |
| ะะพะฒัะพััััะธะตัั alerts | Alert correlation/grouping |
| ะะตััะฝะพ ััะพ ะดะตะปะฐัั | ะะพะฑะฐะฒั runbook_url |

### Escalation

```
Level 1: Slack notification (warning)
    โ 5 min no ack
Level 2: PagerDuty (on-call)
    โ 15 min no ack
Level 3: Phone call to team lead
```

---

## eBPF ะธ Cilium Hubble

### ะะณัะฐะฝะธัะตะฝะธั ััะฐะดะธัะธะพะฝะฝะพะณะพ ะผะพะฝะธัะพัะธะฝะณะฐ

**ะขัะฐะดะธัะธะพะฝะฝัะน ะฟะพะดัะพะด ะธะผะตะตั blind spots:**
- **Application metrics** ะฟะพะบะฐะทัะฒะฐัั ััะพ ะฒะธะดะธั ะฟัะธะปะพะถะตะฝะธะต, ะฝะพ ะฝะต ัะตัั
- **Sidecar proxies** (Istio/Envoy) ะดะพะฑะฐะฒะปััั latency ะธ complexity
- **Packet capture** ััะตะฑัะตั root, ัะพะทะดะฐัั overhead, ัะปะพะถะฝะพ ะผะฐัััะฐะฑะธัะพะฒะฐัั
- **SNMP/NetFlow** ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะดะปั ัะตัะตะฒะพะณะพ ะพะฑะพััะดะพะฒะฐะฝะธั, ะฝะต ะดะปั ัะพััะฐ

**eBPF ะผะตะฝัะตั ะฟัะฐะฒะธะปะฐ ะธะณัั:** ะบะพะด ะฒัะฟะพะปะฝัะตััั ะฟััะผะพ ะฒ ัะดัะต Linux, ะฒะธะดะธั ะบะฐะถะดัะน ะฟะฐะบะตั ะฑะตะท ะบะพะฟะธัะพะฒะฐะฝะธั ะฒ user space, ะฑะตะท sidecar, ะฑะตะท overhead.

### ะะพัะตะผั eBPF ัะตะฒะพะปััะธะพะฝะตะฝ

**eBPF (extended Berkeley Packet Filter)** โ ัะตัะฝะพะปะพะณะธั ะฒัะฟะพะปะฝะตะฝะธั ะบะพะดะฐ ะฒ ัะดัะต Linux ะฑะตะท ะฟะตัะตะทะฐะณััะทะบะธ.

```
Traditional:
User space โ Kernel โ Network stack โ Packet

eBPF:
User space โ Kernel [eBPF programs] โ Direct packet processing
                     โ
              Metrics/Events to user space
```

**ะัะตะธะผััะตััะฒะฐ:**
- ะะธะฝะธะผะฐะปัะฝัะน overhead
- ะะปัะฑะพะบะฐั ะฒะธะดะธะผะพััั (L3-L7)
- Real-time ะฑะตะท sampling
- Kernel-level security

### Cilium Hubble

> Hubble = Network observability ะดะปั Kubernetes ะฝะฐ ะฑะฐะทะต eBPF

**ะะพะผะฟะพะฝะตะฝัั:**
- **Hubble Server** โ ะฐะณะตะฝั ะฝะฐ ะบะฐะถะดะพะน ะฝะพะดะต (ัะฐััั Cilium)
- **Hubble Relay** โ ะฐะณัะตะณะฐัะพั ะดะปั ะฒัะตะณะพ ะบะปะฐััะตัะฐ
- **Hubble UI** โ ะฒะตะฑ-ะธะฝัะตััะตะนั
- **Hubble CLI** โ ะบะพะผะฐะฝะดะฝะฐั ัััะพะบะฐ

### ะฃััะฐะฝะพะฒะบะฐ

```bash
# ะก Cilium
cilium hubble enable --ui

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
cilium hubble status

# Port-forward UI
cilium hubble ui
```

### Hubble CLI

```bash
# ะัะต flows
hubble observe

# Flows ะพั ะบะพะฝะบัะตัะฝะพะณะพ pod
hubble observe --from-pod default/frontend

# Flows ะบ ะบะพะฝะบัะตัะฝะพะผั pod
hubble observe --to-pod default/backend

# ะขะพะปัะบะพ drops
hubble observe --verdict DROPPED

# ะก DNS
hubble observe --protocol DNS

# HTTP flows
hubble observe --protocol HTTP --http-status 500
```

### Hubble Metrics

```yaml
# Cilium ConfigMap
hubble:
  metrics:
    enabled:
      - dns
      - drop
      - tcp
      - flow
      - httpV2
      - icmp
      - port-distribution
```

ะะตััะธะบะธ ัะบัะฟะพััะธัััััั ะฒ Prometheus:

```promql
# DNS latency
hubble_dns_response_time_seconds_bucket

# HTTP requests by status
hubble_http_requests_total{status="200"}

# Dropped packets by reason
hubble_drop_total{reason="POLICY_DENIED"}
```

### Service Map

Hubble UI ะฐะฒัะพะผะฐัะธัะตัะบะธ ัััะพะธั **service dependency map**:

```
โโโโโโโโโโโโ       โโโโโโโโโโโโ       โโโโโโโโโโโโ
โ frontend โโโโโโโโบโ backend  โโโโโโโโบโ   db     โ
โโโโโโโโโโโโ       โโโโโโโโโโโโ       โโโโโโโโโโโโ
     โ                                     โฒ
     โ             โโโโโโโโโโโโ            โ
     โโโโโโโโโโโโโโบโ  cache   โโโโโโโโโโโโโโ
                   โโโโโโโโโโโโ
```

---

## Logs ะธ Network Visibility

### ะงัะพ ะปะพะณะธัะพะฒะฐัั

| ะััะพัะฝะธะบ | ะะพะปะตะทะฝัะต ะดะฐะฝะฝัะต |
|----------|----------------|
| **Firewall** | Blocked connections, source IP |
| **Load Balancer** | Request latency, backend health |
| **DNS** | Query logs, resolution time |
| **Application** | Request ID, user ID, latency |

### Structured Logging

```json
{
  "timestamp": "2024-12-26T10:30:00Z",
  "level": "info",
  "service": "api-gateway",
  "trace_id": "abc123",
  "span_id": "def456",
  "method": "POST",
  "path": "/api/orders",
  "status": 201,
  "latency_ms": 45,
  "client_ip": "10.0.0.5",
  "user_id": "user-789"
}
```

### Loki ะดะปั ะปะพะณะพะฒ

```yaml
# Loki query (LogQL)
{namespace="production", app="api"}
  | json
  | latency_ms > 500
  | line_format "{{.method}} {{.path}} - {{.latency_ms}}ms"
```

### ะะพััะตะปััะธั Logs โ Traces

ะะพะฑะฐะฒะปัะน `trace_id` ะฒ ะปะพะณะธ:

```python
import logging
from opentelemetry import trace

logger = logging.getLogger(__name__)

def handler(request):
    span = trace.get_current_span()
    trace_id = span.get_span_context().trace_id

    logger.info(
        "Processing request",
        extra={"trace_id": format(trace_id, '032x')}
    )
```

ะ Grafana: ะบะปะธะบ ะฝะฐ ะปะพะณ โ ะฟะตัะตัะพะด ะบ trace ะฒ Jaeger.

---

## ะะพะดะฒะพะดะฝัะต ะบะฐะผะฝะธ

### 1. Cardinality explosion

**ะัะธะฑะบะฐ:** Label ั ะฒััะพะบะพะน ะบะฐัะดะธะฝะฐะปัะฝะพัััั (user_id, request_id)

```promql
# ะะปะพัะพ โ ะผะธะปะปะธะพะฝั time series!
http_requests_total{user_id="..."}
```

**ะะตัะตะฝะธะต:** ะัะฟะพะปัะทัะน labels ัะพะปัะบะพ ะดะปั ะณััะฟะฟะธัะพะฒะบะธ (service, method, status)

### 2. ะกะปะธัะบะพะผ ะผะฝะพะณะพ alerts

**ะัะธะฑะบะฐ:** Alert ะฝะฐ ะบะฐะถะดัั ะผะตััะธะบั ะฑะตะท duration

**ะะตัะตะฝะธะต:**
- `for: 5m` ะผะธะฝะธะผัะผ
- ะััะฟะฟะธัะพะฒะบะฐ ัะฒัะทะฐะฝะฝัั alerts
- Runbook ะดะปั ะบะฐะถะดะพะณะพ

### 3. Sampling ะฟะพัะตััะป ะฒะฐะถะฝัะต traces

**ะัะธะฑะบะฐ:** Probabilistic sampling 1% โ ะพัะธะฑะบะธ ัะตัััััั

**ะะตัะตะฝะธะต:** Tail-based sampling โ ัะฝะฐัะฐะปะฐ ัะพะฑะธัะฐะตะผ, ะฟะพัะพะผ ัะตัะฐะตะผ

### 4. ะะตั context propagation

**ะัะธะฑะบะฐ:** Trace ะพะฑััะฒะฐะตััั ะฝะฐ ะณัะฐะฝะธัะต ัะตัะฒะธัะพะฒ

**ะะตัะตะฝะธะต:**
```python
# ะัะพะฑัะฐััะฒะฐะน headers
headers = {
    "traceparent": span.get_span_context().to_header()
}
requests.get(url, headers=headers)
```

### 5. Metrics ะฑะตะท baseline

**ะัะธะฑะบะฐ:** Alert "latency > 100ms" ะฑะตะท ะฟะพะฝะธะผะฐะฝะธั ะฝะพัะผั

**ะะตัะตะฝะธะต:**
1. ะกะพะฑะธัะฐะน ะดะฐะฝะฝัะต 2 ะฝะตะดะตะปะธ
2. ะะฟัะตะดะตะปะธ percentiles
3. Alert = ะทะฝะฐัะธัะตะปัะฝะพะต ะพัะบะปะพะฝะตะฝะธะต ะพั baseline

### 6. Hubble ัะพะปัะบะพ ะฒ Cilium

**ะัะธะฑะบะฐ:** ะะถะธะดะฐะฝะธะต Hubble ะฑะตะท ัััะฐะฝะพะฒะบะธ Cilium CNI

**ะะตัะตะฝะธะต:** Hubble ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ั Cilium. ะะปััะตัะฝะฐัะธะฒั: Pixie, Falco

---

## ะงะตะบ-ะปะธัั

### Metrics

- [ ] Prometheus ัะพะฑะธัะฐะตั ะผะตััะธะบะธ ะฒัะตั ัะตัะฒะธัะพะฒ
- [ ] Node exporter ะฝะฐ ะบะฐะถะดะพะผ ัะพััะต
- [ ] Blackbox exporter ะดะปั external endpoints
- [ ] Grafana dashboards ะดะปั RED/USE metrics
- [ ] Retention ะฝะฐัััะพะตะฝ (Thanos/Mimir ะดะปั long-term)

### Tracing

- [ ] OpenTelemetry SDK ะธะฝัะตะณัะธัะพะฒะฐะฝ
- [ ] Auto-instrumentation ะดะปั HTTP/gRPC/DB
- [ ] Sampling strategy ะพะฟัะตะดะตะปะตะฝะฐ
- [ ] Jaeger/Tempo ัะฐะทะฒััะฝัั
- [ ] trace_id ะฒ ะปะพะณะฐั

### Alerting

- [ ] Alerts ะธะผะตัั duration (for: Xm)
- [ ] Severity levels (critical/warning/info)
- [ ] Runbook URL ะฒ ะบะฐะถะดะพะผ alert
- [ ] Escalation policy ะฝะฐัััะพะตะฝะฐ
- [ ] Alert fatigue ะผะธะฝะธะผะธะทะธัะพะฒะฐะฝ

### Kubernetes

- [ ] Cilium + Hubble (ะตัะปะธ ะฒะพะทะผะพะถะฝะพ)
- [ ] Network Policy visibility
- [ ] Service map ะฐะบััะฐะปะตะฝ

---

## ะกะฒัะทะฐะฝะฝัะต ะผะฐัะตัะธะฐะปั

- [[network-troubleshooting-advanced]] โ ะะธะฐะณะฝะพััะธะบะฐ ะฟัะพะฑะปะตะผ
- [[network-performance-optimization]] โ Performance tuning
- [[network-latency-optimization]] โ Latency analysis
- [[network-kubernetes-deep-dive]] โ K8s networking + Cilium
- [[network-tools-reference]] โ CLI ะธะฝััััะผะตะฝัั

---

## ะััะพัะฝะธะบะธ

| # | ะััะพัะฝะธะบ | ะขะธะฟ | ะะปััะตะฒะพะน ะฒะบะปะฐะด |
|---|----------|-----|----------------|
| 1 | [Grafana Observability Survey 2024](https://grafana.com/observability-survey/2024/) | Report | Industry trends |
| 2 | [Prometheus SNMP Exporter](https://github.com/prometheus/snmp_exporter) | GitHub | Network device monitoring |
| 3 | [OpenTelemetry Docs](https://opentelemetry.io/docs/) | Docs | Instrumentation guide |
| 4 | [Jaeger Tracing](https://www.jaegertracing.io/) | Docs | Distributed tracing |
| 5 | [Cilium Hubble](https://github.com/cilium/hubble) | GitHub | eBPF observability |
| 6 | [Kentik Alerting Best Practices](https://www.kentik.com/kentipedia/network-monitoring-alerts/) | Blog | Alert management |
| 7 | [CloudRaft Network Monitoring](https://www.cloudraft.io/blog/network-monitoring-with-prometheus) | Blog | Prometheus setup |
| 8 | [Hubble Cheatsheet](https://isovalent.com/blog/post/cilium-hubble-cheat-sheet-observability/) | Blog | Hubble CLI |
| 9 | [Last9 Jaeger + OTel](https://last9.io/blog/how-to-use-jaeger-with-opentelemetry/) | Blog | Integration guide |
| 10 | [Edge Delta Alerting](https://edgedelta.com/company/blog/monitoring-and-alerting-best-practices) | Blog | Alert best practices |
| 11 | [TechTarget Alerting](https://www.techtarget.com/searchitoperations/tip/4-monitoring-and-alerting-best-practices-for-IT-ops) | Blog | IT ops alerting |
| 12 | [Obkio Dashboard Guide](https://obkio.com/blog/network-monitoring-dashboard/) | Blog | Dashboard design |
| 13 | [CloudRaft Hubble](https://www.cloudraft.io/blog/ebpf-based-network-observability-using-cilium-hubble) | Blog | eBPF observability |
| 14 | [Grafana Loki](https://grafana.com/oss/loki/) | Docs | Log aggregation |
| 15 | [ilert Alert Tuning](https://www.ilert.com/blog/6-best-practices-for-tuning-network-monitoring-alerts) | Blog | Alert tuning |

---

*ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต: 2026-01-09 โ ะะพะฑะฐะฒะปะตะฝั ะฟะตะดะฐะณะพะณะธัะตัะบะธะต ัะตะบัะธะธ: 5 ะฐะฝะฐะปะพะณะธะน (observability ะบะฐะบ ะฟัะธะฑะพัะฝะฐั ะฟะฐะฝะตะปั ัะฐะผะพะปััะฐ monitoring vs observability, ััะธ ััะพะปะฟะฐ ะบะฐะบ ััะธ ัะธะฟะฐ ะฒัะฐัะตะน metrics/logs/traces, Prometheus + Grafana ะบะฐะบ ัะฑะพััะธะบ ะฝะพะฒะพััะตะน + ัะตะปะตะบะฐะฝะฐะป, Golden Signals ะบะฐะบ ัะตัััะต ะฟะพะบะฐะทะฐัะตะปั ะทะดะพัะพะฒัั, distributed tracing ะบะฐะบ GPS-ััะตะบ ะฟะพััะปะบะธ), 6 ัะธะฟะธัะฝัั ะพัะธะฑะพะบ ั ะกะะะะขะะ/ะะะจะะะะ (Prometheus + Grafana โ observability, alert fatigue, ัะฑะพั ะฒัะตะณะพ ะฟะพะดััะด, ะผะตััะธะบะธ ะฑะตะท labels, ะฝะตั ะบะพััะตะปััะธะธ ะผะตะถะดั ััะพะปะฟะฐะผะธ, vanity dashboards), 5 ะผะตะฝัะฐะปัะฝัั ะผะพะดะตะปะตะน (ะฒะพะฟัะพั ะพะฟัะตะดะตะปัะตั ะธะฝััััะผะตะฝั, MELT framework, SLIโSLOโSLA pipeline ั error budget, observability maturity model, unknown unknowns matrix)*
