# Шаблон обучающего материала (Deep-Dive)

> **Этот шаблон обязателен для КАЖДОГО материала в cs-fundamentals.**
> Порядок секций фиксирован — не пропускать и не менять местами.

---

## Принципы (Feynman Technique)

1. **Объясни как 5-летнему** — если не можешь, значит сам не понял
2. **Найди пробелы** — где объяснение "магия"? Разбери глубже
3. **Используй аналогии** — связь с реальным миром = понимание
4. **От простого к сложному** — каждый шаг опирается на предыдущий

---

## Обязательные метаданные

```yaml
---
title: "Название темы"
created: YYYY-MM-DD
updated: YYYY-MM-DD
type: deep-dive
status: draft | review | complete
difficulty: beginner | intermediate | advanced | expert
prerequisites:
  - [[материал-1]]
  - [[материал-2]]
teaches:
  - концепция-1
  - концепция-2
unlocks:
  - [[следующий-материал-1]]
  - [[следующий-материал-2]]
tags: [cs-fundamentals, ...]
---
```

---

## Структура материала (ПОРЯДОК ОБЯЗАТЕЛЕН)

### 1. TL;DR (2-3 предложения)

Краткая суть для тех, кто уже знает тему и хочет освежить.

```markdown
> **TL;DR:** [Что это] решает [какую проблему] за [сложность].
> Ключевая идея: [одно предложение].
> Применяется в: [2-3 примера].
```

---

### 2. Зачем это нужно? (Мотивация)

**Цель:** Показать ПРОБЛЕМУ, которую решает концепция.

**Формат:**
```markdown
## Зачем это нужно?

### Представьте ситуацию

[Конкретный сценарий из реальной жизни или разработки]

**Без [концепции]:**
[Что происходит — неэффективно, медленно, невозможно]

**С [концепцией]:**
[Как решается — быстро, элегантно, возможно]

### Проблема в числах

[Конкретные цифры, сравнение]
```

**Пример (Hash Table):**
```markdown
### Представьте ситуацию

Вы библиотекарь с миллионом книг. Посетитель спрашивает:
"Есть ли у вас 'Война и мир'?"

**Без каталога (Hash Table):**
Проверяете КАЖДУЮ полку. 1,000,000 книг × 1 сек = **11 дней**.

**С каталогом:**
Смотрите "Толстой → Полка 47". Время: **5 секунд**.

### Проблема в числах
| Подход | Операций | Время |
|--------|----------|-------|
| Перебор массива | 1,000,000 | 1 сек |
| Hash Table | 1 | 0.000001 сек |

Разница: **в миллион раз быстрее!**
```

---

### 3. Что это такое? (Определение через аналогии)

**Цель:** Объяснить концепцию БЕЗ кода, через понятные образы.

**Формат:**
```markdown
## Что это такое?

### Объяснение для 5-летнего

[Простая аналогия с игрушками/едой/играми]

### Постепенное усложнение

**Уровень 1 (интуиция):**
[Аналогия чуть сложнее]

**Уровень 2 (абстракция):**
[Переход к программированию]

**Уровень 3 (формальное определение):**
[Техническое определение]
```

**Пример (Stack):**
```markdown
### Объяснение для 5-летнего

Представь стопку тарелок на кухне:
- Кладёшь новую тарелку — она сверху
- Берёшь тарелку — берёшь верхнюю
- Нельзя взять нижнюю, не убрав верхние!

Это и есть Stack: **последний пришёл — первый ушёл** (LIFO).

### Постепенное усложнение

**Уровень 1:** Кнопка "Отменить" (Ctrl+Z) — это Stack действий.

**Уровень 2:** Когда вызываешь функцию, она "кладётся" в stack.
Когда завершается — "снимается" сверху.

**Уровень 3:** Stack — линейная структура данных с операциями
push (добавить сверху) и pop (удалить сверху) за O(1).
```

---

### 4. Терминология (только после объяснения!)

**Цель:** Формализовать термины, которые УЖЕ понятны из объяснений выше.

```markdown
## Терминология

| Термин | Что это (простыми словами) | Формальное определение |
|--------|---------------------------|------------------------|
| **[Term]** | [Аналогия/пример] | [Техническое определение] |
```

**ВАЖНО:** Каждый термин должен ССЫЛАТЬСЯ на объяснение выше или на отдельный материал `[[term]]`.

---

### 5. Как это работает? (Визуализация + пошаговый разбор)

**Цель:** Показать механику работы шаг за шагом.

**Формат:**
```markdown
## Как это работает?

### ASCII-визуализация

[Диаграмма структуры данных или алгоритма]

### Пошаговый разбор

**Начальное состояние:**
[Визуализация]

**Шаг 1: [Действие]**
[Что происходит + визуализация]
[Почему именно так]

**Шаг 2: [Действие]**
...

**Финальное состояние:**
[Визуализация + что получили]
```

**Пример (вставка в Hash Table):**
```markdown
### ASCII-визуализация

```
Hash Table (размер 10):
┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
│ 0 │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │ 8 │ 9 │
└───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘
```

### Пошаговый разбор: вставка "apple" → 42

**Шаг 1: Вычисляем хеш**
hash("apple") = 97 + 112 + 112 + 108 + 101 = 530
index = 530 % 10 = 0

**Шаг 2: Вставляем в bucket[0]**
```
┌─────────┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
│apple:42 │   │   │   │   │   │   │   │   │   │
└─────────┴───┴───┴───┴───┴───┴───┴───┴───┴───┘
     0      1   2   3   4   5   6   7   8   9
```
```

---

### 6. Сложность операций

**Формат:**
```markdown
## Сложность операций

| Операция | Лучший | Средний | Худший | Условия худшего |
|----------|--------|---------|--------|-----------------|
| [Op 1]   | O(?)   | O(?)    | O(?)   | [Когда]         |
| [Op 2]   | O(?)   | O(?)    | O(?)   | [Когда]         |

### Почему такая сложность?

**[Операция 1]:**
[Объяснение, почему именно такая сложность]

**[Операция 2]:**
[Объяснение]
```

---

### 7. Код (ТОЛЬКО после полного понимания)

**Принципы:**
- Каждая строка имеет комментарий "ПОЧЕМУ", не "ЧТО"
- Сначала простейшая версия, потом оптимизированная
- Три языка: Kotlin, Java, Python

**Формат:**
```markdown
## Реализация

### Базовая версия (для понимания)

#### Kotlin
```kotlin
// Почему массив: O(1) доступ по индексу
// Почему размер степень 2: быстрый % через &
class SimpleHashTable<K, V>(private val size: Int = 16) {
    // Почему Array<MutableList>: chaining для коллизий
    private val buckets = Array(size) { mutableListOf<Pair<K, V>>() }

    // Почему % size: преобразуем любой хеш в валидный индекс
    private fun getBucketIndex(key: K): Int =
        (key.hashCode() and 0x7FFFFFFF) % size

    // ...
}
```

#### Java
```java
// Та же логика с Java-синтаксисом
```

#### Python
```python
# Та же логика с Python-синтаксисом
```

### Оптимизированная версия

[С объяснением каждой оптимизации]
```

---

### 8. Распространённые ошибки

**Цель:** Предупредить о типичных заблуждениях.

```markdown
## Распространённые ошибки

### Ошибка 1: [Название]

**Неправильно:**
[Код или описание ошибки]

**Почему это неправильно:**
[Объяснение]

**Правильно:**
[Исправленный код/подход]

### Ошибка 2: [Название]
...
```

---

### 9. Когда использовать (и когда НЕ использовать)

```markdown
## Когда использовать

### Используй [концепцию], когда:
- [Условие 1] — потому что [причина]
- [Условие 2] — потому что [причина]

### НЕ используй [концепцию], когда:
- [Условие 1] — лучше использовать [[альтернатива]]
- [Условие 2] — потому что [причина]

### Сравнение с альтернативами

| Критерий | [Это] | [[Альтернатива 1]] | [[Альтернатива 2]] |
|----------|-------|-------------------|-------------------|
| [Критерий 1] | ... | ... | ... |
```

---

### 10. Практические задачи

**Формат:**
```markdown
## Практика

### Вопросы на понимание (без кода)

1. [Вопрос на концепцию]
   <details><summary>Ответ</summary>[Ответ с объяснением]</details>

2. [Вопрос]
   ...

### Задачи для закрепления

| # | Задача | Сложность | Цель обучения | Ссылка |
|---|--------|-----------|---------------|--------|
| 1 | [Название] | Easy | [Что отрабатывает] | [LeetCode](url) |
| 2 | [Название] | Medium | [Что отрабатывает] | [LeetCode](url) |

### Порядок решения

1. **Сначала:** [Задача] — закрепляет [концепция]
2. **Затем:** [Задача] — добавляет [усложнение]
3. **Продвинутый:** [Задача] — комбинирует с [[другая тема]]
```

---

### 11. Связанные темы

```markdown
## Связанные темы

### Prerequisites (изучить ДО этого материала)
- [[тема-1]] — нужно для понимания [чего именно]
- [[тема-2]] — нужно для [чего]

### Эта тема открывает (изучить ПОСЛЕ)
- [[тема-3]] — использует [что из этого материала]
- [[тема-4]] — расширяет [какой аспект]

### Связанные паттерны
- [[паттерн-1]] — применяет [концепцию] для [чего]
```

---

### 12. Источники

```markdown
## Источники

| # | Источник | Тип | Что взято |
|---|----------|-----|-----------|
| 1 | [Название](URL) | Official Doc | [Что именно] |
| 2 | [Название](URL) | Tutorial | [Что именно] |

*Исследование проведено: YYYY-MM-DD*
*Отчёт: [[docs/research/YYYY-MM-DD-topic.md]]*
```

---

## Чеклист качества материала

Перед публикацией проверить:

- [ ] **TL;DR** есть и понятен без контекста
- [ ] **"Зачем это нужно?"** содержит реальную проблему с числами
- [ ] **"Объяснение для 5-летнего"** действительно простое
- [ ] **Визуализация** есть (ASCII или ссылка на картинку)
- [ ] **Пошаговый разбор** показывает каждое изменение состояния
- [ ] **Prerequisites** указаны как `[[ссылки]]`
- [ ] **Unlocks** указаны как `[[ссылки]]`
- [ ] **Код** имеет комментарии "ПОЧЕМУ", не "ЧТО"
- [ ] **Три языка** представлены (Kotlin, Java, Python)
- [ ] **Ошибки** описаны с примерами
- [ ] **Вопросы на понимание** не требуют кода
- [ ] **Задачи** имеют цели обучения
- [ ] **deep-researcher** выполнен ДО написания

---

## Workflow создания материала

```
1. /deep-researcher "[тема] complete guide tutorial"
   ↓
2. Прочитать отчёт, выписать ключевые концепции
   ↓
3. Для КАЖДОЙ концепции придумать аналогию
   ↓
4. Создать ASCII-визуализации
   ↓
5. Написать пошаговые разборы (БЕЗ кода!)
   ↓
6. Только теперь написать код с комментариями
   ↓
7. Добавить ошибки, практику, связи
   ↓
8. Проверить по чеклисту
   ↓
9. Обновить MOC и связанные материалы
```

---

*Последнее обновление: 2026-01-09 — Проверено, соответствует педагогическому стандарту*
