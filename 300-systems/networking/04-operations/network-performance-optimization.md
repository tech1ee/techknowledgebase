---
title: "Network Performance Optimization"
created: 2025-12-26
modified: 2026-02-13
type: tutorial
status: published
level: senior
tags:
  - topic/networking
  - performance
  - tcp-tuning
  - benchmarking
  - type/tutorial
  - level/advanced
related:
  - "[[network-latency-optimization]]"
  - "[[network-transport-layer]]"
  - "[[performance-optimization]]"
prerequisites:
  - "[[network-latency-optimization]]"
  - "[[network-transport-layer]]"
  - "[[network-tcpdump-wireshark]]"
reading_time: 76
difficulty: 7
study_status: not_started
mastery: 0
last_reviewed:
next_review:
---

# Network Performance Optimization

> TCP tuning, benchmarking –∏ —Å–∏—Å—Ç–µ–º–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è production

---

## Prerequisites

| –¢–µ–º–∞ | –ó–∞—á–µ–º –Ω—É–∂–Ω–æ | –ì–¥–µ –∏–∑—É—á–∏—Ç—å |
|------|-------------|-------------|
| **TCP internals** | –ü–æ–Ω–∏–º–∞–Ω–∏–µ congestion control | [[network-transport-layer]] |
| **Linux basics** | sysctl, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —è–¥—Ä–∞ | Linux administration |
| **Debugging** | –ò–∑–º–µ—Ä–µ–Ω–∏–µ baseline | [[network-debugging-basics]] |

### –î–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª

| –£—Ä–æ–≤–µ–Ω—å | –ü–æ–¥—Ö–æ–¥–∏—Ç? | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|--------------|
| **–ù–æ–≤–∏—á–æ–∫** | ‚ùå –†–∞–Ω–æ | –°–Ω–∞—á–∞–ª–∞ –æ—Å–Ω–æ–≤—ã TCP |
| **Intermediate** | ‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ | –ß–∏—Ç–∞–π, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–π —Å–ª–µ–ø–æ |
| **Advanced** | ‚úÖ –î–∞ | –û—Å–Ω–æ–≤–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è |

### –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤

> üí° **Network Optimization** = –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ö–∞–∫ —Ç—é–Ω–∏–Ω–≥ –¥–≤–∏–≥–∞—Ç–µ–ª—è ‚Äî –º–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å, –Ω–æ –ª–µ–≥–∫–æ —Å–ª–æ–º–∞—Ç—å.

| –¢–µ—Ä–º–∏–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ | –ê–Ω–∞–ª–æ–≥–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–∞ |
|--------|----------|---------------------|
| **Throughput** | –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å | **–®–∏—Ä–∏–Ω–∞ —Ç—Ä—É–±—ã** ‚Äî —Å–∫–æ–ª—å–∫–æ –≤–æ–¥—ã –ø—Ä–æ–π–¥—ë—Ç |
| **Latency** | –ó–∞–¥–µ—Ä–∂–∫–∞ | **–í—Ä–µ–º—è –≤ –ø—É—Ç–∏** ‚Äî –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –¥–æ–µ–¥–µ—Ç |
| **Bandwidth** | –°–∫–æ—Ä–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞ | **–õ–∏–º–∏—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ –¥–æ—Ä–æ–≥–µ** |
| **Buffer** | –ë—É—Ñ–µ—Ä –¥–ª—è –¥–∞–Ω–Ω—ã—Ö | **–û—á–µ—Ä–µ–¥—å –Ω–∞ –≤—Ö–æ–¥–µ** ‚Äî –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –∂–¥—É—Ç |
| **Congestion Control** | –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ | **–°–≤–µ—Ç–æ—Ñ–æ—Ä—ã** ‚Äî –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–±–∫–∏ |
| **BBR** | Bottleneck Bandwidth and RTT | **–£–º–Ω—ã–π autopilot** ‚Äî —Å–∞–º –Ω–∞—Ö–æ–¥–∏—Ç –æ–ø—Ç–∏–º—É–º |
| **CUBIC** | –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º Linux | **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–æ–¥–∏—Ç–µ–ª—å** |
| **Window Size** | –°–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª—ë—Ç–µ | **–°–∫–æ–ª—å–∫–æ –º–∞—à–∏–Ω –Ω–∞ –¥–æ—Ä–æ–≥–µ** |
| **sysctl** | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —è–¥—Ä–∞ | **–†—É—á–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è** |
| **iperf3** | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏–∑–º–µ—Ä–µ–Ω–∏—è throughput | **–°–ø–∏–¥–æ–º–µ—Ç—Ä –¥–ª—è —Å–µ—Ç–∏** |

---

## –ß–∞—Å—Ç—å 1: –ò–Ω—Ç—É–∏—Ü–∏—è –±–µ–∑ –∫–æ–¥–∞

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏**: –ü–æ–Ω—è—Ç—å —Å–µ—Ç–µ–≤—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏–∏ ‚Äî –±–µ–∑ –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ sysctl –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –ê–Ω–∞–ª–æ–≥–∏—è 1: –¢—Ä—É–±–∞ —Å –≤–æ–¥–æ–π ‚Äî Bandwidth, Throughput, Latency

```
+------------------------------------------------------------------+
|                    –í–û–î–û–ü–†–û–í–û–î–ù–ê–Ø –¢–†–£–ë–ê                           |
+------------------------------------------------------------------+
|                                                                    |
|   BANDWIDTH = –î–∏–∞–º–µ—Ç—Ä —Ç—Ä—É–±—ã                                       |
|   +---------------------------------------------------------+    |
|   |    ‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã    |    |
|   |    1 Gbps = —à–∏—Ä–æ–∫–∞—è —Ç—Ä—É–±–∞                                |    |
|   +---------------------------------------------------------+    |
|                                                                    |
|   THROUGHPUT = –°–∫–æ–ª—å–∫–æ –≤–æ–¥—ã —Ä–µ–∞–ª—å–Ω–æ —Ç–µ—á—ë—Ç                        |
|   +---------------------------------------------------------+    |
|   |    ‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚óã‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë    |    |
|   |    700 Mbps –∏–∑ 1 Gbps (70% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)               |    |
|   +---------------------------------------------------------+    |
|                                                                    |
|   LATENCY = –î–ª–∏–Ω–∞ —Ç—Ä—É–±—ã (–≤—Ä–µ–º—è –ø—É—Ç–∏)                              |
|   +--------+                                      +--------+      |
|   |–ò—Å—Ç–æ—á–Ω–∏–∫|======================================|–ü–æ–ª—É—á–∞—Ç.|      |
|   +--------+        50ms —Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ             +--------+      |
|                                                                    |
+------------------------------------------------------------------+

–ü–æ—á–µ–º—É throughput < bandwidth?
- –ü–æ—Ç–µ—Ä–∏ –≤ —Ç—Ä—É–±–µ (packet loss)
- –ó–∞—Å–æ—Ä—ã (congestion)
- –ü—Ä–æ—Ç–µ—á–∫–∏ (overhead –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)
- –î–ª–∏–Ω–∞ —Ç—Ä—É–±—ã –≤–ª–∏—è–µ—Ç –Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ (bandwidth-delay product)
```

**–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç:**
- **Bandwidth** = –º–∞–∫—Å–∏–º—É–º (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π)
- **Throughput** = —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å (–∏–∑–º–µ—Ä–µ–Ω–Ω—ã–π)
- **Latency** = –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –æ–¥–Ω–æ–π –∫–∞–ø–ª–∏

---

### –ê–Ω–∞–ª–æ–≥–∏—è 2: TCP –±—É—Ñ–µ—Ä—ã –∫–∞–∫ —Å–∫–ª–∞–¥—ã –≤–¥–æ–ª—å —à–æ—Å—Å–µ

```
+------------------------------------------------------------------+
|                      –®–û–°–°–ï (–°–ï–¢–¨)                                 |
+------------------------------------------------------------------+
|                                                                    |
|   –û–¢–ü–†–ê–í–ò–¢–ï–õ–¨                              –ü–û–õ–£–ß–ê–¢–ï–õ–¨             |
|   +----------+                             +----------+            |
|   | –§–∞–±—Ä–∏–∫–∞  |                             | –ú–∞–≥–∞–∑–∏–Ω  |            |
|   | (App)    |                             | (App)    |            |
|   +----+-----+                             +-----+----+            |
|        |                                         |                 |
|   +----v-----+                             +-----v----+            |
|   |  –°–ö–õ–ê–î   | ====> –ì—Ä—É–∑–æ–≤–∏–∫–∏ ====>       |  –°–ö–õ–ê–î   |            |
|   | wmem     |      (–ø–∞–∫–µ—Ç—ã)               | rmem     |            |
|   | (send    |                             | (receive |            |
|   |  buffer) |                             |  buffer) |            |
|   +----------+                             +----------+            |
|                                                                    |
|   –ï—Å–ª–∏ —Å–∫–ª–∞–¥ –º–∞–ª–µ–Ω—å–∫–∏–π:                                            |
|   - –§–∞–±—Ä–∏–∫–∞ –∂–¥—ë—Ç –ø–æ–∫–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∏ –≤–µ—Ä–Ω—É—Ç—Å—è                          |
|   - –î–æ—Ä–æ–≥–∞ –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–∞                                            |
|   - Throughput –ø–∞–¥–∞–µ—Ç                                             |
|                                                                    |
|   –ï—Å–ª–∏ —Å–∫–ª–∞–¥ –æ–≥—Ä–æ–º–Ω—ã–π:                                            |
|   - –¢–æ–≤–∞—Ä –∑–∞–ª—ë–∂–∏–≤–∞–µ—Ç—Å—è (bufferbloat)                              |
|   - –ó–∞–¥–µ—Ä–∂–∫–∏ —Ä–∞—Å—Ç—É—Ç                                               |
|   - –ü–∞–º—è—Ç—å —Ç—Ä–∞—Ç–∏—Ç—Å—è –≤–ø—É—Å—Ç—É—é                                       |
+------------------------------------------------------------------+

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–∫–ª–∞–¥–∞ = Bandwidth √ó Latency (BDP)
```

**–§–æ—Ä–º—É–ª–∞ BDP:**
```
Bandwidth-Delay Product = Bandwidth √ó RTT

–ü—Ä–∏–º–µ—Ä:
1 Gbps √ó 50ms = 1,000,000,000 √ó 0.050 = 50,000,000 –±–∏—Ç = 6.25 MB

–ù—É–∂–µ–Ω –±—É—Ñ–µ—Ä –º–∏–Ω–∏–º—É–º 6.25 MB —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–∞–Ω–∞–ª!
Default –≤ Linux —á–∞—Å—Ç–æ 4 MB ‚Äî –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è WAN.
```

---

### –ê–Ω–∞–ª–æ–≥–∏—è 3: Congestion Control –∫–∞–∫ —Å—Ç–∏–ª–∏ –≤–æ–∂–¥–µ–Ω–∏—è

```
+------------------------------------------------------------------+
|                    CONGESTION CONTROL                             |
+------------------------------------------------------------------+
|                                                                    |
|   CUBIC (–¥–µ—Ñ–æ–ª—Ç Linux):                                           |
|   "–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π –≤–æ–¥–∏—Ç–µ–ª—å"                                           |
|   +----------------------------------------------------------+   |
|   | ‚Ä¢ –†–∞–∑–≥–æ–Ω—è–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ                                  |   |
|   | ‚Ä¢ –ü—Ä–∏ –î–¢–ü (packet loss) —Ä–µ–∑–∫–æ —Ç–æ—Ä–º–æ–∑–∏—Ç                   |   |
|   | ‚Ä¢ –ü–æ—Ç–æ–º —Å–Ω–æ–≤–∞ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è                       |   |
|   | ‚Ä¢ –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—Å–µ —Ç–∞–∫ –µ–∑–¥—è—Ç                   |   |
|   +----------------------------------------------------------+   |
|                                                                    |
|   BBR (Google):                                                   |
|   "–£–º–Ω—ã–π autopilot —Å GPS"                                         |
|   +----------------------------------------------------------+   |
|   | ‚Ä¢ –ò–∑–º–µ—Ä—è–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å               |   |
|   | ‚Ä¢ –ò–∑–º–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π RTT                               |   |
|   | ‚Ä¢ –ï–¥–µ—Ç –Ω–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏, –Ω–µ –ø–æ packet loss        |   |
|   | ‚Ä¢ –ù–µ —Ç–æ—Ä–º–æ–∑–∏—Ç —Ä–µ–∑–∫–æ –ø—Ä–∏ –æ–¥–∏–Ω–æ—á–Ω–æ–π –ø–æ—Ç–µ—Ä–µ                 |   |
|   | ‚Ä¢ –õ—É—á—à–µ –Ω–∞ lossy —Å–µ—Ç—è—Ö (WiFi, WAN)                       |   |
|   +----------------------------------------------------------+   |
|                                                                    |
|   –°–†–ê–í–ù–ï–ù–ò–ï:                                                      |
|                                                                    |
|   –°—Ü–µ–Ω–∞—Ä–∏–π              CUBIC           BBR                       |
|   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   |
|   Low latency LAN       ‚úÖ –û—Ç–ª–∏—á–Ω–æ       ‚úÖ –û—Ç–ª–∏—á–Ω–æ               |
|   High latency WAN      ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω—ã–π     ‚úÖ –û—Ç–ª–∏—á–Ω–æ               |
|   Lossy network         ‚ùå –¢–æ—Ä–º–æ–∑–∏—Ç      ‚úÖ –£—Å—Ç–æ–π—á–∏–≤              |
|   Shared fairness       ‚úÖ –ß–µ—Å—Ç–Ω—ã–π       ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –∂–∞–¥–Ω—ã–º     |
+------------------------------------------------------------------+
```

**–ö–æ–≥–¥–∞ –∫–∞–∫–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | –ü–æ—á–µ–º—É |
|----------|--------------|--------|
| –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å, < 5ms RTT | CUBIC | Default —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ |
| WAN, 50ms+ RTT | BBR | –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞–Ω–∞–ª |
| –ú–æ–±–∏–ª—å–Ω–∞—è/WiFi —Å–µ—Ç—å | BBR | –£—Å—Ç–æ–π—á–∏–≤ –∫ –ø–æ—Ç–µ—Ä—è–º |
| Shared hosting | CUBIC | –ß–µ—Å—Ç–Ω–µ–µ –∫ —Å–æ—Å–µ–¥—è–º |
| CDN, —Ä–∞–∑–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | BBR | –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ—Ç throughput |

---

### –ê–Ω–∞–ª–æ–≥–∏—è 4: Backlog –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—É

```
+------------------------------------------------------------------+
|                    CONNECTION BACKLOG                             |
+------------------------------------------------------------------+
|                                                                    |
|   –ù–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚Üí +---+---+---+---+---+ ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞            |
|                      |   |   |   |   |   |                        |
|                      +---+---+---+---+---+                        |
|                           SYN Backlog                             |
|                        (somaxconn = 128)                          |
|                                                                    |
|   –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏:                                |
|   +----------------------------------------------------------+   |
|   | –ö–ª–∏–µ–Ω—Ç: "SYN"                                             |   |
|   | –°–µ—Ä–≤–µ—Ä: (–æ—á–µ—Ä–µ–¥—å –ø–æ–ª–Ω–∞—è) ‚Üí DROP –∏–ª–∏ RST                  |   |
|   | –ö–ª–∏–µ–Ω—Ç: "Connection refused" –∏–ª–∏ timeout                  |   |
|   +----------------------------------------------------------+   |
|                                                                    |
|   –°–∏–º–ø—Ç–æ–º—ã –º–∞–ª–µ–Ω—å–∫–æ–≥–æ backlog:                                    |
|   ‚Ä¢ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ connection refused                              |
|   ‚Ä¢ SYN floods –ª–µ–≥–∫–æ —Ä–æ–Ω—è—é—Ç —Å–µ—Ä–≤–µ—Ä                               |
|   ‚Ä¢ –í—Å–ø–ª–µ—Å–∫ —Ç—Ä–∞—Ñ–∏–∫–∞ = –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è                      |
|                                                                    |
|   –†–µ—à–µ–Ω–∏–µ –¥–ª—è high-concurrency —Å–µ—Ä–≤–µ—Ä–∞:                           |
|   +----------------------------------------------------------+   |
|   | sysctl -w net.core.somaxconn=65535                        |   |
|   | sysctl -w net.ipv4.tcp_max_syn_backlog=65535              |   |
|   |                                                           |   |
|   | + –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: listen(sock, 65535)                       |   |
|   +----------------------------------------------------------+   |
+------------------------------------------------------------------+
```

---

### –ê–Ω–∞–ª–æ–≥–∏—è 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–∫ —Ç—é–Ω–∏–Ω–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª—è

```
+------------------------------------------------------------------+
|                    –ü–ò–†–ê–ú–ò–î–ê –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò                           |
+------------------------------------------------------------------+
|                                                                    |
|                           /\                                       |
|                          /  \                                      |
|                         /    \                                     |
|                        / App  \  ‚Üê –ù–∞—á–∏–Ω–∞–π –∑–¥–µ—Å—å!                 |
|                       / Logic  \   ‚Ä¢ –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤              |
|                      /----------\  ‚Ä¢ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ                  |
|                     /  Protocol  \ ‚Ä¢ Connection pooling           |
|                    /    Tuning    \                                |
|                   /----------------\  ‚Üê HTTP/2, keepalive         |
|                  /   OS/Kernel      \  ‚Ä¢ TCP –±—É—Ñ–µ—Ä—ã               |
|                 /    Settings        \ ‚Ä¢ Congestion control       |
|                /----------------------\                            |
|               /     Hardware/Network   \  ‚Üê –î–æ—Ä–æ–≥–æ!               |
|              /      Upgrade             \ ‚Ä¢ –ë–æ–ª—å—à–µ bandwidth      |
|             /----------------------------\ ‚Ä¢ –õ—É—á—à–µ latency        |
|                                                                    |
|   –ü—Ä–∞–≤–∏–ª–æ: –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –°–í–ï–†–•–£ –í–ù–ò–ó!                               |
|   –ù–µ—Ç —Å–º—ã—Å–ª–∞ —Ç—é–Ω–∏—Ç—å TCP –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç 100 –∑–∞–ø—Ä–æ—Å–æ–≤       |
|   –≤–º–µ—Å—Ç–æ 1 batch –∑–∞–ø—Ä–æ—Å–∞.                                         |
|                                                                    |
|   ROI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:                                                |
|   ‚Ä¢ Application: 10x improvement, –±–µ—Å–ø–ª–∞—Ç–Ω–æ                       |
|   ‚Ä¢ Protocol: 2-5x improvement, –±–µ—Å–ø–ª–∞—Ç–Ω–æ                         |
|   ‚Ä¢ OS tuning: 10-50% improvement, –±–µ—Å–ø–ª–∞—Ç–Ω–æ                      |
|   ‚Ä¢ Hardware: 2-10x improvement, $$$$$                            |
+------------------------------------------------------------------+
```

---

## –ß–∞—Å—Ç—å 2: –ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–∂–Ω–æ

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏**: –ò–∑—É—á–∏—Ç—å 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–µ—Ä—à–∞—é—Ç –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–∏.

### –û—à–∏–±–∫–∞ 1: –°–ª–µ–ø–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ sysctl —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

**–°–ò–ú–ü–¢–û–ú:**
```bash
# "–ù–∞—à—ë–ª –Ω–∞ StackOverflow, –¥–æ–±–∞–≤–∏–ª –≤ sysctl.conf"
net.core.rmem_max=268435456
net.core.wmem_max=268435456
net.ipv4.tcp_rmem=4096 87380 268435456
net.ipv4.tcp_wmem=4096 87380 268435456
net.ipv4.tcp_congestion_control=bbr
net.ipv4.tcp_notsent_lowat=16384
net.ipv4.tcp_low_latency=1

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–∞–º—è—Ç—å –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å, —Å–µ—Ä–≤–µ—Ä —É–ø–∞–ª
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è 10Gbps —Å–µ—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ VPS —Å 1 Gbps
- –ë—É—Ñ–µ—Ä—ã –ø–æ 256MB √ó 1000 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π = 256GB RAM
- –ù–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä

**–†–ï–®–ï–ù–ò–ï:**
```bash
# –®–∞–≥ 1: –£–∑–Ω–∞–π —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
sysctl net.core.rmem_max
sysctl net.ipv4.tcp_rmem

# –®–∞–≥ 2: –†–∞—Å—Å—á–∏—Ç–∞–π –Ω—É–∂–Ω—ã–π BDP
# Bandwidth: 1 Gbps, RTT: 50ms
# BDP = 1,000,000,000 * 0.050 / 8 = 6.25 MB

# –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞–∑—É–º–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
net.core.rmem_max=16777216      # 16 MB (—Å –∑–∞–ø–∞—Å–æ–º –æ—Ç BDP)
net.ipv4.tcp_rmem="4096 87380 16777216"

# –®–∞–≥ 4: –ò–∑–º–µ—Ä—å throughput –¥–æ –∏ –ø–æ—Å–ª–µ
iperf3 -c server -t 30
```

**–ü—Ä–∞–≤–∏–ª–æ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–ø–∏—Ä—É–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è. –ö–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —ç—Ç–æ trade-off.

---

### –û—à–∏–±–∫–∞ 2: BBR –≤–µ–∑–¥–µ –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–ò–ú–ü–¢–û–ú:**
```bash
# "BBR –ª—É—á—à–µ, –≤–∫–ª—é—á—É –≤–µ–∑–¥–µ"
sysctl -w net.ipv4.tcp_congestion_control=bbr

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# - –ù–∞ –æ–¥–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö —Å—Ç–∞–ª–æ –ª—É—á—à–µ
# - –ù–∞ –¥—Ä—É–≥–∏—Ö ‚Äî —Ö—É–∂–µ
# - –ù–∞ —Ç—Ä–µ—Ç—å–∏—Ö ‚Äî –ø—Ä–æ–±–ª–µ–º—ã —Å fairness
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- BBR v1 –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º –∫ CUBIC –ø–æ—Ç–æ–∫–∞–º
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ middleboxes –ª–æ–º–∞—é—Ç BBR
- BBR –Ω–∞ LAN –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ö—É–∂–µ CUBIC

**–†–ï–®–ï–ù–ò–ï:**
```bash
# –®–∞–≥ 1: –¢–µ—Å—Ç–∏—Ä—É–π –≤ staging environment
# –î–æ BBR:
iperf3 -c server -t 60 -P 4
# –ó–∞–ø–∏—à–∏: throughput, retransmits, RTT

# –®–∞–≥ 2: –í–∫–ª—é—á–∏ BBR
sysctl -w net.ipv4.tcp_congestion_control=bbr

# –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä—É–π —Å–Ω–æ–≤–∞
iperf3 -c server -t 60 -P 4
# –°—Ä–∞–≤–Ω–∏ —Å baseline

# –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä—É–π –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤)
# –ï—Å–ª–∏ BBR –∑–∞–±–∏—Ä–∞–µ—Ç –≤–µ—Å—å –∫–∞–Ω–∞–ª ‚Äî —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞

# BBR v3 (kernel 6.x) —Ä–µ—à–∞–µ—Ç –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã fairness
# –ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é:
cat /proc/sys/net/ipv4/tcp_congestion_control
modinfo tcp_bbr
```

---

### –û—à–∏–±–∫–∞ 3: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ tcp_timestamps

**–°–ò–ú–ü–¢–û–ú:**
```bash
# "Timestamps –¥–æ–±–∞–≤–ª—è—é—Ç overhead, –æ—Ç–∫–ª—é—á—É"
sysctl -w net.ipv4.tcp_timestamps=0

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# - PAWS (Protection Against Wrapped Sequences) —Å–ª–æ–º–∞–Ω
# - RTT estimation –Ω–µ—Ç–æ—á–Ω–∞—è
# - –ù–∞ high-speed networks –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –°—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ –ø—Ä–æ "–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é" —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∏ –æ—Ç–∫–ª—é—á–∞—Ç—å
- 12 –±–∞–π—Ç overhead –∫–∞–∂—É—Ç—Å—è –∑–Ω–∞—á–∏–º—ã–º–∏

**–†–ï–®–ï–ù–ò–ï:**
```bash
# –ù–ï –æ—Ç–∫–ª—é—á–∞–π timestamps!
net.ipv4.tcp_timestamps=1  # default –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

# –ü–æ—á–µ–º—É timestamps –≤–∞–∂–Ω—ã:
# 1. PAWS –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç old duplicate segments
# 2. –¢–æ—á–Ω—ã–π RTT = –ª—É—á—à–∏–π congestion control
# 3. –ë–µ–∑ –Ω–∏—Ö –Ω–∞ 10Gbps+ sequence numbers wrap —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ

# –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ª—É—á–∞–π –æ—Ç–∫–ª—é—á–µ–Ω–∏—è:
# –ï—Å–ª–∏ middlebox –ª–æ–º–∞–µ—Ç timestamps (–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ)
```

---

### –û—à–∏–±–∫–∞ 4: –û–≥—Ä–æ–º–Ω—ã–µ –±—É—Ñ–µ—Ä—ã "–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π"

**–°–ò–ú–ü–¢–û–ú:**
```bash
# "–ë–æ–ª—å—à–µ –±—É—Ñ–µ—Ä = –ª—É—á—à–µ, –ø–æ—Å—Ç–∞–≤–ª—é 1GB"
net.core.rmem_max=1073741824
net.core.wmem_max=1073741824

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# - Bufferbloat: latency –≤—ã—Ä–æ—Å–ª–∞ —Å 5ms –¥–æ 500ms
# - Memory exhaustion –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
# - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–ø–æ–¥–≤–∏—Å–∞–µ—Ç" –∏–∑-–∑–∞ –ø–æ–ª–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ù–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –±—É—Ñ–µ—Ä—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç latency
- "–ë–æ–ª—å—à–µ = –ª—É—á—à–µ" –º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å

**–†–ï–®–ï–ù–ò–ï:**
```
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ = 2-4 √ó BDP

BDP –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°—Ü–µ–Ω–∞—Ä–∏–π         ‚îÇ BDP     ‚îÇ –ë—É—Ñ–µ—Ä (max)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ LAN (1ms RTT)    ‚îÇ 125 KB  ‚îÇ 256 KB         ‚îÇ
‚îÇ Regional (20ms)  ‚îÇ 2.5 MB  ‚îÇ 8 MB           ‚îÇ
‚îÇ WAN (100ms)      ‚îÇ 12.5 MB ‚îÇ 32 MB          ‚îÇ
‚îÇ Satellite (600ms)‚îÇ 75 MB   ‚îÇ 256 MB         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

# –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:
net.core.rmem_max=16777216   # 16 MB
net.core.wmem_max=16777216   # 16 MB
```

---

### –û—à–∏–±–∫–∞ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ baseline

**–°–ò–ú–ü–¢–û–ú:**
```bash
# "–°–¥–µ–ª–∞–ª –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é, —Å—Ç–∞–ª–æ –±—ã—Å—Ç—Ä–µ–µ... –∫–∞–∂–µ—Ç—Å—è?"

# –ù–µ –±—ã–ª–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π –î–û
# –ù–µ –±—ã–ª–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π –ü–û–°–õ–ï
# –ù–µ –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ñ–µ–ª–∞–Ω–∏–µ "—Å–¥–µ–ª–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ" –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ù–µ—Ç culture of measurement

**–†–ï–®–ï–ù–ò–ï:**
```bash
# BEFORE any changes ‚Äî collect baseline

# 1. Throughput
iperf3 -c target -t 60 -J > baseline_throughput.json

# 2. Latency
ping -c 100 target | tee baseline_ping.txt
# –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ min/avg/max/mdev

# 3. TCP stats
ss -ti > baseline_tcp_stats.txt

# 4. Retransmissions
netstat -s | grep -i retrans > baseline_retrans.txt

# AFTER changes ‚Äî compare

# 5. Measure again with SAME parameters
iperf3 -c target -t 60 -J > after_throughput.json

# 6. Compare
jq -r '.end.sum_received.bits_per_second' baseline_throughput.json
jq -r '.end.sum_received.bits_per_second' after_throughput.json

# –ï—Å–ª–∏ –Ω–µ –ª—É—á—à–µ –Ω–∞ 10%+ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞
```

---

### –û—à–∏–±–∫–∞ 6: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tcp_tw_recycle

**–°–ò–ú–ü–¢–û–ú:**
```bash
# "–ù–∞—à—ë–ª –≤ —Å—Ç–∞—Ä–æ–π —Å—Ç–∞—Ç—å–µ"
sysctl -w net.ipv4.tcp_tw_recycle=1

# –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ kernel < 4.12:
# - –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ NAT —Å–ª—É—á–∞–π–Ω–æ –¥—Ä–æ–ø–∞—é—Ç—Å—è
# - "Connection reset" —É —á–∞—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# –í kernel >= 4.12:
sysctl: cannot stat /proc/sys/net/ipv4/tcp_tw_recycle:
No such file or directory
```

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –°—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ (–¥–æ 2017) —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∏
- tcp_tw_recycle —É–¥–∞–ª—ë–Ω –∏–∑ —è–¥—Ä–∞ 4.12 –∏–∑-–∑–∞ –±–∞–≥–æ–≤ —Å NAT

**–†–ï–®–ï–ù–ò–ï:**
```bash
# –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π tcp_tw_recycle ‚Äî –æ–Ω —É–¥–∞–ª—ë–Ω –∏ –±—ã–ª —Å–ª–æ–º–∞–Ω

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TIME_WAIT:
# –ò—Å–ø–æ–ª—å–∑—É–π tcp_tw_reuse (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)
net.ipv4.tcp_tw_reuse=1

# –ù–æ –ª—É—á—à–µ:
# 1. –ò—Å–ø–æ–ª—å–∑—É–π connection pooling –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
# 2. –ò—Å–ø–æ–ª—å–∑—É–π HTTP keepalive
# 3. –£–≤–µ–ª–∏—á—å TIME_WAIT –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
net.ipv4.tcp_fin_timeout=30  # default 60
```

---

## –ß–∞—Å—Ç—å 3: –ú–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

> üéØ **–¶–µ–ª—å —Å–µ–∫—Ü–∏–∏**: 5 —Å–ø–æ—Å–æ–±–æ–≤ –¥—É–º–∞—Ç—å –æ —Å–µ—Ç–µ–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–æ—â–∞—é—Ç –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π.

### –ú–æ–¥–µ–ª—å 1: Measure ‚Üí Identify ‚Üí Change ‚Üí Measure (MICM)

```
+------------------------------------------------------------------+
|                    –¶–ò–ö–õ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò                               |
+------------------------------------------------------------------+
|                                                                    |
|              +------------------+                                  |
|              |    MEASURE       |  ‚Üê –°–æ–±–µ—Ä–∏ baseline              |
|              |  (Baseline)      |    ‚Ä¢ iperf3, ping, ss           |
|              +--------+---------+    ‚Ä¢ Throughput, latency, loss  |
|                       |                                            |
|                       v                                            |
|              +------------------+                                  |
|              |    IDENTIFY      |  ‚Üê –ù–∞–π–¥–∏ bottleneck             |
|              |  (Bottleneck)    |    ‚Ä¢ –°–µ—Ç—å? –î–∏—Å–∫? CPU?           |
|              +--------+---------+    ‚Ä¢ –ö–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä?     |
|                       |                                            |
|                       v                                            |
|              +------------------+                                  |
|              |     CHANGE       |  ‚Üê –ò–∑–º–µ–Ω–∏ –û–î–ò–ù –ø–∞—Ä–∞–º–µ—Ç—Ä         |
|              |  (One thing)     |    ‚Ä¢ –ù–µ –≤—Å—ë —Å—Ä–∞–∑—É!              |
|              +--------+---------+    ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π               |
|                       |                                            |
|                       v                                            |
|              +------------------+                                  |
|              |    MEASURE       |  ‚Üê –°—Ä–∞–≤–Ω–∏ —Å baseline            |
|              |    (Again)       |    ‚Ä¢ –õ—É—á—à–µ? –•—É–∂–µ? –¢–∞–∫ –∂–µ?       |
|              +--------+---------+    ‚Ä¢ –ï—Å–ª–∏ —Ö—É–∂–µ ‚Äî –æ—Ç–∫–∞—Ç–∏         |
|                       |                                            |
|                       v                                            |
|              –ü–æ–≤—Ç–æ—Ä–∏ —Ü–∏–∫–ª –µ—Å–ª–∏ –Ω—É–∂–Ω–æ                               |
+------------------------------------------------------------------+

–ù–ò–ö–û–ì–î–ê –Ω–µ –º–µ–Ω—è–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è ‚Äî –Ω–µ —É–∑–Ω–∞–µ—à—å —á—Ç–æ –∏–º–µ–Ω–Ω–æ.
```

---

### –ú–æ–¥–µ–ª—å 2: Trade-offs Matrix

```
+------------------------------------------------------------------+
|                    TRADE-OFFS –í –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò                       |
+------------------------------------------------------------------+
|                                                                    |
|   –ü–∞—Ä–∞–º–µ—Ç—Ä          –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–∞—ë—Ç     –ù–æ —Ü–µ–Ω–æ–π                  |
|   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ           |
|   Buffer size       ‚Üë Throughput        ‚Üë Latency, ‚Üë Memory       |
|   Congestion aggr.  ‚Üë Throughput        ‚Üë Packet loss, unfair     |
|   Connection pool   ‚Üì Latency           ‚Üë Memory, stale conn      |
|   Keepalive         ‚Üì Latency           ‚Üë Server connections      |
|   TCP_NODELAY       ‚Üì Latency           ‚Üë Packet count            |
|   Large MTU         ‚Üë Throughput        –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ–∑–¥–µ   |
|                                                                    |
|   –ù–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –æ–±–µ–¥–∞!                                          |
|   –ö–∞–∂–¥–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç —Ü–µ–Ω—É.                                  |
+------------------------------------------------------------------+

–í–æ–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:
1. –ß—Ç–æ —è —Ö–æ—á—É —É–ª—É—á—à–∏—Ç—å? (throughput? latency?)
2. –ß–µ–º —è –≥–æ—Ç–æ–≤ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å? (memory? fairness?)
3. –ö–∞–∫–æ–π worst case –µ—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–æ–º–∞–µ—Ç—Å—è?
```

---

### –ú–æ–¥–µ–ª—å 3: Bandwidth-Delay Product (BDP) Calculator

```
+------------------------------------------------------------------+
|                    BDP ‚Äî –ö–õ–Æ–ß–ï–í–ê–Ø –§–û–†–ú–£–õ–ê                         |
+------------------------------------------------------------------+
|                                                                    |
|   BDP = Bandwidth √ó RTT                                           |
|                                                                    |
|   –≠—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö "–≤ –ø–æ–ª—ë—Ç–µ" –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º             |
|   –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º, –∫–æ–≥–¥–∞ –∫–∞–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω.                  |
|                                                                    |
|   –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:                                                  |
|   +----------------------------------------------------------+   |
|   |  Bandwidth: 1 Gbps = 1,000,000,000 bits/sec              |   |
|   |  RTT: 50 ms = 0.050 sec                                  |   |
|   |                                                          |   |
|   |  BDP = 1,000,000,000 √ó 0.050 = 50,000,000 bits          |   |
|   |      = 6,250,000 bytes = 6.25 MB                        |   |
|   |                                                          |   |
|   |  –í—ã–≤–æ–¥: –Ω—É–∂–µ–Ω –±—É—Ñ–µ—Ä –º–∏–Ω–∏–º—É–º 6.25 MB                     |   |
|   +----------------------------------------------------------+   |
|                                                                    |
|   –ë—ã—Å—Ç—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ BDP (–¥–ª—è 1 Gbps):                               |
|   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   |
|   ‚îÇ RTT          ‚îÇ BDP       ‚îÇ Min Buffer     ‚îÇ                   |
|   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                   |
|   ‚îÇ 1 ms (LAN)   ‚îÇ 125 KB    ‚îÇ 256 KB         ‚îÇ                   |
|   ‚îÇ 10 ms        ‚îÇ 1.25 MB   ‚îÇ 4 MB           ‚îÇ                   |
|   ‚îÇ 50 ms (WAN)  ‚îÇ 6.25 MB   ‚îÇ 16 MB          ‚îÇ                   |
|   ‚îÇ 100 ms       ‚îÇ 12.5 MB   ‚îÇ 32 MB          ‚îÇ                   |
|   ‚îÇ 200 ms       ‚îÇ 25 MB     ‚îÇ 64 MB          ‚îÇ                   |
|   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   |
|                                                                    |
+------------------------------------------------------------------+
```

---

### –ú–æ–¥–µ–ª—å 4: Checklists –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

```
+------------------------------------------------------------------+
|                    CHECKLIST: HIGH-BANDWIDTH SERVER               |
+------------------------------------------------------------------+
|                                                                    |
| ‚ñ° –ò–∑–º–µ—Ä–∏–ª baseline (iperf3, ping)                                 |
| ‚ñ° –†–∞—Å—Å—á–∏—Ç–∞–ª BDP –¥–ª—è —Ü–µ–ª–µ–≤–æ–≥–æ RTT                                  |
| ‚ñ° –ù–∞—Å—Ç—Ä–æ–∏–ª –±—É—Ñ–µ—Ä—ã:                                                |
|   ‚ñ° net.core.rmem_max = 2-4 √ó BDP                                 |
|   ‚ñ° net.core.wmem_max = 2-4 √ó BDP                                 |
|   ‚ñ° net.ipv4.tcp_rmem/wmem —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ                         |
| ‚ñ° –ü—Ä–æ–≤–µ—Ä–∏–ª congestion control:                                    |
|   ‚ñ° BBR –¥–ª—è WAN/lossy                                             |
|   ‚ñ° CUBIC –¥–ª—è LAN/datacenter                                      |
| ‚ñ° –£–≤–µ–ª–∏—á–∏–ª backlog –¥–ª—è high-concurrency:                          |
|   ‚ñ° net.core.somaxconn = 65535                                    |
|   ‚ñ° net.ipv4.tcp_max_syn_backlog = 65535                          |
| ‚ñ° –£–≤–µ–ª–∏—á–∏–ª file descriptors:                                      |
|   ‚ñ° ulimit -n 65535                                               |
|   ‚ñ° fs.file-max = 2097152                                         |
| ‚ñ° –ò–∑–º–µ—Ä–∏–ª –ü–û–°–õ–ï –∏ —Å—Ä–∞–≤–Ω–∏–ª —Å baseline                              |
|                                                                    |
+------------------------------------------------------------------+

+------------------------------------------------------------------+
|                    CHECKLIST: LOW-LATENCY APPLICATION             |
+------------------------------------------------------------------+
|                                                                    |
| ‚ñ° TCP_NODELAY –≤–∫–ª—é—á—ë–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏                                |
| ‚ñ° SO_KEEPALIVE –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è connection health                     |
| ‚ñ° Connection pooling —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω                                   |
| ‚ñ° –ú–∞–ª–µ–Ω—å–∫–∏–µ –±—É—Ñ–µ—Ä—ã (–∏–∑–±–µ–≥–∞–µ–º bufferbloat):                        |
|   ‚ñ° net.ipv4.tcp_notsent_lowat = 16384                            |
| ‚ñ° BBR –∏–ª–∏ CUBIC –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–µ—Ç–∏                             |
| ‚ñ° –ò–∑–º–µ—Ä—è–µ–º p99 latency, –Ω–µ —Ç–æ–ª—å–∫–æ average                         |
| ‚ñ° –ü—Ä–æ–≤–µ—Ä—è–µ–º retransmissions:                                      |
|   ‚ñ° ss -ti | grep retrans                                         |
|                                                                    |
+------------------------------------------------------------------+
```

---

### –ú–æ–¥–µ–ª—å 5: Debugging Funnel

```
+------------------------------------------------------------------+
|                    –í–û–†–û–ù–ö–ê –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò                            |
+------------------------------------------------------------------+
|                                                                    |
|   "–°–µ—Ç—å –º–µ–¥–ª–µ–Ω–Ω–∞—è" ‚Üí –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ?                         |
|                                                                    |
|              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       |
|              ‚îÇ Throughput –Ω–∏–∑–∫–∏–π?         ‚îÇ                       |
|              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       |
|                            ‚îÇ                                       |
|         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   |
|         v                  v                  v                   |
|   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              |
|   ‚îÇ –ú–∞–ª–µ–Ω—å–∫–∏–µ ‚îÇ     ‚îÇ Packet    ‚îÇ     ‚îÇ Congestion‚îÇ              |
|   ‚îÇ –±—É—Ñ–µ—Ä—ã    ‚îÇ     ‚îÇ loss      ‚îÇ     ‚îÇ control   ‚îÇ              |
|   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              |
|                                                                    |
|         ‚îÇ                  ‚îÇ                  ‚îÇ                    |
|         v                  v                  v                    |
|   –£–≤–µ–ª–∏—á—å rmem/wmem  –ü—Ä–æ–≤–µ—Ä—å:           –ü–æ–ø—Ä–æ–±—É–π BBR              |
|   –¥–æ 2-4 √ó BDP       - –∫–∞–±–µ–ª–∏                                      |
|                      - –∫–æ–Ω–≥–µ—Å—Ç–∏—è                                   |
|                      - QoS                                         |
|                                                                    |
|   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       |
|                                                                    |
|              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       |
|              ‚îÇ Latency –≤—ã—Å–æ–∫–∏–π?           ‚îÇ                       |
|              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       |
|                            ‚îÇ                                       |
|         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   |
|         v                  v                  v                   |
|   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              |
|   ‚îÇ Bufferbloat‚îÇ     ‚îÇ –ú–Ω–æ–≥–æ     ‚îÇ     ‚îÇ DNS/TLS   ‚îÇ              |
|   ‚îÇ (–±–æ–ª—å—à–∏–µ  ‚îÇ     ‚îÇ hops      ‚îÇ     ‚îÇ overhead  ‚îÇ              |
|   ‚îÇ –±—É—Ñ–µ—Ä—ã)   ‚îÇ     ‚îÇ           ‚îÇ     ‚îÇ           ‚îÇ              |
|   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              |
|         ‚îÇ                  ‚îÇ                  ‚îÇ                    |
|         v                  v                  v                    |
|   –£–º–µ–Ω—å—à–∏ –±—É—Ñ–µ—Ä—ã     traceroute         –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ               |
|   tcp_notsent_lowat  mtr                session tickets           |
|                                                                    |
+------------------------------------------------------------------+
```

---

## –ó–∞—á–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å

### –§–∏–ª–æ—Å–æ—Ñ–∏—è —Å–µ—Ç–µ–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**Premature optimization ‚Äî –∫–æ—Ä–µ–Ω—å –≤—Å–µ—Ö –∑–æ–ª.** –≠—Ç–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –î–æ–Ω–∞–ª—å–¥–∞ –ö–Ω—É—Ç–∞ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∏ –∫ —Å–µ—Ç—è–º. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å default –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ TCP/IP. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω—É–∂–Ω–∞, –∫–æ–≥–¥–∞:
1. –í—ã –∏–∑–º–µ—Ä–∏–ª–∏ –∏ –¥–æ–∫–∞–∑–∞–ª–∏, —á—Ç–æ —Å–µ—Ç—å ‚Äî bottleneck
2. –£ –≤–∞—Å high-bandwidth (10Gbps+) –∏–ª–∏ high-latency (WAN) links
3. –í—ã –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç–µ —Ç—ã—Å—è—á–∏ concurrent connections
4. –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ latency (trading, gaming, real-time)

**–û–ø–∞—Å–Ω–æ—Å—Ç—å —Å–ª–µ–ø–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.** –í –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –º–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–æ–≤ —Ç–∏–ø–∞ "–¥–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ sysctl –∏ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ". –ù–æ –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —ç—Ç–æ trade-off. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç memory usage. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π congestion control –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å unfairness. BBR –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ middleboxes. –ë–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å —Ö—É–∂–µ.

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:**
1. **Measure first.** –°–æ–±–µ—Ä–∏—Ç–µ baseline –º–µ—Ç—Ä–∏–∫–∏: latency, throughput, packet loss
2. **Identify bottleneck.** –ì–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞: —Å–µ—Ç—å? –¥–∏—Å–∫? CPU?
3. **Change one thing.** –ú–µ–Ω—è–π—Ç–µ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –∑–∞ —Ä–∞–∑
4. **Measure again.** –°—Ä–∞–≤–Ω–∏—Ç–µ —Å baseline
5. **Document.** –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–∏ –∏ –∫–∞–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- High latency –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º bandwidth ‚Äî —á–∞—Å—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ congestion control
- Throughput –Ω–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ª–∏–Ω–µ–π–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–µ –±—É—Ñ–µ—Ä—ã –∏–ª–∏ —Å—Ç–∞—Ä—ã–π congestion control
- Intermittent slowdowns –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π ‚Äî exhaustion listen backlog –∏–ª–∏ file descriptors
- Connection timeouts –ø—Ä–∏ high concurrency ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π somaxconn –∏–ª–∏ SYN backlog

**–ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- Default —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ application, –Ω–µ –≤ —Å–µ—Ç–∏
- Throughput –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –∫–∞–Ω–∞–ª–æ–º (1Gbps link –Ω–µ —Å—Ç–∞–Ω–µ—Ç 10Gbps –æ—Ç sysctl)
- –£ –≤–∞—Å –º–µ–Ω—å—à–µ 1000 concurrent connections

**–¶–µ–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞):**
- –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å throughput ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–π –∫–∞–Ω–∞–ª
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å latency ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ tail latency (p99, p99.9)
- –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π ‚Äî graceful degradation, –Ω–µ –ø–∞–¥–µ–Ω–∏—è
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã ‚Äî –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –ø–∞–º—è—Ç—å –Ω–∞ –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã –±–µ–∑ –Ω—É–∂–¥—ã

---

## –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### Network Metrics

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
|---------|----------|---------------------|
| **Latency (RTT)** | Round-Trip Time | <50ms local, <100ms regional |
| **Throughput** | –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞–Ω–∞–ª–∞ |
| **Packet Loss** | –ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ | <0.1% |
| **Jitter** | –í–∞—Ä–∏–∞—Ü–∏—è latency | <10ms |
| **TTFB** | Time To First Byte | <200ms –¥–ª—è web |

### Percentile Latencies

```
p50 ‚Äî –º–µ–¥–∏–∞–Ω–∞, —Ç–∏–ø–∏—á–Ω—ã–π user experience
p95 ‚Äî 95% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ
p99 ‚Äî tail latency, worst case –¥–ª—è 1%
p99.9 ‚Äî extreme outliers

–ü—Ä–∞–≤–∏–ª–æ: p99 –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å >10x –æ—Ç p50
```

---

## TCP Tuning (Linux)

### –ó–∞—á–µ–º –ø–æ–Ω–∏–º–∞—Ç—å TCP Tuning

**TCP –±—ã–ª —Å–æ–∑–¥–∞–Ω –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏, –Ω–µ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏.** –ö–æ–≥–¥–∞ Vint Cerf –∏ Bob Kahn –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ TCP –≤ 1970-—Ö, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ—Å—Ç–æ—è–ª –∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö, –Ω–µ–Ω–∞–¥—ë–∂–Ω—ã—Ö –ª–∏–Ω–∏–π. Default –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TCP –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Äî –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ, –Ω–æ –Ω–µ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

**–ß—Ç–æ —Ç–∞–∫–æ–µ TCP tuning?** –≠—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ TCP —Å—Ç–µ–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π —Å–µ—Ç–∏. –ë—É—Ñ–µ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, —Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å "–≤ –ø–æ–ª—ë—Ç–µ" –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º. Congestion control —Ä–µ—à–∞–µ—Ç, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏. Backlog —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**–ö–æ–≥–¥–∞ default –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:**
- **High-bandwidth links (10Gbps+):** Default –±—É—Ñ–µ—Ä—ã —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ ‚Äî –Ω–µ –º–æ–∂–µ—Ç–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–∞–Ω–∞–ª
- **High-latency links (WAN, 50ms+ RTT):** –ú–∞–ª–µ–Ω—å–∫–∏–µ –±—É—Ñ–µ—Ä—ã = –Ω–∏–∑–∫–∏–π throughput (bandwidth-delay product)
- **High-concurrency servers (—Ç—ã—Å—è—á–∏ connections):** Default backlog = dropped connections –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
- **Packet loss networks:** Loss-based congestion control (CUBIC) —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å

**–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ "–≤—ã–∫—Ä—É—Ç–∏—Ç—å –≤—Å—ë –Ω–∞ –º–∞–∫—Å–∏–º—É–º":**
- –ë–æ–ª—å—à–∏–µ –±—É—Ñ–µ—Ä—ã = –±–æ–ª—å—à–µ memory per connection
- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π congestion control = unfairness –∫ –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º
- –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π backlog = –ø–∞–º—è—Ç—å –Ω–∞ –ø–æ–ª—É-–æ—Ç–∫—Ä—ã—Ç—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª–æ–º–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å middleboxes

### Buffer Sizes

```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã
# –î–ª—è high-bandwidth networks (10Gbps+)
sudo sysctl -w net.core.rmem_max=16777216
sudo sysctl -w net.core.wmem_max=16777216

# TCP –±—É—Ñ–µ—Ä—ã: min default max (–≤ –±–∞–π—Ç–∞—Ö)
sudo sysctl -w net.ipv4.tcp_rmem="4096 87380 16777216"
sudo sysctl -w net.ipv4.tcp_wmem="4096 87380 16777216"

# –î–ª—è high-throughput links
sudo sysctl -w net.core.netdev_max_backlog=5000
```

**–§–æ—Ä–º—É–ª–∞ –¥–ª—è –±—É—Ñ–µ—Ä–∞:**
```
Optimal buffer = Bandwidth (bytes/sec) √ó RTT (sec)

–ü—Ä–∏–º–µ—Ä: 1 Gbps link, 50ms RTT
Buffer = (1,000,000,000 / 8) √ó 0.05 = 6.25 MB
```

> **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å default value (–≤—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ) –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ. –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π default –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å buffer collapsing –∏ latency spikes.

### Connection Backlog

**–ß—Ç–æ —Ç–∞–∫–æ–µ backlog?** –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SYN –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Å–µ—Ä–≤–µ—Ä –ø–æ–º–µ—â–∞–µ—Ç —ç—Ç–æ "–ø–æ–ª—É-–æ—Ç–∫—Ä—ã—Ç–æ–µ" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å (SYN backlog). –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è handshake —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ accept queue (somaxconn). –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω—ã ‚Äî –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.

**–°–∏–º–ø—Ç–æ–º—ã –º–∞–ª–µ–Ω—å–∫–æ–≥–æ backlog:**
- Connection refused –∏–ª–∏ timeouts –ø—Ä–∏ burst –Ω–∞–≥—Ä—É–∑–∫–∏
- `netstat -s | grep -i listen` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç dropped connections
- –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–Ω–µ–∑–∞–ø–Ω–æ –ø—Ä–∏ –ø–∏–∫–∞—Ö —Ç—Ä–∞—Ñ–∏–∫–∞

```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è high-concurrency —Å–µ—Ä–≤–µ—Ä–æ–≤
sudo sysctl -w net.core.somaxconn=4096
sudo sysctl -w net.ipv4.tcp_max_syn_backlog=4096

# Persistent ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ /etc/sysctl.conf
net.core.somaxconn = 4096
net.ipv4.tcp_max_syn_backlog = 4096
```

### Congestion Control: BBR

**–ü—Ä–æ–±–ª–µ–º–∞ congestion control.** –ò–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Äî shared resource. –ï—Å–ª–∏ –≤—Å–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ ‚Äî —Å–µ—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—Å—è –∏ –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π throughput. Congestion control ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç "–±–µ–∑–æ–ø–∞—Å–Ω—É—é" —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ (CUBIC, Reno).** Loss-based: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å—ë –±—ã—Å—Ç—Ä–µ–µ, –ø–æ–∫–∞ –Ω–µ –Ω–∞—á–Ω—É—Ç—Å—è –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤. –ü–æ—Ç–µ—Ä—è = —Å–∏–≥–Ω–∞–ª –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ ‚Üí —Ä–µ–∑–∫–æ —Å–Ω–∏–∂–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å. –ü—Ä–æ–±–ª–µ–º–∞: –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö –ø–æ—Ç–µ—Ä–∏ —á–∞—Å—Ç–æ –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–æ–π (wireless, noisy links), –∞ –Ω–∞ –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ (bufferbloat).

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç BBR (Bottleneck Bandwidth and Round-trip propagation time).** Model-based: –∏–∑–º–µ—Ä—è–µ–º —Ä–µ–∞–ª—å–Ω—É—é bandwidth –∏ RTT, —Å—Ç—Ä–æ–∏–º –º–æ–¥–µ–ª—å —Å–µ—Ç–∏, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä—É—é —Å–µ—Ç—å —Ä–µ–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å. –ù–µ –∂–¥—ë–º –ø–æ—Ç–µ—Ä—å ‚Äî —Ä–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è latency.

**–ö–æ–≥–¥–∞ BBR –¥–∞—ë—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:**
- High-latency links (WAN, international) ‚Äî –Ω–µ –∂–¥—ë—Ç –ø–æ—Ç–µ—Ä—å –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è max throughput
- Lossy networks ‚Äî –Ω–µ —Å–Ω–∏–∂–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑-–∑–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å
- –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç–∏ ‚Äî –∏–∑–±–µ–≥–∞–µ—Ç bufferbloat

**–ö–æ–≥–¥–∞ BBR –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö—É–∂–µ:**
- LAN —Å –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–π latency ‚Äî overhead –º–æ–¥–µ–ª–∏ –Ω–µ –æ–∫—É–ø–∞–µ—Ç—Å—è
- –°–µ—Ç–∏ —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ middleboxes ‚Äî –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç BBR –ø–∞—Ç—Ç–µ—Ä–Ω—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º
sysctl net.ipv4.tcp_congestion_control
# –û–±—ã—á–Ω–æ: cubic

# –í–∫–ª—é—á–∏—Ç—å BBR (—Ç—Ä–µ–±—É–µ—Ç kernel 4.9+)
sudo sysctl -w net.core.default_qdisc=fq
sudo sysctl -w net.ipv4.tcp_congestion_control=bbr

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
sysctl net.ipv4.tcp_congestion_control
# bbr
```

**BBR vs CUBIC:**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | CUBIC | BBR |
|----------------|-------|-----|
| –ü–æ–¥—Ö–æ–¥ | Loss-based | Model-based |
| High latency links | –•—É–∂–µ | –õ—É—á—à–µ |
| Packet loss | –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç window | –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ |
| Fairness | –•–æ—Ä–æ—à–æ | –ú–æ–∂–µ—Ç –±—ã—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω |

### TCP Features

```bash
# –í–∫–ª—é—á–∏—Ç—å Window Scaling (–æ–±—ã—á–Ω–æ —É–∂–µ –≤–∫–ª—é—á–µ–Ω)
sysctl -w net.ipv4.tcp_window_scaling=1

# SACK ‚Äî Selective Acknowledgment
sysctl -w net.ipv4.tcp_sack=1

# Timestamps ‚Äî –ø–æ–º–æ–≥–∞–µ—Ç —Å RTT estimation
sysctl -w net.ipv4.tcp_timestamps=1

# –ù–ï –æ—Ç–∫–ª—é—á–∞–π—Ç–µ timestamps –∏ SACK –¥–ª—è WAN!
# –ù–µ–∫–æ—Ç–æ—Ä—ã–µ "–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏" —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å ‚Äî —ç—Ç–æ –ø–ª–æ—Ö–æ–π —Å–æ–≤–µ—Ç
```

### Full Production Config

```bash
# /etc/sysctl.conf –¥–ª—è high-performance server

# Network core
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.core.rmem_default = 1048576
net.core.wmem_default = 1048576
net.core.netdev_max_backlog = 5000
net.core.somaxconn = 4096

# TCP
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 87380 16777216
net.ipv4.tcp_max_syn_backlog = 4096
net.ipv4.tcp_congestion_control = bbr
net.core.default_qdisc = fq

# Keep-alive
net.ipv4.tcp_keepalive_time = 600
net.ipv4.tcp_keepalive_intvl = 60
net.ipv4.tcp_keepalive_probes = 5

# TIME_WAIT
net.ipv4.tcp_fin_timeout = 30
net.ipv4.tcp_tw_reuse = 1

# Apply
# sudo sysctl -p
```

---

## Connection Pooling

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Pooling

**–ü–æ—á–µ–º—É —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–æ—Ä–æ–≥–æ.** –ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç:
1. **DNS lookup** (10-100ms) ‚Äî –µ—Å–ª–∏ –Ω–µ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω
2. **TCP handshake** (1 RTT, 20-100ms) ‚Äî SYN ‚Üí SYN-ACK ‚Üí ACK
3. **TLS handshake** (1-2 RTT, 40-200ms) ‚Äî key exchange, certificate verification
4. **Server-side resources** ‚Äî –ø–∞–º—è—Ç—å, file descriptor, –≤–æ–∑–º–æ–∂–Ω–æ thread

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —ç—Ç–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã. –î–ª—è WAN —Å TLS ‚Äî —Å–æ—Ç–Ω–∏ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.

**–ß—Ç–æ —Ç–∞–∫–æ–µ connection pooling.** –í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å, –¥–µ—Ä–∂–∏–º –ø—É–ª –≥–æ—Ç–æ–≤—ã—Ö ("–ø—Ä–æ–≥—Ä–µ—Ç—ã—Ö") —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –ó–∞–ø—Ä–æ—Å –±–µ—Ä—ë—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑ –ø—É–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç. –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ –∂–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

**–≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:**
```
–ë–µ–∑ –ø—É–ª–∞:
Request 1: [DNS][TCP Connect][TLS][Request][Response][Close]
Request 2: [DNS][TCP Connect][TLS][Request][Response][Close]
Request 3: [DNS][TCP Connect][TLS][Request][Response][Close]

–° –ø—É–ª–æ–º:
Request 1: [DNS][TCP Connect][TLS][Request][Response]
Request 2:                        [Request][Response]
Request 3:                        [Request][Response]

–≠–∫–æ–Ω–æ–º–∏—è: ~300ms+ –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å
```

**Benchmarks:** Reusing connections reduces total run time by factor of ~3x.

### Pool Configuration Best Practices

```yaml
# –ü—Ä–∏–º–µ—Ä –¥–ª—è HikariCP (Java DB pool)
hikari:
  maximum-pool-size: 100      # –£–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è production
  minimum-idle: 10            # –ú–∏–Ω–∏–º—É–º –≥–æ—Ç–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  connection-timeout: 30000   # 30s ‚Äî max –æ–∂–∏–¥–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  idle-timeout: 600000        # 10m ‚Äî –∑–∞–∫—Ä—ã—Ç—å idle connections
  max-lifetime: 1800000       # 30m ‚Äî max –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ connection
  leak-detection-threshold: 60000  # 60s ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ –Ω–µ –≤–µ—Ä–Ω—É–ª–∏
```

### HTTP Client Pool

```python
# Python requests —Å connection pooling
import requests
from requests.adapters import HTTPAdapter
from urllib3.util.retry import Retry

session = requests.Session()
adapter = HTTPAdapter(
    pool_connections=100,    # –ü—É–ª –Ω–∞ —Ö–æ—Å—Ç
    pool_maxsize=100,        # Max —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ –ø—É–ª–µ
    max_retries=Retry(total=3, backoff_factor=0.1)
)
session.mount('https://', adapter)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å session –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
response = session.get('https://api.example.com')
```

```java
// Java HttpClient (11+)
HttpClient client = HttpClient.newBuilder()
    .connectTimeout(Duration.ofSeconds(10))
    .executor(Executors.newFixedThreadPool(10))
    .build();
// Reuse client instance ‚Äî –æ–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É–ª–æ–º –≤–Ω—É—Ç—Ä–∏
```

### Keep-Alive Configuration

```
–ü—Ä–∞–≤–∏–ª–æ: Client timeout < Server timeout

–ö–ª–∏–µ–Ω—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–Ω—å—à–µ ‚Üí –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –º—ë—Ä—Ç–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

**Nginx:**
```nginx
# Nginx upstream keep-alive
upstream backend {
    server backend1:8080;
    server backend2:8080;

    keepalive 100;  # –î–µ—Ä–∂–∞—Ç—å 100 idle connections
    keepalive_timeout 60s;
    keepalive_requests 1000;  # Max requests per connection
}

location /api {
    proxy_pass http://backend;
    proxy_http_version 1.1;
    proxy_set_header Connection "";  # –í–∞–∂–Ω–æ –¥–ª—è keep-alive
}
```

---

## TLS Optimization

### –ü–æ—á–µ–º—É TLS –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**TLS –¥–æ–±–∞–≤–ª—è–µ—Ç latency.** –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö –Ω—É–∂–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∫–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –í TLS 1.2 —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç 2 round-trips (200-400ms –Ω–∞ WAN). TLS 1.3 —Å–æ–∫—Ä–∞—Ç–∏–ª –¥–æ 1 round-trip. 0-RTT resumption –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É ‚Äî –Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç—å TLS.** –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Ç—Ä–µ–±—É–µ—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: HTTP/2 –∏ HTTP/3 —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ TLS, –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–º–µ—á–∞—é—Ç HTTP –∫–∞–∫ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π, Google –ø–æ–Ω–∏–∂–∞–µ—Ç HTTP —Å–∞–π—Ç—ã –≤ –ø–æ–∏—Å–∫–µ, –º–Ω–æ–≥–∏–µ API –≤–æ–æ–±—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ TLS.

**–¶–µ–ª—å TLS optimization ‚Äî –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å overhead –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS 1.3 –≤–º–µ—Å—Ç–æ 1.2 (–º–µ–Ω—å—à–µ round-trips)
- –í–∫–ª—é—á–∏—Ç—å session resumption (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OCSP stapling (–∏–∑–±–µ–∂–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ CA)
- –í—ã–±—Ä–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ cipher suites (ChaCha20 –±—ã—Å—Ç—Ä–µ–µ AES –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –±–µ–∑ AES-NI)

### TLS 1.3 Advantages

| Feature | TLS 1.2 | TLS 1.3 |
|---------|---------|---------|
| Handshake RTT | 2 | 1 |
| 0-RTT resumption | –ù–µ—Ç | –î–∞ |
| Forward Secrecy | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| Cipher Suites | ~30+ | 5 |

### Session Resumption

```
–ü–µ—Ä–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:
Client ‚Üê‚Üí Server: Full TLS Handshake (1 RTT)
Server ‚Üí Client: Session Ticket

–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
Client ‚Üí Server: ClientHello + Session Ticket
Client ‚Üí Server: [Early Data] (0-RTT)
Server ‚Üí Client: Finish
```

**~40% HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π ‚Äî resumptions.** –° 0-RTT —ç–∫–æ–Ω–æ–º–∏–º 1 RTT –Ω–∞ –∫–∞–∂–¥–æ–º.

### 0-RTT Security

```
–í–ê–ñ–ù–û: 0-RTT —É—è–∑–≤–∏–º –∫ replay attacks!

–ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è 0-RTT:
‚úÖ GET –∑–∞–ø—Ä–æ—Å—ã
‚úÖ HEAD –∑–∞–ø—Ä–æ—Å—ã
‚úÖ Idempotent –æ–ø–µ—Ä–∞—Ü–∏–∏

–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è 0-RTT:
‚ùå POST —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
‚ùå –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚ùå –õ—é–±—ã–µ non-idempotent –æ–ø–µ—Ä–∞—Ü–∏–∏
```

### Cipher Suite Optimization

```nginx
# Nginx TLS optimization
ssl_protocols TLSv1.2 TLSv1.3;

# TLS 1.3 ciphers (fast + secure)
ssl_ciphersuites TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256;

# TLS 1.2 fallback
ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;

# Session cache
ssl_session_cache shared:SSL:50m;
ssl_session_timeout 1d;

# Session tickets (–¥–ª—è resumption)
ssl_session_tickets on;

# OCSP Stapling
ssl_stapling on;
ssl_stapling_verify on;
```

---

## DNS Optimization

### –ü–æ—á–µ–º—É DNS –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**DNS ‚Äî –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫–∞–∂–¥–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.** –ü—Ä–µ–∂–¥–µ —á–µ–º –±—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç HTTP –∑–∞–ø—Ä–æ—Å, –æ–Ω –¥–æ–ª–∂–µ–Ω —É–∑–Ω–∞—Ç—å IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞. –ú–µ–¥–ª–µ–Ω–Ω—ã–π DNS = –º–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å 50 —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ (main site, CDN, analytics, ads) ‚Äî —ç—Ç–æ 50 DNS –∑–∞–ø—Ä–æ—Å–æ–≤.

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã DNS:**
- **Slow resolver** ‚Äî ISP resolver –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –¥–∞–ª–µ–∫–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏
- **Cache miss** ‚Äî TTL –∏—Å—Ç—ë–∫, –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ authoritative —Å–µ—Ä–≤–µ—Ä—É
- **Cold start** ‚Äî –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ –¥–æ–º–µ–Ω—É –≤—Å–µ–≥–¥–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–æ)
- **DNS over HTTPS overhead** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ TLS, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DoH

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- **Prefetching** ‚Äî –±—Ä–∞—É–∑–µ—Ä –∑–∞—Ä–∞–Ω–µ–µ —Ä–µ–∑–æ–ª–≤–∏—Ç –¥–æ–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è
- **Correct TTL** ‚Äî –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –±—ã—Å—Ç—Ä—ã–º failover –∏ cache —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- **Fast DNS provider** ‚Äî anycast DNS —Å –Ω–∏–∑–∫–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ–π latency
- **Connection reuse** ‚Äî –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

### TTL Strategy

| –¢–∏–ø –∑–∞–ø–∏—Å–∏ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π TTL | –ü—Ä–∏—á–∏–Ω–∞ |
|------------|-------------------|---------|
| Static (–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç) | 86400 (24h) | –†–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è |
| Dynamic (load balancer) | 300-900 (5-15m) | –ù—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å |
| Failover | 60-120 (1-2m) | –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ |

> **–í–∞–∂–Ω–æ:** TTL <300s —á–∞—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è ISP –∫—ç—à–∞–º–∏.

### DNS Prefetching

```html
<!-- –í HTML head -->
<link rel="dns-prefetch" href="//api.example.com">
<link rel="dns-prefetch" href="//cdn.example.com">
<link rel="preconnect" href="https://api.example.com" crossorigin>
```

### DNS Provider Selection

```
–§–∞–∫—Ç–æ—Ä—ã –≤—ã–±–æ—Ä–∞:
- Anycast deployment (–≥–ª–æ–±–∞–ª—å–Ω–∞—è latency)
- DDoS protection
- Response time (<50ms)
- Uptime SLA

–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ: Cloudflare, AWS Route 53, Google Cloud DNS
Managed DNS –Ω–∞ ~40% –±—ã—Å—Ç—Ä–µ–µ self-hosted.
```

---

## HTTP Compression

### –ó–∞—á–µ–º —Å–∂–∏–º–∞—Ç—å HTTP —Ç—Ä–∞—Ñ–∏–∫

**Trade-off: CPU vs bandwidth.** –°–∂–∞—Ç–∏–µ —Ç—Ä–∞—Ç–∏—Ç CPU –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ, –Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—ä—ë–º –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö (–º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç) —ç–∫–æ–Ω–æ–º–∏—è bandwidth –ø–µ—Ä–µ–≤–µ—à–∏–≤–∞–µ—Ç CPU overhead. –ù–∞ –±—ã—Å—Ç—Ä—ã—Ö LAN ‚Äî compression –º–æ–∂–µ—Ç –¥–∞–∂–µ –∑–∞–º–µ–¥–ª–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É.

**–ì–¥–µ compression –∫—Ä–∏—Ç–∏—á–Ω–æ:**
- **Text-based content:** HTML, CSS, JavaScript ‚Äî —Å–∂–∏–º–∞–µ—Ç—Å—è –≤ 5-10 —Ä–∞–∑
- **JSON API responses:** –¢–∏–ø–∏—á–Ω–æ–µ —Å–∂–∞—Ç–∏–µ 70-90%
- **Mobile users:** Bandwidth –æ–≥—Ä–∞–Ω–∏—á–µ–Ω, latency –≤—ã—Å–æ–∫–∞—è
- **CDN billing:** –ü–ª–∞—Ç–∏—Ç–µ –∑–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –±–∞–π—Ç—ã

**–ì–¥–µ compression –Ω–µ –Ω—É–∂–Ω–æ –∏–ª–∏ –≤—Ä–µ–¥–Ω–æ:**
- **Already compressed:** JPEG, PNG, WebP, WOFF2 ‚Äî —É–∂–µ —Å–∂–∞—Ç—ã, –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Å–∂–∞—Ç–∏–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ
- **Tiny files (<1KB):** Overhead —Å–∂–∞—Ç–∏—è –±–æ–ª—å—à–µ —ç–∫–æ–Ω–æ–º–∏–∏
- **High-throughput LAN:** CPU bottleneck –ø—Ä–∏ –≥–∏–≥–∞–±–∏—Ç–Ω—ã—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö
- **Real-time streams:** –ó–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ compression –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º–∞

### Algorithm Comparison

| Algorithm | Compression Ratio | Speed | Browser Support |
|-----------|-------------------|-------|-----------------|
| **gzip** | Good | Fast | 100% |
| **Brotli** | Better (+19%) | Slower | 98% |
| **Zstandard** | Similar to Brotli | Faster | Chrome, Firefox |

### Configuration

```nginx
# Nginx compression
gzip on;
gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml;

# Brotli (—Ç—Ä–µ–±—É–µ—Ç –º–æ–¥—É–ª—å)
brotli on;
brotli_comp_level 6;
brotli_types text/plain text/css application/json application/javascript text/xml application/xml;
```

### Best Practices

```
‚úÖ –°–∂–∏–º–∞—Ç—å:
- HTML, CSS, JavaScript
- JSON, XML
- SVG

‚ùå –ù–ï —Å–∂–∏–º–∞—Ç—å:
- JPEG, PNG, WebP (—É–∂–µ —Å–∂–∞—Ç—ã)
- WOFF2 fonts (—É–∂–µ —Å–∂–∞—Ç—ã)
- –§–∞–π–ª—ã <1KB (overhead > benefit)
```

### Caching Headers

```nginx
# Cache-Control + Compression
location ~* \.(js|css)$ {
    gzip_static on;
    brotli_static on;

    add_header Cache-Control "public, max-age=31536000, immutable";
    add_header Vary "Accept-Encoding";
}
```

---

## QUIC / HTTP/3

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω QUIC

**–ü—Ä–æ–±–ª–µ–º–∞ TCP+TLS.** TCP –±—ã–ª —Å–æ–∑–¥–∞–Ω –≤ 1970-—Ö, TLS –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –î–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö handshake (TCP + TLS) = 2-3 round-trips –¥–æ –ø–µ—Ä–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Head-of-line blocking: –ø–æ—Ç–µ—Ä—è –æ–¥–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –í–°–ï streams –≤ HTTP/2
- Connection –ø—Ä–∏–≤—è–∑–∞–Ω –∫ IP ‚Äî –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–µ—Ç–∏ (Wi-Fi ‚Üí –º–æ–±–∏–ª—å–Ω—ã–π) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–º–∏—Ä–∞–µ—Ç

**–ß—Ç–æ —Ç–∞–∫–æ–µ QUIC.** Google —Å–æ–∑–¥–∞–ª –Ω–æ–≤—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–≤–µ—Ä—Ö UDP, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ TCP –∏ TLS:
- **–û–¥–∏–Ω handshake** –¥–ª—è transport –∏ encryption ‚Äî 0-RTT –∏–ª–∏ 1-RTT
- **Independent streams** ‚Äî –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–∞ –≤ –æ–¥–Ω–æ–º stream –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ
- **Connection ID** ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç —Å–º–µ–Ω—É IP (mobile handoff)
- **–£–ª—É—á—à–µ–Ω–Ω—ã–π congestion control** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª, –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω legacy TCP

**HTTP/3 = HTTP –ø–æ–≤–µ—Ä—Ö QUIC.** –°–µ–º–∞–Ω—Ç–∏–∫–∞ HTTP (GET, POST, headers, status codes) —Ç–∞ –∂–µ, –Ω–æ transport —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–æ–π.

### Performance Characteristics

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ QUIC:**
- No Head-of-Line Blocking (multiplexed streams)
- 0-RTT connection establishment
- Connection migration (mobile handoff)
- Better performance at high latency/packet loss

**–ì–¥–µ QUIC –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç:**
```
‚úÖ Mobile users (network switching)
‚úÖ High-latency connections (>100ms RTT)
‚úÖ Networks with packet loss (>1%)
‚úÖ Many parallel requests (no HOL blocking)
```

**–ì–¥–µ TCP –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—É—á—à–µ:**
```
‚ö†Ô∏è Very high bandwidth, low latency LANs
‚ö†Ô∏è Single large file transfers
‚ö†Ô∏è CPU-constrained servers (QUIC –±–æ–ª–µ–µ expensive)
```

### Benchmarks Summary

```
HTTP/3 vs HTTP/2:
- Connection establishment: 33% faster
- High packet loss scenarios: Significant advantage
- Streaming video: 69% vs 56% –¥–æ—Å—Ç–∏–≥–∞—é—Ç 5Mbps+

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (ACM 2024):
–ù–∞ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã—Ö —Å–µ—Ç—è—Ö QUIC –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ 45% –º–µ–¥–ª–µ–Ω–Ω–µ–µ
–∏–∑-–∑–∞ user-space overhead.
```

---

## Benchmarking Methodology

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞

**"Measure twice, cut once."** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ –∏–∑–º–µ—Ä–µ–Ω–∏–π ‚Äî —ç—Ç–æ –≥–∞–¥–∞–Ω–∏–µ. –ò–Ω—Ç—É–∏—Ü–∏—è —á–∞—Å—Ç–æ –æ—à–∏–±–∞–µ—Ç—Å—è: "–æ—á–µ–≤–∏–¥–Ω—ã–π" bottleneck –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–∞–º, –≥–¥–µ –∫–∞–∂–µ—Ç—Å—è. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –∏ –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞:**
- **Too short tests:** 5 —Å–µ–∫—É–Ω–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚Äî –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è warmup –∏ variance
- **Single run:** –û–¥–∏–Ω –∑–∞–ø—É—Å–∫ –Ω–µ—Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–µ–Ω ‚Äî –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 3, –±–µ—Ä—ë–º median
- **Wrong metric:** –°—Ä–µ–¥–Ω—è—è latency —Å–∫—Ä—ã–≤–∞–µ—Ç tail latency ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ p95/p99
- **Different conditions:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ —É—Ç—Ä–æ–º, –ø—Ä–∏–º–µ–Ω–∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ—á–µ—Ä–æ–º ‚Äî –Ω–µ—Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ
- **Local testing:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ localhost –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –Ω–∞ production

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
1. **Establish baseline** ‚Äî –∏–∑–º–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –î–û –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **Control conditions** ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö (–≤—Ä–µ–º—è, load, –≤–µ—Ä—Å–∏–∏)
3. **Long duration** ‚Äî 60+ —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. **Multiple runs** ‚Äî –º–∏–Ω–∏–º—É–º 3 –ø—Ä–æ–≥–æ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ median
5. **Document everything** ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ —É—Å–ª–æ–≤–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### iperf3 –¥–ª—è Throughput

```bash
# –°–µ—Ä–≤–µ—Ä
iperf3 -s

# –ö–ª–∏–µ–Ω—Ç ‚Äî –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç
iperf3 -c server-ip

# –î–ª–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç (60 sec)
iperf3 -c server-ip -t 60

# Parallel streams (–¥–ª—è 10G+ links)
iperf3 -c server-ip -P 4 -t 60

# Reverse direction
iperf3 -c server-ip -R

# UDP —Ç–µ—Å—Ç —Å target bandwidth
iperf3 -c server-ip -u -b 1G

# JSON output –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
iperf3 -c server-ip -J > results.json
```

### HTTP Benchmarking

```bash
# wrk ‚Äî HTTP load testing
wrk -t12 -c400 -d30s https://api.example.com/endpoint

# hey (Go-based)
hey -n 10000 -c 100 https://api.example.com/endpoint

# ab (Apache Bench)
ab -n 10000 -c 100 https://api.example.com/endpoint
```

### Latency Testing

```bash
# curl timing
curl -o /dev/null -s -w "
DNS:     %{time_namelookup}s
Connect: %{time_connect}s
TLS:     %{time_appconnect}s
TTFB:    %{time_starttransfer}s
Total:   %{time_total}s
" https://example.com

# Continuous monitoring
while true; do
  curl -o /dev/null -s -w "%{time_total}\n" https://api.example.com
  sleep 1
done | tee latency.log
```

### Best Practices

```
1. Baseline first ‚Äî –∏–∑–º–µ—Ä—å "—á–∏—Å—Ç—É—é" –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–µ–ª–µ–∑–∞
2. Long tests ‚Äî 60+ —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. Bidirectional ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–π –æ–±–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. Multiple runs ‚Äî minimum 3 –ø—Ä–æ–≥–æ–Ω–∞, –±–µ—Ä—ë–º median
5. Document conditions ‚Äî –≤—Ä–µ–º—è, load, network state
```

---

## Optimization Checklist

### Quick Wins

```bash
# 1. –í–∫–ª—é—á–∏—Ç—å BBR
sysctl -w net.ipv4.tcp_congestion_control=bbr
sysctl -w net.core.default_qdisc=fq

# 2. –£–≤–µ–ª–∏—á–∏—Ç—å buffer limits
sysctl -w net.core.rmem_max=16777216
sysctl -w net.core.wmem_max=16777216

# 3. Connection backlog
sysctl -w net.core.somaxconn=4096

# 4. Enable compression (in web server config)

# 5. Enable TLS 1.3 session resumption
```

### Infrastructure Level

- [ ] Use managed DNS with anycast
- [ ] Deploy CDN for static assets
- [ ] Configure connection pooling
- [ ] Enable HTTP/2 or HTTP/3
- [ ] Set up proper caching headers

### Application Level

- [ ] Reuse HTTP clients (singleton pattern)
- [ ] Implement request batching where possible
- [ ] Use async/non-blocking I/O
- [ ] Set appropriate timeouts
- [ ] Monitor connection pool metrics

---

## –°—Å—ã–ª–∫–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### TCP Tuning
- [Linux Network Tuning (ESnet)](https://fasterdata.es.net/host-tuning/linux)
- [TCP Performance Tuning](https://cromwell-intl.com/open-source/performance-tuning/tcp.html)
- [RHEL Network Tuning](https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/tuning-the-network-performance_monitoring-and-managing-system-status-and-performance)
- [Linux Network Parameters (GitHub)](https://github.com/leandromoreira/linux-network-performance-parameters)

### Connection Pooling
- [HTTP Connection Pooling (Microsoft)](https://devblogs.microsoft.com/premier-developer/the-art-of-http-connection-pooling-how-to-optimize-your-connections-for-peak-performance/)
- [HAProxy Keep-Alive](https://www.haproxy.com/blog/http-keep-alive-pipelining-multiplexing-and-connection-pooling)

### TLS Optimization
- [0-RTT (Cloudflare)](https://blog.cloudflare.com/introducing-0-rtt/)
- [TLS 1.3 Performance](https://www.thousandeyes.com/blog/optimizing-web-performance-tls-1-3)
- [Is TLS Fast Yet?](https://istlsfastyet.com/)

### DNS
- [DNS TTL Strategies (easyDNS)](https://easydns.com/blog/2024/08/12/optimizing-dns-performance-ttl-strategies-to-reduce-query-count-on-a-dns-zone/)
- [DNS Prefetching (Edgemesh)](https://edgemesh.com/blog/what-is-dns-prefetching)

### QUIC/HTTP/3
- [HTTP/3 Performance (Request Metrics)](https://requestmetrics.com/web-performance/http3-is-fast/)
- [QUIC vs TCP (Fastly)](https://www.fastly.com/blog/measuring-quic-vs-tcp-computational-efficiency)
- [QUIC Limitations (ACM 2024)](https://dl.acm.org/doi/10.1145/3589334.3645323)

### Compression
- [Brotli vs GZIP (DebugBear)](https://www.debugbear.com/blog/http-compression-gzip-brotli)
- [Cloudflare Compression](https://developers.cloudflare.com/speed/optimization/content/compression/)

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ
‚Üí [[network-latency-optimization]] ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è latency
‚Üí [[network-transport-layer]] ‚Äî TCP/UDP/QUIC –≤ –¥–µ—Ç–∞–ª—è—Ö
‚Üí [[network-troubleshooting-advanced]] ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ performance issues
‚Üí [[network-tools-reference]] ‚Äî benchmarking tools

### –°–º–µ–∂–Ω—ã–µ —Ç–µ–º—ã
‚Üí [[observability]] ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ performance
‚Üí [[caching-strategies]] ‚Äî HTTP caching

---

## –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —Ç–µ–º–∞–º–∏

**[[network-latency-optimization]]** ‚Äî Latency optimization —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —Ç–æ–≥–¥–∞ –∫–∞–∫ performance optimization –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä: TCP tuning, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±—É—Ñ–µ—Ä—ã, congestion control –∏ benchmarking. –ú–Ω–æ–≥–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è, –Ω–æ performance optimization –¥–µ–ª–∞–µ—Ç –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ (sysctl tuning, socket options), –∞ latency optimization ‚Äî –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π (prefetching, connection pooling, CDN). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –∏–∑—É—á–∏—Ç—å latency optimization –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∏ —Ü–µ–ª–µ–π, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

**[[network-transport-layer]]** ‚Äî TCP tuning, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Å–Ω–æ–≤—É performance optimization, —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è TCP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞: window scaling, congestion control (CUBIC, BBR), Nagle's algorithm, delayed ACK. –ë–µ–∑ –∑–Ω–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ TCP –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å sysctl-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–ª–∏ –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É TCP –∏ QUIC –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π prerequisite –¥–ª—è —ç—Ç–æ–π —Ç–µ–º—ã.

**[[network-tcpdump-wireshark]]** ‚Äî Packet analysis —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ performance-–ø—Ä–æ–±–ª–µ–º: retransmissions, window scaling issues, slow start behavior –∏ congestion events –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–∞–∫–µ—Ç–æ–≤. –ë–µ–∑ –Ω–∞–≤—ã–∫–æ–≤ —Ä–∞–±–æ—Ç—ã —Å tcpdump –∏ Wireshark –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ—Ç sysctl-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∏–ª–∏ –Ω–∞–π—Ç–∏ bottleneck –≤ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏. –ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã packet analysis –ø–µ—Ä–µ–¥ –≥–ª—É–±–æ–∫–∏–º –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ–º –≤ performance optimization.

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —á—Ç–µ–Ω–∏–µ

- **Fall, Stevens (2011).** *TCP/IP Illustrated, Vol. 1 (2nd ed).* ‚Äî –Ω–∞–∏–±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ TCP-–º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ (congestion control, window scaling, timers), –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º performance optimization; –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç–æ–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞.
- **Grigorik (2013).** *High Performance Browser Networking.* ‚Äî –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TCP, TLS –∏ HTTP —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏ –∏ benchmarks; –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–∞ –≥–ª–∞–≤–∞ –æ TCP tuning –∏ mobile networking.
- **Comer (2015).** *Internetworking with TCP/IP.* ‚Äî —Å–∏—Å—Ç–µ–º–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ TCP/IP —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å; –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è bandwidth-delay product –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É—Ñ–µ—Ä–æ–≤.

---

## –ü—Ä–æ–≤–µ—Ä—å —Å–µ–±—è

> [!question]- –¢—ã –Ω–∞—à–µ–ª –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –Ω–∞–±–æ—Ä sysctl-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è "—É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–µ—Ç–∏" –∏ —Ö–æ—á–µ—à—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ production-—Å–µ—Ä–≤–µ—Ä. –ü–æ—á–µ–º—É —ç—Ç–æ –æ–ø–∞—Å–Ω–æ –∏ –∫–∞–∫–æ–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥?
> –°–ª–µ–ø–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ sysctl –æ–ø–∞—Å–Ω–æ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º: 1) –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (bandwidth, RTT, load pattern) ‚Äî —Ç–æ, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç 10Gbps —Å–µ—Ä–≤–µ—Ä, –º–æ–∂–µ—Ç –Ω–∞–≤—Ä–µ–¥–∏—Ç—å 100Mbps. 2) –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∑–∞–∏–º–æ–∑–∞–≤–∏—Å–∏–º—ã (–±—É—Ñ–µ—Ä—ã, backlog, congestion control). 3) –ü–∞—Ä–∞–º–µ—Ç—Ä tcp_tw_recycle —É–¥–∞–ª–µ–Ω –∏–∑ —è–¥—Ä–∞ 4.12, –∞ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —è–¥—Ä–∞—Ö –ª–æ–º–∞–µ—Ç NAT. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥: 1) –ò–∑–º–µ—Ä–∏—Ç—å baseline (iperf3, curl timing). 2) –ú–µ–Ω—è—Ç—å –ø–æ –æ–¥–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É –∑–∞ —Ä–∞–∑. 3) –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π (wrk, hey). 4) –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å baseline. 5) –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.

> [!question]- –°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CUBIC congestion control. –ò–Ω–∂–µ–Ω–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ BBR. –í –∫–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö BBR –±—É–¥–µ—Ç –ª—É—á—à–µ, –∞ –≤ –∫–∞–∫–∏—Ö -- —Ö—É–∂–µ?
> BBR –ª—É—á—à–µ –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö —Å –≤—ã—Å–æ–∫–∏–º RTT –∏ packet loss (–º–µ–∂–∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–ª—å–Ω—ã–µ, –º–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏), –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç bottleneck bandwidth –∏ –Ω–µ —Å–Ω–∏–∂–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Ç–∞–∫ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤. BBR —Ö—É–∂–µ (–∏–ª–∏ –Ω–µ –ª—É—á—à–µ) –Ω–∞: 1) LAN —Å –Ω–∏–∑–∫–∏–º RTT ‚Äî CUBIC —É–∂–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç max throughput. 2) –ü—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ —Å CUBIC-–ø–æ—Ç–æ–∫–∞–º–∏ ‚Äî BBR –º–æ–∂–µ—Ç –∑–∞–±–∏—Ä–∞—Ç—å –Ω–µ–ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–Ω–æ–≥–æ bandwidth. 3) –ù–∞ CPU-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö ‚Äî BBR —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π. –ü—Ä–∞–≤–∏–ª–æ: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å iperf3 -t 60 —Å BBR –∏ CUBIC, —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å throughput –∏ retransmissions.

> [!question]- iperf3 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç throughput 950 Mbps –Ω–∞ –≥–∏–≥–∞–±–∏—Ç–Ω–æ–º –ª–∏–Ω–∫–µ, –Ω–æ —Ä–µ–∞–ª—å–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ–¥–ª–µ–Ω–Ω–æ. –ü–æ—á–µ–º—É throughput –∏ application performance -- —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏?
> iperf3 –∏–∑–º–µ—Ä—è–µ—Ç raw TCP throughput –≤ –∏–¥–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö: –æ–¥–∏–Ω –¥–ª–∏–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ—Ç application logic, –Ω–µ—Ç TLS overhead, –Ω–µ—Ç DNS lookup. –†–µ–∞–ª—å–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∏–º–µ—é—Ç: 1) –ú–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä (–Ω–µ —É—Å–ø–µ–≤–∞—é—Ç –≤—ã–π—Ç–∏ –∏–∑ TCP slow start). 2) TLS handshake overhead. 3) Application processing time (–ë–î, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞). 4) –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –¥–ª–∏–Ω–Ω–æ–≥–æ. 5) Head-of-line blocking (HTTP/1.1). –ü–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –±–µ–Ω—á–º–∞—Ä–∫–∏—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (wrk, hey), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ raw TCP.

---

## –ö–ª—é—á–µ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏

BBR vs CUBIC
?
CUBIC ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π congestion control Linux, —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ø–æ—Ç–µ—Ä—é –ø–∞–∫–µ—Ç–æ–≤ —Å–Ω–∏–∂–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏. BBR ‚Äî –º–æ–¥–µ–ª—å –æ—Ç Google, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç bottleneck bandwidth –∏ RTT, –º–µ–Ω–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω –ø—Ä–∏ –ø–æ—Ç–µ—Ä—è—Ö. BBR –ª—É—á—à–µ –Ω–∞ –≤—ã—Å–æ–∫–ælatency —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö —Å –ø–æ—Ç–µ—Ä—è–º–∏.

Bandwidth-Delay Product (BDP)
?
BDP = Bandwidth x RTT. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö "–≤ –ø–æ–ª–µ—Ç–µ" –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º. TCP –±—É—Ñ–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å >= BDP –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞. –ü—Ä–∏–º–µ—Ä: 1 Gbps x 50ms = 6.25 MB.

sysctl net.core.rmem_max / wmem_max
?
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä receive/send –±—É—Ñ–µ—Ä–æ–≤ —Å–æ–∫–µ—Ç–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ –¥–ª—è –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 16 MB (16777216) –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤. –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TCP –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –±—É—Ñ–µ—Ä—ã –¥–æ —ç—Ç–æ–≥–æ –ª–∏–º–∏—Ç–∞.

TLS 1.3 vs TLS 1.2
?
TLS 1.3: 1-RTT handshake (–≤–º–µ—Å—Ç–æ 2-RTT –≤ TLS 1.2), –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 0-RTT –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –º–µ–Ω—å—à–µ cipher suites (—Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ). –£—Å–∫–æ—Ä—è–µ—Ç –∫–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ 1 RTT.

gzip vs Brotli
?
Brotli –¥–∞–µ—Ç –Ω–∞ 15-25% –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ —á–µ–º gzip –ø—Ä–∏ —Å—Ö–æ–∂–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è 98% –±—Ä–∞—É–∑–µ—Ä–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–π Brotli –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∂–∞—Ç—ã–µ —Ñ–∞–π–ª—ã), gzip –∫–∞–∫ fallback. –ù–µ —Å–∂–∏–º–∞–π —É–∂–µ —Å–∂–∞—Ç–æ–µ (JPEG, PNG, WOFF2).

QUIC vs TCP –¥–ª—è production
?
QUIC –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö (connection migration), –≤—ã—Å–æ–∫–æ–º packet loss (independent streams), –∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (0-RTT). TCP –ª—É—á—à–µ –Ω–∞ LAN (–º–µ–Ω—å—à–µ CPU overhead), –¥–ª—è bulk transfers, –∏ –∫–æ–≥–¥–∞ middleboxes –±–ª–æ–∫–∏—Ä—É—é—Ç UDP. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.

–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞
?
1) –ò–∑–º–µ—Ä–∏—Ç—å baseline –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π. 2) –¢–µ—Å—Ç—ã 60+ —Å–µ–∫—É–Ω–¥ (short tests –Ω–µ—Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã). 3) –ú–∏–Ω–∏–º—É–º 3 –ø—Ä–æ–≥–æ–Ω–∞, –±—Ä–∞—Ç—å median. 4) –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è (–≤—Ä–µ–º—è, load). 5) –ò–∑–º–µ—Ä—è—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (wrk), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ raw TCP (iperf3).

---

## –ö—É–¥–∞ –¥–∞–ª—å—à–µ

| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ö—É–¥–∞ | –ó–∞—á–µ–º |
|-------------|------|-------|
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ | [[network-latency-optimization]] | Percentiles, CDN, connection pooling |
| –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å | [[network-transport-layer]] | TCP congestion control, window scaling |
| –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–æ–≤ | [[network-tcpdump-wireshark]] | –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—Ç sysctl-—Ç—é–Ω–∏–Ω–≥–∞ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | [[network-observability]] | –ú–µ—Ç—Ä–∏–∫–∏ throughput –∏ latency |
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | [[network-troubleshooting-advanced]] | –ü–æ–∏—Å–∫ performance bottlenecks |
| –û–±–∑–æ—Ä —Ä–∞–∑–¥–µ–ª–∞ | [[networking-overview]] | –ö–∞—Ä—Ç–∞ –≤—Å–µ—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ —Å–µ—Ç—è–º |

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-09 ‚Äî –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏: 5 –∞–Ω–∞–ª–æ–≥–∏–π (—Ç—Ä—É–±–∞ —Å –≤–æ–¥–æ–π bandwidth/throughput/latency, TCP –±—É—Ñ–µ—Ä—ã –∫–∞–∫ —Å–∫–ª–∞–¥—ã –≤–¥–æ–ª—å —à–æ—Å—Å–µ, congestion control BBR/CUBIC –∫–∞–∫ —Å—Ç–∏–ª–∏ –≤–æ–∂–¥–µ–Ω–∏—è, backlog –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—É, –ø–∏—Ä–∞–º–∏–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏), 6 —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ —Å –°–ò–ú–ü–¢–û–ú/–†–ï–®–ï–ù–ò–ï (—Å–ª–µ–ø–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ sysctl, BBR –≤–µ–∑–¥–µ –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ tcp_timestamps, –æ–≥—Ä–æ–º–Ω—ã–µ –±—É—Ñ–µ—Ä—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ baseline, tcp_tw_recycle —É–¥–∞–ª—ë–Ω), 5 –º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (MICM cycle measure‚Üíidentify‚Üíchange‚Üímeasure, trade-offs matrix, BDP calculator, checklists –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, debugging funnel)*
