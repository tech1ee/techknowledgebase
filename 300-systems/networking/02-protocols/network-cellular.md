---
title: "Сотовые сети: от GSM до 5G"
created: 2025-12-18
modified: 2026-02-13
type: concept
status: published
confidence: high
sources_verified: true
tags:
  - topic/networking
  - networking/wireless
  - networking/cellular
  - type/concept
  - level/intermediate
related:
  - "[[network-wireless-iot]]"
  - "[[network-physical-layer]]"
prerequisites:
  - "[[network-physical-layer]]"
  - "[[network-fundamentals-for-developers]]"
reading_time: 113
difficulty: 6
study_status: not_started
mastery: 0
last_reviewed:
next_review:
---

# Сотовые сети: от GSM до 5G

## Prerequisites

Прежде чем изучать сотовые сети, рекомендуется понимать:

| Тема | Зачем нужно | Где изучить |
|------|-------------|-------------|
| **Радиоволны и частоты** | Понимание спектра, MHz/GHz, как распространяется сигнал | Базовая физика |
| **Модуляция** | QAM, OFDM — как биты кодируются в радиосигнал | [[network-physical-layer]] |
| **IP-сети** | LTE/5G — полностью IP-based, VoLTE работает через IP | [[networking-overview]] |
| **IoT протоколы** | NB-IoT/LTE-M часто сравнивают с LoRa, Zigbee | [[network-wireless-iot]] |

### Для кого этот материал

| Уровень | Подходит? | Рекомендация |
|---------|-----------|--------------|
| **Новичок** | ✅ Да | Обзорное понимание |
| **Intermediate** | ✅ Да | Мобильная разработка |
| **Advanced** | ✅ Да | 5G, network slicing |

### Терминология для новичков

> 💡 **Сотовая сеть** = радиосеть для телефонов. "Соты" — это зоны покрытия от вышек. Телефон переключается между сотами автоматически.

| Термин | Значение | Аналогия для новичка |
|--------|----------|---------------------|
| **GSM/2G** | Первая цифровая связь | **Первые мобильники** — звонки и SMS |
| **3G** | Мобильный интернет | **Интернет в кармане** — YouTube на телефоне |
| **4G/LTE** | Быстрый мобильный интернет | **Домашний интернет на телефоне** |
| **5G** | Сверхбыстрый с низкой задержкой | **Будущее** — VR, автономные машины |
| **Cell/Сота** | Зона покрытия одной вышки | **Район одной вышки** |
| **Handover** | Переключение между вышками | **Передача эстафеты** — без разрыва |
| **SIM** | Идентификатор абонента | **Паспорт в сети** — кто ты |
| **Roaming** | Работа в другой сети | **Гость в чужой стране** |
| **NB-IoT** | IoT через сотовую сеть | **SMS для датчиков** |
| **Latency** | Задержка сигнала | **Время отклика** — 4G: 30ms, 5G: 1ms |

---

## Часть 1: Интуиция без кода

> 🎯 **Цель секции:** Понять сотовые сети через знакомые аналогии, прежде чем погружаться в технические детали поколений.

### Аналогия 1: Поколения как Эволюция Транспорта

**Путаница:** "Зачем мне 5G если 4G работает нормально?"

```
ЭВОЛЮЦИЯ СОТОВЫХ СЕТЕЙ

Generation │ Аналогия          │ Скорость    │ Latency  │ Главная фича
───────────┼───────────────────┼─────────────┼──────────┼─────────────────
1G (1980)  │ 🐴 Лошадь        │ 2.4 kbps    │ N/A      │ Первый мобильный
           │                   │             │          │ голос

2G (1991)  │ 🚗 Первый авто   │ 14 kbps     │ 300-600ms│ SMS, шифрование
           │                   │ (GPRS)      │          │

3G (2001)  │ 🚌 Автобус       │ 2-14 Mbps   │ 100-500ms│ Мобильный интернет
           │                   │             │          │ YouTube на телефоне

4G (2010)  │ 🚄 Скоростной    │ 50-150 Mbps │ 20-50ms  │ HD видео, VoLTE
           │    поезд         │             │          │ Полностью IP

5G (2020)  │ 🚀 3 в 1:        │ 1-10 Gbps   │ 1-10ms   │ eMBB + URLLC + mMTC
           │ Ракета + Метро   │             │          │ VR/AR, IoT, автопилот
           │ + Почтовые дроны │             │          │
───────────┴───────────────────┴─────────────┴──────────┴─────────────────

ЗАЧЕМ НУЖНЫ РАЗНЫЕ ПОКОЛЕНИЯ:

1G → 2G: Аналог → Цифра (безопасность, SMS)
2G → 3G: Голос → Данные (интернет на телефоне)
3G → 4G: Узкая полоса → Широкая (HD видео)
4G → 5G: Одна задача → Три сценария (скорость + задержка + IoT)
```

**Ключевой инсайт:**
> "Каждое поколение решало ОДНУ главную проблему предыдущего. 5G — первое поколение, которое решает ТРИ разные задачи одновременно."

---

### Аналогия 2: Соты как Районы города

**Проблема:** Почему сеть называется "сотовой"?

```
ПОЧЕМУ СОТЫ, А НЕ ОДНА БОЛЬШАЯ ВЫШКА?

ПЛОХО: Одна мощная вышка на город
┌─────────────────────────────────────────────────────────────┐
│                                                              │
│                          📡                                  │
│                    (одна вышка)                              │
│                      /   |   \                               │
│                    /     |     \                             │
│                  📱    📱    📱                             │
│                  📱    📱    📱   ← Все толкутся на одной   │
│                  📱    📱    📱      частоте → ПЕРЕГРУЗКА!  │
│                                                              │
│  • 100 пользователей = 100 на одной частоте                 │
│  • Далеко от вышки = слабый сигнал                          │
│  • Одна вышка сломалась = город без связи                   │
└─────────────────────────────────────────────────────────────┘

ХОРОШО: Много маленьких сот
┌─────────────────────────────────────────────────────────────┐
│                                                              │
│    ┌──────┐     ┌──────┐     ┌──────┐                       │
│    │  📡  │     │  📡  │     │  📡  │                       │
│    │Сота 1│     │Сота 2│     │Сота 3│                       │
│    │freq A│     │freq B│     │freq A│  ← Частота A снова!   │
│    │ 📱📱 │     │ 📱📱 │     │ 📱📱 │                       │
│    └──────┘     └──────┘     └──────┘                       │
│                                                              │
│  • Частоты ПЕРЕИСПОЛЬЗУЮТСЯ в несмежных сотах               │
│  • Близко к вышке = сильный сигнал везде                    │
│  • Одна сота сломалась = соседние подхватят                 │
│                                                              │
│  100 пользователей × 10 сот = по 10 на частоту!             │
└─────────────────────────────────────────────────────────────┘
```

**Почему соты шестиугольные в теории, но не на практике:**
> На бумаге соты рисуют как пчелиные соты (шестиугольники), потому что они идеально покрывают плоскость. В реальности сигнал распространяется неравномерно из-за зданий, рельефа, помех — соты имеют неправильную форму.

---

### Аналогия 3: Handover — Эстафетная палочка

**Проблема:** Почему звонок не обрывается когда я еду в машине?

```
HANDOVER: Передача соединения между сотами

Ты едешь на машине и разговариваешь:

  t=0s        t=5s        t=10s       t=15s
    │           │           │           │
    ▼           ▼           ▼           ▼
┌───────┐   ┌───────┐   ┌───────┐   ┌───────┐
│Сота 1 │   │Сота 1 │   │Сота 2 │   │Сота 2 │
│ 📡    │   │ 📡    │   │ 📡    │   │ 📡    │
│  📱→  │   │   📱→ │   │→📱   │   │  →📱  │
│ 100%  │   │  60%  │   │  70%  │   │  100% │
│сигнал │   │сигнал │   │сигнал │   │сигнал │
└───────┘   └───────┘   └───────┘   └───────┘
            ▲                   ▲
            │                   │
    Телефон измеряет    Сеть переключает
    сигнал соседних     на Соту 2 (handover)
    сот и сообщает

ЧТО ПРОИСХОДИТ ПОД КАПОТОМ:

1. Телефон постоянно "слушает" соседние соты
2. Когда сигнал Соты 2 > Соты 1, телефон сообщает сети
3. Сеть решает: "Пора переключать!"
4. Сеть готовит Соту 2: "Сейчас к тебе придёт этот абонент"
5. Соединение переключается за ~50ms (ты не замечаешь)
6. Сота 1 освобождает ресурсы
```

**Типы handover:**
| Тип | Когда происходит | Пример |
|-----|-----------------|--------|
| **Intra-frequency** | Между сотами на одной частоте | Едешь по городу |
| **Inter-frequency** | Между разными частотами | Из центра в пригород |
| **Inter-RAT** | Между поколениями (4G→3G) | Потеря 4G покрытия |

---

### Аналогия 4: 5G три сценария — Три типа транспорта

**Проблема:** "5G просто быстрее 4G?" — Нет, это фундаментально другая архитектура!

```
5G = ТРИ РАЗНЫХ СЕТИ В ОДНОЙ

┌─────────────────────────────────────────────────────────────────────┐
│                          5G SCENARIOS                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  1. eMBB (Enhanced Mobile Broadband) — 🚀 РАКЕТА                    │
│     ────────────────────────────────────────────                    │
│     • До 10 Gbps скорость                                           │
│     • 4K/8K видеостриминг                                           │
│     • VR/AR приложения                                              │
│     • Загрузка фильма за секунды                                    │
│                                                                      │
│     Аналогия: Грузовой самолёт — много груза, быстро                │
│                                                                      │
│  2. URLLC (Ultra-Reliable Low-Latency) — 🏎️ ФОРМУЛА-1              │
│     ────────────────────────────────────────────                    │
│     • Latency < 1ms                                                  │
│     • 99.999% надёжность                                            │
│     • Автопилот                                                      │
│     • Удалённая хирургия                                            │
│     • Промышленные роботы                                           │
│                                                                      │
│     Аналогия: Скорая помощь — мало груза, но МГНОВЕННО              │
│                                                                      │
│  3. mMTC (Massive Machine-Type Communications) — 📬 ПОЧТОВЫЕ ДРОНЫ │
│     ────────────────────────────────────────────                    │
│     • До 1 млн устройств на км²                                     │
│     • Минимальное энергопотребление                                 │
│     • IoT датчики                                                    │
│     • Умный город                                                    │
│     • 10 лет на батарейке                                           │
│                                                                      │
│     Аналогия: Почтовые голуби — крошечные сообщения, миллионы       │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘

НЕЛЬЗЯ ИМЕТЬ ВСЁ СРАЗУ:

              Скорость
                 ▲
                 │      eMBB
                 │      ●
                 │
                 │
    Latency ◄────┼────► Плотность
         URLLC  │       mMTC
           ●    │         ●
                │
```

**Ключевой инсайт:**
> "5G — это не просто '4G быстрее'. Это три разных сети, оптимизированных под три противоположных требования: много данных (eMBB), мгновенный отклик (URLLC), миллионы устройств (mMTC)."

---

### Аналогия 5: Network Slicing — Выделенные полосы на шоссе

**Проблема:** Как одна сеть может обслуживать и VR-игры и кардиостимуляторы?

```
NETWORK SLICING: Виртуальные сети внутри одной физической

БЕЗ SLICING (4G):
┌─────────────────────────────────────────────────────────────┐
│                    ОДНА СЕТЬ ДЛЯ ВСЕХ                        │
│                                                              │
│  🎮 Gamer      🏥 Кардио     📱 Телефон    🚗 Автопилот     │
│     │              │             │              │            │
│     └──────────────┴─────────────┴──────────────┘            │
│                         │                                    │
│                  Общая очередь                               │
│                  Общие ресурсы                               │
│                                                              │
│  Проблема: Загрузка видео может задержать сигнал автопилота!│
└─────────────────────────────────────────────────────────────┘

С NETWORK SLICING (5G):
┌─────────────────────────────────────────────────────────────┐
│                    ВИРТУАЛЬНЫЕ СЕТИ                          │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ SLICE 1: eMBB (best effort)                          │   │
│  │ 🎮 Gaming    📱 Streaming    📷 Social media         │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ SLICE 2: URLLC (guaranteed latency <1ms)             │   │
│  │ 🏥 Medical    🚗 Automotive    🏭 Industrial         │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │ SLICE 3: mMTC (massive IoT)                          │   │
│  │ 🌡️ Sensors    📍 Trackers    🔔 Alarms               │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
│  Каждый slice = своя виртуальная сеть с гарантиями!         │
└─────────────────────────────────────────────────────────────┘
```

---

## Часть 2: Почему это сложно

> ⚠️ **Цель секции:** Разобрать типичные проблемы и ошибки при работе с сотовыми сетями.

### Ошибка 1: "5G покрытие = 5G скорость"

**СИМПТОМ:**
```
Телефон показывает "5G", но speedtest даёт 50 Mbps (как 4G)
```

**Проблема:**
```
5G бывает РАЗНЫЙ:

┌─────────────────────────────────────────────────────────────┐
│  Тип 5G      │ Частота      │ Скорость  │ Покрытие         │
├──────────────┼──────────────┼───────────┼──────────────────┤
│ 5G Low-band  │ 600-900 MHz  │ 30-250    │ Широкое          │
│ (DSS)        │              │ Mbps      │ (как 4G)         │
├──────────────┼──────────────┼───────────┼──────────────────┤
│ 5G Mid-band  │ 2.5-3.7 GHz  │ 100-900   │ Среднее          │
│ (Sub-6)      │              │ Mbps      │ (город)          │
├──────────────┼──────────────┼───────────┼──────────────────┤
│ 5G mmWave    │ 24-47 GHz    │ 1-4 Gbps  │ Узкое            │
│              │              │           │ (стадионы,вокзалы)│
└──────────────┴──────────────┴───────────┴──────────────────┘

"5G" на телефоне может быть:
• DSS (Dynamic Spectrum Sharing) — 4G частоты с 5G протоколом
• Реальный Mid-band — хорошая скорость
• mmWave — космическая скорость, но редко
```

**РЕШЕНИЕ:**
```
Как проверить реальный 5G:

1. Посмотреть частоту в Field Test Mode:
   • iPhone: *3001#12345#* → LTE → Serving Cell Info → freq_band_ind
   • Android: *#*#4636#*#* → Phone Information → Band

2. Интерпретация:
   • Band n71, n5 = Low-band (похоже на 4G)
   • Band n41, n77, n78 = Mid-band (реальный 5G)
   • Band n260, n261 = mmWave (сверхбыстрый)

3. Speedtest в разных местах:
   • На улице рядом с вышкой vs в помещении
   • Разница > 3x = вероятно mid-band или mmWave
```

---

### Ошибка 2: Игнорирование разницы 4G и VoLTE

**СИМПТОМ:**
```
"Выключил VoLTE — звонки стали хуже и 4G пропадает во время звонка"
```

**Проблема:**
```
ДО VoLTE (CSFB — Circuit Switched Fallback):

  📱 4G ─────┬───── Звонок приходит!
             │
             ▼
  📱 3G ─────┬───── Голос по 3G (circuit switched)
             │
          (звонок)
             │
             ▼
  📱 4G ─────────── Звонок закончился, возврат на 4G

Проблема:
• Переключение 4G→3G→4G = 2-5 секунд
• Потеря данных во время звонка
• Хуже качество голоса

С VoLTE (Voice over LTE):

  📱 4G ─────┬───── Звонок приходит!
             │
             ▼
  📱 4G ─────┬───── Голос как IP-пакеты (VoIP)
             │      + Данные продолжают работать!
          (звонок)
             │
             ▼
  📱 4G ─────────── Звонок закончился

Преимущества:
• HD Voice (16 kHz vs 8 kHz)
• Мгновенное соединение
• Данные работают во время звонка
```

**РЕШЕНИЕ:**
```
Всегда включайте VoLTE если доступно:
• iPhone: Настройки → Сотовая связь → Параметры данных → Голос и данные → LTE, VoLTE вкл.
• Android: Настройки → Сеть → Мобильная сеть → VoLTE → Включить

Если VoLTE недоступен:
• Проверьте поддержку оператором
• Убедитесь что SIM активирована для VoLTE
• Обновите прошивку телефона
```

---

### Ошибка 3: NB-IoT/LTE-M вместо LoRa "потому что сотовое"

**СИМПТОМ:**
```
"Сотовый IoT надёжнее, везде покрытие!"
Через год: SIM-карты стоят $2000/год на 100 датчиков.
```

**Проблема:**
```
СРАВНЕНИЕ IoT ПРОТОКОЛОВ:

                │ NB-IoT / LTE-M  │ LoRa
────────────────┼─────────────────┼──────────────────
Покрытие        │ Где есть сотовая│ Где поставил gateway
                │ сеть оператора  │
────────────────┼─────────────────┼──────────────────
Стоимость SIM   │ $1-5/мес/устр.  │ $0 (своя сеть)
                │                 │ <$1/год (TTN)
────────────────┼─────────────────┼──────────────────
За 100 устройств│ $1200-6000/год  │ $300 gateway один раз
/год            │                 │
────────────────┼─────────────────┼──────────────────
Батарея         │ 5-10 лет        │ 10+ лет
────────────────┼─────────────────┼──────────────────
Дальность       │ Зависит от соты │ 2-15 км от gateway
────────────────┼─────────────────┼──────────────────
Контроль        │ Оператор        │ Свой
```

**РЕШЕНИЕ:**
```
МАТРИЦА ВЫБОРА:

Используйте NB-IoT/LTE-M если:
✅ Устройства разбросаны по большой территории (страна/мир)
✅ Нужна гарантия покрытия без своей инфраструктуры
✅ Малое количество устройств (< 50)
✅ Готовы платить за надёжность

Используйте LoRa если:
✅ Устройства локализованы (ферма, завод, кампус)
✅ Много устройств (> 100)
✅ Хотите контроль и экономию
✅ Можете поставить свой gateway
```

---

### Ошибка 4: Недооценка latency для реал-тайм приложений

**СИМПТОМ:**
```
"4G достаточно быстрый для нашей игры/VR"
Результат: 50-100ms latency → игра "лагает"
```

**Проблема:**
```
LATENCY BREAKDOWN (типичный 4G запрос):

┌─────────────────────────────────────────────────────────────┐
│                  LATENCY КОМПОНЕНТЫ                          │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  Телефон → eNodeB (вышка):                                  │
│  • Radio Frame: 10ms                                         │
│  • HARQ retransmission: 8ms (если нужен)                    │
│  • Scheduling delay: 5-15ms                                  │
│                                      Subtotal: 20-35ms      │
│                                                              │
│  eNodeB → EPC (Core Network):                               │
│  • Backhaul: 5-20ms (зависит от оператора)                  │
│                                      Subtotal: 5-20ms       │
│                                                              │
│  EPC → Internet → Server:                                   │
│  • Routing: 10-50ms                                          │
│                                      Subtotal: 10-50ms      │
│                                                              │
│  ИТОГО RTT: 70-200ms (4G)                                   │
│  ИТОГО RTT: 10-30ms (5G URLLC)                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**РЕШЕНИЕ:**
```
ДЛЯ LATENCY-КРИТИЧНЫХ ПРИЛОЖЕНИЙ:

1. Используйте 5G URLLC где доступно
   • Требуйте slice с гарантией latency
   • Проверяйте поддержку устройством

2. Минимизируйте расстояние до сервера
   • Edge Computing: сервер рядом с вышкой
   • CDN для статики

3. Оптимизируйте протокол
   • UDP вместо TCP где возможно
   • QUIC для мультиплексирования
   • Compression для уменьшения payload

4. Планируйте на худший случай
   • 4G P99 latency: до 200ms
   • Буферизация, интерполяция на клиенте
```

---

### Ошибка 5: Roaming как "автоматически работает"

**СИМПТОМ:**
```
Приехал в другую страну, включил телефон — счёт $500 за день
```

**Проблема:**
```
ROAMING: Что происходит на самом деле

Дома:
  📱 ──► 🏠 Домашний оператор ──► Интернет
          (тариф: безлимит)

В роуминге:
  📱 ──► 🌍 Визитный оператор ──► 🏠 Домашний ──► Интернет
          (оптовая цена)           (+ маржа)

                                 ↑
            Цена = Визитный × Маржа × Конвертация

Типичные тарифы роуминга (без пакета):
• Данные: $5-20 за MB (!!)
• Звонки: $1-5 за минуту
• SMS: $0.5-1 за сообщение

100 MB фото в Instagram = $500-2000 💀
```

**РЕШЕНИЕ:**
```
ЧЕКЛИСТ ПЕРЕД ПОЕЗДКОЙ:

1. ПЕРЕД выездом:
   ☐ Купить роуминг-пакет у оператора
   ☐ Или: купить eSIM/локальную SIM
   ☐ Отключить "Данные в роуминге" по умолчанию
   ☐ Отключить автозагрузку фото в облако

2. В АЭРОПОРТУ назначения:
   ☐ WiFi для срочного
   ☐ Купить локальную SIM если нужно много данных

3. ПРОВЕРИТЬ настройки:
   • iPhone: Настройки → Сотовая связь → Параметры данных → Роуминг данных → ВЫКЛ
   • Android: Настройки → Сеть → Мобильная сеть → Роуминг данных → ВЫКЛ

4. Современные альтернативы:
   • eSIM операторы (Airalo, Holafly)
   • Google Fi (автоматический роуминг)
   • WiFi + VoIP (WhatsApp, Telegram)
```

---

### Ошибка 6: Band compatibility "телефон работает везде"

**СИМПТОМ:**
```
Купил телефон из Китая, в России 4G не работает или работает плохо
```

**Проблема:**
```
LTE BANDS ПО РЕГИОНАМ:

Регион      │ Основные LTE Bands
────────────┼────────────────────────────────────────
США         │ B2, B4, B12, B13, B66, B71
Европа      │ B1, B3, B7, B20, B28
Китай       │ B1, B3, B38, B39, B40, B41
Россия      │ B3, B7, B20, B38
Япония      │ B1, B3, B8, B11, B18, B19, B21, B28

Китайский телефон может НЕ поддерживать:
• B20 (800 MHz) — основной для покрытия в РФ
• B7 (2600 MHz) — основной для скорости в РФ

Результат:
• 4G только в центре города
• Частые переключения на 3G
• Худшее время работы батареи
```

**РЕШЕНИЕ:**
```
ПЕРЕД ПОКУПКОЙ ТЕЛЕФОНА:

1. Узнать bands своего оператора:
   • МТС: B3, B7, B20, B38
   • МегаФон: B3, B7, B20, B38
   • Билайн: B3, B7, B20
   • Теле2: B3, B7, B38

2. Проверить specs телефона:
   • GSMArena → Model → Network → LTE bands
   • Должны быть ВСЕ bands вашего оператора

3. Глобальные модели безопаснее:
   • iPhone (global) — обычно все bands
   • Samsung Galaxy (международные) — обычно все bands
   • Xiaomi Global — проверять!
   • Китайские версии — часто не хватает bands
```

---

## Часть 3: Ментальные модели

> 🧠 **Цель секции:** Дать системные способы думать о сотовых сетях.

### Модель 1: Эволюция = Решение главной боли

**Принцип:** Каждое поколение решало ОДНУ критическую проблему предыдущего.

```
ЭВОЛЮЦИОННАЯ ЦЕПОЧКА:

1G → 2G: ПРОБЛЕМА = Безопасность и качество
         РЕШЕНИЕ = Цифровая передача, шифрование

2G → 3G: ПРОБЛЕМА = Невозможно передавать данные (только голос)
         РЕШЕНИЕ = Packet data, мобильный интернет

3G → 4G: ПРОБЛЕМА = Недостаточная скорость для видео
         РЕШЕНИЕ = All-IP архитектура, OFDM, 100+ Mbps

4G → 5G: ПРОБЛЕМА = Одна сеть не может обслужить разные требования
         РЕШЕНИЕ = Три сценария (eMBB, URLLC, mMTC), network slicing

ПРЕДСКАЗАНИЕ 6G (2030):

5G → 6G: ПРОБЛЕМА = ?
         Вероятные направления:
         • AI-native сеть (self-optimizing)
         • Terahertz частоты (100+ GHz)
         • Holographic communication
         • Подводная/космическая связь
```

---

### Модель 2: Частота как компромисс

**Принцип:** Высокая частота = больше скорость, меньше дальность.

```
СПЕКТР КОМПРОМИССОВ:

Частота (MHz/GHz)
     │
     │                                    mmWave
     │                                    24-100 GHz
 100 ┤                                    • 1-10 Gbps
     │                                    • 100-500 м
     │                                    • Не проходит сквозь стены
     │
  10 ┤                        Mid-band
     │                        2-6 GHz
     │                        • 100-900 Mbps
     │                        • 1-5 км
     │                        • Частично проходит сквозь стены
   1 ┤
     │            Low-band
     │            600-900 MHz
     │            • 30-250 Mbps
     │            • 10-30 км
     │            • Хорошо проходит сквозь стены
 0.1 ┤
     └────────────────────────────────────────────────►
              Дальность / Проникновение

ПРАВИЛО:
• Хочешь скорость? → Высокие частоты (mmWave, но близко к вышке)
• Хочешь покрытие? → Низкие частоты (медленнее, но везде)
• Хочешь баланс? → Mid-band (5G Sub-6)
```

---

### Модель 3: Архитектура поколений

**Принцип:** Каждое поколение упрощало и переходило на IP.

```
ЭВОЛЮЦИЯ АРХИТЕКТУРЫ:

2G/3G: Разделённые миры
┌──────────────────────────────────────────────────────────┐
│                                                           │
│  Голос (Circuit Switched)    Данные (Packet Switched)    │
│  ┌─────────────────────┐     ┌─────────────────────┐    │
│  │  MSC (Mobile        │     │  SGSN/GGSN          │    │
│  │  Switching Center)  │     │  (GPRS core)        │    │
│  └─────────────────────┘     └─────────────────────┘    │
│           │                           │                  │
│           ▼                           ▼                  │
│       PSTN (телефонная сеть)      Internet              │
│                                                           │
│  Проблема: Две отдельные инфраструктуры!                │
└──────────────────────────────────────────────────────────┘

4G LTE: Всё через IP
┌──────────────────────────────────────────────────────────┐
│                                                           │
│  ┌───────────────────────────────────────────────────┐  │
│  │            EPC (Evolved Packet Core)               │  │
│  │                                                    │  │
│  │   MME (Mobility) + SGW (Serving) + PGW (PDN)      │  │
│  └───────────────────────────────────────────────────┘  │
│                          │                               │
│                          ▼                               │
│                      Internet                            │
│                    (всё IP-пакеты!)                      │
│                                                           │
│  VoLTE = голос как VoIP пакеты через ту же сеть         │
└──────────────────────────────────────────────────────────┘

5G: Service-Based Architecture
┌──────────────────────────────────────────────────────────┐
│                                                           │
│  ┌───────────────────────────────────────────────────┐  │
│  │      5GC (5G Core) — микросервисы!                │  │
│  │                                                    │  │
│  │   AMF  SMF  UPF  AUSF  UDM  PCF  NRF  NSSF       │  │
│  │   │    │    │    │     │    │    │    │          │  │
│  │   └────┴────┴────┴─────┴────┴────┴────┘          │  │
│  │              API-based (HTTP/2, JSON)             │  │
│  └───────────────────────────────────────────────────┘  │
│                          │                               │
│            Network Slices (виртуальные сети)            │
│            ┌──────┬──────┬──────┐                       │
│            │eMBB  │URLLC │mMTC  │                       │
│            └──────┴──────┴──────┘                       │
└──────────────────────────────────────────────────────────┘
```

---

### Модель 4: Latency Budget для мобильных приложений

**Принцип:** Знай бюджет latency и планируй под него.

```
LATENCY TARGETS ПО ПРИМЕНЕНИЮ:

┌────────────────────────────────────────────────────────────┐
│ Применение          │ Max Latency │ Требуемая сеть        │
├─────────────────────┼─────────────┼───────────────────────┤
│ Веб-сёрфинг         │ 100-300ms   │ 3G достаточно         │
│ Видеозвонок         │ 150-400ms   │ 4G комфортно          │
│ VoIP голос          │ 150ms       │ 4G VoLTE              │
│ Онлайн-игры casual  │ 100-150ms   │ 4G                    │
│ Онлайн-игры FPS     │ 20-50ms     │ 5G или WiFi           │
│ VR/AR               │ 10-20ms     │ 5G eMBB               │
│ Автопилот           │ 1-10ms      │ 5G URLLC обязательно  │
│ Удалённая хирургия  │ 1ms         │ 5G URLLC + edge       │
│ Промышленные роботы │ 1-5ms       │ 5G URLLC private      │
└─────────────────────┴─────────────┴───────────────────────┘

ФОРМУЛА ПЛАНИРОВАНИЯ:

Total Latency = Radio + Backhaul + Core + Internet + Server + Обратно

Пример для игры (target: 50ms RTT):
• Radio (4G): 20ms × 2 = 40ms ← Уже почти бюджет!
• Backhaul: 10ms × 2 = 20ms ← Превысили!

Вывод: 4G НЕ подходит для 50ms RTT без edge computing
```

---

### Модель 5: Когда какую технологию использовать

**Принцип:** Дерево решений для выбора сотовой технологии.

```
ДЕРЕВО ВЫБОРА ТЕХНОЛОГИИ:

                        Начало
                           │
                           ▼
               ┌───────────────────────┐
               │ Нужна мобильность?    │
               └───────────┬───────────┘
                    │             │
                   ДА           НЕТ
                    │             │
                    ▼             ▼
         ┌──────────────┐    Рассмотри WiFi
         │ IoT или      │    или проводную
         │ смартфон?    │    связь
         └──────┬───────┘
           │         │
          IoT     Смартфон
           │         │
           ▼         ▼
    ┌────────────┐  ┌────────────────────┐
    │Батарея     │  │Latency критичен?   │
    │важна?      │  └─────────┬──────────┘
    └─────┬──────┘       │          │
      │       │         ДА        НЕТ
     ДА      НЕТ        │          │
      │       │         ▼          ▼
      ▼       ▼      5G URLLC   4G/5G eMBB
   NB-IoT   LTE-M
```

---

## Аналогия: Сотовые сети как транспортная система города

Представьте город с разными видами транспорта. Каждое поколение мобильной связи — это новый тип транспорта:

```
┌─────────────────────────────────────────────────────────────────────────┐
│           СОТОВЫЕ ПОКОЛЕНИЯ КАК ТРАНСПОРТ                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  📞 1G = Лошадь с повозкой (1980-е)                                     │
│     Первый личный транспорт. Медленно, ненадёжно, только для богатых.   │
│     Может "подслушать" любой проходящий (аналоговая, без шифрования).   │
│                                                                          │
│  📱 2G = Первые автомобили (1990-е)                                     │
│     Быстрее, комфортнее, есть "замок" (шифрование).                     │
│     Можно отправить записку (SMS) и небольшую посылку (GPRS данные).   │
│                                                                          │
│  🚗 3G = Автобан (2000-е)                                               │
│     Можно везти большие грузы (видео, музыка).                          │
│     Но если много машин — пробки (перегруженные соты).                  │
│                                                                          │
│  🚄 4G LTE = Скоростной поезд (2010-е)                                  │
│     Отдельная инфраструктура (all-IP), высокая скорость, надёжно.       │
│     Можно смотреть HD-видео на ходу!                                    │
│                                                                          │
│  ✈️ 5G = Персональный дрон + метро + гиперлуп (2020-е)                 │
│     Три типа маршрутов под разные задачи:                               │
│     • eMBB = Гиперлуп (очень быстро, для VR/AR)                         │
│     • URLLC = Экстренная скорая (мгновенно, для хирургии/автопилота)   │
│     • mMTC = Почтовые дроны (миллионы посылок, для IoT)                 │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘

ГЛАВНЫЙ ПРИНЦИП: Соты = Районы города

┌─────────────────────────────────────────────────────────────────────────┐
│                                                                          │
│     Город разделён на районы (соты). В каждом районе — своя            │
│     "автобусная станция" (базовая станция). Когда вы едете из          │
│     района в район, вас "передают" следующей станции (handover).       │
│                                                                          │
│     ┌─────┐   ┌─────┐   ┌─────┐                                        │
│     │ 📡  │───│ 📡  │───│ 📡  │   ← Базовые станции                    │
│     └──┬──┘   └──┬──┘   └──┬──┘                                        │
│        │         │         │                                            │
│     ┌──▼──┐   ┌──▼──┐   ┌──▼──┐                                        │
│     │Сота │   │Сота │   │Сота │   ← Зоны покрытия                      │
│     │  1  │   │  2  │   │  3  │                                        │
│     └─────┘   └─────┘   └─────┘                                        │
│                                                                          │
│     Телефон → → → → → → → → →   Переезжает из соты в соту              │
│               ↑                                                          │
│          Handover: "передаём" ваш звонок следующей станции             │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## ПОЧЕМУ: История и эволюция мобильных сетей

### Предпосылки создания сотовых сетей

До появления сотовых сетей радиотелефония использовала централизованные базовые станции с большой зоной покрытия. Такая архитектура имела критические ограничения:

- **Ограниченная емкость**: одна базовая станция могла обслуживать только несколько одновременных вызовов
- **Неэффективное использование спектра**: частоты не могли переиспользоваться
- **Отсутствие масштабируемости**: невозможность обслуживать растущее число абонентов

Концепция **сотовой архитектуры** решила эти проблемы через разделение территории на небольшие зоны (соты), каждая со своей базовой станцией. Частоты могли переиспользоваться в несмежных сотах, многократно увеличивая емкость сети.

### Эволюция поколений: решаемые проблемы

#### 1G (1980-е годы): Аналоговая связь
**Проблема**: отсутствие мобильной голосовой связи для массового рынка.

**Решение**: первые аналоговые системы (AMPS, NMT, TACS) обеспечили базовую мобильную голосовую связь.

**Ограничения**:
- Только голос, никаких данных
- Отсутствие шифрования (легко перехватывались)
- Низкое качество связи
- Отсутствие роуминга между странами

#### 2G (1990-е годы): Цифровая революция
**Проблема**: низкое качество, безопасность и эффективность использования спектра в 1G.

**Решение**: переход на цифровую передачу (GSM, CDMA).

**Ключевые достижения**:
- Шифрование и аутентификация (защита от клонирования)
- SMS и базовые данные (9.6-14.4 kbps)
- Международный роуминг
- Эффективное использование спектра через TDMA/CDMA

**Промежуточные этапы**:
- **2.5G (GPRS)**: пакетная передача данных до 114 kbps, концепция "always-on"
- **2.75G (EDGE)**: до 384 kbps, улучшенная модуляция (8-PSK)

#### 3G (2000-е годы): Эра мобильного интернета
**Проблема**: растущий спрос на мобильный интернет и мультимедиа, ограниченная пропускная способность 2G.

**Решение**: технологии UMTS/WCDMA и CDMA2000.

**Ключевые возможности**:
- Скорость до 384 kbps (базовый 3G), до 2 Mbps (UMTS)
- Видеозвонки и мобильное ТВ
- Мобильный интернет для браузинга

**Улучшения**:
- **3.5G (HSPA)**: до 14 Mbps downlink / 5.76 Mbps uplink
- **3.75G (HSPA+)**: до 42 Mbps downlink через MIMO и 64-QAM

#### 4G LTE (2010-е годы): Полностью IP-сеть
**Проблема**: недостаточная пропускная способность для HD-видео, игр и растущего числа подключенных устройств.

**Решение**: LTE (Long Term Evolution) - полностью пакетная архитектура.

**Революционные изменения**:
- All-IP архитектура (даже голос через VoLTE)
- Скорости до 100 Mbps (мобильные) / 1 Gbps (стационарные)
- Низкая задержка (~50 мс)
- OFDMA для эффективного использования спектра
- Упрощенная архитектура (eNodeB вместо NodeB + RNC)

**LTE-Advanced (4.5G)**:
- Carrier Aggregation: объединение нескольких несущих
- MIMO до 8x8
- Скорости до 3 Gbps

#### 5G (2020-е годы): Сеть для всего
**Проблема**: недостаточная скорость, задержка и емкость для Industry 4.0, автономных машин, массового IoT.

**Решение**: 5G NR (New Radio) с тремя основными сценариями использования.

**Три столпа 5G**:
1. **eMBB (Enhanced Mobile Broadband)**: до 20 Gbps downlink
2. **URLLC (Ultra-Reliable Low-Latency)**: задержка <1 мс, надежность 99.999%
3. **mMTC (Massive Machine-Type Communications)**: до 1 млн устройств на км²

**Ключевые технологии**:
- Network slicing: виртуальные изолированные сети на одной инфраструктуре
- Edge computing: обработка данных на краю сети
- Beam forming и massive MIMO

---

## ЧТО: Технологии и архитектура поколений

### Терминология сотовых сетей

| Термин | Определение | Применение |
|--------|-------------|------------|
| **Cell** | Географическая область покрытия одной базовой станции | Базовая единица сотовой сети |
| **Handover/Handoff** | Передача соединения между сотами при перемещении | Обеспечение непрерывности связи |
| **eNodeB (eNB)** | Evolved Node B - базовая станция LTE | 4G LTE |
| **gNodeB (gNB)** | Next Generation Node B - базовая станция 5G | 5G NR |
| **EPC** | Evolved Packet Core - ядро сети LTE | 4G LTE |
| **5GC** | 5G Core - ядро сети 5G | 5G NR |
| **MIMO** | Multiple Input Multiple Output - множественные антенны | Увеличение пропускной способности |
| **Carrier Aggregation** | Объединение нескольких частотных диапазонов | Увеличение скорости передачи |
| **QAM** | Quadrature Amplitude Modulation - квадратурная модуляция | Кодирование данных |
| **OFDMA** | Orthogonal Frequency-Division Multiple Access | Множественный доступ в LTE/5G |
| **Beamforming** | Направленная передача сигнала | Улучшение покрытия и емкости |
| **Network Slicing** | Виртуализация сети для разных сервисов | 5G |
| **MEC** | Multi-access Edge Computing - периферийные вычисления | Снижение задержек |
| **VoLTE** | Voice over LTE - голос через LTE | 4G голосовая связь |
| **VoNR** | Voice over New Radio - голос через 5G | 5G голосовая связь |

### Сравнительная таблица поколений (2G-5G)

| Параметр | 2G (GSM/CDMA) | 3G (UMTS/WCDMA) | 4G LTE | 5G NR |
|----------|---------------|-----------------|---------|--------|
| **Год внедрения** | 1991 | 2001 | 2009 | 2019 |
| **Технология доступа** | TDMA/CDMA | WCDMA/CDMA2000 | OFDMA/SC-FDMA | OFDMA/CP-OFDM |
| **Пиковая скорость DL** | 14.4 kbps (GPRS: 114 kbps) | 384 kbps (HSPA+: 42 Mbps) | 100 Mbps (LTE-A: 3 Gbps) | 20 Gbps |
| **Пиковая скорость UL** | 9.6 kbps | 128 kbps (HSPA+: 5.76 Mbps) | 50 Mbps (LTE-A: 1.5 Gbps) | 10 Gbps |
| **Задержка (latency)** | 300-1000 мс | 100-500 мс | 30-50 мс | 1-10 мс |
| **Ширина канала** | 200 кГц | 5 МГц | 1.4-20 МГц | 5-100 МГц (до 400 МГц mmWave) |
| **Частотные диапазоны** | 850/900/1800/1900 МГц | 850/900/1900/2100 МГц | 700-2600 МГц | 600 МГц - 71 ГГц (FR1/FR2) |
| **Архитектура ядра** | Circuit-switched | Circuit + Packet | All-IP (EPC) | Service-based (5GC) |
| **Модуляция** | GMSK | QPSK | QPSK/16QAM/64QAM | QPSK до 256QAM |
| **MIMO** | Нет | Нет | 2x2, 4x4, 8x8 | Massive MIMO (64/128/256 антенн) |
| **Основное применение** | Голос, SMS | Голос, базовый интернет | Мобильный широкополосный интернет | eMBB, URLLC, mMTC |
| **Плотность устройств** | ~1000/км² | ~5000/км² | ~100,000/км² | ~1,000,000/км² |
| **Спектральная эффективность** | 0.3 bps/Hz | 1 bps/Hz | 5 bps/Hz | 30 bps/Hz |
| **Энергоэффективность** | Базовая | Улучшенная | 100x vs 3G | 100x vs 4G |
| **Мобильность** | До 250 км/ч | До 350 км/ч | До 350 км/ч | До 500 км/ч |

### Архитектура LTE (4G)

#### Компоненты E-UTRAN (Access Network)

```
┌─────────────────────────────────────────────────────────────┐
│                    LTE Network Architecture                  │
│                                                              │
│  ┌─────┐        ┌──────────┐                                │
│  │ UE  │◄──Uu──►│  eNodeB  │                                │
│  └─────┘        │  (eNB)   │                                │
│                 └────┬─────┘                                │
│                      │ X2 (между eNB)                       │
│                      │ S1 (к EPC)                           │
│                 ┌────▼─────────────────────────────┐        │
│                 │   Evolved Packet Core (EPC)      │        │
│                 │                                  │        │
│                 │  ┌─────┐  ┌─────┐  ┌─────┐     │        │
│                 │  │ MME │  │S-GW │  │P-GW │     │        │
│                 │  └──┬──┘  └──┬──┘  └──┬──┘     │        │
│                 │     │        │        │         │        │
│                 │  ┌──▼────────▼────────▼───┐    │        │
│                 │  │   HSS    PCRF          │    │        │
│                 │  └────────────────────────┘    │        │
│                 └──────────────────┬──────────────┘        │
│                                    │                        │
│                                    ▼                        │
│                              ┌──────────┐                   │
│                              │ Internet │                   │
│                              └──────────┘                   │
└─────────────────────────────────────────────────────────────┘
```

#### eNodeB (Evolved Node B)
Базовая станция LTE, выполняющая функции:

**Радиоинтерфейс**:
- Управление радиоресурсами (Radio Resource Management)
- Планирование восходящего и нисходящего каналов
- Управление мощностью и адаптивная модуляция
- Beamforming и MIMO

**Мобильность**:
- Измерения качества сигнала
- Принятие решений о handover
- Координация с соседними eNodeB через X2

**Обработка данных**:
- Сжатие заголовков IP
- Шифрование данных пользователя
- Планирование QoS

**Интерфейсы**:
- **Uu**: к пользовательскому оборудованию (UE)
- **X2**: к другим eNodeB (для handover и координации интерференции)
- **S1-MME**: к MME (сигнализация)
- **S1-U**: к S-GW (пользовательские данные)

#### EPC (Evolved Packet Core) - Ядро сети

**MME (Mobility Management Entity)** - управление мобильностью:
- Аутентификация абонентов (через HSS)
- Управление сеансами (bearer management)
- Управление мобильностью (tracking area updates, handover)
- Выбор S-GW и P-GW
- Управление роумингом

**S-GW (Serving Gateway)** - шлюз обслуживания:
- Точка привязки для мобильности между eNodeB
- Маршрутизация пакетов пользователя
- Буферизация пакетов при пейджинге
- Сбор данных для тарификации

**P-GW (PDN Gateway)** - шлюз к внешним сетям:
- Выделение IP-адресов UE
- Фильтрация пакетов и QoS
- Точка подключения к интернету/внешним PDN
- Тарификация на основе правил (PCRF)
- Anchor point для handover между 3GPP и non-3GPP

**HSS (Home Subscriber Server)** - база данных абонентов:
- Профили абонентов (IMSI, аутентификационные данные)
- Информация о подписках (разрешенные сервисы, QoS)
- Местоположение абонента (текущая MME)

**PCRF (Policy and Charging Rules Function)** - правила и тарификация:
- Управление QoS на основе политик
- Динамические правила тарификации
- Управление полосой пропускания

### Архитектура 5G NR

#### Спектральные диапазоны 5G

**FR1 (Frequency Range 1): Sub-6 GHz**

Частоты: 450 МГц - 6 ГГц

**Характеристики**:
- Ширина покрытия: несколько километров
- Проникновение: отличное (через стены и препятствия)
- Скорость: 100-400 Mbps (типичная), до 5 Gbps (пиковая с carrier aggregation)
- Задержка: 10-20 мс

**Применение**:
- Основное покрытие для городских и сельских районов
- Замена существующим LTE-сетям
- Базовая мобильная широкополосная связь
- IoT и mMTC сценарии

**Популярные band'ы**:
- n78 (3.5 ГГц): основной диапазон в Европе и Азии
- n77 (3.3-4.2 ГГц): C-band, широко используется
- n41 (2.5 ГГц): TDD диапазон
- n71 (600 МГц): низкочастотный, отличное покрытие

**FR2 (Frequency Range 2): mmWave (миллиметровые волны)**

Частоты: 24 ГГц - 71 ГГц (типично 24-40 ГГц)

**Характеристики**:
- Ширина покрытия: 100-500 метров
- Проникновение: очень слабое (блокируется стенами, деревьями, дождем)
- Скорость: до 10 Gbps и выше
- Задержка: 1-5 мс
- Пропускная способность канала: до 400 МГц

**Применение**:
- Плотные городские районы (стадионы, аэропорты, торговые центры)
- Fixed Wireless Access (FWA) - домашний интернет
- Промышленные предприятия (smart factories)
- AR/VR приложения
- Enterprise IoT с высокими требованиями к скорости

**Популярные band'ы**:
- n260 (39 ГГц)
- n261 (28 ГГц)
- n257 (28 ГГц): основной в США
- n258 (26 ГГц): Европа

**Тренды 2025**:
- mmWave теряет популярность из-за высокой стоимости развертывания
- Apple убрала поддержку mmWave из iPhone 16e и iPad
- T-Mobile вернула лицензии mmWave обратно в FCC
- Фокус на Sub-6 GHz как основе глобального 5G
- mmWave остается нишевым решением для специфических применений

#### 5G Core (5GC) - Сервис-ориентированная архитектура

```
┌──────────────────────────────────────────────────────────────┐
│                    5G Network Architecture                    │
│                                                               │
│  ┌─────┐        ┌──────────┐                                 │
│  │ UE  │◄──NR──►│  gNodeB  │                                 │
│  └─────┘        │  (gNB)   │                                 │
│                 └────┬─────┘                                 │
│                      │ N2 (control) / N3 (data)             │
│                 ┌────▼──────────────────────────┐            │
│                 │   5G Core (5GC) - SBA         │            │
│                 │                               │            │
│                 │  ┌─────┐  ┌─────┐  ┌─────┐  │            │
│                 │  │ AMF │  │ SMF │  │ UPF │  │            │
│                 │  └─────┘  └─────┘  └──┬──┘  │            │
│                 │                       │      │            │
│                 │  ┌─────┐  ┌─────┐  ┌─▼───┐ │            │
│                 │  │ AUSF│  │ UDM │  │ PCF │ │            │
│                 │  └─────┘  └─────┘  └─────┘ │            │
│                 │                               │            │
│                 │  ┌──────────────────────┐   │            │
│                 │  │  Network Slicing     │   │            │
│                 │  └──────────────────────┘   │            │
│                 └──────────────┬───────────────┘            │
│                                │                             │
│                                ▼                             │
│                          ┌──────────┐                        │
│                          │ Internet │                        │
│                          │   /DN    │                        │
│                          └──────────┘                        │
└──────────────────────────────────────────────────────────────┘
```

**Ключевые отличия от EPC**:

1. **Service-Based Architecture (SBA)**:
   - Функции сети взаимодействуют через HTTP/2 REST API
   - Микросервисная архитектура
   - Динамическое обнаружение сервисов

2. **Разделение Control и User Plane**:
   - UPF может размещаться на краю сети (MEC)
   - Независимое масштабирование

3. **Network Slicing**:
   - Изолированные виртуальные сети на одной инфраструктуре
   - Разные SLA для разных сервисов

**Компоненты 5GC**:

- **AMF (Access and Mobility Management Function)**: управление доступом и мобильностью
- **SMF (Session Management Function)**: управление сеансами PDU
- **UPF (User Plane Function)**: маршрутизация пакетов (аналог S-GW/P-GW)
- **AUSF (Authentication Server Function)**: аутентификация
- **UDM (Unified Data Management)**: управление данными абонентов (аналог HSS)
- **PCF (Policy Control Function)**: управление политиками (аналог PCRF)
- **NRF (NF Repository Function)**: реестр сетевых функций
- **NEF (Network Exposure Function)**: экспозиция API для третьих сторон

#### Network Slicing - ключевая возможность 5G

**Концепция**: создание множественных виртуальных сетей на одной физической инфраструктуре, каждая с уникальными характеристиками.

**Типы слайсов**:

1. **eMBB Slice** (Enhanced Mobile Broadband):
   - Высокая пропускная способность
   - Умеренная задержка
   - Для видео 4K/8K, AR/VR

2. **URLLC Slice** (Ultra-Reliable Low-Latency):
   - Минимальная задержка (<1 мс)
   - Максимальная надежность (99.999%)
   - Для автономных машин, хирургии

3. **mMTC Slice** (Massive Machine-Type Communications):
   - Огромное количество устройств
   - Низкое энергопотребление
   - Для IoT сенсоров

**Реализация**:
- Изоляция на уровне RAN, Transport, Core
- Отдельные экземпляры AMF, SMF, UPF для каждого слайса
- SLA гарантии для каждого слайса

### Частоты и спектр

#### Лицензируемый спектр

| Диапазон | Частоты | Технологии | Характеристики |
|----------|---------|------------|----------------|
| Low-band | 600-900 МГц | 2G/3G/4G/5G | Отличное покрытие, низкая скорость |
| Mid-band | 1.8-2.6 ГГц | 3G/4G/5G | Баланс покрытия и скорости |
| C-band | 3.3-4.2 ГГц | 5G | Высокая скорость, хорошее покрытие |
| mmWave | 24-71 ГГц | 5G | Максимальная скорость, очень малое покрытие |

#### Нелицензируемый спектр

- **LTE-U/LAA (License Assisted Access)**: использование 5 ГГц Wi-Fi спектра для LTE
- **NR-U (5G NR Unlicensed)**: 5G в нелицензируемом спектре

---

## КАК: Практическое применение и IoT

### Cellular IoT: NB-IoT и LTE-M

#### Обзор LPWAN технологий для IoT

**LPWAN (Low Power Wide Area Network)** - технологии для IoT с низким энергопотреблением и большим покрытием:

- **Cellular**: NB-IoT, LTE-M (лицензируемый спектр)
- **Non-cellular**: LoRaWAN, Sigfox (нелицензируемый спектр)

**Преимущества Cellular IoT**:
- Использование существующей инфраструктуры операторов
- Встроенная безопасность и шифрование
- Надежность и QoS гарантии
- Международный роуминг (особенно LTE-M)
- Интеграция с 5G (coexist)

#### NB-IoT (Narrowband IoT)

**Технические характеристики**:
- **Стандарт**: 3GPP Release 13 (2016), улучшения в Release 14-17
- **Полоса частот**: 180 кГц (один PRB LTE)
- **Скорость данных**:
  - Downlink: до 250 kbps (Release 14)
  - Uplink: до 250 kbps (Release 14) / 1 Mbps (Release 17)
- **Задержка**: 1.6-10 секунд (в зависимости от режима)
- **MCL (Maximum Coupling Loss)**: 164 дБ - отличное проникновение
- **Батарея**: до 10 лет на одной батарейке
- **Плотность устройств**: до 1 млн устройств на км²

**Режимы развертывания**:
1. **Stand-alone**: в выделенном GSM диапазоне
2. **Guard band**: в защитной полосе LTE
3. **In-band**: внутри LTE диапазона (переиспользование PRB)

**Технологии энергосбережения**:
- **PSM (Power Saving Mode)**: глубокий сон с отключением радио
- **eDRX (Extended Discontinuous Reception)**: расширенные интервалы приема
- **Release Assistance Indication**: уведомление сети о завершении передачи

**Применение**:
- Умные счетчики (electricity, water, gas metering)
- Умные здания (HVAC, освещение, замки)
- Умные города (мониторинг парковок, мусорных баков)
- Сельское хозяйство (мониторинг почвы, скота)
- Логистика (отслеживание грузов)

**Ограничения**:
- Нет поддержки handover (только стационарные/медленные устройства)
- Высокая задержка (не для real-time)
- Ограниченный роуминг (по сравнению с LTE-M)

**Статистика 2025**:
- **137 операторских сетей** NB-IoT по всему миру
- **84% подключений** в Китае
- **20-23%** доля вне Китая (растет)
- Интеграция с сателлитами (Release 17): единое устройство для cellular + satellite

#### LTE-M (LTE for Machines / Cat-M1)

**Технические характеристики**:
- **Стандарт**: 3GPP Release 13 (2016)
- **Полоса частот**: 1.4 МГц (6 PRB LTE)
- **Скорость данных**:
  - Downlink: до 1 Mbps (Release 13) / 4 Mbps (5G)
  - Uplink: до 1 Mbps (Release 13)
- **Задержка**: 10-15 мс (low-latency)
- **MCL**: 160.7 дБ (4G) / 164 дБ (5G)
- **Батарея**: до 10 лет
- **Мобильность**: полная поддержка handover

**Ключевые возможности**:
- **VoLTE support**: голосовые вызовы (emergency calls, wearables)
- **Full mobility**: поддержка движущихся устройств
- **Роуминг**: широкая поддержка международного роуминга
- **Half-duplex**: упрощенная реализация для снижения стоимости

**Применение**:
- Носимые устройства (smartwatches, fitness trackers, медицинские устройства)
- Трекинг активов в движении (транспорт, контейнеры)
- Системы безопасности (сигнализации с голосовой связью)
- Connected vehicles (телематика, диагностика)
- Healthcare IoT (мониторинг пациентов, emergency buttons)

**Преимущества над NB-IoT**:
- Более высокая скорость (лучше для firmware updates)
- Низкая задержка (подходит для интерактивных приложений)
- Мобильность (для движущихся устройств)
- Широкий роуминг

**Ограничения**:
- Выше энергопотребление чем NB-IoT (но все равно low-power)
- Более узкий спектр deployment (особенно вне США/Европы)

**Статистика 2025**:
- **115 операторских сетей** LTE-M по всему миру
- Доминирование в **Северной Америке, Европе, Австралии**
- Прогноз: рост с 436 млн соединений (2023) до **3.6 млрд к 2032**

#### NB-IoT vs LTE-M: Когда что использовать

| Критерий | NB-IoT | LTE-M |
|----------|--------|-------|
| **Скорость данных** | 200 kbps | 1 Mbps (4G), 4 Mbps (5G) |
| **Задержка** | 1.6-10 с | 10-15 мс |
| **Мобильность** | Нет (stationary) | Да (full handover) |
| **Голосовая связь** | Нет | Да (VoLTE) |
| **Энергопотребление** | Ниже | Выше (но все равно low) |
| **Проникновение сигнала** | Лучше (164 дБ) | Хорошее (160.7-164 дБ) |
| **Роуминг** | Ограниченный | Широкий |
| **Стоимость модуля** | Ниже | Немного выше |
| **География** | Глобальная (особенно Азия) | США, Европа, Австралия |

**Выбор технологии**:

**Используйте NB-IoT если**:
- Стационарные устройства (smart meters, sensors)
- Редкая передача малых объемов данных
- Требуется максимальное время работы от батареи
- Нужно глубокое проникновение (подвалы, подземные счетчики)
- Не критична задержка
- Развертывание в Азии/Китае

**Используйте LTE-M если**:
- Мобильные устройства (asset tracking, wearables)
- Нужна голосовая связь
- Требуется низкая задержка
- Периодические firmware updates (большие объемы данных)
- Нужен международный роуминг
- Развертывание в США/Европе

### Практические сценарии применения

#### 1. Smart Metering (Умные счетчики)
**Технология**: NB-IoT

**Требования**:
- Передача показаний 1-4 раза в день
- 100-1000 байт на передачу
- Работа от батареи 10+ лет
- Установка в подвалах/за толстыми стенами

**Реализация**:
```
Device → NB-IoT Module → Base Station → Core Network → Application Server
                                                          ↓
                                                    Utility Company
```

**Конфигурация**:
- PSM: устройство спит 23+ часа в сутки
- eDRX: проверка сети раз в несколько часов
- Scheduled transmission: передача в определенное время
- Store and forward: буферизация данных при отсутствии связи

#### 2. Asset Tracking (Отслеживание активов)
**Технология**: LTE-M

**Требования**:
- GPS координаты каждые 5-60 минут
- Мобильность (handover между сотами)
- Geofencing alerts (real-time)
- Международный роуминг

**Реализация**:
```
GPS Module ───┐
              ├─→ LTE-M Module → Network → Cloud Platform
Sensors ──────┘                              ↓
                                      Dashboard / Alerts
```

**Оптимизация**:
- Adaptive reporting: частота передачи зависит от движения
- Assisted GPS: ускорение позиционирования
- Roaming profiles: автоматическое переключение операторов

#### 3. Wearable Health Devices (Носимые медицинские устройства)
**Технология**: LTE-M

**Требования**:
- Непрерывный мониторинг (ЭКГ, SpO2, температура)
- Emergency call capability (VoLTE)
- Низкая задержка для алертов (<1 секунды)
- 1-2 дня работы от батареи

**Реализация**:
- Continuous monitoring с eDRX
- Instant alert mode при критических показателях
- Fall detection с автоматическим вызовом

#### 4. Smart City (Умный город)
**Технология**: Hybrid (NB-IoT + LTE-M)

**NB-IoT для**:
- Мониторинг парковочных мест
- Управление уличным освещением
- Мониторинг качества воздуха
- Управление мусорными баками (fill level sensors)

**LTE-M для**:
- Камеры видеонаблюдения (low-resolution streaming)
- Трафик мониторинг
- Emergency buttons

### 5G IoT и будущее

#### RedCap (Reduced Capability) 5G
**3GPP Release 17 (2022)**

**Позиционирование**: средний уровень между NB-IoT/LTE-M и полноценным 5G.

**Характеристики**:
- Скорость: до 150 Mbps downlink / 50 Mbps uplink
- Задержка: 5-10 мс
- Пропускная способность: 20 МГц (vs 100 МГц в 5G)
- Количество антенн: 1-2 (vs 4 в 5G)
- Стоимость модуля: ~50% от полноценного 5G

**Применение**:
- Промышленные сенсоры и актуаторы
- Видеонаблюдение средней четкости
- Носимые устройства нового поколения
- AR/VR glasses

#### 5G mMTC (Massive Machine-Type Communications)
**Для массового IoT**:
- До 1 млн устройств на км²
- Использование network slicing для изоляции IoT трафика
- Ultra-low power consumption

#### Edge Computing для IoT
**MEC (Multi-access Edge Computing)**:
- Обработка данных на краю сети (у базовой станции)
- Снижение задержки до <10 мс
- Локальная аналитика (без отправки в облако)

**Применение**:
- Промышленная автоматика (Industry 4.0)
- Автономные машины и роботы
- Real-time video analytics

### Практическая настройка: пример подключения IoT устройства

#### Hardware Setup
```
Microcontroller (STM32, ESP32, Nordic nRF9160)
    ↓
NB-IoT/LTE-M Module (Quectel BG96, u-blox SARA-R5, Simcom SIM7070)
    ↓
SIM Card (with IoT data plan)
    ↓
External Antenna (optional, но рекомендуется)
```

#### Software Flow (AT Commands)
```bash
# 1. Проверка модуля
AT
# Ответ: OK

# 2. Проверка SIM карты
AT+CPIN?
# Ответ: +CPIN: READY

# 3. Регистрация в сети (NB-IoT)
AT+COPS=1,2,"26201",9  # 9 = NB-IoT, operator code 26201
# Ожидание: +CEREG: 1 (зарегистрирован)

# 4. Настройка APN
AT+CGDCONT=1,"IP","iot.apn.provider.com"

# 5. Активация контекста
AT+CGACT=1,1

# 6. Открытие UDP сокета
AT+QIOPEN=1,0,"UDP","server.example.com",5683

# 7. Отправка данных
AT+QISEND=0,10
# Вводим 10 байт данных
# Ответ: SEND OK

# 8. PSM настройка (для энергосбережения)
AT+CPSMS=1,,,"10000010","00000001"
# T3412: 1 час, T3324: 2 секунды

# 9. eDRX настройка
AT+CEDRXS=1,5,"0101"
# eDRX cycle: 81.92 секунды
```

#### CoAP Protocol для IoT
**Почему CoAP (Constrained Application Protocol)**:
- Легковесный (UDP-based)
- Низкие overhead (4 байта заголовок vs 20+ TCP/IP)
- Встроенная поддержка в NB-IoT/LTE-M

**Пример CoAP запроса**:
```python
from coapthon.client.helperclient import HelperClient

client = HelperClient(server=('iot.server.com', 5683))

# POST sensor data
payload = '{"temp": 22.5, "humidity": 65}'
response = client.post('sensors/temp1', payload)
print(response.pretty_print())

client.stop()
```

#### MQTT over NB-IoT/LTE-M
**Для более сложных сценариев**:

```python
import paho.mqtt.client as mqtt

def on_connect(client, userdata, flags, rc):
    print("Connected with result code "+str(rc))
    client.subscribe("commands/device001")

def on_message(client, userdata, msg):
    print(msg.topic+" "+str(msg.payload))

client = mqtt.Client()
client.on_connect = on_connect
client.on_message = on_message

# TLS для безопасности
client.tls_set(ca_certs="ca.crt")

client.connect("mqtt.iot-platform.com", 8883, 60)
client.loop_start()

# Публикация данных
client.publish("data/device001", '{"value": 100}')
```

### Network Performance Testing

#### Тестирование скорости и задержки
```bash
# Speedtest через iperf3
iperf3 -c speedtest.server.com -p 5201 -t 60 -i 1

# Ping тест
ping -c 100 -i 0.2 8.8.8.8

# Анализ задержки
mtr --report --report-cycles 100 target-server.com
```

#### Мониторинг сигнала (Linux с модемом)
```bash
# AT команды для проверки качества сигнала
AT+CSQ  # Signal Quality (0-31, 99=unknown)
AT+CESQ # Extended signal quality

# Для Quectel модулей
AT+QENG="servingcell"  # Детальная информация о соте
# Возвращает: RSRP, RSRQ, SINR, Band, PCI
```

#### Анализ пакетов (на шлюзе)
```bash
# Захват UDP трафика от IoT устройств
tcpdump -i eth0 -n udp port 5683 -w iot-traffic.pcap

# Анализ в Wireshark с CoAP dissector
wireshark iot-traffic.pcap
```

---

## Подводные камни и best practices

### 1. Покрытие и проникновение сигнала

**Проблема**: NB-IoT/LTE-M обещают отличное проникновение, но реальность сложнее.

**Подводные камни**:
- **Подземные установки**: даже с 164 дБ MCL, некоторые подвалы недоступны
- **Металлические конструкции**: лифты, контейнеры блокируют сигнал
- **Плотная застройка**: интерференция и многолучевое распространение

**Best Practices**:
- Всегда проводить site survey перед массовым развертыванием
- Использовать внешние антенны для устройств в сложных условиях
- Планировать fallback: dual-mode (NB-IoT + LTE-M) или hybrid (cellular + LoRaWAN)
- Тестировать в worst-case локациях (угловые помещения, подвалы)
- Учитывать сезонные изменения (листва деревьев летом ухудшает сигнал)

### 2. Энергопотребление: теория vs практика

**Проблема**: обещанные 10 лет работы от батареи достижимы только в идеальных условиях.

**Факторы, убивающие батарею**:
- **Частые передачи**: каждая передача = пробуждение радио (большой ток)
- **Плохое покрытие**: повторные попытки и максимальная мощность
- **Неправильная конфигурация PSM/eDRX**: частые пробуждения
- **Firmware updates**: могут разрядить батарею за один сеанс

**Best Practices**:
- Измерять реальное потребление с power profiler (не верить datasheet)
- Оптимизировать duty cycle: минимум передач
- Использовать батарейные буферы (supercapacitors) для пиковых токов
- Передавать данные пакетами (batch), а не по одному значению
- Выбирать режим:
  - PSM для редких передач (раз в сутки)
  - eDRX для умеренных (раз в час)
  - Always-on только если критична задержка
- Мониторить уровень сигнала: переключаться в low-power mode при плохом сигнале

**Формула оценки времени работы**:
```
Battery Life (days) = Battery Capacity (mAh) /
                      (Daily Transmissions × Avg Current per TX (mA) × TX Duration (hours))
```

### 3. Роуминг и multi-operator connectivity

**Проблема**: теоретически есть роуминг, практически - ограничения и высокие цены.

**Подводные камни**:
- **NB-IoT роуминг ограничен**: многие операторы не имеют соглашений
- **LTE-M лучше, но не везде**: в Азии покрытие слабое
- **Стоимость**: роуминг может быть в 10-100 раз дороже
- **SIM lock**: некоторые SIM привязаны к оператору

**Best Practices**:
- Использовать **multi-IMSI SIM** или **eUICC (eSIM)**: переключение между операторами
- Провайдеры как **1NCE, Onomondo, Wireless Logic**: глобальные тарифы
- Для критичных применений: dual-SIM с разными операторами
- Тестировать роуминг в целевых странах до массового развертывания
- Предусмотреть fallback на Wi-Fi/LoRaWAN в регионах без покрытия

### 4. Firmware Updates Over-The-Air (FOTA)

**Проблема**: обновление тысяч устройств "в поле" - сложная задача.

**Вызовы**:
- **Размер firmware**: может быть сотни KB до MB
- **Время передачи**: на NB-IoT (200 kbps) = десятки минут
- **Прерывания**: потеря связи во время обновления = brick device
- **Энергопотребление**: может разрядить батарею

**Best Practices**:
- **Delta updates**: передавать только изменения (BSDiff, Google Courgette)
- **Chunked transfer**: разбивать на маленькие блоки с checksums
- **Resume capability**: возможность продолжить прерванную загрузку
- **Bootloader защита**: dual-bank flash, rollback при ошибке
- **Staged rollout**: обновлять по группам (5% → 20% → 100%)
- **Использовать LTE-M для FOTA**: выше скорость чем NB-IoT
- **Mains-powered devices first**: начинать с устройств на постоянном питании

### 5. Network Congestion и скорость

**Проблема**: shared spectrum означает, что скорость может сильно варьироваться.

**Сценарии перегрузки**:
- **Массовое событие**: тысячи устройств передают одновременно (smart meters в 00:00)
- **Dense deployments**: сотни устройств на одной соте
- **Network slicing conflicts**: приоритет у eMBB может забить mMTC

**Best Practices**:
- **Randomize transmission times**: случайная задержка для распределения нагрузки
- **Exponential backoff**: при неудаче увеличивать интервал повтора
- **Priority management**: критичные алерты с высоким приоритетом
- **Rate limiting**: ограничение частоты передач на device level
- **Network slicing**: использовать dedicated slice для критичных IoT
- **Monitoring**: отслеживать latency и packet loss

### 6. Безопасность Cellular IoT

**Проблема**: встроенная безопасность cellular - это хорошо, но недостаточно.

**Векторы атак**:
- **SIM cloning**: копирование SIM карты
- **Eavesdropping**: перехват трафика (особенно без шифрования end-to-end)
- **Rogue devices**: несанкционированные устройства в сети
- **DDoS**: ботнет из IoT устройств

**Best Practices**:
- **End-to-end encryption**: DTLS для CoAP, TLS для MQTT (не полагаться только на cellular security)
- **Device authentication**: x.509 certificates, не только SIM authentication
- **Secure boot**: криптографическая проверка firmware
- **Over-the-air key rotation**: периодическое обновление ключей
- **Anomaly detection**: мониторинг необычного поведения (частота, объем данных)
- **Network-level security**: firewall на IoT gateway, VPN туннели
- **Physical security**: защита от извлечения SIM, tamper detection

### 7. Debugging и мониторинг в production

**Проблема**: отладка тысяч устройств "в поле" без физического доступа.

**Вызовы**:
- Нет serial console
- Ограниченное логирование (память, батарея)
- Задержка получения логов (энергосбережение)
- Разные версии firmware

**Best Practices**:
- **Remote logging**: периодическая отправка критичных логов
- **Health check messages**: регулярные "heartbeat" с метриками (RSSI, battery, uptime)
- **Over-the-air diagnostics**: команды для запроса детальной информации
- **Device shadows/digital twins**: сохранение состояния в облаке
- **Automated alerts**: мониторинг отсутствия связи, аномальных значений
- **Fleet management platform**: централизованное управление (AWS IoT, Azure IoT Hub)
- **A/B firmware testing**: тестирование обновлений на подмножестве устройств

### 8. Cost Management

**Проблема**: стоимость cellular IoT может быть обманчивой.

**Скрытые расходы**:
- **Data overage**: превышение лимита данных (особенно при debug режиме)
- **Roaming charges**: непредвиденный роуминг
- **SMS для конфигурации**: каждое SMS стоит денег
- **Activation fees**: стоимость активации SIM
- **Monthly minimum**: минимальная ежемесячная плата даже без использования

**Best Practices**:
- **Prepaid IoT plans**: фиксированная стоимость на период (1NCE: €10 за 10 лет)
- **Data compression**: сжатие передаваемых данных
- **Efficient protocols**: CoAP вместо HTTP, binary вместо JSON
- **Monitoring usage**: alerts при превышении лимитов
- **Dormant device management**: деактивация неиспользуемых SIM
- **Negotiate bulk pricing**: скидки при большом объеме

### 9. 5G Migration Path

**Проблема**: как мигрировать с LTE на 5G без замены миллионов устройств.

**Вызовы**:
- NB-IoT/LTE-M модули 4G не поддерживают 5G NR
- Операторы планируют sunset 2G/3G, 4G еще долго будет
- 5G RedCap - новый стандарт, limited device availability

**Best Practices**:
- **Long-term 4G**: 4G LTE будет поддерживаться до 2030-2035+
- **NB-IoT/LTE-M совместимы с 5G**: будут работать в 5G networks (coexist)
- **Plan for 10+ year lifecycle**: выбирать технологии с долгой поддержкой
- **Future-proof hardware**: по возможности 5G-ready модули для новых deployments
- **Hybrid approach**: новые устройства на 5G, существующие на 4G

### 10. Regulatory и сертификация

**Проблема**: cellular устройства требуют сертификации, это долго и дорого.

**Требования**:
- **CE/FCC**: радио сертификация
- **PTCRB/GCF**: cellular сертификация
- **Operator certification**: специфичные требования операторов
- **Country-specific**: разные требования в разных странах

**Best Practices**:
- **Использовать pre-certified модули**: Quectel, u-blox, Simcom уже сертифицированы
- **Не модифицировать RF часть**: изменения требуют повторной сертификации
- **Plan 6-12 месяцев** на полную сертификацию
- **Budget $10-50K** на сертификацию (зависит от регионов)
- **Консультироваться с операторами**: early engagement для понимания требований

---

## Итоговые рекомендации

### Архитектурный выбор

**Для массового IoT (>100K устройств)**:
- NB-IoT для stationary (smart meters, sensors)
- LTE-M для mobile (asset tracking)
- Dual-mode modules для flexibility
- Edge computing для локальной обработки

**Для критичных применений**:
- LTE-M или 5G для низкой задержки
- Dedicated network slicing
- Redundant connectivity (multi-operator)

**Для глобальных deployments**:
- Multi-IMSI SIM или eSIM
- LTE-M предпочтительнее (лучше роуминг)
- Cloud IoT платформы с глобальным присутствием

### Roadmap технологий

**2025-2027**:
- **Mainstream 5G**: Sub-6 GHz как основа, mmWave для niche
- **5G Advanced (Release 18-19)**: AI-driven optimization
- **RedCap 5G**: для промышленного IoT и wearables
- **NB-IoT/LTE-M**: продолжат coexist с 5G для LPWAN

**2027-2030**:
- **5G-Advanced Phase 3 (Release 20)**: groundwork для 6G
- **Satellite IoT integration**: seamless terrestrial-satellite
- **AI-native networking**: автоматическая оптимизация

**Post-2030**:
- **6G research**: THz frequencies, holographic communications
- **Ambient IoT**: energy harvesting, battery-free devices

---

## Источники

**5G и mmWave (проверено 2025-12-18)**:
- [5G mmWave vs Sub-6GHz | Cavli Wireless](https://www.cavliwireless.com/blog/not-mini/5g-mmwave-vs-sub-6ghz)
- [Leveraging the potential of 5G millimeter wave - Ericsson](https://www.ericsson.com/en/reports-and-papers/further-insights/leveraging-the-potential-of-5g-millimeter-wave)
- [5G NR Spectrum Explained: Sub-6 GHz vs. mmWave Bands - Telecom Trainer](https://www.telecomtrainer.com/5g-nr-spectrum-explained-sub-6-ghz-vs-mmwave-bands/)
- [2025 Cellular Mobile Internet Update - Mobile Internet Resource Center](https://www.rvmobileinternet.com/2025-cellular-mobile-internet-update-5g-is-mainstream-x65-modems-coming-to-routers-5g-advanced-evolves-towards-6g/)
- [Why mmWave Still Matters in 2025 - Medium](https://medium.com/@NextGen_Signal_Lab/why-mmwave-still-matters-in-2025-6e1cc6f9ffbf)

**NB-IoT и LTE-M (проверено 2025-12-18)**:
- [NB-IoT vs LTE-M: A comparison - Onomondo](https://onomondo.com/blog/nb-iot-vs-lte-m-a-comparison-of-the-two-iot-technology-standards/)
- [NB-IoT vs. LTE-M: Which Cellular IoT Technology - Zipit Wireless](https://www.zipitwireless.com/blog/nb-iot-vs.-lte-m-which-cellular-iot-technology-is-right-for-you)
- [Cellular IoT: NB IoT vs LTE-M - AVSystem](https://avsystem.com/blog/iot/cellular-iot)
- [LPWAN in 2025: LTE-M vs NB-IoT vs LoRaWAN - DFRobot](https://www.dfrobot.com/blog-17238.html)
- [LTE-M vs NB-IoT: Key differences - Ignion](https://ignion.io/blog/lte-m-vs-nb-iot/)

**LTE Architecture (проверено 2025-12-18)**:
- [LTE Network Architecture - Tutorials Point](https://www.tutorialspoint.com/lte/lte_network_architecture.htm)
- [Full LTE architecture and components - YateBTS](https://yatebts.com/documentation/concepts/lte-concepts/)
- [4G Architecture: LTE Network Elements - RF Wireless World](https://www.rfwireless-world.com/Tutorials/LTE-network-architecture.html)
- [eNodeB - Wikipedia](https://en.wikipedia.org/wiki/ENodeB)
- [LTE Architecture - InterviewBit](https://www.interviewbit.com/blog/lte-architecture/)

**Дополнительные ресурсы**:
- 3GPP Specifications: [https://www.3gpp.org/specifications](https://www.3gpp.org/specifications)
- GSMA Mobile IoT: [https://www.gsma.com/iot/mobile-iot/](https://www.gsma.com/iot/mobile-iot/)
- Qualcomm 5G Technologies: [https://www.qualcomm.com/5g](https://www.qualcomm.com/5g)

---

## Связь с другими темами

[[network-wireless-iot]] — сотовые технологии NB-IoT и LTE-M напрямую конкурируют с IoT-протоколами LoRa, Zigbee и Thread. Понимание сотовых сетей позволяет правильно выбрать между лицензируемым спектром (NB-IoT/LTE-M с гарантированным QoS) и нелицензируемым (LoRa/Zigbee с нулевой абонентской платой). Рекомендуется изучить оба материала для принятия архитектурных решений в IoT-проектах.

[[network-physical-layer]] — сотовые сети используют сложные схемы модуляции (OFDMA, QAM-256, MIMO), которые объясняются на физическом уровне. Понимание того, как радиоволны несут данные, почему mmWave даёт гигабитные скорости на коротких расстояниях, а Sub-6 GHz обеспечивает покрытие — всё это фундамент для осмысленного сравнения поколений. Физический уровень рекомендуется изучить первым.

[[network-transport-layer]] — LTE и 5G являются полностью IP-based сетями, где TCP/UDP/QUIC работают поверх сотового канала. Высокая latency 4G (20-50ms) и jitter влияют на TCP congestion control, а connection migration в QUIC особенно важна при handover между сотами. Понимание транспортного уровня помогает оптимизировать мобильные приложения под реалии сотовых сетей.

---

## Источники и дальнейшее чтение

- **Gupta A. (2013). Inside 3G/4G/LTE: From GSM to LTE-Advanced Pro and 5G.** — Комплексный разбор эволюции сотовых сетей с техническими деталями архитектуры каждого поколения. Книга объясняет переход от circuit-switched к packet-switched сетям и даёт фундамент для понимания 5G.

- **Tanenbaum A., Wetherall D. (2011). Computer Networks, 5th Edition.** — Академический учебник с главами о беспроводных и сотовых сетях, который помещает сотовые технологии в контекст общей сетевой архитектуры. Полезен для понимания как GSM/LTE вписываются в модель OSI/TCP-IP.

- **Kurose J., Ross K. (2021). Computer Networking: A Top-Down Approach, 8th Edition.** — Раздел о беспроводных сетях объясняет принципы сотовой связи, handover и мобильность IP с академической точки зрения, дополняя практические знания из спецификаций 3GPP.

---

---

## Проверь себя

> [!question]- Почему 5G mmWave обеспечивает гигабитные скорости, но практически бесполезен внутри зданий?
> mmWave работает на частотах 24-100 GHz. Высокая частота означает огромную полосу пропускания (скорость), но крайне малую дальность (сотни метров) и неспособность проникать через стены, стекло и даже листву. Для помещений используют Sub-6 GHz (3.5 GHz) или LTE, которые проникают лучше, но медленнее.

> [!question]- Мобильное приложение работает хорошо на WiFi, но тормозит на 4G. Latency 4G --- 30-50ms. В чём может быть проблема?
> Вероятнее всего, проблема в "chatty" протоколе --- множество последовательных запросов. Каждый запрос добавляет RTT (30-50ms), и 10 последовательных запросов = 300-500ms. Решение: батчить запросы, использовать HTTP/2 multiplexing, предзагружать данные, реализовать оффлайн-кэш.

> [!question]- Что такое Network Slicing в 5G и почему это меняет правила игры для IoT и автомобильной индустрии?
> Network Slicing позволяет на одной физической инфраструктуре 5G создавать виртуальные сети с разными характеристиками. Для IoT --- slice с mMTC (миллионы устройств, низкая скорость). Для автопилота --- slice с URLLC (ультра-низкая задержка <1ms). Для видео --- slice с eMBB (высокая пропускная способность). Каждый slice изолирован и гарантирует SLA.

---

## Ключевые карточки

Чем отличаются поколения 3G, 4G LTE и 5G NR?
?
3G --- первый мобильный интернет (~2 Mbps), circuit-switched. 4G LTE --- полностью IP-based (~100 Mbps), flat architecture. 5G NR --- три сценария: eMBB (до 20 Gbps), URLLC (<1ms latency), mMTC (1M устройств/км2). Service-based architecture.

Что такое handover и почему он важен?
?
Handover --- переключение мобильного устройства между базовыми станциями (сотами) при движении. Без handover звонок или сессия данных обрывались бы при выходе из зоны покрытия. 4G/5G поддерживают seamless handover с буферизацией данных.

В чём разница между 5G NSA и 5G SA?
?
NSA (Non-Standalone) --- 5G радио использует 4G core network. Быстро развернуть, но нет новых функций (slicing, URLLC). SA (Standalone) --- полностью новая 5G core (5GC). Поддерживает все сценарии 5G, но требует инвестиций в инфраструктуру.

Что такое три сценария 5G: eMBB, URLLC, mMTC?
?
eMBB (enhanced Mobile Broadband) --- высокая скорость для видео, AR/VR. URLLC (Ultra-Reliable Low-Latency) --- <1ms для автопилота, хирургии. mMTC (massive Machine Type Communication) --- миллионы IoT-устройств на км2 с минимальным энергопотреблением.

Почему LTE band compatibility важна для мобильных устройств?
?
Разные страны и операторы используют разные LTE-частоты (bands). Телефон, поддерживающий bands одного региона, может не работать в другом. При выборе устройства для международного использования нужно проверять поддержку нужных bands.

---

## Куда дальше

| Направление | Куда | Зачем |
|-------------|------|-------|
| Следующий шаг | [[network-wireless-iot]] | IoT-протоколы: NB-IoT, LoRa, Zigbee |
| Углубиться | [[network-latency-optimization]] | Оптимизация latency для мобильных сетей |
| Смежная тема | [[network-bluetooth]] | BLE как локальная беспроводная альтернатива |
| Обзор | [[networking-overview]] | Вернуться к карте раздела |

---

*Последнее обновление: 2026-01-09 --- Добавлены педагогические секции: 5 аналогий (поколения как эволюция транспорта 1G-5G, соты как районы города, handover как эстафетная палочка, 5G три сценария, network slicing как выделенные полосы), 6 типичных ошибок с СИМПТОМ/РЕШЕНИЕ, 5 ментальных моделей*
