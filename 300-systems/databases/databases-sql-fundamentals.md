---
title: "SQL Fundamentals: Ð¾Ñ‚ SELECT Ð´Ð¾ Ð¾ÐºÐ¾Ð½Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹"
created: 2025-12-22
modified: 2026-02-13
type: concept
status: published
confidence: high
tags:
  - topic/databases
  - sql
  - postgresql
  - queries
  - type/concept
  - level/beginner
related:
  - "[[databases-overview]]"
  - "[[database-design-optimization]]"
  - "[[databases-transactions-acid]]"
reading_time: 29
difficulty: 3
study_status: not_started
mastery: 0
last_reviewed:
next_review:
---

# SQL Fundamentals: Ð¾Ñ‚ SELECT Ð´Ð¾ Ð¾ÐºÐ¾Ð½Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹

> SQL â€” ÑÐ·Ñ‹Ðº Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ñ€ÐµÐ»ÑÑ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¼Ð¸ Ð±Ð°Ð·Ð°Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…. Ð—Ð½Ð°Ð½Ð¸Ðµ SQL â€” Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð½Ð°Ð²Ñ‹Ðº Ð´Ð»Ñ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°, Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ Ð¾Ñ‚ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸.

---

## TL;DR

- **SELECT** â€” Ð²Ñ‹Ð±Ð¾Ñ€ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¾ÑÐ½Ð¾Ð²Ð° Ð²ÑÐµÐ³Ð¾
- **JOIN** â€” Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ† (INNER, LEFT, RIGHT, FULL)
- **ÐŸÐ¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹** â€” Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° (WHERE, FROM, SELECT)
- **CTE (WITH)** â€” Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð»Ñ Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸
- **ÐžÐºÐ¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸** â€” Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ Ð±ÐµÐ· Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸ (ROW_NUMBER, RANK, LAG/LEAD)
- **ÐÐ³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ** â€” GROUP BY + HAVING Ð´Ð»Ñ ÑÐ²Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…

---

## Ð§Ð°ÑÑ‚ÑŒ 1: Ð˜Ð½Ñ‚ÑƒÐ¸Ñ†Ð¸Ñ Ð±ÐµÐ· ÐºÐ¾Ð´Ð°

> SQL ÐºÐ°Ð¶ÐµÑ‚ÑÑ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ð¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ, Ñ‡Ñ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½ Ð½Ðµ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼. Ð•ÑÐ»Ð¸ Ð¿ÐµÑ€ÐµÐ²ÐµÑÑ‚Ð¸ Ð½Ð° Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ ÑÐ·Ñ‹Ðº â€” Ð²ÑÑ‘ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ€Ð½Ð¾.

### ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ 1: Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… â€” ÑÑ‚Ð¾ ÐºÑƒÑ…Ð½Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ÐšÐ£Ð¥ÐÐ¯ (Database)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Ð¥ÐžÐ›ÐžÐ”Ð˜Ð›Ð¬ÐÐ˜Ðš  â”‚   â”‚     Ð¨ÐšÐÐ¤      â”‚   â”‚    ÐšÐ›ÐÐ”ÐžÐ’ÐšÐ   â”‚    â”‚
â”‚   â”‚  (fridge)     â”‚   â”‚   (cabinet)   â”‚   â”‚   (pantry)    â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚ ðŸ¥› ÐœÐ¾Ð»Ð¾ÐºÐ¾     â”‚   â”‚ ðŸ§‚ Ð¡Ð¾Ð»ÑŒ       â”‚   â”‚ ðŸ ÐœÐ°ÐºÐ°Ñ€Ð¾Ð½Ñ‹   â”‚    â”‚
â”‚   â”‚ ðŸ¥š Ð¯Ð¹Ñ†Ð°       â”‚   â”‚ ðŸ«š ÐŸÐµÑ€ÐµÑ†      â”‚   â”‚ ðŸš Ð Ð¸Ñ        â”‚    â”‚
â”‚   â”‚ ðŸ§ˆ ÐœÐ°ÑÐ»Ð¾      â”‚   â”‚ ðŸ§„ Ð§ÐµÑÐ½Ð¾Ðº     â”‚   â”‚ ðŸ¥« ÐšÐ¾Ð½ÑÐµÑ€Ð²Ñ‹   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   Ð¡ÐºÐ¾Ñ€Ð¾Ð¿Ð¾Ñ€Ñ‚ÑÑ‰ÐµÐµÑÑ     Ð¡Ð¿ÐµÑ†Ð¸Ð¸              Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ   â”‚
â”‚                                                                  â”‚
â”‚   ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑˆÐºÐ°Ñ„ = Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð                                         â”‚
â”‚   ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚ = Ð¡Ð¢Ð ÐžÐšÐ (Ð·Ð°Ð¿Ð¸ÑÑŒ)                              â”‚
â”‚   Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð° Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð° (Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ, ÑÑ€Ð¾Ðº Ð³Ð¾Ð´Ð½Ð¾ÑÑ‚Ð¸) = ÐšÐžÐ›ÐžÐÐšÐ˜         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SQL Ð·Ð°Ð¿Ñ€Ð¾Ñ = Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾Ð²Ð°Ñ€Ñƒ:

"Ð”Ð°Ð¹ Ð¼Ð½Ðµ Ð¸Ð· Ð¥ÐžÐ›ÐžÐ”Ð˜Ð›Ð¬ÐÐ˜ÐšÐ Ð²ÑÐµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹,
 Ð“Ð”Ð• ÑÑ€Ð¾Ðº Ð³Ð¾Ð´Ð½Ð¾ÑÑ‚Ð¸ > ÑÐµÐ³Ð¾Ð´Ð½Ñ,
 ÐžÐ¢Ð¡ÐžÐ Ð¢Ð˜Ð Ð£Ð™ Ð¿Ð¾ Ð´Ð°Ñ‚Ðµ"

SELECT * FROM fridge
WHERE expiry_date > CURRENT_DATE
ORDER BY expiry_date;
```

### ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ 2: SELECT â€” Ð·Ð°ÐºÐ°Ð· Ð² Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½Ðµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ð—ÐÐšÐÐ— Ð’ Ð Ð•Ð¡Ð¢ÐžÐ ÐÐÐ•                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ÐžÑ„Ð¸Ñ†Ð¸Ð°Ð½Ñ‚: "Ð§Ñ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚Ðµ Ð·Ð°ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ?"                            â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  "ÐŸÑ€Ð¸Ð½ÐµÑÐ¸Ñ‚Ðµ Ð¼Ð½Ðµ    Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ñ†ÐµÐ½Ñƒ     Ð¸Ð· Ð¼ÐµÐ½ÑŽ          â”‚   â”‚
â”‚   â”‚                    â†“                   â†“                â”‚   â”‚
â”‚   â”‚   SELECT           name, price         FROM menu        â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   Ð³Ð´Ðµ              ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ = 'Ð´ÐµÑÐµÑ€Ñ‚Ñ‹'                â”‚   â”‚
â”‚   â”‚                    â†“                                    â”‚   â”‚
â”‚   â”‚   WHERE            category = 'desserts'                â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   Ð¾Ñ‚ÑÐ¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾  Ñ†ÐµÐ½Ðµ Ð¿Ð¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÑŽ                  â”‚   â”‚
â”‚   â”‚                    â†“                                    â”‚   â”‚
â”‚   â”‚   ORDER BY         price ASC                            â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   Ð¸ Ð¿Ð¾ÐºÐ°Ð¶Ð¸Ñ‚Ðµ       Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÐµÑ€Ð²Ñ‹Ðµ 5"                     â”‚   â”‚
â”‚   â”‚                    â†“                                    â”‚   â”‚
â”‚   â”‚   LIMIT            5                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚   SQL â€” ÑÑ‚Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±                     â”‚
â”‚   Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ, ÐºÐ°Ðº Ð·Ð°ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑˆÑŒ ÐµÐ´Ñƒ Ð² Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½Ðµ             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ 3: JOIN â€” ÑÐ¾Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ¾Ð² Ð³Ð¾ÑÑ‚ÐµÐ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Ð¡Ð’ÐÐ”Ð¬Ð‘Ð: Ð¡ÐŸÐ˜Ð¡ÐšÐ˜ Ð“ÐžÐ¡Ð¢Ð•Ð™                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¶ÐµÐ½Ð¸Ñ…Ð°:          Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð½ÐµÐ²ÐµÑÑ‚Ñ‹:                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚ ÐÐ½Ð´Ñ€ÐµÐ¹         â”‚      â”‚ ÐœÐ°Ñ€Ð¸Ñ          â”‚                    â”‚
â”‚   â”‚ Ð‘Ð¾Ñ€Ð¸Ñ          â”‚      â”‚ Ð‘Ð¾Ñ€Ð¸Ñ â†â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ ÐžÐ±Ñ‰Ð¸Ð¹ Ð´Ñ€ÑƒÐ³!      â”‚
â”‚   â”‚ Ð’Ð¸ÐºÑ‚Ð¾Ñ€         â”‚      â”‚ Ð“Ð°Ð»Ð¸Ð½Ð°         â”‚                    â”‚
â”‚   â”‚ Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹       â”‚      â”‚ Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹ â†â”€â”€â”€â”€â”€â”¼â”€â”€ Ð•Ñ‰Ñ‘ Ð¾Ð´Ð¸Ð½!        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                  â”‚
â”‚   INNER JOIN: ÐšÑ‚Ð¾ Ð² ÐžÐ‘ÐžÐ˜Ð¥ ÑÐ¿Ð¸ÑÐºÐ°Ñ…? â†’ Ð‘Ð¾Ñ€Ð¸Ñ, Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹            â”‚
â”‚   (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÐµÑ€ÐµÑÐµÑ‡ÐµÐ½Ð¸Ðµ)                                          â”‚
â”‚                                                                  â”‚
â”‚   LEFT JOIN: Ð’ÑÐµ Ð¾Ñ‚ Ð¶ÐµÐ½Ð¸Ñ…Ð° + Ð¾Ð±Ñ‰Ð¸Ðµ Ð´Ñ€ÑƒÐ·ÑŒÑ                       â”‚
â”‚   â†’ ÐÐ½Ð´Ñ€ÐµÐ¹, Ð‘Ð¾Ñ€Ð¸Ñâœ“, Ð’Ð¸ÐºÑ‚Ð¾Ñ€, Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹âœ“                           â”‚
â”‚                                                                  â”‚
â”‚   FULL JOIN: Ð’Ð¡Ð• Ð³Ð¾ÑÑ‚Ð¸ Ð¸Ð· Ð¾Ð±Ð¾Ð¸Ñ… ÑÐ¿Ð¸ÑÐºÐ¾Ð²                         â”‚
â”‚   â†’ ÐÐ½Ð´Ñ€ÐµÐ¹, Ð‘Ð¾Ñ€Ð¸Ñ, Ð’Ð¸ÐºÑ‚Ð¾Ñ€, Ð“Ñ€Ð¸Ð³Ð¾Ñ€Ð¸Ð¹, ÐœÐ°Ñ€Ð¸Ñ, Ð“Ð°Ð»Ð¸Ð½Ð°              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ð”Ð˜ÐÐ“Ð ÐÐœÐœÐ« Ð’Ð•ÐÐÐ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   INNER JOIN          LEFT JOIN           FULL OUTER JOIN       â”‚
â”‚                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”¬â”€â”€â”€â”         â”Œâ”€â”€â”€â”¬â”€â”€â”€â”           â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”        â”‚
â”‚     â”‚ A â”‚â–ˆâ–ˆâ–ˆâ”‚ B       â”‚â–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ”‚ B         â”‚â–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ”‚        â”‚
â”‚     â”‚   â”‚â–ˆâ–ˆâ–ˆâ”‚         â”‚â–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ”‚           â”‚â–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ”‚        â”‚
â”‚     â””â”€â”€â”€â”´â”€â”€â”€â”˜         â””â”€â”€â”€â”´â”€â”€â”€â”˜           â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜        â”‚
â”‚     Ð¢Ð¾Ð»ÑŒÐºÐ¾            Ð’ÑÑ Ð»ÐµÐ²Ð°Ñ           ÐžÐ±Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹           â”‚
â”‚     ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ        Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°             Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ 4: ÐžÐºÐ¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ â€” Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð°Ñ Ð¿Ð»Ñ‘Ð½ÐºÐ° Ð½Ð° Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ÐžÐšÐžÐÐÐ«Ð• Ð¤Ð£ÐÐšÐ¦Ð˜Ð˜: ÐŸÐ ÐžÐ—Ð ÐÐ§ÐÐÐ¯ ÐŸÐ›ÐÐÐšÐ                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ (GROUP BY):                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ Ð˜Ð²Ð°Ð½    5000    â”‚      â”‚                 â”‚                  â”‚
â”‚   â”‚ ÐŸÑ‘Ñ‚Ñ€    6000    â”‚  â”€â”€â–¶ â”‚ Ð˜Ð¢ÐžÐ“Ðž: 16000    â”‚   Ð¡Ñ‚Ñ€Ð¾ÐºÐ¸         â”‚
â”‚   â”‚ ÐÐ½Ð½Ð°    5000    â”‚      â”‚                 â”‚   "ÑÑ…Ð»Ð¾Ð¿Ð½ÑƒÐ»Ð¸ÑÑŒ"  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                  â”‚
â”‚   ÐžÐºÐ¾Ð½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ (OVER):                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Ð˜Ð²Ð°Ð½    5000    â”‚      â”‚ Ð˜Ð²Ð°Ð½    5000   â”‚ Ð˜Ñ‚Ð¾Ð³Ð¾: 16000 â”‚  â”‚
â”‚   â”‚ ÐŸÑ‘Ñ‚Ñ€    6000    â”‚  â”€â”€â–¶ â”‚ ÐŸÑ‘Ñ‚Ñ€    6000   â”‚ Ð˜Ñ‚Ð¾Ð³Ð¾: 16000 â”‚  â”‚
â”‚   â”‚ ÐÐ½Ð½Ð°    5000    â”‚      â”‚ ÐÐ½Ð½Ð°    5000   â”‚ Ð˜Ñ‚Ð¾Ð³Ð¾: 16000 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚   ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½ÑƒÑŽ Ð¿Ð»Ñ‘Ð½ÐºÑƒ Ð¿Ð¾Ð²ÐµÑ€Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹:                 â”‚
â”‚   â€¢ ÐŸÐ»Ñ‘Ð½ÐºÐ° "Ð²Ð¸Ð´Ð¸Ñ‚" Ð²ÑÐµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸Ð»Ð¸ Ð¸Ñ… Ñ‡Ð°ÑÑ‚ÑŒ (PARTITION BY)       â”‚
â”‚   â€¢ Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚ Ð¸ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð² ÐºÐ°Ð¶Ð´ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ              â”‚
â”‚   â€¢ ÐžÑ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ Ð½ÐµÑ‚Ñ€Ð¾Ð½ÑƒÑ‚Ñ‹Ð¼Ð¸!                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ 5: LAG/LEAD â€” Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð´Ð»Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LAG/LEAD: ÐŸÐ£Ð¢Ð•Ð¨Ð•Ð¡Ð¢Ð’Ð˜Ð• Ð’Ðž Ð’Ð Ð•ÐœÐ•ÐÐ˜                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ ÑÑ‚Ð¾Ð¸Ñ‚Ðµ Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ:                â”‚
â”‚                                                                  â”‚
â”‚        âª LAG()                    LEAD() â©                      â”‚
â”‚        ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ                 ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ                     â”‚
â”‚        ÐÐÐ—ÐÐ”                      Ð’ÐŸÐ•Ð ÐÐ”                         â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚ ÐŸÐ½  â”‚ â”‚ Ð’Ñ‚  â”‚ â”‚ Ð¡Ñ€  â”‚ â”‚ Ð§Ñ‚  â”‚ â”‚ ÐŸÑ‚  â”‚                       â”‚
â”‚   â”‚ 100 â”‚ â”‚ 150 â”‚ â”‚ 120 â”‚ â”‚ 180 â”‚ â”‚ 200 â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                      â”‚                                           â”‚
â”‚                      â–¼ Ð’Ñ‹ Ð·Ð´ÐµÑÑŒ (Ð¡Ñ€ÐµÐ´Ð°)                         â”‚
â”‚                                                                  â”‚
â”‚   LAG(revenue, 1)  = 150  (Ð²Ñ‡ÐµÑ€Ð° â€” Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº)                     â”‚
â”‚   LAG(revenue, 2)  = 100  (Ð¿Ð¾Ð·Ð°Ð²Ñ‡ÐµÑ€Ð° â€” ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº)             â”‚
â”‚   LEAD(revenue, 1) = 180  (Ð·Ð°Ð²Ñ‚Ñ€Ð° â€” Ð§ÐµÑ‚Ð²ÐµÑ€Ð³)                    â”‚
â”‚                                                                  â”‚
â”‚   ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ:                                                    â”‚
â”‚   â€¢ Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ñ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¼ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¾Ð¼ (MoM, YoY)                  â”‚
â”‚   â€¢ Ð Ð°ÑÑ‡Ñ‘Ñ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ: revenue - LAG(revenue) = Ñ€Ð¾ÑÑ‚             â”‚
â”‚   â€¢ ÐŸÑ€Ð¾Ð³Ð½Ð¾Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ñ€ÐµÐ½Ð´Ð¾Ð²                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ð§Ð°ÑÑ‚ÑŒ 2: ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ ÑÑ‚Ð¾ ÑÐ»Ð¾Ð¶Ð½Ð¾ â€” Ñ‚Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸

### ÐžÑˆÐ¸Ð±ÐºÐ° 1: NULL â€” "Ñ‡Ñ‘Ñ€Ð½Ð°Ñ Ð´Ñ‹Ñ€Ð°" Ð² ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸ÑÑ…

**Ð¡Ð˜ÐœÐŸÐ¢ÐžÐœ:** "Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ 0 ÑÑ‚Ñ€Ð¾Ðº, Ñ…Ð¾Ñ‚Ñ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ‚Ð¾Ñ‡Ð½Ð¾ ÐµÑÑ‚ÑŒ!"

```sql
-- âŒ ÐÐ•ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐž: NULL Ð½Ðµ Ñ€Ð°Ð²ÐµÐ½ Ð½Ð¸Ñ‡ÐµÐ¼Ñƒ, Ð´Ð°Ð¶Ðµ ÑÐµÐ±Ðµ!
SELECT * FROM users WHERE status = NULL;    -- 0 ÑÑ‚Ñ€Ð¾Ðº!
SELECT * FROM users WHERE status != 'active'; -- Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ NULL!

-- ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ? NULL = "Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾"
-- "Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾" = "Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾" â†’ "Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾" (Ð½Ðµ TRUE!)
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NULL â€” Ð­Ð¢Ðž ÐÐ• Ð—ÐÐÐ§Ð•ÐÐ˜Ð•                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   NULL â‰  0                                                       â”‚
â”‚   NULL â‰  ""  (Ð¿ÑƒÑÑ‚Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°)                                    â”‚
â”‚   NULL â‰  NULL  (!)                                               â”‚
â”‚                                                                  â”‚
â”‚   NULL Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚: "Ð¯ ÐÐ• Ð—ÐÐÐ®"                                    â”‚
â”‚                                                                  â”‚
â”‚   Ð’Ð¾Ð¿Ñ€Ð¾Ñ: "ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ðµ = ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ð¼Ñƒ?"                         â”‚
â”‚   ÐžÑ‚Ð²ÐµÑ‚:  "ÐÐµ Ð·Ð½Ð°ÑŽ" (NULL, Ð½Ðµ TRUE Ð¸ Ð½Ðµ FALSE)                  â”‚
â”‚                                                                  â”‚
â”‚   âš ï¸ ÐžÐ¡ÐžÐ‘ÐÐ¯ ÐžÐŸÐÐ¡ÐÐžÐ¡Ð¢Ð¬: NOT IN Ñ NULL                            â”‚
â”‚                                                                  â”‚
â”‚   SELECT * FROM users                                            â”‚
â”‚   WHERE id NOT IN (1, 2, NULL);  -- Ð’ÐµÑ€Ð½Ñ‘Ñ‚ 0 ÑÑ‚Ñ€Ð¾Ðº!             â”‚
â”‚                                                                  â”‚
â”‚   ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ? NOT IN Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð²:                             â”‚
â”‚   id != 1 AND id != 2 AND id != NULL                            â”‚
â”‚                           â†‘                                      â”‚
â”‚                      Ð’ÑÐµÐ³Ð´Ð° NULL â†’ Ð²ÑÑ‘ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ NULL           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ð Ð•Ð¨Ð•ÐÐ˜Ð•:**
```sql
-- âœ… ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐž
SELECT * FROM users WHERE status IS NULL;
SELECT * FROM users WHERE status IS NOT NULL;
SELECT * FROM users WHERE status != 'active' OR status IS NULL;

-- âœ… NOT IN Ð±ÐµÐ· NULL
SELECT * FROM users WHERE id NOT IN (
    SELECT user_id FROM banned WHERE user_id IS NOT NULL
);

-- âœ… Ð›ÑƒÑ‡ÑˆÐµ: NOT EXISTS
SELECT * FROM users u
WHERE NOT EXISTS (SELECT 1 FROM banned b WHERE b.user_id = u.id);
```

### ÐžÑˆÐ¸Ð±ÐºÐ° 2: Cartesian Product â€” ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð²Ð·Ñ€Ñ‹Ð² Ð´Ð°Ð½Ð½Ñ‹Ñ…

**Ð¡Ð˜ÐœÐŸÐ¢ÐžÐœ:** "Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð²ÐµÑ€Ð½ÑƒÐ» Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ñ‹ ÑÑ‚Ñ€Ð¾Ðº, Ñ…Ð¾Ñ‚Ñ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°Ñ… Ð¿Ð¾ Ñ‚Ñ‹ÑÑÑ‡Ðµ"

```sql
-- âŒ ÐšÐÐ¢ÐÐ¡Ð¢Ð ÐžÐ¤Ð: Ð·Ð°Ð±Ñ‹Ð»Ð¸ ÑƒÑÐ»Ð¾Ð²Ð¸Ðµ JOIN
SELECT * FROM orders, products;  -- 1000 Ã— 1000 = 1,000,000 ÑÑ‚Ñ€Ð¾Ðº!

-- Ð¸Ð»Ð¸ ÑÐºÐ²Ð¸Ð²Ð°Ð»ÐµÐ½Ñ‚
SELECT * FROM orders
CROSS JOIN products;  -- Ð¢Ð¾ Ð¶Ðµ ÑÐ°Ð¼Ð¾Ðµ!
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CARTESIAN PRODUCT â€” ÐÐ¢ÐžÐœÐÐÐ¯ Ð‘ÐžÐœÐ‘Ð                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   orders (3 ÑÑ‚Ñ€Ð¾ÐºÐ¸):        products (3 ÑÑ‚Ñ€Ð¾ÐºÐ¸):                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 1â”‚                â”‚ Ð¢Ð¾Ð²Ð°Ñ€ A    â”‚                      â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 2â”‚                â”‚ Ð¢Ð¾Ð²Ð°Ñ€ B    â”‚                      â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 3â”‚                â”‚ Ð¢Ð¾Ð²Ð°Ñ€ C    â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                  â”‚
â”‚   Ð‘Ð•Ð— ÑƒÑÐ»Ð¾Ð²Ð¸Ñ JOIN (Cartesian):     Ð¡ ÑƒÑÐ»Ð¾Ð²Ð¸ÐµÐ¼ JOIN:            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 1 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ A      â”‚        â”‚ Ð—Ð°ÐºÐ°Ð· 1 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ A      â”‚  â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 1 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ B      â”‚        â”‚ Ð—Ð°ÐºÐ°Ð· 2 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ B      â”‚  â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 1 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ C      â”‚        â”‚ Ð—Ð°ÐºÐ°Ð· 3 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ C      â”‚  â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 2 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ A      â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 2 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ B      â”‚        3 ÑÑ‚Ñ€Ð¾ÐºÐ¸ (Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾!)       â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 2 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ C      â”‚                                    â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 3 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ A      â”‚                                    â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 3 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ B      â”‚                                    â”‚
â”‚   â”‚ Ð—Ð°ÐºÐ°Ð· 3 â”‚ Ð¢Ð¾Ð²Ð°Ñ€ C      â”‚                                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚   9 ÑÑ‚Ñ€Ð¾Ðº = 3 Ã— 3 (ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ ÐºÐ°Ð¶Ð´Ñ‹Ð¼!)                            â”‚
â”‚                                                                  â”‚
â”‚   ðŸ”¥ Ð’ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸: 10,000 Ã— 10,000 = 100,000,000 ÑÑ‚Ñ€Ð¾Ðº!        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ð Ð•Ð¨Ð•ÐÐ˜Ð•:**
```sql
-- âœ… Ð’Ð¡Ð•Ð“Ð”Ð ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹ ÑƒÑÐ»Ð¾Ð²Ð¸Ðµ JOIN
SELECT * FROM orders o
INNER JOIN products p ON o.product_id = p.id;

-- âš ï¸ ÐŸÑ€Ð¸Ð·Ð½Ð°Ðº Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹: Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ >> Ð¾Ð¶Ð¸Ð´Ð°ÐµÐ¼Ð¾Ð³Ð¾
-- Ð•ÑÐ»Ð¸ Ð¶Ð´Ð°Ð» 1000, Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð» 1,000,000 â€” Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ JOIN!
```

### ÐžÑˆÐ¸Ð±ÐºÐ° 3: SELECT * â€” Ð»ÐµÐ½Ð¸Ð²Ð¾ÑÑ‚ÑŒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÑ‚Ð¾Ð¸Ñ‚ Ð´Ð¾Ñ€Ð¾Ð³Ð¾

**Ð¡Ð˜ÐœÐŸÐ¢ÐžÐœ:** "Ð—Ð°Ð¿Ñ€Ð¾Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾" / "ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ñ€Ð¼Ð¾Ð·Ð¸Ñ‚"

```sql
-- âŒ ÐŸÐ›ÐžÐ¥Ðž: Ñ‚ÑÐ½ÐµÐ¼ Ð’Ð¡Ð
SELECT * FROM users;
-- Ð’ÐºÐ»ÑŽÑ‡Ð°Ñ: bio (TEXT Ð½Ð° 10KB), avatar (BLOB Ð½Ð° 1MB), logs...

-- âœ… Ð¥ÐžÐ ÐžÐ¨Ðž: Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½ÑƒÐ¶Ð½Ð¾Ðµ
SELECT id, name, email FROM users;
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SELECT * â€” Ð¡ÐšÐ Ð«Ð¢Ð«Ð• Ð—ÐÐ¢Ð ÐÐ¢Ð«                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   SELECT * Ñ‚ÑÐ½ÐµÑ‚:                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ id â”‚ name â”‚ email â”‚ bio (10KB) â”‚ avatar (1MB) â”‚ ...    â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚ 1  â”‚ Ð˜Ð²Ð°Ð½ â”‚ ...   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚    â”‚    â”‚
â”‚   â”‚ 2  â”‚ ÐŸÑ‘Ñ‚Ñ€ â”‚ ...   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚    â”‚    â”‚
â”‚   â”‚ ...â”‚ ...  â”‚ ...   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   1000 ÑÑ‚Ñ€Ð¾Ðº Ã— 1MB = 1GB Ð¿Ð¾ ÑÐµÑ‚Ð¸! ðŸŒ                            â”‚
â”‚                                                                  â”‚
â”‚   SELECT id, name Ñ‚ÑÐ½ÐµÑ‚:                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚   â”‚ id â”‚ name      â”‚                                            â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                            â”‚
â”‚   â”‚ 1  â”‚ Ð˜Ð²Ð°Ð½      â”‚                                            â”‚
â”‚   â”‚ 2  â”‚ ÐŸÑ‘Ñ‚Ñ€      â”‚                                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚   1000 ÑÑ‚Ñ€Ð¾Ðº Ã— 50 Ð±Ð°Ð¹Ñ‚ = 50KB ðŸš€                                â”‚
â”‚                                                                  â”‚
â”‚   Ð Ð°Ð·Ð½Ð¸Ñ†Ð°: 20,000x!                                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ð Ð•Ð¨Ð•ÐÐ˜Ð•:**
- Ð’ÑÐµÐ³Ð´Ð° ÑÐ²Ð½Ð¾ Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÑÐ¹ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸
- ÐÐµ Ñ‚ÑÐ½Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ Ð¿Ð¾Ð»Ñ (TEXT, BLOB) Ð±ÐµÐ· Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸
- SELECT * Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ð¾Ñ‚Ð»Ð°Ð´ÐºÐµ Ð¸ Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ñ…

### ÐžÑˆÐ¸Ð±ÐºÐ° 4: Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð½Ð° ÐºÐ¾Ð»Ð¾Ð½ÐºÐ°Ñ… Ð² WHERE â€” ÑƒÐ±Ð¸Ð¹Ñ†Ð° Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð²

**Ð¡Ð˜ÐœÐŸÐ¢ÐžÐœ:** "Ð˜Ð½Ð´ÐµÐºÑ ÐµÑÑ‚ÑŒ, Ð½Ð¾ EXPLAIN Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Seq Scan"

```sql
-- âŒ ÐŸÐ›ÐžÐ¥Ðž: Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð½Ð° ÐºÐ¾Ð»Ð¾Ð½ÐºÐµ = Ð¸Ð½Ð´ÐµÐºÑ Ð±ÐµÑÐ¿Ð¾Ð»ÐµÐ·ÐµÐ½
SELECT * FROM orders WHERE YEAR(created_at) = 2024;
SELECT * FROM users WHERE LOWER(email) = 'ivan@mail.ru';
SELECT * FROM products WHERE price + 100 > 500;
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Ð¤Ð£ÐÐšÐ¦Ð˜Ð˜ Ð£Ð‘Ð˜Ð’ÐÐ®Ð¢ Ð˜ÐÐ”Ð•ÐšÐ¡Ð« (Ð½Ðµ SARGable)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ð˜Ð½Ð´ÐµÐºÑ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ°Ðº Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð½Ñ‹Ð¹ ÑÐ¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ð¸Ðº:                    â”‚
â”‚   â€¢ ÐÐ°Ð¹Ñ‚Ð¸ "Ð˜Ð²Ð°Ð½Ð¾Ð²" â€” Ð±Ñ‹ÑÑ‚Ñ€Ð¾ (Ð¸Ð½Ð´ÐµÐºÑ Ð¿Ð¾ Ð°Ð»Ñ„Ð°Ð²Ð¸Ñ‚Ñƒ)               â”‚
â”‚   â€¢ ÐÐ°Ð¹Ñ‚Ð¸ "Ð²ÑÐµ Ñ„Ð°Ð¼Ð¸Ð»Ð¸Ð¸ Ð¸Ð· 6 Ð±ÑƒÐºÐ²" â€” Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ (Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð²ÑÑ‘)      â”‚
â”‚                                                                  â”‚
â”‚   YEAR(created_at) = 2024                                        â”‚
â”‚           â†“                                                      â”‚
â”‚   Ð‘Ð” Ð´Ð¾Ð»Ð¶Ð½Ð° Ð²Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÑŒ YEAR() Ð´Ð»Ñ ÐšÐÐ–Ð”ÐžÐ™ ÑÑ‚Ñ€Ð¾ÐºÐ¸                  â”‚
â”‚   â†’ Ð˜Ð½Ð´ÐµÐºÑ Ð±ÐµÑÐ¿Ð¾Ð»ÐµÐ·ÐµÐ½ â†’ Full Table Scan                         â”‚
â”‚                                                                  â”‚
â”‚   âŒ WHERE YEAR(date) = 2024                                     â”‚
â”‚   âœ… WHERE date >= '2024-01-01' AND date < '2025-01-01'         â”‚
â”‚                                                                  â”‚
â”‚   âŒ WHERE LOWER(email) = 'ivan@mail.ru'                        â”‚
â”‚   âœ… WHERE email ILIKE 'ivan@mail.ru'  (PostgreSQL)             â”‚
â”‚   âœ… Ð˜Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ: INDEX ON LOWER(email)    â”‚
â”‚                                                                  â”‚
â”‚   âŒ WHERE price + 100 > 500                                     â”‚
â”‚   âœ… WHERE price > 400                                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ð Ð•Ð¨Ð•ÐÐ˜Ð•:** ÐŸÐµÑ€ÐµÐ½ÐµÑÐ¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð°Ð²ÑƒÑŽ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñƒ (SARGable â€” Search ARGument Able)

### ÐžÑˆÐ¸Ð±ÐºÐ° 5: DISTINCT ÐºÐ°Ðº ÐºÐ¾ÑÑ‚Ñ‹Ð»ÑŒ Ð´Ð»Ñ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ð¾Ð²

**Ð¡Ð˜ÐœÐŸÐ¢ÐžÐœ:** "Ð”Ð¾Ð±Ð°Ð²Ð¸Ð» DISTINCT â€” Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð¿Ð°Ð»Ð¸, Ð½Ð¾ Ð·Ð°Ð¿Ñ€Ð¾Ñ ÑÑ‚Ð°Ð» Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ"

```sql
-- âŒ ÐŸÑ€Ð¸Ð·Ð½Ð°Ðº Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð² JOIN
SELECT DISTINCT u.name, o.total
FROM users u
JOIN orders o ON o.user_id = u.id
JOIN order_items oi ON oi.order_id = o.id;
-- Ð”ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹ Ð¸Ð·-Ð·Ð° Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… items

-- Ð’Ð¾Ð¿Ñ€Ð¾Ñ: ÐŸÐžÐ§Ð•ÐœÐ£ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹? DISTINCT â€” ÑÑ‚Ð¾ Ð¿Ð»Ð°ÑÑ‚Ñ‹Ñ€ÑŒ, Ð½Ðµ Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ!
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DISTINCT â€” ÐŸÐ›ÐÐ¡Ð¢Ð«Ð Ð¬, ÐÐ• Ð›Ð•ÐšÐÐ Ð¡Ð¢Ð’Ðž                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ð”ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹ Ð¿Ð¾ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¸Ð·-Ð·Ð°:                                   â”‚
â”‚   1. Ð›Ð¸ÑˆÐ½ÐµÐ³Ð¾ JOIN (ÑƒÐ±ÐµÑ€Ð¸ Ð½ÐµÐ½ÑƒÐ¶Ð½Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹)                      â”‚
â”‚   2. JOIN Ð¿Ð¾ Ð½Ðµ-ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ ÐºÐ»ÑŽÑ‡Ñƒ (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ ÑÐ²ÑÐ·Ð¸)               â”‚
â”‚   3. ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ñ GROUP BY (Ð´Ð¾Ð±Ð°Ð²ÑŒ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÑƒ)                   â”‚
â”‚                                                                  â”‚
â”‚   DISTINCT:                                                      â”‚
â”‚   â€¢ Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð’Ð¡Ð• Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹                                    â”‚
â”‚   â€¢ Ð¡Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÑ‚ Ð’Ð¡Ð• ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸                                      â”‚
â”‚   â€¢ Ð—Ð°Ñ‚Ñ€Ð°Ñ‚Ð½Ð°Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ                                          â”‚
â”‚                                                                  â”‚
â”‚   Ð’Ð¼ÐµÑÑ‚Ð¾ DISTINCT Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹:                                     â”‚
â”‚   â€¢ GROUP BY â€” ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð° Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ                             â”‚
â”‚   â€¢ EXISTS â€” ÐµÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑˆÑŒ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ                            â”‚
â”‚   â€¢ DISTINCT ON â€” ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð° Ð¿ÐµÑ€Ð²Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ (PostgreSQL)  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ð Ð•Ð¨Ð•ÐÐ˜Ð•:** ÐÐ°Ð¹Ð´Ð¸ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñƒ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ð¾Ð² Ð¸ Ð¸ÑÐ¿Ñ€Ð°Ð²ÑŒ ÐµÑ‘, Ð° Ð½Ðµ Ð¼Ð°ÑÐºÐ¸Ñ€ÑƒÐ¹ DISTINCT

### ÐžÑˆÐ¸Ð±ÐºÐ° 6: ÐŸÐ¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð²Ð¼ÐµÑÑ‚Ð¾ JOIN

**Ð¡Ð˜ÐœÐŸÐ¢ÐžÐœ:** "Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ð¹" (correlated subquery)

```sql
-- âŒ ÐœÐ•Ð”Ð›Ð•ÐÐÐž: Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð´Ð»Ñ ÐšÐÐ–Ð”ÐžÐ™ ÑÑ‚Ñ€Ð¾ÐºÐ¸
SELECT
    u.name,
    (SELECT COUNT(*) FROM orders WHERE user_id = u.id) as order_count
FROM users u;
-- 1000 Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ = 1000 Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²!

-- âœ… Ð‘Ð«Ð¡Ð¢Ð Ðž: Ð¾Ð´Ð¸Ð½ JOIN + GROUP BY
SELECT u.name, COUNT(o.id) as order_count
FROM users u
LEFT JOIN orders o ON o.user_id = u.id
GROUP BY u.id, u.name;
-- 1 Ð·Ð°Ð¿Ñ€Ð¾Ñ!
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CORRELATED SUBQUERY VS JOIN                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Correlated subquery (N+1 Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°):                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ user:                       â”‚                   â”‚
â”‚   â”‚   â†’ Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸ Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ                   â”‚ Ã— 1000 Ñ€Ð°Ð·!       â”‚
â”‚   â”‚   â†’ Ð’ÐµÑ€Ð½Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚                     â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚   Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ: O(N Ã— M)                                           â”‚
â”‚                                                                  â”‚
â”‚   JOIN (Ð¾Ð´Ð¸Ð½ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´):                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ 1. Ð¡Ð¾ÐµÐ´Ð¸Ð½Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹                      â”‚ 1 Ñ€Ð°Ð·             â”‚
â”‚   â”‚ 2. Ð¡Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€ÑƒÐ¹                           â”‚ 1 Ñ€Ð°Ð·             â”‚
â”‚   â”‚ 3. Ð’ÐµÑ€Ð½Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚                      â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚   Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ: O(N + M)                                           â”‚
â”‚                                                                  â”‚
â”‚   ÐÐ° 10,000 ÑÑ‚Ñ€Ð¾ÐºÐ°Ñ…: Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð² 1000x!                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ð Ð•Ð¨Ð•ÐÐ˜Ð•:** ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐ¹ correlated subquery Ð² JOIN Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ CTE

---

## Ð§Ð°ÑÑ‚ÑŒ 3: ÐœÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸

### ÐœÐ¾Ð´ÐµÐ»ÑŒ 1: SQL Pipeline â€” ÐºÐ¾Ð½Ð²ÐµÐ¹ÐµÑ€ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                SQL â€” Ð­Ð¢Ðž ÐšÐžÐÐ’Ð•Ð™Ð•Ð                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ÐÐ°Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ:              Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ:                           â”‚
â”‚   SELECT ...              1. FROM/JOIN  â”€â”€â”€ ÐžÑ‚ÐºÑƒÐ´Ð° Ð´Ð°Ð½Ð½Ñ‹Ðµ?     â”‚
â”‚   FROM ...                        â†“                             â”‚
â”‚   JOIN ...                2. WHERE      â”€â”€â”€ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ ÑÑ‚Ñ€Ð¾ÐºÐ¸    â”‚
â”‚   WHERE ...                       â†“                             â”‚
â”‚   GROUP BY ...            3. GROUP BY   â”€â”€â”€ Ð“Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€ÑƒÐµÐ¼          â”‚
â”‚   HAVING ...                      â†“                             â”‚
â”‚   ORDER BY ...            4. HAVING     â”€â”€â”€ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹    â”‚
â”‚   LIMIT ...                       â†“                             â”‚
â”‚                           5. SELECT     â”€â”€â”€ Ð’Ñ‹Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸    â”‚
â”‚                                   â†“                             â”‚
â”‚                           6. DISTINCT   â”€â”€â”€ Ð£Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹   â”‚
â”‚                                   â†“                             â”‚
â”‚                           7. ORDER BY   â”€â”€â”€ Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼           â”‚
â”‚                                   â†“                             â”‚
â”‚                           8. LIMIT      â”€â”€â”€ ÐžÐ±Ñ€ÐµÐ·Ð°ÐµÐ¼            â”‚
â”‚                                                                  â”‚
â”‚   âš ï¸ Ð’ÐÐ–ÐÐž: SELECT Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ ÐŸÐžÐ¡Ð›Ð• WHERE!                     â”‚
â”‚   â†’ ÐÐ»Ð¸Ð°ÑÑ‹ Ð¸Ð· SELECT Ð½ÐµÐ»ÑŒÐ·Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð² WHERE                â”‚
â”‚   â†’ ÐÐ¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð² ORDER BY (Ð¾Ð½ Ð¿Ð¾Ð·Ð¶Ðµ)                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐœÐ¾Ð´ÐµÐ»ÑŒ 2: JOIN ÐºÐ°Ðº Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑÐ¾ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð°Ð¼Ð¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                JOIN ÐšÐÐš ÐœÐÐžÐ–Ð•Ð¡Ð¢Ð’Ð                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° A: {1, 2, 3}        Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° B: {2, 3, 4}              â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   INNER JOIN     LEFT JOIN      RIGHT JOIN    FULL JOIN â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚     A âˆ© B          A âˆª (Aâˆ©B)     (Aâˆ©B) âˆª B      A âˆª B   â”‚   â”‚
â”‚   â”‚     {2,3}          {1,2,3}       {2,3,4}      {1,2,3,4} â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   LEFT ANTI      RIGHT ANTI                             â”‚   â”‚
â”‚   â”‚   (LEFT - INNER)  (RIGHT - INNER)                       â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚     A - B          B - A                                â”‚   â”‚
â”‚   â”‚     {1}            {4}                                  â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   -- Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ LEFT ANTI:                              â”‚   â”‚
â”‚   â”‚   SELECT * FROM A                                       â”‚   â”‚
â”‚   â”‚   LEFT JOIN B ON A.id = B.id                           â”‚   â”‚
â”‚   â”‚   WHERE B.id IS NULL;                                   â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐœÐ¾Ð´ÐµÐ»ÑŒ 3: Window Functions vs GROUP BY

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           WINDOW FUNCTIONS VS GROUP BY                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   GROUP BY: "Ð¡Ð¿Ð»ÑŽÑ‰Ð¸Ð²Ð°ÐµÑ‚" Ð´Ð°Ð½Ð½Ñ‹Ðµ                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ ÐžÑ‚Ð´ÐµÐ»  â”‚ Ð—Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ð°  â”‚    â”‚ ÐžÑ‚Ð´ÐµÐ»  â”‚ Ð¡ÑƒÐ¼Ð¼Ð°    â”‚              â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚   â”‚ IT     â”‚ 5000      â”‚    â”‚ IT     â”‚ 11000    â”‚              â”‚
â”‚   â”‚ IT     â”‚ 6000      â”‚ â”€â”€â–¶â”‚ HR     â”‚ 9000     â”‚              â”‚
â”‚   â”‚ HR     â”‚ 4000      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚   â”‚ HR     â”‚ 5000      â”‚    3 ÑÑ‚Ñ€Ð¾ÐºÐ¸ â†’ 2 ÑÑ‚Ñ€Ð¾ÐºÐ¸                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                  â”‚
â”‚   WINDOW: Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ ÐºÐ¾Ð»Ð¾Ð½ÐºÑƒ, ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑ ÑÑ‚Ñ€Ð¾ÐºÐ¸                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ ÐžÑ‚Ð´ÐµÐ»  â”‚ Ð—Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ð°  â”‚    â”‚ ÐžÑ‚Ð´ÐµÐ»  â”‚ Ð—Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ð° â”‚ Ð¡ÑƒÐ¼Ð¼Ð°   â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚ IT     â”‚ 5000      â”‚    â”‚ IT     â”‚ 5000     â”‚ 11000   â”‚    â”‚
â”‚   â”‚ IT     â”‚ 6000      â”‚ â”€â”€â–¶â”‚ IT     â”‚ 6000     â”‚ 11000   â”‚    â”‚
â”‚   â”‚ HR     â”‚ 4000      â”‚    â”‚ HR     â”‚ 4000     â”‚ 9000    â”‚    â”‚
â”‚   â”‚ HR     â”‚ 5000      â”‚    â”‚ HR     â”‚ 5000     â”‚ 9000    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             4 ÑÑ‚Ñ€Ð¾ÐºÐ¸ â†’ 4 ÑÑ‚Ñ€Ð¾ÐºÐ¸ + Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚       â”‚
â”‚                                                                  â”‚
â”‚   ÐšÐ¾Ð³Ð´Ð° Ñ‡Ñ‚Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ:                                       â”‚
â”‚   â€¢ GROUP BY: Ð½ÑƒÐ¶ÐµÐ½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚ (Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹, Ð¸Ñ‚Ð¾Ð³Ð¸)             â”‚
â”‚   â€¢ WINDOW: Ð½ÑƒÐ¶ÐµÐ½ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚ + Ð´ÐµÑ‚Ð°Ð»Ð¸ (Ñ€Ð°Ð½Ð¶Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ, % Ð¾Ñ‚ Ð¾Ð±Ñ‰ÐµÐ³Ð¾) â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐœÐ¾Ð´ÐµÐ»ÑŒ 4: CTE ÐºÐ°Ðº Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CTE â€” Ð˜ÐœÐ•ÐÐžÐ’ÐÐÐÐ«Ð• ÐŸÐ•Ð Ð•ÐœÐ•ÐÐÐ«Ð•                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ð‘ÐµÐ· CTE (Ð½ÐµÑ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾):                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ SELECT * FROM (                                          â”‚   â”‚
â”‚   â”‚   SELECT * FROM (                                        â”‚   â”‚
â”‚   â”‚     SELECT * FROM (                                      â”‚   â”‚
â”‚   â”‚       SELECT ... FROM orders WHERE ...                   â”‚   â”‚
â”‚   â”‚     ) sub1 WHERE ...                                     â”‚   â”‚
â”‚   â”‚   ) sub2 JOIN (                                          â”‚   â”‚
â”‚   â”‚     SELECT ... FROM users WHERE ...                      â”‚   â”‚
â”‚   â”‚   ) sub3 ON ...                                          â”‚   â”‚
â”‚   â”‚ ) final WHERE ...                                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   ðŸ¤¯ ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð½ÑÑ‚ÑŒ!                                         â”‚
â”‚                                                                  â”‚
â”‚   Ð¡ CTE (Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾):                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ WITH                                                     â”‚   â”‚
â”‚   â”‚   recent_orders AS (                                     â”‚   â”‚
â”‚   â”‚     SELECT ... FROM orders WHERE date > ...              â”‚   â”‚
â”‚   â”‚   ),                                                     â”‚   â”‚
â”‚   â”‚   active_users AS (                                      â”‚   â”‚
â”‚   â”‚     SELECT ... FROM users WHERE status = 'active'        â”‚   â”‚
â”‚   â”‚   ),                                                     â”‚   â”‚
â”‚   â”‚   user_stats AS (                                        â”‚   â”‚
â”‚   â”‚     SELECT ... FROM recent_orders GROUP BY user_id       â”‚   â”‚
â”‚   â”‚   )                                                      â”‚   â”‚
â”‚   â”‚ SELECT *                                                 â”‚   â”‚
â”‚   â”‚ FROM active_users u                                      â”‚   â”‚
â”‚   â”‚ JOIN user_stats s ON s.user_id = u.id                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   ðŸ˜Š ÐšÐ°Ðº Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ ÐºÐ½Ð¸Ð³Ñƒ ÑÐ²ÐµÑ€Ñ…Ñƒ Ð²Ð½Ð¸Ð·!                              â”‚
â”‚                                                                  â”‚
â”‚   CTE = Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ñ Ð¸Ð¼ÐµÐ½Ð°Ð¼Ð¸                      â”‚
â”‚   ÐšÐ°Ðº Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð² Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸:                            â”‚
â”‚   recent_orders = ...                                           â”‚
â”‚   active_users = ...                                            â”‚
â”‚   result = join(active_users, recent_orders)                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐœÐ¾Ð´ÐµÐ»ÑŒ 5: Ð”ÐµÑ€ÐµÐ²Ð¾ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹ â€” ÐºÐ°ÐºÐ¾Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ ÐºÐ¾Ð³Ð´Ð°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ÐšÐÐšÐžÐ™ Ð˜ÐÐ¡Ð¢Ð Ð£ÐœÐ•ÐÐ¢ ÐšÐžÐ“Ð”Ð Ð˜Ð¡ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð¬                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚               Ð§Ñ‚Ð¾ Ñ‚ÐµÐ±Ðµ Ð½ÑƒÐ¶Ð½Ð¾?                                    â”‚
â”‚                     â”‚                                            â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚       â”‚             â”‚             â”‚                             â”‚
â”‚       â–¼             â–¼             â–¼                             â”‚
â”‚   ÐžÐ±ÑŠÐµÐ´Ð¸Ð½Ð¸Ñ‚ÑŒ    ÐžÑ‚Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ  ÐÐ³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ                     â”‚
â”‚   Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹       Ð´Ð°Ð½Ð½Ñ‹Ðµ         Ð´Ð°Ð½Ð½Ñ‹Ðµ                           â”‚
â”‚       â”‚             â”‚             â”‚                             â”‚
â”‚       â–¼             â”‚       â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”         â”‚       â”‚           â”‚                       â”‚
â”‚   â”‚ JOIN  â”‚         â”‚   Ð¡Ñ…Ð»Ð¾Ð¿Ð½ÑƒÑ‚ÑŒ   Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   ÑÑ‚Ñ€Ð¾ÐºÐ¸?     ÑÑ‚Ñ€Ð¾ÐºÐ¸?                     â”‚
â”‚       â”‚             â”‚       â”‚           â”‚                       â”‚
â”‚   ÐšÐ°ÐºÐ¾Ð¹ Ñ‚Ð¸Ð¿?        â”‚       â–¼           â–¼                       â”‚
â”‚       â”‚             â”‚   GROUP BY    WINDOW                      â”‚
â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”         â”‚                   â”‚                       â”‚
â”‚   â”‚       â”‚         â”‚               Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾?                  â”‚
â”‚   â–¼       â–¼         â”‚                   â”‚                       â”‚
â”‚  Ð’ÑÐµ    Ð¢Ð¾Ð»ÑŒÐºÐ¾      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  ÑÑ‚Ñ€Ð¾ÐºÐ¸ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ  â”‚   â”‚               â”‚               â”‚       â”‚
â”‚    â”‚       â”‚        â”‚   â–¼               â–¼               â–¼       â”‚
â”‚    â–¼       â–¼        â”‚  Ð Ð°Ð½Ð³        Ð¡Ð¾ÑÐµÐ´Ð½Ð¸Ðµ        ÐÐ³Ñ€ÐµÐ³Ð°Ñ‚      â”‚
â”‚  LEFT   INNER       â”‚              ÑÑ‚Ñ€Ð¾ÐºÐ¸          Ð¿Ð¾ Ð³Ñ€ÑƒÐ¿Ð¿Ðµ    â”‚
â”‚  JOIN   JOIN        â”‚   â”‚               â”‚               â”‚       â”‚
â”‚                     â”‚   â–¼               â–¼               â–¼       â”‚
â”‚                     â”‚ ROW_NUMBER    LAG/LEAD      SUM/AVG       â”‚
â”‚                     â”‚ RANK          FIRST_VALUE   OVER(...)     â”‚
â”‚                     â”‚ DENSE_RANK    LAST_VALUE                  â”‚
â”‚                     â”‚                                           â”‚
â”‚                     â”‚                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚              â”‚             â”‚                                    â”‚
â”‚              â–¼             â–¼                                    â”‚
â”‚          Ð”Ð¾ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹    ÐŸÐ¾ÑÐ»Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹                              â”‚
â”‚              â”‚             â”‚                                    â”‚
â”‚              â–¼             â–¼                                    â”‚
â”‚           WHERE         HAVING                                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ð¢ÐµÑ€Ð¼Ð¸Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ

| Ð¢ÐµÑ€Ð¼Ð¸Ð½ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|--------|----------|
| **DDL** | Data Definition Language â€” CREATE, ALTER, DROP (ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°) |
| **DML** | Data Manipulation Language â€” SELECT, INSERT, UPDATE, DELETE (Ð´Ð°Ð½Ð½Ñ‹Ðµ) |
| **DCL** | Data Control Language â€” GRANT, REVOKE (Ð¿Ñ€Ð°Ð²Ð°) |
| **Primary Key** | Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ ÑÑ‚Ñ€Ð¾ÐºÐ¸ (NOT NULL + UNIQUE) |
| **Foreign Key** | Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Primary Key Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ (ÑÐ²ÑÐ·ÑŒ) |
| **NULL** | ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ (Ð½Ðµ 0, Ð½Ðµ Ð¿ÑƒÑÑ‚Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°) |
| **Subquery** | Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° |
| **CTE** | Common Table Expression â€” Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ (WITH) |
| **Window Function** | Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð½Ð°Ð´ "Ð¾ÐºÐ½Ð¾Ð¼" ÑÑ‚Ñ€Ð¾Ðº Ð±ÐµÐ· Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸ |
| **Aggregate Function** | SUM, COUNT, AVG, MAX, MIN â€” ÑÐ²Ñ‘Ñ€Ñ‚ÐºÐ° ÑÑ‚Ñ€Ð¾Ðº Ð² Ð¾Ð´Ð½Ñƒ |

---

## ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ SQL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ÐŸÐžÐ Ð¯Ð”ÐžÐš Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐ˜Ð¯ SQL Ð—ÐÐŸÐ ÐžÐ¡Ð                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   1. FROM / JOIN      â”€â”€â”€ ÐžÑ‚ÐºÑƒÐ´Ð° Ð±ÐµÑ€Ñ‘Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ              â”‚
â”‚          â†“                                                  â”‚
â”‚   2. WHERE            â”€â”€â”€ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ ÑÑ‚Ñ€Ð¾Ðº                 â”‚
â”‚          â†“                                                  â”‚
â”‚   3. GROUP BY         â”€â”€â”€ Ð“Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ°                      â”‚
â”‚          â†“                                                  â”‚
â”‚   4. HAVING           â”€â”€â”€ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ÑÐ»Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸         â”‚
â”‚          â†“                                                  â”‚
â”‚   5. SELECT           â”€â”€â”€ Ð’Ñ‹Ð±Ð¾Ñ€ ÐºÐ¾Ð»Ð¾Ð½Ð¾Ðº                    â”‚
â”‚          â†“                                                  â”‚
â”‚   6. DISTINCT         â”€â”€â”€ Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ð¾Ð²              â”‚
â”‚          â†“                                                  â”‚
â”‚   7. ORDER BY         â”€â”€â”€ Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°                       â”‚
â”‚          â†“                                                  â”‚
â”‚   8. LIMIT / OFFSET   â”€â”€â”€ ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸  Ð’Ð°Ð¶Ð½Ð¾: SELECT Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ ÐŸÐžÐ¡Ð›Ð• WHERE!
    ÐŸÐ¾ÑÑ‚Ð¾Ð¼Ñƒ Ð°Ð»Ð¸Ð°ÑÑ‹ Ð¸Ð· SELECT Ð½ÐµÐ»ÑŒÐ·Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð² WHERE
```

---

## JOIN: Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†

### Ð¢Ð¸Ð¿Ñ‹ JOIN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ð¢Ð˜ÐŸÐ« JOIN                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚   INNER JOIN          LEFT JOIN           RIGHT JOIN              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  A  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚ B    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚ B     â”‚  A  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚     â”‚
â”‚   â”‚     â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚      â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚       â”‚     â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜     â”‚
â”‚   Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ  A + ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ      Ð¡Ð¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ + B          â”‚
â”‚                                                                   â”‚
â”‚   FULL OUTER JOIN    CROSS JOIN                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  A Ã— B = Ð²ÑÐµ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸                    â”‚
â”‚   â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚  3 ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ã— 4 ÑÑ‚Ñ€Ð¾ÐºÐ¸ = 12 ÑÑ‚Ñ€Ð¾Ðº            â”‚
â”‚   â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚                                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚   Ð’ÑÐµ Ð¸Ð· A Ð¸ B                                                    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹

```sql
-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð²
-- users: id, name, department_id
-- departments: id, name
-- orders: id, user_id, amount, created_at

-- âœ… INNER JOIN â€” Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ñ Ð¾Ñ‚Ð´ÐµÐ»Ð°Ð¼Ð¸
SELECT u.name, d.name as department
FROM users u
INNER JOIN departments d ON u.department_id = d.id;

-- âœ… LEFT JOIN â€” Ð²ÑÐµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸, Ð´Ð°Ð¶Ðµ Ð±ÐµÐ· Ð¾Ñ‚Ð´ÐµÐ»Ð°
SELECT u.name, d.name as department
FROM users u
LEFT JOIN departments d ON u.department_id = d.id;
-- Ð•ÑÐ»Ð¸ department_id = NULL â†’ department = NULL

-- âœ… ÐÐ°Ð¹Ñ‚Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð‘Ð•Ð— Ð¾Ñ‚Ð´ÐµÐ»Ð°
SELECT u.name
FROM users u
LEFT JOIN departments d ON u.department_id = d.id
WHERE d.id IS NULL;

-- âœ… Multiple JOINs
SELECT u.name, d.name as department, COUNT(o.id) as order_count
FROM users u
LEFT JOIN departments d ON u.department_id = d.id
LEFT JOIN orders o ON o.user_id = u.id
GROUP BY u.id, u.name, d.name;
```

### Anti-join pattern

```sql
-- âŒ ÐœÐµÐ´Ð»ÐµÐ½Ð½Ð¾: Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ Ñ NOT IN
SELECT * FROM users
WHERE id NOT IN (SELECT user_id FROM orders);

-- âœ… Ð‘Ñ‹ÑÑ‚Ñ€Ð¾: LEFT JOIN + IS NULL
SELECT u.*
FROM users u
LEFT JOIN orders o ON o.user_id = u.id
WHERE o.id IS NULL;

-- âœ… ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð°: NOT EXISTS
SELECT * FROM users u
WHERE NOT EXISTS (
    SELECT 1 FROM orders o WHERE o.user_id = u.id
);
```

---

## ÐŸÐ¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ (Subqueries)

### Ð¢Ð¸Ð¿Ñ‹ Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²

```sql
-- 1. Scalar subquery (Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ð´Ð½Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ)
SELECT name,
       (SELECT AVG(salary) FROM employees) as avg_salary
FROM employees;

-- 2. Row subquery (Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ð´Ð½Ñƒ ÑÑ‚Ñ€Ð¾ÐºÑƒ)
SELECT * FROM employees
WHERE (department_id, salary) = (
    SELECT department_id, MAX(salary)
    FROM employees
    GROUP BY department_id
    LIMIT 1
);

-- 3. Table subquery (Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ)
SELECT * FROM (
    SELECT name, salary,
           RANK() OVER (ORDER BY salary DESC) as rank
    FROM employees
) ranked
WHERE rank <= 5;

-- 4. EXISTS subquery (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ñ)
SELECT * FROM departments d
WHERE EXISTS (
    SELECT 1 FROM employees e
    WHERE e.department_id = d.id
);
```

### Correlated vs Non-correlated

```sql
-- Non-correlated: Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·
SELECT * FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees);

-- Correlated: Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð²Ð½ÐµÑˆÐ½ÐµÐ³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°
-- âš ï¸ ÐœÐ¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ð¼!
SELECT * FROM employees e1
WHERE salary > (
    SELECT AVG(salary) FROM employees e2
    WHERE e2.department_id = e1.department_id  -- ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ
);
```

---

## CTE (Common Table Expressions)

### Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ

```sql
-- âœ… CTE Ð´ÐµÐ»Ð°ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ñ‹Ð¼
WITH active_users AS (
    SELECT * FROM users
    WHERE status = 'active'
    AND last_login > CURRENT_DATE - INTERVAL '30 days'
),
user_orders AS (
    SELECT user_id, COUNT(*) as order_count, SUM(amount) as total
    FROM orders
    WHERE created_at > CURRENT_DATE - INTERVAL '30 days'
    GROUP BY user_id
)
SELECT
    u.name,
    u.email,
    COALESCE(o.order_count, 0) as orders,
    COALESCE(o.total, 0) as revenue
FROM active_users u
LEFT JOIN user_orders o ON o.user_id = u.id
ORDER BY revenue DESC;
```

### Recursive CTE

```sql
-- Ð˜ÐµÑ€Ð°Ñ€Ñ…Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° (Ð´ÐµÑ€ÐµÐ²Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹, org chart)
WITH RECURSIVE category_tree AS (
    -- Base case: ÐºÐ¾Ñ€Ð½ÐµÐ²Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
    SELECT id, name, parent_id, 1 as level,
           name::text as path
    FROM categories
    WHERE parent_id IS NULL

    UNION ALL

    -- Recursive case: Ð´Ð¾Ñ‡ÐµÑ€Ð½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
    SELECT c.id, c.name, c.parent_id, ct.level + 1,
           ct.path || ' > ' || c.name
    FROM categories c
    INNER JOIN category_tree ct ON c.parent_id = ct.id
)
SELECT * FROM category_tree ORDER BY path;

-- Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
-- | id | name        | level | path                           |
-- |----|-------------|-------|--------------------------------|
-- | 1  | Electronics | 1     | Electronics                    |
-- | 2  | Phones      | 2     | Electronics > Phones           |
-- | 3  | iPhone      | 3     | Electronics > Phones > iPhone  |
```

---

## ÐžÐºÐ¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ (Window Functions)

### ÐšÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ñ Ð¾ÐºÐ½Ð°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ÐžÐšÐžÐÐÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚   ÐžÐ±Ñ‹Ñ‡Ð½Ð°Ñ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ:        ÐžÐºÐ¾Ð½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ:                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ name  â”‚ salary â”‚        â”‚ name  â”‚ salary â”‚ avg_dept  â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚ Alice â”‚  5000  â”‚        â”‚ Alice â”‚  5000  â”‚   5500    â”‚  â”‚
â”‚   â”‚ Bob   â”‚  6000  â”‚  â”€â”€â–¶   â”‚ Bob   â”‚  6000  â”‚   5500    â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚ Carol â”‚  7000  â”‚   6500    â”‚  â”‚
â”‚   â”‚ AVG   â”‚  5500  â”‚        â”‚ Dave  â”‚  6000  â”‚   6500    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   GROUP BY ÑÑ…Ð»Ð¾Ð¿Ñ‹Ð²Ð°ÐµÑ‚       OVER() ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ ÑÑ‚Ñ€Ð¾ÐºÐ¸         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ð¡Ð¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ

```sql
function_name() OVER (
    [PARTITION BY column1, column2, ...]  -- Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð¾ÐºÐ½Ð°
    [ORDER BY column3 [ASC|DESC], ...]    -- ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð² Ð¾ÐºÐ½Ðµ
    [ROWS/RANGE BETWEEN ... AND ...]       -- Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¾ÐºÐ½Ð°
)
```

### ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸

```sql
-- 1. ROW_NUMBER, RANK, DENSE_RANK
SELECT
    name,
    department,
    salary,
    ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) as row_num,
    RANK() OVER (PARTITION BY department ORDER BY salary DESC) as rank,
    DENSE_RANK() OVER (PARTITION BY department ORDER BY salary DESC) as dense_rank
FROM employees;

-- Ð Ð°Ð·Ð½Ð¸Ñ†Ð°:
-- salary: 100, 100, 90, 80
-- ROW_NUMBER: 1, 2, 3, 4      (Ð²ÑÐµÐ³Ð´Ð° ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹)
-- RANK:       1, 1, 3, 4      (Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ð¿Ð¾ÑÐ»Ðµ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ð¾Ð²)
-- DENSE_RANK: 1, 1, 2, 3      (Ð½Ðµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚)

-- 2. LAG / LEAD â€” Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÐ¾ÑÐµÐ´Ð½Ð¸Ð¼ ÑÑ‚Ñ€Ð¾ÐºÐ°Ð¼
SELECT
    date,
    revenue,
    LAG(revenue, 1) OVER (ORDER BY date) as prev_day,
    LEAD(revenue, 1) OVER (ORDER BY date) as next_day,
    revenue - LAG(revenue, 1) OVER (ORDER BY date) as daily_change
FROM daily_sales;

-- 3. FIRST_VALUE / LAST_VALUE / NTH_VALUE
SELECT
    name,
    salary,
    FIRST_VALUE(name) OVER (ORDER BY salary DESC) as top_earner,
    LAST_VALUE(name) OVER (
        ORDER BY salary DESC
        ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING
    ) as lowest_earner
FROM employees;

-- 4. ÐšÑƒÐ¼ÑƒÐ»ÑÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚Ñ‹
SELECT
    date,
    amount,
    SUM(amount) OVER (ORDER BY date) as running_total,
    AVG(amount) OVER (ORDER BY date ROWS BETWEEN 6 PRECEDING AND CURRENT ROW) as moving_avg_7d
FROM transactions;
```

### ÐŸÑ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹

```sql
-- Ð¢Ð¾Ð¿-3 Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð° Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
WITH ranked AS (
    SELECT
        category_id,
        name,
        sales,
        ROW_NUMBER() OVER (PARTITION BY category_id ORDER BY sales DESC) as rn
    FROM products
)
SELECT * FROM ranked WHERE rn <= 3;

-- ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚ Ð¾Ñ‚ Ð¾Ð±Ñ‰ÐµÐ³Ð¾
SELECT
    department,
    name,
    salary,
    ROUND(100.0 * salary / SUM(salary) OVER (), 2) as pct_of_total,
    ROUND(100.0 * salary / SUM(salary) OVER (PARTITION BY department), 2) as pct_of_dept
FROM employees;

-- Year-over-year growth
SELECT
    year,
    month,
    revenue,
    LAG(revenue, 12) OVER (ORDER BY year, month) as same_month_last_year,
    ROUND(100.0 * (revenue - LAG(revenue, 12) OVER (ORDER BY year, month))
          / NULLIF(LAG(revenue, 12) OVER (ORDER BY year, month), 0), 2) as yoy_growth
FROM monthly_revenue;
```

---

## ÐÐ³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ: GROUP BY + HAVING

### ÐžÑÐ½Ð¾Ð²Ñ‹

```sql
-- GROUP BY Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ‚Ñ€Ð¾ÐºÐ¸
SELECT department_id, COUNT(*) as emp_count, AVG(salary) as avg_salary
FROM employees
GROUP BY department_id;

-- HAVING Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÑ‚ Ð¿Ð¾ÑÐ»Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸
SELECT department_id, COUNT(*) as emp_count
FROM employees
GROUP BY department_id
HAVING COUNT(*) > 5;  -- Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ñ‚Ð´ÐµÐ»Ñ‹ Ñ >5 ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°Ð¼Ð¸

-- âš ï¸ WHERE vs HAVING
-- WHERE: Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÑ‚ Ð¡Ð¢Ð ÐžÐšÐ˜ Ð´Ð¾ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸
-- HAVING: Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÑ‚ Ð“Ð Ð£ÐŸÐŸÐ« Ð¿Ð¾ÑÐ»Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸

SELECT department_id, AVG(salary) as avg_salary
FROM employees
WHERE status = 'active'      -- ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ…
GROUP BY department_id
HAVING AVG(salary) > 50000;  -- Ð¿Ð¾Ñ‚Ð¾Ð¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð±Ð¾Ð³Ð°Ñ‚Ñ‹Ðµ Ð¾Ñ‚Ð´ÐµÐ»Ñ‹
```

### GROUPING SETS, ROLLUP, CUBE

```sql
-- GROUPING SETS â€” Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²Ð¾Ðº Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð·Ð°Ð¿Ñ€Ð¾ÑÐµ
SELECT
    COALESCE(department, 'ALL') as department,
    COALESCE(year::text, 'ALL') as year,
    SUM(salary) as total
FROM employees
GROUP BY GROUPING SETS (
    (department, year),  -- Ð¿Ð¾ Ð¾Ñ‚Ð´ÐµÐ»Ñƒ Ð¸ Ð³Ð¾Ð´Ñƒ
    (department),         -- Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ Ð¾Ñ‚Ð´ÐµÐ»Ñƒ
    (year),               -- Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ Ð³Ð¾Ð´Ñƒ
    ()                    -- Ð¾Ð±Ñ‰Ð¸Ð¹ Ð¸Ñ‚Ð¾Ð³
);

-- ROLLUP â€” Ð¸ÐµÑ€Ð°Ñ€Ñ…Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ
SELECT department, team, SUM(salary)
FROM employees
GROUP BY ROLLUP (department, team);
-- Ð”Ð°Ñ‘Ñ‚: (dept, team), (dept), ()

-- CUBE â€” Ð²ÑÐµ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸
SELECT department, team, SUM(salary)
FROM employees
GROUP BY CUBE (department, team);
-- Ð”Ð°Ñ‘Ñ‚: (dept, team), (dept), (team), ()
```

---

## ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸

### COALESCE Ð¸ NULLIF

```sql
-- COALESCE â€” Ð¿ÐµÑ€Ð²Ð¾Ðµ Ð½Ðµ-NULL Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ
SELECT COALESCE(nickname, name, 'Anonymous') as display_name
FROM users;

-- NULLIF â€” Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ NULL ÐµÑÐ»Ð¸ Ñ€Ð°Ð²Ð½Ñ‹ (Ð¸Ð·Ð±ÐµÐ³Ð°ÐµÐ¼ Ð´ÐµÐ»ÐµÐ½Ð¸Ñ Ð½Ð° 0)
SELECT total / NULLIF(count, 0) as average
FROM stats;
```

### CASE WHEN

```sql
SELECT
    name,
    salary,
    CASE
        WHEN salary >= 100000 THEN 'Senior'
        WHEN salary >= 50000 THEN 'Middle'
        ELSE 'Junior'
    END as level
FROM employees;
```

### DISTINCT ON (PostgreSQL)

```sql
-- ÐŸÐµÑ€Ð²Ð°Ñ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð³Ñ€ÑƒÐ¿Ð¿Ðµ
SELECT DISTINCT ON (user_id)
    user_id,
    order_id,
    created_at
FROM orders
ORDER BY user_id, created_at DESC;
-- ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð·Ð°ÐºÐ°Ð· ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
```

### LATERAL JOIN

```sql
-- ÐŸÐ¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð¾Ð¼ Ðº Ð²Ð½ÐµÑˆÐ½Ð¸Ð¼ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ°Ð¼
SELECT u.name, recent_orders.*
FROM users u
CROSS JOIN LATERAL (
    SELECT order_id, amount, created_at
    FROM orders o
    WHERE o.user_id = u.id
    ORDER BY created_at DESC
    LIMIT 3
) recent_orders;
```

---

## Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸

### 1. NULL Ð² ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸ÑÑ…

```sql
-- âŒ ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾: NULL = NULL â†’ NULL (Ð½Ðµ TRUE!)
SELECT * FROM users WHERE status = NULL;

-- âœ… ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾
SELECT * FROM users WHERE status IS NULL;

-- âš ï¸ NOT IN Ñ NULL
SELECT * FROM users WHERE id NOT IN (1, 2, NULL);
-- Ð’ÐµÑ€Ð½Ñ‘Ñ‚ 0 ÑÑ‚Ñ€Ð¾Ðº! NULL "Ð¾Ñ‚Ñ€Ð°Ð²Ð»ÑÐµÑ‚" Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚

-- âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ NOT EXISTS Ð¸Ð»Ð¸ Ð¸ÑÐºÐ»ÑŽÑ‡Ð¸ NULL
SELECT * FROM users WHERE id NOT IN (
    SELECT user_id FROM banned WHERE user_id IS NOT NULL
);
```

### 2. ÐÐ³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ Ð±ÐµÐ· GROUP BY

```sql
-- âŒ ÐžÑˆÐ¸Ð±ÐºÐ°: name Ð½Ðµ Ð² GROUP BY Ð¸ Ð½Ðµ Ð² Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
SELECT department_id, name, COUNT(*)
FROM employees
GROUP BY department_id;

-- âœ… ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾: Ð´Ð¾Ð±Ð°Ð²ÑŒ Ð² GROUP BY Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚
SELECT department_id, ARRAY_AGG(name), COUNT(*)
FROM employees
GROUP BY department_id;
```

### 3. ORDER BY Ñ DISTINCT Ð¸Ð»Ð¸ UNION

```sql
-- âŒ DISTINCT + ORDER BY Ð¿Ð¾ Ð½Ðµ-Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ ÐºÐ¾Ð»Ð¾Ð½ÐºÐµ
SELECT DISTINCT category FROM products ORDER BY created_at;

-- âœ… Ð”Ð¾Ð±Ð°Ð²ÑŒ Ð² SELECT Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾Ñ
SELECT DISTINCT ON (category) category, created_at
FROM products
ORDER BY category, created_at DESC;
```

---

## Ð¡Ð²ÑÐ·Ð¸

- [[database-design-optimization]] â€” Ð¸Ð½Ð´ÐµÐºÑÑ‹ Ð¸ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
- [[databases-transactions-acid]] â€” Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð¸ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸
- [[databases-overview]] â€” ÐºÐ°Ñ€Ñ‚Ð° Ñ€Ð°Ð·Ð´ÐµÐ»Ð°

---

## Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸

- [PostgreSQL Documentation: SQL Syntax](https://www.postgresql.org/docs/current/sql.html)
- [Modern SQL](https://modern-sql.com/) â€” Ð¿Ñ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ñ‹Ðµ SQL ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸
- [Use The Index, Luke](https://use-the-index-luke.com/) â€” SQL Ñ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ñ€ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
- "SQL Performance Explained" by Markus Winand

---

---

## ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ ÑÐµÐ±Ñ

> [!question]- ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ SQL-Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ Ð¿Ð¾Ñ€ÑÐ´ÐºÐ° ÐµÐ³Ð¾ Ð·Ð°Ð¿Ð¸ÑÐ¸?
> SQL â€” Ð´ÐµÐºÐ»Ð°Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÐ·Ñ‹Ðº: Ð¼Ñ‹ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ð§Ð¢Ðž Ñ…Ð¾Ñ‚Ð¸Ð¼ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ, Ð° Ð½Ðµ ÐšÐÐš. Ð›Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ: FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY -> LIMIT. SELECT Ð¿Ð¸ÑˆÐµÑ‚ÑÑ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ Ð´Ð»Ñ Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸, Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¼. Ð­Ñ‚Ð¾ Ð¾Ð±ÑŠÑÑÐ½ÑÐµÑ‚, Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ð½ÐµÐ»ÑŒÐ·Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ð»Ð¸Ð°Ñ Ð¸Ð· SELECT Ð² WHERE â€” WHERE Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ñ€Ð°Ð½ÑŒÑˆÐµ.

> [!question]- ÐšÐ¾Ð³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ LEFT JOIN Ð²Ð¼ÐµÑÑ‚Ð¾ INNER JOIN Ð¸ Ñ‡ÐµÐ¼ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚?
> INNER JOIN Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÑŽÑ‰Ð¸Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸Ð· Ð¾Ð±ÐµÐ¸Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†. LEFT JOIN ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð’Ð¡Ð• ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð¸Ð· Ð»ÐµÐ²Ð¾Ð¹ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹, Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÑ NULL Ð´Ð»Ñ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð°Ð²Ð¾Ð¹. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ LEFT JOIN ÐºÐ¾Ð³Ð´Ð° Ð½ÑƒÐ¶Ð½Ñ‹ Ð²ÑÐµ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð²ÑÐµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸, Ð´Ð°Ð¶Ðµ Ð±ÐµÐ· Ð·Ð°ÐºÐ°Ð·Ð¾Ð²). INNER JOIN Ñ‚ÐµÑ€ÑÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð±ÐµÐ· ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ð¹.

> [!question]- Ð’ Ñ‡Ñ‘Ð¼ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð¼ÐµÐ¶Ð´Ñƒ Ð¾ÐºÐ¾Ð½Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÐµÐ¹ Ð¸ GROUP BY?
> GROUP BY ÑÑ…Ð»Ð¾Ð¿Ñ‹Ð²Ð°ÐµÑ‚ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ â€” Ð½Ð° Ð²Ñ‹Ñ…Ð¾Ð´Ðµ Ð¾Ð´Ð½Ð° ÑÑ‚Ñ€Ð¾ÐºÐ° Ð½Ð° Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ. ÐžÐºÐ¾Ð½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ (OVER) Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚, Ð½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð²ÑÐµ Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, SUM Ñ GROUP BY Ð¿Ð¾ÐºÐ°Ð¶ÐµÑ‚ Ð¾Ð´Ð½Ñƒ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ñ Ð¸Ñ‚Ð¾Ð³Ð¾Ð¼ Ð½Ð° Ð¾Ñ‚Ð´ÐµÐ», Ð° SUM Ñ OVER Ð¿Ð¾ÐºÐ°Ð¶ÐµÑ‚ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ° Ñ Ð¾Ð±Ñ‰ÐµÐ¹ ÑÑƒÐ¼Ð¼Ð¾Ð¹ ÐµÐ³Ð¾ Ð¾Ñ‚Ð´ÐµÐ»Ð° Ñ€ÑÐ´Ð¾Ð¼.

> [!question]- ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ SELECT * ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ Ð°Ð½Ñ‚Ð¸Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð¾Ð¼ Ð² production-ÐºÐ¾Ð´Ðµ?
> SELECT * Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚ Ð²ÑÐµ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð½ÐµÐ½ÑƒÐ¶Ð½Ñ‹Ðµ, Ñ‡Ñ‚Ð¾ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ I/O Ð¸ ÑÐµÑ‚ÐµÐ²Ð¾Ð¹ Ñ‚Ñ€Ð°Ñ„Ð¸Ðº. ÐŸÑ€Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ Ð½Ð¾Ð²Ð¾Ð¹ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½ÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð¾ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð´Ð°Ð½Ð½Ñ‹Ñ…. Ð˜Ð½Ð´ÐµÐºÑÑ‹ covering scan Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚. Ð’ production Ð²ÑÐµÐ³Ð´Ð° Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÑÐ¹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ ÑÐ²Ð½Ð¾.

---

## ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸

ÐšÐ°ÐºÐ¾Ð² Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ SQL-Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°?
?
FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY -> LIMIT. ÐÐ°Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ SELECT, Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ â€” Ñ FROM.

Ð§ÐµÐ¼ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÑŽÑ‚ÑÑ WHERE Ð¸ HAVING?
?
WHERE Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÑ‚ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð”Ðž Ð³Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ¸, HAVING â€” ÐŸÐžÐ¡Ð›Ð• GROUP BY. WHERE Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ‚Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸, HAVING â€” Ð¼Ð¾Ð¶ÐµÑ‚ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, HAVING COUNT(*) > 5).

Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ CTE (Common Table Expression)?
?
Ð˜Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ñ‡ÐµÑ€ÐµÐ· WITH ... AS (...). Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ°Ðº Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ: Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ÑÑ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼ Ð·Ð°Ð¿Ñ€Ð¾ÑÐµ. Ð£Ð»ÑƒÑ‡ÑˆÐ°ÐµÑ‚ Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾ÑÑ‚ÑŒ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð¾Ð´Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð².

ÐšÐ°ÐºÐ¸Ðµ Ñ‚Ð¸Ð¿Ñ‹ JOIN ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚?
?
INNER JOIN (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ), LEFT/RIGHT JOIN (Ð²ÑÐµ Ð¸Ð· Ð¾Ð´Ð½Ð¾Ð¹ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ + ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ), FULL OUTER JOIN (Ð²ÑÐµ Ð¸Ð· Ð¾Ð±ÐµÐ¸Ñ…), CROSS JOIN (Ð´ÐµÐºÐ°Ñ€Ñ‚Ð¾Ð²Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ). Ð¡Ð°Ð¼Ñ‹Ðµ Ñ‡Ð°ÑÑ‚Ñ‹Ðµ: INNER Ð¸ LEFT.

Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚ Ð¾ÐºÐ¾Ð½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ROW_NUMBER()?
?
ÐŸÑ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°ÐµÑ‚ Ð¿Ð¾Ñ€ÑÐ´ÐºÐ¾Ð²Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¿Ð°Ñ€Ñ‚Ð¸Ñ†Ð¸Ð¸ (PARTITION BY) Ð² ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ (ORDER BY). ÐŸÐ¾Ð»ÐµÐ·Ð½Ð° Ð´Ð»Ñ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ð¸, Ð´ÐµÐ´ÑƒÐ¿Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (Ð²Ð·ÑÑ‚ÑŒ Ð¿ÐµÑ€Ð²ÑƒÑŽ/Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑŽÑŽ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð¸Ð· Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹).

Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ SARGable Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹?
?
SARGable (Search ARGument ABLE) â€” Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹, Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‰Ð¸Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½Ð´ÐµÐºÑ. Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð²Ð¾ÐºÑ€ÑƒÐ³ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ (WHERE YEAR(date) = 2024) Ð´ÐµÐ»Ð°ÑŽÑ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ non-SARGable. ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾: WHERE date >= '2024-01-01' AND date < '2025-01-01'.

Ð§ÐµÐ¼ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ UNION Ð¾Ñ‚ UNION ALL?
?
UNION ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹ (Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÑƒ Ð¸ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ). UNION ALL Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð²ÑÐµ ÑÑ‚Ñ€Ð¾ÐºÐ¸, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹. UNION ALL Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÐµÐ³Ð¾ ÐµÑÐ»Ð¸ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹ Ð½Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°.

---

## ÐšÑƒÐ´Ð° Ð´Ð°Ð»ÑŒÑˆÐµ

| ÐÐ°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ | ÐšÑƒÐ´Ð° | Ð—Ð°Ñ‡ÐµÐ¼ |
|-------------|------|-------|
| Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑˆÐ°Ð³ | [[database-design-optimization]] | Ð˜Ð½Ð´ÐµÐºÑÑ‹, EXPLAIN ANALYZE, N+1, Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ |
| Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑˆÐ°Ð³ | [[databases-transactions-acid]] | Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸, ÑƒÑ€Ð¾Ð²Ð½Ð¸ Ð¸Ð·Ð¾Ð»ÑÑ†Ð¸Ð¸, Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ |
| Ð£Ð³Ð»ÑƒÐ±Ð¸Ñ‚ÑŒÑÑ | [[sql-databases-complete]] | PostgreSQL, MySQL, SQLite â€” Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¡Ð£Ð‘Ð” |
| Ð¡Ð¼ÐµÐ¶Ð½Ð°Ñ Ñ‚ÐµÐ¼Ð° | [[api-design]] | ÐšÐ°Ðº SQL-Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ ÑÐ²ÑÐ·Ð°Ð½Ñ‹ Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ REST/GraphQL API |
| ÐžÐ±Ð·Ð¾Ñ€ | [[databases-overview]] | Ð’ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº ÐºÐ°Ñ€Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»Ð° |

---

*ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð¾: 2025-12-22 | PostgreSQL 16*
*ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾: 2026-01-09 â€” Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð¿ÐµÐ´Ð°Ð³Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐµÐºÑ†Ð¸Ð¸ (5 Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ð¹: ÐºÑƒÑ…Ð½Ñ/Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ñ€ÐµÑÑ‚Ð¾Ñ€Ð°Ð½/SELECT, ÑÐ²Ð°Ð´ÑŒÐ±Ð°/JOIN, Ð¿Ð»Ñ‘Ð½ÐºÐ°/Ð¾ÐºÐ¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸, Ð¼Ð°ÑˆÐ¸Ð½Ð° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸/LAG-LEAD; 6 Ñ‚Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ñ… Ð¾ÑˆÐ¸Ð±Ð¾Ðº: NULL, Cartesian product, SELECT *, Ð½Ðµ-SARGable, DISTINCT ÐºÐ°Ðº ÐºÐ¾ÑÑ‚Ñ‹Ð»ÑŒ, correlated subquery; 5 Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹: SQL pipeline, JOIN ÐºÐ°Ðº Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð°, Window vs GROUP BY, CTE ÐºÐ°Ðº Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ, Ð´ÐµÑ€ÐµÐ²Ð¾ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹)*
