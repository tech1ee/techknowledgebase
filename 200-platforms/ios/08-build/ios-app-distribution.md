---
title: "iOS App Distribution: TestFlight, App Store, Enterprise"
created: 2026-01-11
modified: 2026-02-13
type: deep-dive
reading_time: 169
difficulty: 5
study_status: not_started
mastery: 0
last_reviewed:
next_review:
status: published
tags:
  - type/deep-dive
  - topic/ios
  - topic/distribution
  - level/intermediate
related:
  - "[[ios-code-signing]]"
  - "[[ios-ci-cd]]"
  - "[[cross-distribution]]"
prerequisites:
  - "[[ios-overview]]"
  - "[[ios-xcode-fundamentals]]"
  - "[[ios-code-signing]]"
---

# iOS App Distribution: TestFlight, App Store, Enterprise

## TL;DR

iOS предлагает несколько способов дистрибуции приложений: TestFlight для бета-тестирования, App Store для публичного распространения, Ad Hoc для ограниченного круга устройств, Enterprise для внутрикорпоративных решений. Каждый способ требует соответствующих сертификатов, provisioning profiles и прохождения (или обхода) App Review. Выбор метода зависит от целевой аудитории, масштаба распространения и требований безопасности.

## Зачем это нужно?

### Сценарии использования разных методов дистрибуции

```
┌─────────────────────────────────────────────────────────────────┐
│                    Когда какой метод выбрать?                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Development    → Разработка и отладка на своих устройствах     │
│  Ad Hoc         → Демо клиенту, тест на конкретных устройствах  │
│  TestFlight     → Бета-тестирование перед релизом               │
│  App Store      → Публичное распространение для всех            │
│  Enterprise     → Внутренние корпоративные приложения           │
│  Custom Apps    → B2B продажи через Apple Business Manager      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**Development** - для ежедневной разработки, мгновенная установка через Xcode
**Ad Hoc** - когда нужно показать приложение конкретным людям без TestFlight
**TestFlight** - стандарт индустрии для бета-тестирования
**App Store** - единственный способ продавать приложения обычным пользователям
**Enterprise** - когда приложение не должно быть в App Store (корпоративный инструмент)
**Custom Apps** - для B2B продаж корпоративным клиентам

## Аналогии из жизни

### TestFlight = Закрытый показ фильма для критиков

```
┌──────────────────────────────────────────────────────────────┐
│                     ЗАКРЫТЫЙ ПОКАЗ                            │
│                                                               │
│   ┌─────────────────────────────────────────┐                │
│   │     🎬  "НОВЫЙ БЛОКБАСТЕР"  🎬          │                │
│   │                                          │                │
│   │   Только для приглашённых критиков      │                │
│   │   Отзывы собираются до премьеры         │                │
│   │   Можно внести правки по фидбеку        │                │
│   └─────────────────────────────────────────┘                │
│                                                               │
│   Internal Testers  = Свои критики (до 100 человек)          │
│   External Testers  = Независимые критики (до 10,000)        │
│   Beta App Review   = Модератор на входе                     │
│   90 days expiry    = Показ действует ограниченное время     │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

### App Store = Кинотеатр для всех

```
┌──────────────────────────────────────────────────────────────┐
│                      КИНОТЕАТР                               │
│                                                               │
│   ┌─────────────────────────────────────────┐                │
│   │        🎭 МУЛЬТИПЛЕКС "APP STORE" 🎭    │                │
│   │                                          │                │
│   │   ✓ Фильмы для всех возрастов           │                │
│   │   ✓ Билеты (покупки) через кассу Apple  │                │
│   │   ✓ Строгий отбор контента              │                │
│   │   ✓ Рейтинги и отзывы зрителей          │                │
│   └─────────────────────────────────────────┘                │
│                                                               │
│   App Review      = Комиссия по прокату                      │
│   App Ratings     = Рейтинг IMDb                             │
│   In-App Purchase = Попкорн в фойе                           │
│   Phased Release  = Ограниченный прокат → широкий            │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

### Ad Hoc = DVD для друзей (ограниченный тираж)

```
┌──────────────────────────────────────────────────────────────┐
│                    ЛИМИТИРОВАННЫЙ DVD                         │
│                                                               │
│        ┌─────┐  ┌─────┐  ┌─────┐                             │
│        │ DVD │  │ DVD │  │ DVD │  ... (макс 100 штук)        │
│        │ #1  │  │ #2  │  │ #3  │                             │
│        └──┬──┘  └──┬──┘  └──┬──┘                             │
│           │        │        │                                 │
│           ▼        ▼        ▼                                 │
│        [UDID]   [UDID]   [UDID]  ← Привязка к устройству     │
│                                                               │
│   • Каждый диск работает только на одном плеере              │
│   • Нужно заранее знать серийный номер плеера                │
│   • Лимит 100 устройств в год                                │
│   • Подходит для демо, QA-тестирования                       │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

### Enterprise = Корпоративный кинозал (только сотрудники)

```
┌──────────────────────────────────────────────────────────────┐
│                 КОРПОРАТИВНЫЙ КИНОЗАЛ                         │
│                                                               │
│   ┌─────────────────────────────────────────┐                │
│   │      🏢 КИНОТЕАТР КОМПАНИИ "X" 🏢       │                │
│   │                                          │                │
│   │   ВХОД ТОЛЬКО ДЛЯ СОТРУДНИКОВ           │                │
│   │   ━━━━━━━━━━━━━━━━━━━━━━━━━━            │                │
│   │   Покажите корпоративный бейдж          │                │
│   │                                          │                │
│   └─────────────────────────────────────────┘                │
│                                                               │
│   Enterprise Program = Лицензия на корпоративный кинозал     │
│   MDM                = Система контроля бейджей              │
│   In-House App       = Эксклюзивный контент для компании     │
│   Revocation         = Могут забрать бейдж у уволенных       │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

### App Store Connect = Студия где монтируют и утверждают фильм

```
┌──────────────────────────────────────────────────────────────┐
│              ПОСТ-ПРОДАКШН СТУДИЯ                             │
│                                                               │
│   ┌─────────────────────────────────────────────────────┐    │
│   │                                                      │    │
│   │  [Монтаж]──►[Цветокоррекция]──►[Трейлеры]──►[Сдача] │    │
│   │      │            │                │           │     │    │
│   │      ▼            ▼                ▼           ▼     │    │
│   │   Builds      Metadata        Screenshots   Review   │    │
│   │                                                      │    │
│   └─────────────────────────────────────────────────────┘    │
│                                                               │
│   Upload Build    = Отправка смонтированного материала       │
│   App Metadata    = Описание, возрастной рейтинг             │
│   Screenshots     = Рекламные постеры                        │
│   App Review      = Комиссия по прокатным удостоверениям     │
│   Release         = Дата премьеры                            │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

## Способы дистрибуции

### Полная карта дистрибуции iOS

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         iOS DISTRIBUTION METHODS                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────────────────────┐│
│  │ Development │     │   Ad Hoc    │     │         TestFlight          ││
│  ├─────────────┤     ├─────────────┤     ├─────────────────────────────┤│
│  │             │     │             │     │                              ││
│  │ Xcode ──►   │     │ .ipa file   │     │  Internal    │  External    ││
│  │   Device    │     │ + UDID list │     │  ──────────  │  ──────────  ││
│  │             │     │             │     │  100 users   │  10,000      ││
│  │ Unlimited   │     │ 100 devices │     │  No review   │  Beta review ││
│  │ Debug only  │     │ Per year    │     │  Same-day    │  24-48 hrs   ││
│  │             │     │             │     │                              ││
│  └─────────────┘     └─────────────┘     └─────────────────────────────┘│
│         │                   │                          │                 │
│         ▼                   ▼                          ▼                 │
│  ┌─────────────────────────────────────────────────────────────────────┐│
│  │                        App Store Connect                             ││
│  │  ┌─────────────────────────────────────────────────────────────┐    ││
│  │  │                    Upload Archive (.ipa)                     │    ││
│  │  └─────────────────────────────────────────────────────────────┘    ││
│  └─────────────────────────────────────────────────────────────────────┘│
│                                    │                                     │
│         ┌──────────────────────────┼──────────────────────────┐         │
│         ▼                          ▼                          ▼         │
│  ┌─────────────┐          ┌─────────────┐          ┌─────────────────┐  │
│  │  App Store  │          │  Enterprise │          │   Custom Apps   │  │
│  ├─────────────┤          ├─────────────┤          ├─────────────────┤  │
│  │             │          │             │          │                  │  │
│  │ Public      │          │ In-House    │          │ B2B via Apple   │  │
│  │ Full review │          │ MDM deploy  │          │ Business Mgr    │  │
│  │ App Store   │          │ No review   │          │ Custom pricing  │  │
│  │ Guidelines  │          │ Employees   │          │ Volume Purchase │  │
│  │             │          │ only        │          │                  │  │
│  └─────────────┘          └─────────────┘          └─────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Сравнительная таблица

```
┌──────────────┬───────────┬────────────┬───────────┬────────────┬──────────┐
│   Метод      │ Лимит     │ Review     │ Время     │ Стоимость  │ Для кого │
├──────────────┼───────────┼────────────┼───────────┼────────────┼──────────┤
│ Development  │ Unlimited │ Нет        │ Мгновенно │ $99/год    │ Девы     │
│ Ad Hoc       │ 100 UDID  │ Нет        │ Мгновенно │ $99/год    │ QA, демо │
│ TestFlight   │ 10,100    │ Beta (ext) │ 24-48ч    │ $99/год    │ Бета     │
│ App Store    │ Unlimited │ Полный     │ 24ч-14д   │ $99/год    │ Все      │
│ Enterprise   │ Unlimited │ Нет        │ Мгновенно │ $299/год   │ Сотрудн. │
│ Custom Apps  │ Unlimited │ Полный     │ 24ч-14д   │ $99/год    │ B2B      │
└──────────────┴───────────┴────────────┴───────────┴────────────┴──────────┘
```

### Требования к аккаунтам

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      ТИПЫ DEVELOPER ACCOUNTS                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │              Apple Developer Program ($99/год)                     │  │
│  │  ────────────────────────────────────────────────────────────────  │  │
│  │  ✓ Development, Ad Hoc, TestFlight, App Store, Custom Apps        │  │
│  │  ✓ Для индивидуальных разработчиков и компаний                    │  │
│  │  ✓ Требуется D-U-N-S Number для организаций                       │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │         Apple Developer Enterprise Program ($299/год)              │  │
│  │  ────────────────────────────────────────────────────────────────  │  │
│  │  ✓ Development, Ad Hoc, Enterprise (In-House)                      │  │
│  │  ✗ НЕ включает App Store, TestFlight                              │  │
│  │  ✓ Только для компаний с 100+ сотрудников                         │  │
│  │  ✓ Строгая проверка при регистрации                               │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## TestFlight в деталях

### Архитектура TestFlight

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           TESTFLIGHT FLOW                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Developer                  App Store Connect                 Testers   │
│  ─────────                  ─────────────────                 ───────   │
│                                                                          │
│  ┌─────────┐    Upload     ┌─────────────────┐                          │
│  │  Xcode  │──────────────►│   Processing    │                          │
│  │ Archive │               │   (5-30 min)    │                          │
│  └─────────┘               └────────┬────────┘                          │
│                                     │                                    │
│                                     ▼                                    │
│                            ┌─────────────────┐                          │
│                            │  Build Ready    │                          │
│                            └────────┬────────┘                          │
│                                     │                                    │
│                    ┌────────────────┴────────────────┐                  │
│                    ▼                                  ▼                  │
│           ┌─────────────────┐              ┌─────────────────┐          │
│           │ INTERNAL TESTERS│              │ EXTERNAL TESTERS│          │
│           ├─────────────────┤              ├─────────────────┤          │
│           │                 │              │                  │          │
│           │ • До 100 чел.   │              │ • До 10,000 чел. │          │
│           │ • Члены команды │              │ • Любой email    │          │
│           │ • Без review    │              │ • Beta Review    │          │
│           │ • Мгновенно     │              │ • 24-48 часов    │          │
│           │                 │              │                  │          │
│           └────────┬────────┘              └────────┬────────┘          │
│                    │                                 │                   │
│                    ▼                                 ▼                   │
│           ┌─────────────────┐              ┌─────────────────┐          │
│           │  TestFlight App │              │  TestFlight App │          │
│           │   (iOS device)  │              │   (iOS device)  │          │
│           └─────────────────┘              └─────────────────┘          │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Internal vs External Testers

```
┌────────────────────────────────────┬────────────────────────────────────┐
│         INTERNAL TESTERS           │         EXTERNAL TESTERS           │
├────────────────────────────────────┼────────────────────────────────────┤
│                                    │                                    │
│  Кто: Члены команды в ASC          │  Кто: Любой человек с email        │
│                                    │                                    │
│  Лимит: 100 пользователей          │  Лимит: 10,000 пользователей       │
│                                    │                                    │
│  Review: НЕ требуется              │  Review: Beta App Review           │
│                                    │  (обычно 24-48 часов)              │
│                                    │                                    │
│  Роли: Admin, App Manager,         │  Группы: Любые кастомные группы    │
│        Developer, Marketing        │                                    │
│                                    │                                    │
│  Доступ: Сразу после обработки     │  Доступ: После прохождения review  │
│                                    │                                    │
│  Приглашение: Автоматическое       │  Приглашение: Email + публичная    │
│  (по ролям в ASC)                  │  ссылка                            │
│                                    │                                    │
│  Use case: Daily builds, QA        │  Use case: Бета-тест, фокус-группы │
│                                    │                                    │
└────────────────────────────────────┴────────────────────────────────────┘
```

### Test Groups

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          TEST GROUPS                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                         BUILD v2.3.1 (456)                         │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                    │                                     │
│           ┌────────────────────────┼────────────────────────┐           │
│           ▼                        ▼                        ▼           │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐     │
│  │   QA Team       │    │  Beta Testers   │    │  VIP Users      │     │
│  │   (Internal)    │    │   (External)    │    │  (External)     │     │
│  ├─────────────────┤    ├─────────────────┤    ├─────────────────┤     │
│  │ 5 testers       │    │ 500 testers     │    │ 50 testers      │     │
│  │ All builds      │    │ Stable builds   │    │ Release builds  │     │
│  │ Auto-update ON  │    │ Auto-update ON  │    │ Auto-update OFF │     │
│  │ Full access     │    │ Limited access  │    │ Preview access  │     │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘     │
│                                                                          │
│  Зачем группы?                                                          │
│  ─────────────                                                          │
│  • Разный уровень доступа к функциям                                    │
│  • Разные билды для разных аудиторий                                    │
│  • A/B тестирование новых фич                                           │
│  • Контроль выкатки (сначала QA, потом beta, потом VIP)                 │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Build Expiration (90 дней)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      BUILD LIFECYCLE                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  День 0                  День 60                  День 90               │
│    │                        │                        │                   │
│    ▼                        ▼                        ▼                   │
│  ┌────┐                  ┌────┐                  ┌────┐                 │
│  │ UP │                  │ ⚠️  │                  │ ❌ │                 │
│  │LOAD│                  │WARN│                  │EXP │                 │
│  └────┘                  └────┘                  └────┘                 │
│    │                        │                        │                   │
│    │ Build активен         │ Предупреждение         │ Build истёк      │
│    │ Тестеры могут         │ в TestFlight           │ Нужен новый      │
│    │ устанавливать         │ "30 days left"         │ build            │
│    │                        │                        │                   │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                         TIMELINE                                   │  │
│  │  ═══════════════════════════════════════════════════════════════  │  │
│  │  [████████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░]  │  │
│  │  0        15       30       45       60       75       90 дней    │  │
│  │  ▲                                   ▲                  ▲         │  │
│  │  │                                   │                  │         │  │
│  │  Upload                         Warning              Expired      │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Важно: После истечения тестеры НЕ могут запустить приложение!          │
│  Решение: Регулярно загружать новые билды или выпустить в App Store     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Beta App Review

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       BETA APP REVIEW                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                    Когда требуется?                              │    │
│  │  ─────────────────────────────────────────────────────────────  │    │
│  │  • Первый билд для External Testers                             │    │
│  │  • Значительные изменения в функциональности                    │    │
│  │  • После отклонения предыдущего билда                           │    │
│  │  • По усмотрению Apple                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                    Что проверяют?                                │    │
│  │  ─────────────────────────────────────────────────────────────  │    │
│  │  ✓ Приложение запускается и работает                            │    │
│  │  ✓ Нет явных багов, крашей                                      │    │
│  │  ✓ Базовое соответствие гайдлайнам                              │    │
│  │  ✗ НЕ проверяют так глубоко как полный App Review               │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  Submit → [Waiting for Review] → [In Review] → [Approved/Rejected]      │
│              (очередь)            (24-48ч)       (уведомление)          │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Feedback Collection

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      TESTFLIGHT FEEDBACK                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                    Способы сбора фидбека                          │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  1. Screenshot + Feedback                                                │
│     ─────────────────────                                               │
│     Тестер делает screenshot → Появляется опция "Send Feedback"         │
│     → Автоматически прикрепляется скриншот + комментарий                │
│                                                                          │
│  2. Shake to Send Feedback                                               │
│     ─────────────────────                                                │
│     Тестер трясёт устройство → Окно фидбека                             │
│     → Включает crash logs, device info                                  │
│                                                                          │
│  3. In-App Feedback (свой UI)                                           │
│     ────────────────────────                                            │
│     Кнопка в приложении → Открывает системный compose                   │
│     → SKStoreReviewController.requestReview() для TestFlight            │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Где смотреть фидбек?                                             │  │
│  │                                                                    │  │
│  │  App Store Connect → My Apps → [App] → TestFlight → Feedback      │  │
│  │                                                                    │  │
│  │  ┌──────────────────────────────────────────────────────────────┐ │  │
│  │  │ Email        | Date       | Build  | Screenshot | Comment   │ │  │
│  │  ├──────────────────────────────────────────────────────────────┤ │  │
│  │  │ tester@x.com | 2026-01-10 | 2.3.1  | [IMG]      | "Button..│ │  │
│  │  │ beta@y.com   | 2026-01-09 | 2.3.0  | -          | "Crash...│ │  │
│  │  └──────────────────────────────────────────────────────────────┘ │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## App Store Connect

### Общая структура

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      APP STORE CONNECT                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  My Apps                                                         │    │
│  │  ─────────────────────────────────────────────────────────────  │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │    │
│  │  │  App Icon   │  │  App Icon   │  │     +       │              │    │
│  │  │  My App 1   │  │  My App 2   │  │  New App    │              │    │
│  │  │  v2.3.1     │  │  v1.0.0     │  │             │              │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  App Dashboard                                                   │    │
│  │  ─────────────────────────────────────────────────────────────  │    │
│  │                                                                  │    │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐             │    │
│  │  │ App Store    │ │ TestFlight   │ │ App Analytics│             │    │
│  │  │ • Version    │ │ • Builds     │ │ • Downloads  │             │    │
│  │  │ • Info       │ │ • Groups     │ │ • Retention  │             │    │
│  │  │ • Pricing    │ │ • Testers    │ │ • Crashes    │             │    │
│  │  └──────────────┘ └──────────────┘ └──────────────┘             │    │
│  │                                                                  │    │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐             │    │
│  │  │ In-App       │ │ Users &      │ │ App          │             │    │
│  │  │ Purchases    │ │ Roles        │ │ Information  │             │    │
│  │  │ • Products   │ │ • Team       │ │ • Bundle ID  │             │    │
│  │  │ • Offers     │ │ • Sandbox    │ │ • SKUs       │             │    │
│  │  └──────────────┘ └──────────────┘ └──────────────┘             │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### App Metadata

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         APP METADATA                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Localizable Information (для каждого языка)                      │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  App Name             [30 chars max]                              │  │
│  │  Subtitle             [30 chars max]                              │  │
│  │  Promotional Text     [170 chars, можно менять без review]        │  │
│  │  Description          [4000 chars max]                            │  │
│  │  Keywords             [100 chars, comma-separated]                │  │
│  │  What's New           [4000 chars, release notes]                 │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  General Information (одинаково для всех)                         │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  Primary Category      [Games, Productivity, etc.]                │  │
│  │  Secondary Category    [Optional]                                 │  │
│  │  Age Rating            [4+, 9+, 12+, 17+]                         │  │
│  │  Copyright             [© 2026 Company Name]                      │  │
│  │  Support URL           [https://...]                              │  │
│  │  Marketing URL         [https://... optional]                     │  │
│  │  Privacy Policy URL    [https://... REQUIRED]                     │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Screenshots и App Previews

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    SCREENSHOTS & APP PREVIEWS                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Требования к скриншотам                                          │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  iPhone 6.7"  │  iPhone 6.5"  │  iPhone 5.5"  │  iPad 12.9"       │  │
│  │  1290 x 2796  │  1284 x 2778  │  1242 x 2208  │  2048 x 2732      │  │
│  │  (14 Pro Max) │  (13 Pro Max) │  (8 Plus)     │  (12.9" iPad Pro) │  │
│  │                                                                    │  │
│  │  • Минимум 1 скриншот на размер                                   │  │
│  │  • Максимум 10 скриншотов на размер                               │  │
│  │  • Формат: PNG или JPEG                                           │  │
│  │  • RGB цветовое пространство                                      │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  App Previews (видео)                                             │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  • До 3 видео на размер экрана                                    │  │
│  │  • Длительность: 15-30 секунд                                     │  │
│  │  • Формат: H.264, AAC                                             │  │
│  │  • Разрешение: то же что и скриншоты                              │  │
│  │  • Можно записать в симуляторе                                    │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Порядок показа в App Store:                                            │
│  ────────────────────────────                                           │
│  [Video 1] [Video 2] [Video 3] [Screenshot 1] [Screenshot 2] ...        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### App Review Process

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       APP REVIEW PROCESS                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Submit for Review                                                       │
│        │                                                                 │
│        ▼                                                                 │
│  ┌─────────────────┐                                                    │
│  │ Waiting for     │  ← Приложение в очереди                            │
│  │ Review          │    (обычно несколько часов)                        │
│  └────────┬────────┘                                                    │
│           │                                                              │
│           ▼                                                              │
│  ┌─────────────────┐                                                    │
│  │ In Review       │  ← Reviewer смотрит приложение                     │
│  │                 │    (24-48 часов, иногда дольше)                    │
│  └────────┬────────┘                                                    │
│           │                                                              │
│     ┌─────┴─────┐                                                       │
│     ▼           ▼                                                       │
│ ┌───────┐  ┌──────────┐                                                 │
│ │Approved│  │ Rejected │                                                 │
│ └───┬───┘  └────┬─────┘                                                 │
│     │           │                                                        │
│     │           ▼                                                        │
│     │    ┌─────────────────┐                                            │
│     │    │ Resolution      │                                            │
│     │    │ Center          │  ← Переписка с reviewer                    │
│     │    │ • Fix issues    │  ← Appeal                                  │
│     │    │ • Resubmit      │  ← Resubmit                                │
│     │    └─────────────────┘                                            │
│     │                                                                    │
│     ▼                                                                    │
│ ┌─────────────────┐                                                     │
│ │ Pending         │  ← Готово к публикации                              │
│ │ Developer       │    (ждёт вашего действия)                           │
│ │ Release         │                                                     │
│ └────────┬────────┘                                                     │
│          │                                                               │
│          ▼                                                               │
│ ┌─────────────────┐                                                     │
│ │ Processing for  │  ← Apple готовит для Store                          │
│ │ App Store       │    (обычно < 1 часа)                                │
│ └────────┬────────┘                                                     │
│          │                                                               │
│          ▼                                                               │
│ ┌─────────────────┐                                                     │
│ │ Ready for Sale  │  ← В App Store!                                     │
│ └─────────────────┘                                                     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Phased Release

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        PHASED RELEASE                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Что это: Постепенный выкат обновления авто-update пользователям        │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                      PHASED RELEASE TIMELINE                       │  │
│  │                                                                    │  │
│  │  Day 1   │  Day 2   │  Day 3   │  Day 4   │  Day 5-6  │  Day 7   │  │
│  │   1%     │   2%     │   5%     │   10%    │   20%     │   50%    │  │
│  │   │      │   │      │   │      │   │      │   │       │   │      │  │
│  │   ▼      │   ▼      │   ▼      │   ▼      │   ▼       │   ▼      │  │
│  │  ░       │  ░░      │  ░░░     │  ░░░░    │  ░░░░░    │  ░░░░░░  │  │
│  │          │          │          │          │           │   ░░░░   │  │
│  │                                                                    │  │
│  │  Day 8+: 100% всех пользователей с auto-update                    │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Важно:                                                                  │
│  ───────                                                                 │
│  • Применяется ТОЛЬКО к авто-обновлениям                                │
│  • Кто ищет вручную в App Store - получают сразу                        │
│  • Можно приостановить (Pause) или ускорить (Release to All)            │
│  • Если критический баг - пауза + новый билд                            │
│                                                                          │
│  Зачем:                                                                  │
│  ───────                                                                 │
│  • Отлов багов до широкого распространения                              │
│  • Возможность откатить без массовых жалоб                              │
│  • Мониторинг crash rate на маленькой аудитории                         │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### App Analytics

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         APP ANALYTICS                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Acquisition (Привлечение)                                        │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  Impressions      │ Сколько раз показали страницу в App Store    │  │
│  │  Product Page     │ Сколько открыли страницу приложения          │  │
│  │  Views            │                                               │  │
│  │  App Units        │ Скачивания (первый раз)                       │  │
│  │  Conversion Rate  │ Page Views → Downloads                        │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Usage (Использование)                                            │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  Active Devices   │ DAU / MAU                                     │  │
│  │  Sessions         │ Сколько раз открывали                         │  │
│  │  Retention        │ Day 1, Day 7, Day 28                          │  │
│  │  Crashes          │ Количество крашей                             │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Revenue (Доход)                                                  │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  Sales             │ Продажи (Paid apps + IAP)                    │  │
│  │  Proceeds          │ После комиссии Apple (15-30%)                │  │
│  │  IAP by Product    │ Разбивка по продуктам                        │  │
│  │  Subscriptions     │ Активные подписки                            │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## App Store Review Guidelines

### Common Rejection Reasons

```
┌─────────────────────────────────────────────────────────────────────────┐
│                  ЧАСТЫЕ ПРИЧИНЫ ОТКАЗА (TOP 10)                          │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  1. Guideline 2.1 - App Completeness                                    │
│     ─────────────────────────────────────────────────────────────       │
│     Приложение крашится, не работает, placeholder контент               │
│     ✗ "Coming Soon" экраны                                              │
│     ✗ Broken links, missing images                                      │
│                                                                          │
│  2. Guideline 4.2 - Minimum Functionality                               │
│     ─────────────────────────────────────────────────────────────       │
│     Слишком простое, можно сделать веб-сайтом                           │
│     ✗ Просто WebView обёртка над сайтом                                 │
│     ✗ Приложение без явной ценности                                     │
│                                                                          │
│  3. Guideline 2.3 - Accurate Metadata                                   │
│     ─────────────────────────────────────────────────────────────       │
│     Описание не соответствует функциональности                          │
│     ✗ Скриншоты не соответствуют приложению                             │
│     ✗ Ложные claims о возможностях                                      │
│                                                                          │
│  4. Guideline 5.1.1 - Data Collection and Storage                       │
│     ─────────────────────────────────────────────────────────────       │
│     Нет Privacy Policy, неправильный App Privacy                        │
│     ✗ Сбор данных без объяснения                                        │
│                                                                          │
│  5. Guideline 4.0 - Design                                              │
│     ─────────────────────────────────────────────────────────────       │
│     Копирование других приложений, плохой UX                            │
│     ✗ Очевидный клон популярного приложения                             │
│                                                                          │
│  6. Guideline 3.1.1 - In-App Purchase                                   │
│     ─────────────────────────────────────────────────────────────       │
│     Digital goods через внешние платежи                                 │
│     ✗ Ссылки на внешние способы оплаты                                  │
│                                                                          │
│  7. Guideline 2.5.1 - Software Requirements                             │
│     ─────────────────────────────────────────────────────────────       │
│     Использование private APIs, недокументированных функций             │
│                                                                          │
│  8. Guideline 4.3 - Spam                                                │
│     ─────────────────────────────────────────────────────────────       │
│     Множество похожих приложений, шаблоны                               │
│     ✗ Тот же код с разными темами                                       │
│                                                                          │
│  9. Guideline 1.2 - User Generated Content                              │
│     ─────────────────────────────────────────────────────────────       │
│     Нет модерации UGC, нет Report Abuse                                 │
│                                                                          │
│  10. Login Issues                                                        │
│      ─────────────────────────────────────────────────────────────      │
│      Reviewer не может войти, нет demo аккаунта                         │
│      ✗ Забыли дать test credentials                                     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### How to Appeal

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         APPEAL PROCESS                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Rejection                                                               │
│      │                                                                   │
│      ▼                                                                   │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ Resolution Center (App Store Connect)                           │    │
│  │ ─────────────────────────────────────────────────────────────── │    │
│  │                                                                  │    │
│  │  Шаг 1: Прочитайте rejection reason внимательно                 │    │
│  │         Часто это просто недопонимание                          │    │
│  │                                                                  │    │
│  │  Шаг 2: Reply to Review                                         │    │
│  │         • Объясните функциональность                            │    │
│  │         • Приложите видео демонстрацию                          │    │
│  │         • Укажите test credentials                              │    │
│  │         • Будьте вежливы и конкретны                            │    │
│  │                                                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│      │                                                                   │
│      ▼                                                                   │
│  Если не помогло                                                        │
│      │                                                                   │
│      ▼                                                                   │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │ Appeal to App Review Board                                       │    │
│  │ ─────────────────────────────────────────────────────────────── │    │
│  │                                                                  │    │
│  │  https://developer.apple.com/contact/app-store/                 │    │
│  │                                                                  │    │
│  │  • Формальный appeal                                            │    │
│  │  • Рассматривается старшими reviewer'ами                        │    │
│  │  • Ответ в течение нескольких дней                              │    │
│  │  • Используйте как последнее средство                           │    │
│  │                                                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  Советы для успешного appeal:                                           │
│  ─────────────────────────────                                          │
│  • Цитируйте конкретный guideline                                       │
│  • Объясните почему ваше приложение соответствует                       │
│  • Приведите примеры похожих одобренных приложений                      │
│  • НЕ ругайтесь, НЕ угрожайте                                           │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Expedited Review

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       EXPEDITED REVIEW                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Что это: Ускоренный review для критических ситуаций                    │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Когда Apple одобрит запрос на expedited review?                  │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  ✓ Критический баг, влияющий на безопасность                      │  │
│  │  ✓ Критический баг, делающий приложение неработоспособным        │  │
│  │  ✓ Привязка к времени (конференция, праздник, событие)           │  │
│  │  ✓ Юридические требования (GDPR compliance fix)                   │  │
│  │                                                                    │  │
│  │  ✗ "Мне просто хочется быстрее"                                   │  │
│  │  ✗ "Маркетинг назначил дату"                                      │  │
│  │  ✗ "Это важный релиз"                                             │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Как запросить:                                                         │
│  ─────────────────                                                      │
│  1. App Store Connect → Your App → Submit for Review                    │
│  2. Под submission есть "Request an Expedited Review"                   │
│  3. Заполните форму с объяснением причины                               │
│  4. Ожидайте ответа (обычно в тот же день)                              │
│                                                                          │
│  Время: Обычно 24 часа (vs стандартные 24-48+)                          │
│                                                                          │
│  Важно: Не злоупотребляйте! Apple отслеживает частоту запросов          │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## Archive и Upload

### Archive Action в Xcode

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        ARCHIVE WORKFLOW                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Подготовка к Archive                                             │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  1. Scheme: Any iOS Device (arm64)                                │  │
│  │     ─────────────────────────                                     │  │
│  │     НЕ симулятор! Только реальные устройства                      │  │
│  │                                                                    │  │
│  │  2. Проверка настроек:                                            │  │
│  │     ───────────────────                                           │  │
│  │     • Bundle ID соответствует App Store Connect                   │  │
│  │     • Version и Build правильные                                  │  │
│  │     • Provisioning Profile: Distribution                          │  │
│  │     • Code Signing: Distribution Certificate                      │  │
│  │                                                                    │  │
│  │  3. Build Configuration:                                          │  │
│  │     ─────────────────────                                         │  │
│  │     Archive по умолчанию использует Release                       │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Product → Archive                                                       │
│        │                                                                 │
│        ▼                                                                 │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                        ARCHIVE PROCESS                           │    │
│  │                                                                  │    │
│  │  [Build] → [Link] → [Copy Resources] → [Sign] → [Create .xcarchive]│  │
│  │                                                                  │    │
│  │  Результат: ~/Library/Developer/Xcode/Archives/                  │    │
│  │             YYYY-MM-DD/                                          │    │
│  │               AppName DD-MM-YYYY, HH.MM.xcarchive                │    │
│  │                                                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Organizer Window

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        XCODE ORGANIZER                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Window → Organizer (⌘⇧O после archive)                                │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  ┌──────────┬───────────────────────────────────────────────────┐ │  │
│  │  │ Archives │                                                    │ │  │
│  │  │ ──────── │   MyApp                                           │ │  │
│  │  │          │   ─────────────────────────────────────────────── │ │  │
│  │  │ MyApp    │                                                    │ │  │
│  │  │  ├ v2.3  │   Version: 2.3.1                                  │ │  │
│  │  │  └ v2.2  │   Build: 456                                      │ │  │
│  │  │          │   Date: Jan 11, 2026                              │ │  │
│  │  │ OtherApp │   Size: 45.3 MB                                   │ │  │
│  │  │  └ v1.0  │                                                    │ │  │
│  │  │          │   ┌──────────────────────────────────────────────┐│ │  │
│  │  │          │   │ Distribute App                               ││ │  │
│  │  │          │   │ Validate App                                 ││ │  │
│  │  │          │   │ Show in Finder                               ││ │  │
│  │  │          │   │ Delete Archive                               ││ │  │
│  │  │          │   └──────────────────────────────────────────────┘│ │  │
│  │  └──────────┴───────────────────────────────────────────────────┘ │  │
│  │                                                                    │  │
│  │  Вкладки:  [Archives] [Crashes] [Energy] [Metrics] [Reports]      │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Distribute App Flow:                                                   │
│  ─────────────────────                                                  │
│  1. App Store Connect → Upload / Export                                 │
│  2. Ad Hoc → Export for specific devices                                │
│  3. Enterprise → Export for in-house distribution                       │
│  4. Development → Export for development devices                        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Upload Methods

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         UPLOAD METHODS                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  1. Xcode (Organizer) - Рекомендуемый                             │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  Organizer → Archive → Distribute App → App Store Connect         │  │
│  │                      → Upload                                     │  │
│  │                                                                    │  │
│  │  ✓ Автоматически управляет signing                                │  │
│  │  ✓ Валидация перед upload                                         │  │
│  │  ✓ Удобный GUI                                                    │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  2. Transporter (macOS App)                                       │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  Отдельное приложение из Mac App Store                            │  │
│  │  Drag & Drop .ipa файл → Upload                                   │  │
│  │                                                                    │  │
│  │  ✓ Для CI/CD pipelines                                            │  │
│  │  ✓ Batch uploads                                                  │  │
│  │  ✓ Детальные логи                                                 │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  3. altool (Command Line - DEPRECATED в Xcode 14+)                │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  xcrun altool --upload-app \                                      │  │
│  │      --type ios \                                                 │  │
│  │      --file "path/to/App.ipa" \                                   │  │
│  │      --apiKey YOUR_API_KEY \                                      │  │
│  │      --apiIssuer YOUR_ISSUER_ID                                   │  │
│  │                                                                    │  │
│  │  ⚠ Используйте xcrun notarytool для новых проектов               │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  4. xcrun (Command Line - Современный способ)                     │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  # Валидация                                                      │  │
│  │  xcrun altool --validate-app \                                    │  │
│  │      -f "App.ipa" \                                               │  │
│  │      -t ios \                                                     │  │
│  │      --apiKey KEY --apiIssuer ISSUER                              │  │
│  │                                                                    │  │
│  │  # Или через xcodebuild для CI/CD:                                │  │
│  │  xcodebuild -exportArchive \                                      │  │
│  │      -archivePath MyApp.xcarchive \                               │  │
│  │      -exportOptionsPlist ExportOptions.plist \                    │  │
│  │      -exportPath ./output                                         │  │
│  │                                                                    │  │
│  │  ✓ Идеально для автоматизации                                     │  │
│  │  ✓ Интеграция с fastlane, GitHub Actions                          │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Symbols и dSYMs

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        dSYMs (Debug Symbols)                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Что это: Файлы для символикации crash reports                          │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                    CRASH SYMBOLICATION                             │  │
│  │                                                                    │  │
│  │  Raw Crash Log            dSYM                  Symbolicated       │  │
│  │  ──────────────          ─────                  ────────────       │  │
│  │                                                                    │  │
│  │  0x00000001001234   +   [Symbol Table]   =   -[ViewController      │  │
│  │  0x00000001005678       [Debug Info]          viewDidLoad] + 42    │  │
│  │  0x0000000100abcd                              crashed here        │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Где хранятся dSYMs:                                                    │
│  ─────────────────────                                                  │
│                                                                          │
│  1. Внутри .xcarchive:                                                  │
│     MyApp.xcarchive/dSYMs/MyApp.app.dSYM                                │
│                                                                          │
│  2. Bitcode (если включен) - Apple генерирует свои dSYMs                │
│     → Скачивайте из App Store Connect → Activity → Build → Download dSYM│
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Build Settings для dSYMs                                         │  │
│  │  ─────────────────────────────────────────────────────────────    │  │
│  │                                                                    │  │
│  │  DEBUG_INFORMATION_FORMAT = dwarf-with-dsym  (Release)            │  │
│  │  DWARF_DSYM_FOLDER_PATH   = $(CONFIGURATION_BUILD_DIR)            │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Автоматическая загрузка в сторонние сервисы:                           │
│  ─────────────────────────────────────────────                          │
│                                                                          │
│  # Firebase Crashlytics                                                 │
│  "${BUILD_DIR}/run" -gsp GoogleService-Info.plist                       │
│                                                                          │
│  # Sentry                                                               │
│  sentry-cli upload-dsym --org ORG --project PROJ ./MyApp.app.dSYM       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## Распространённые ошибки

### Ошибка 1: Забытый Demo Account

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❌ ОШИБКА: Не указан demo account для App Review                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ❌ Неправильно:                                                        │
│  ─────────────────                                                      │
│  App Review Notes: пустое поле                                          │
│  Результат: Rejection - "We were unable to sign in with the             │
│             credentials you provided"                                   │
│                                                                          │
│  ✅ Правильно:                                                          │
│  ───────────────                                                        │
│  App Review Notes:                                                      │
│  Demo Account:                                                          │
│  Email: demo@example.com                                                │
│  Password: DemoPass123                                                  │
│                                                                          │
│  If the app requires phone verification,                                │
│  please use +1 555-123-4567 with code 123456                            │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Ошибка 2: Неправильный Build Number

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❌ ОШИБКА: Повторный Build Number                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ❌ Неправильно:                                                        │
│  ─────────────────                                                      │
│  Загрузили v1.0 (1), отклонили, исправили, загружаем опять v1.0 (1)    │
│  Результат: ERROR ITMS-90062: "The bundle version '1' has              │
│             already been uploaded"                                      │
│                                                                          │
│  ✅ Правильно:                                                          │
│  ───────────────                                                        │
│  Первая попытка:  v1.0 (1)                                              │
│  После фикса:     v1.0 (2)  ← Increment build number!                   │
│  Ещё один фикс:   v1.0 (3)                                              │
│                                                                          │
│  # В Xcode: Build Settings → Current Project Version                    │
│  # Или: agvtool next-version -all                                       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Ошибка 3: Missing Privacy Manifest

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❌ ОШИБКА: Отсутствует Privacy Manifest (PrivacyInfo.xcprivacy)        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ❌ Неправильно:                                                        │
│  ─────────────────                                                      │
│  Используете UserDefaults, FileTimestampAccessAPIs, но нет манифеста   │
│  Результат: Warning → Rejection (после May 2024)                        │
│                                                                          │
│  ✅ Правильно:                                                          │
│  ───────────────                                                        │
│  Создайте PrivacyInfo.xcprivacy:                                        │
│                                                                          │
│  <?xml version="1.0" encoding="UTF-8"?>                                 │
│  <plist version="1.0">                                                  │
│  <dict>                                                                 │
│      <key>NSPrivacyAccessedAPITypes</key>                               │
│      <array>                                                            │
│          <dict>                                                         │
│              <key>NSPrivacyAccessedAPIType</key>                        │
│              <string>NSPrivacyAccessedAPICategoryUserDefaults</string>  │
│              <key>NSPrivacyAccessedAPITypeReasons</key>                 │
│              <array>                                                    │
│                  <string>CA92.1</string>                                │
│              </array>                                                   │
│          </dict>                                                        │
│      </array>                                                           │
│  </dict>                                                                │
│  </plist>                                                               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Ошибка 4: TestFlight без What to Test

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❌ ОШИБКА: Пустое "What to Test" в TestFlight                          │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ❌ Неправильно:                                                        │
│  ─────────────────                                                      │
│  What to Test: (пустое поле)                                            │
│  Результат: Тестеры не понимают что тестировать, низкое качество        │
│             feedback                                                    │
│                                                                          │
│  ✅ Правильно:                                                          │
│  ───────────────                                                        │
│  What to Test:                                                          │
│                                                                          │
│  Build 456 (v2.3.1) - Focus Areas:                                      │
│                                                                          │
│  1. NEW: Dark mode support                                              │
│     - Toggle in Settings → Appearance                                   │
│     - Check all screens for contrast issues                             │
│                                                                          │
│  2. FIX: Crash on login with Facebook                                   │
│     - Try social login flow                                             │
│                                                                          │
│  3. KNOWN ISSUES:                                                       │
│     - Payment screen shows test prices                                  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Ошибка 5: Export Compliance без Encryption

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❌ ОШИБКА: Неправильный ответ на Export Compliance                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ❌ Неправильно:                                                        │
│  ─────────────────                                                      │
│  "Does your app use encryption?" → Yes                                  │
│  (когда используете только HTTPS, который exempt)                       │
│  Результат: Требуют Export Compliance документы, задержка               │
│                                                                          │
│  ✅ Правильно:                                                          │
│  ───────────────                                                        │
│  Если используете ТОЛЬКО:                                               │
│  • HTTPS (URLSession, Alamofire)                                        │
│  • Apple's Security framework                                           │
│  • Standard encryption (Keychain)                                       │
│                                                                          │
│  Ответ: "No" или добавьте в Info.plist:                                 │
│                                                                          │
│  <key>ITSAppUsesNonExemptEncryption</key>                               │
│  <false/>                                                               │
│                                                                          │
│  Если используете custom encryption (свои алгоритмы) → "Yes"            │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Ошибка 6: Неправильный Provisioning Profile

```
┌─────────────────────────────────────────────────────────────────────────┐
│  ❌ ОШИБКА: Development Profile вместо Distribution                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ❌ Неправильно:                                                        │
│  ─────────────────                                                      │
│  Archive with iOS Development provisioning profile                      │
│  Результат: ERROR ITMS-90161: "Invalid Provisioning Profile"           │
│                                                                          │
│  ✅ Правильно:                                                          │
│  ───────────────                                                        │
│                                                                          │
│  Target → Signing & Capabilities:                                       │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │  [x] Automatically manage signing                              │    │
│  │                                                                 │    │
│  │  Team: Your Team (XXXXXXXXXX)                                  │    │
│  │                                                                 │    │
│  │  ┌──────────────────────────────────────────────────────────┐ │    │
│  │  │  Signing Certificate:                                     │ │    │
│  │  │  [Debug]   Apple Development                              │ │    │
│  │  │  [Release] Apple Distribution  ← ЭТО ДЛЯ АРХИВА          │ │    │
│  │  │                                                           │ │    │
│  │  │  Provisioning Profile:                                    │ │    │
│  │  │  [Release] App Store Distribution                         │ │    │
│  │  └──────────────────────────────────────────────────────────┘ │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  Или manual signing: выберите правильный profile для Release            │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

## Ментальные модели

### Модель 1: Pipeline дистрибуции

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    DISTRIBUTION PIPELINE                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Думайте о дистрибуции как о конвейере нефтепереработки:                │
│                                                                          │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐          │
│  │   CODE   │───►│  BUILD   │───►│  SIGN    │───►│ PACKAGE  │          │
│  │  (сырая  │    │ (перера- │    │ (сертифи-│    │   (.ipa  │          │
│  │  нефть)  │    │  ботка)  │    │  кация)  │    │  готовый │          │
│  └──────────┘    └──────────┘    └──────────┘    │  продукт)│          │
│                                                   └────┬─────┘          │
│                                                        │                 │
│           ┌────────────────────────────────────────────┘                │
│           │                                                              │
│           ▼                                                              │
│  ┌────────────────────────────────────────────────────────────────────┐ │
│  │                        DISTRIBUTION CHANNELS                        │ │
│  │                                                                     │ │
│  │  [Development]  [Ad Hoc]  [TestFlight]  [App Store]  [Enterprise]  │ │
│  │       │            │           │             │            │         │ │
│  │       ▼            ▼           ▼             ▼            ▼         │ │
│  │    Xcode        Файл      TestFlight     App Store      MDM        │ │
│  │    Install      Install      App          App         Install      │ │
│  └────────────────────────────────────────────────────────────────────┘ │
│                                                                          │
│  Принцип: Один исходный продукт (archive) → разные каналы доставки     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Модель 2: Уровни доверия

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       TRUST LEVELS                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Каждый метод дистрибуции = разный уровень доверия Apple               │
│                                                                          │
│  Уровень доверия                                                        │
│        ▲                                                                │
│        │                                                                 │
│   HIGH │  ┌───────────────────┐                                         │
│        │  │    App Store      │  ← Полный review, максимальные гарантии │
│        │  └───────────────────┘                                         │
│        │                                                                 │
│        │  ┌───────────────────┐                                         │
│        │  │   TestFlight      │  ← Beta review, ограниченная аудитория  │
│        │  │   (External)      │                                         │
│        │  └───────────────────┘                                         │
│        │                                                                 │
│   MED  │  ┌───────────────────┐                                         │
│        │  │   TestFlight      │  ← Без review, только члены команды     │
│        │  │   (Internal)      │                                         │
│        │  └───────────────────┘                                         │
│        │                                                                 │
│        │  ┌───────────────────┐                                         │
│        │  │     Ad Hoc        │  ← Ограничено UDID, developer отвечает  │
│        │  └───────────────────┘                                         │
│        │                                                                 │
│   LOW  │  ┌───────────────────┐                                         │
│        │  │   Development     │  ← Только developer, debug mode         │
│        │  └───────────────────┘                                         │
│        │                                                                 │
│        └──────────────────────────────────────────────────────────────► │
│                            Размер аудитории                              │
│                                                                          │
│  Enterprise - отдельная ветка: высокое доверие к организации,           │
│               но без review Apple (организация сама отвечает)           │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Модель 3: Review как таможня

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    REVIEW = CUSTOMS CONTROL                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Представьте App Store как страну с таможенным контролем:               │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  Developer's Land            │  App Store Land                    │  │
│  │  ──────────────────          │  ─────────────────                 │  │
│  │                              │                                     │  │
│  │  [Your App] ──────────────►  │  ┌─────────────┐                   │  │
│  │                              │  │   CUSTOMS   │                   │  │
│  │                              │  │   CONTROL   │                   │  │
│  │                              │  │ ┌─────────┐ │                   │  │
│  │                              │  │ │ Review  │ │──► [Approved]     │  │
│  │                              │  │ │ Officer │ │                   │  │
│  │                              │  │ └─────────┘ │──► [Rejected]     │  │
│  │                              │  └─────────────┘                   │  │
│  │                              │                                     │  │
│  └──────────────────────────────┴────────────────────────────────────┘  │
│                                                                          │
│  Что проверяет "таможня":                                               │
│  ─────────────────────────                                              │
│  ✓ Документы в порядке (metadata, privacy policy)                       │
│  ✓ Нет запрещённых товаров (private APIs, malware)                      │
│  ✓ Соответствует стандартам (Human Interface Guidelines)                │
│  ✓ Не нарушает законы (copyright, трademarks)                           │
│                                                                          │
│  Expedited Review = VIP проход (только для экстренных случаев)          │
│  Appeal = Суд (если считаете решение неправильным)                      │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Модель 4: TestFlight как dress rehearsal

```
┌─────────────────────────────────────────────────────────────────────────┐
│                  TESTFLIGHT = DRESS REHEARSAL                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Как генеральная репетиция перед премьерой спектакля:                   │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  Internal Testers = Актёры и режиссёр (своя команда)              │  │
│  │  ────────────────────────────────────────────────────              │  │
│  │  • Видят все ошибки                                               │  │
│  │  • Могут дать немедленный feedback                                │  │
│  │  • Знают контекст                                                 │  │
│  │  • Прощают недоделки                                              │  │
│  │                                                                    │  │
│  │  External Testers = Приглашённая публика на прогоне               │  │
│  │  ────────────────────────────────────────────────────              │  │
│  │  • "Свежий взгляд"                                                │  │
│  │  • Реакция как у реальных пользователей                           │  │
│  │  • Находят неочевидные проблемы                                   │  │
│  │  • Тест на реальной аудитории                                     │  │
│  │                                                                    │  │
│  │  90-day expiry = Билет действителен ограниченное время            │  │
│  │  ────────────────────────────────────────────────────              │  │
│  │  Нужно регулярно "обновлять афишу" (новые билды)                  │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Цель: Найти все проблемы ДО премьеры (App Store release)               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Модель 5: Archive как snapshot

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ARCHIVE = SNAPSHOT IN TIME                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Archive = фотография вашего кода в конкретный момент времени           │
│                                                                          │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │                                                                    │  │
│  │  Timeline                                                         │  │
│  │  ────────                                                         │  │
│  │                                                                    │  │
│  │  ──[commit]──[commit]──[commit]──[ARCHIVE v1.0]──[commit]──►      │  │
│  │       │          │          │          ▲             │            │  │
│  │       │          │          │          │             │            │  │
│  │       │          │          │     [snapshot]         │            │  │
│  │       │          │          │          │             │            │  │
│  │       │          │          │          ▼             │            │  │
│  │       │          │          │   ┌───────────┐        │            │  │
│  │       │          │          │   │.xcarchive │        │            │  │
│  │       │          │          │   │ • App     │        │            │  │
│  │       │          │          │   │ • dSYMs   │        │            │  │
│  │       │          │          │   │ • Info    │        │            │  │
│  │       │          │          │   └───────────┘        │            │  │
│  │                                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                          │
│  Зачем хранить архивы:                                                  │
│  ─────────────────────                                                  │
│  • Символикация crash reports требует ТОЧНО тот dSYM                    │
│  • Можно re-distribute без перекомпиляции                               │
│  • Аудит: что именно было отправлено в Store                            │
│                                                                          │
│  Совет: Связывайте архив с git tag для точного соответствия             │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Проверь себя

> [!question]- Почему TestFlight предпочтительнее Ad Hoc для бета-тестирования, и в каких случаях Ad Hoc все еще нужен?
> TestFlight: до 10 000 внешних тестеров, автоматические обновления, crash-отчеты, не нужны UDID устройств, работает 90 дней. Ad Hoc: максимум 100 устройств, нужно знать UDID заранее, ручная установка. Ad Hoc нужен для: тестирования без App Store Connect (корпоративные firewall), демонстраций клиентам без Apple ID, быстрой раздачи без App Review.

> [!question]- Что проверяет App Review и какие самые частые причины отклонения?
> Функциональность (crashes, broken links), дизайн (Human Interface Guidelines), конфиденциальность (privacy policy, App Tracking Transparency), платежи (обязательное использование In-App Purchase для цифровых товаров), контент (запрещенный контент). Частые причины: скрытые функции, ссылки на внешние платежи, отсутствие privacy policy, incomplete metadata.

> [!question]- Сценарий: ваша компания создает внутреннее приложение для 500 сотрудников. Какой метод дистрибуции выбрать?
> Enterprise Program ($299/год): прямая установка без App Store, OTA distribution через MDM или ссылку. Альтернативы: Apple Business Manager (для App Store с volume purchasing), TestFlight internal (до 100 членов команды, бесплатно). Enterprise рискован: Apple может отозвать certificate при нарушении правил (не для публичного распространения). Лучший вариант для 500 человек -- unlisted App Store + MDM.

---

## Ключевые карточки

Какие методы дистрибуции iOS поддерживает?
?
App Store (публичный), TestFlight (бета-тестирование), Ad Hoc (до 100 устройств по UDID), Enterprise (внутрикорпоративный, без App Store), Web Distribution (EU, DMA). Каждый требует соответствующий certificate и provisioning profile.

Что такое TestFlight и его ограничения?
?
Сервис Apple для бета-тестирования. Internal testers: до 100 (Apple Developer team members, без review). External testers: до 10 000 (требует Beta App Review). Билд живет 90 дней. Включает crash reports, feedback screenshots. Нужен App Store Connect.

Что такое App Review и сколько длится?
?
Процесс проверки приложения Apple перед публикацией в App Store/TestFlight (external). Проверяет: стабильность, UX, privacy, платежи, контент. Среднее время: 24-48 часов. Экспедитед review для критических фиксов. Можно обжаловать отклонение через Appeal.

Чем App Store Connect отличается от Apple Developer Portal?
?
Developer Portal: сертификаты, provisioning profiles, App IDs, capabilities, устройства. App Store Connect: управление приложениями (метаданные, скриншоты, pricing), TestFlight, analytics, sales, App Review статус. Developer Portal -- инфраструктура, App Store Connect -- бизнес.

---

## Куда дальше

| Направление | Куда | Зачем |
|-------------|------|-------|
| Следующий шаг | [[ios-ci-cd]] | Автоматизация процесса дистрибуции |
| Углубиться | [[ios-code-signing]] | Code signing как основа дистрибуции |
| Смежная тема | [[cross-distribution]] | Дистрибуция на Android и других платформах |
| Обзор | [[ios-overview]] | Вернуться к карте раздела |
