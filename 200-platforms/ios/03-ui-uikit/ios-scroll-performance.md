---
title: "iOS Scroll Performance: UITableView, UICollectionView, cell reuse"
created: 2026-01-11
modified: 2026-02-13
type: deep-dive
reading_time: 80
difficulty: 6
study_status: not_started
mastery: 0
last_reviewed:
next_review:
status: published
tags:
  - type/deep-dive
  - topic/ios
  - topic/performance
  - level/intermediate
related:
  - "[[android-recyclerview-internals]]"
  - "[[ios-view-rendering]]"
  - "[[performance-optimization]]"
prerequisites:
  - "[[ios-overview]]"
  - "[[ios-uikit-fundamentals]]"
---

# iOS Scroll Performance

## TL;DR

ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° Ğ² iOS ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ñ‚Ñ€Ñ‘Ñ… Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²: Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑÑ‡ĞµĞµĞº (cell reuse), Ğ¿Ñ€ĞµĞ´Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (prefetching) Ğ¸ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ² `cellForRowAt`. Ğ•ÑĞ»Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ» "Ğ´Ñ‘Ñ€Ğ³Ğ°ĞµÑ‚ÑÑ" â€” ÑÑ‚Ğ¾ Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚, Ñ‡Ñ‚Ğ¾ main thread Ğ½Ğµ ÑƒÑĞ¿ĞµĞ²Ğ°ĞµÑ‚ Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ°Ğ´Ñ€Ñ‹ Ğ·Ğ° 16.67Ğ¼Ñ (60 FPS) Ğ¸Ğ»Ğ¸ 8.33Ğ¼Ñ (120 FPS Ğ½Ğ° ProMotion).

---

## Ğ—Ğ°Ñ‡ĞµĞ¼ ÑÑ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾?

ĞŸĞ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¾Ğ»Ğ» â€” ÑÑ‚Ğ¾ **Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ Ğ²Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ»ĞµĞ½Ğ¸Ğµ** Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ:

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ’Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼ |
|---------|-------------------------|
| 60 FPS (16.67Ğ¼Ñ/ĞºĞ°Ğ´Ñ€) | ĞŸĞ»Ğ°Ğ²Ğ½Ğ¾, ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾ |
| 45-50 FPS | Ğ—Ğ°Ğ¼ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¼Ğ¸ĞºÑ€Ğ¾-Ğ¿Ğ¾Ğ´Ñ‚Ğ¾Ñ€Ğ¼Ğ°Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ |
| < 30 FPS | "ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ñ€Ğ¼Ğ¾Ğ·Ğ¸Ñ‚", Ğ½ĞµĞ³Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‹ |
| ProMotion 120 FPS | Ğ£Ğ»ÑŒÑ‚Ñ€Ğ°-Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ¾, 8.33Ğ¼Ñ/ĞºĞ°Ğ´Ñ€ |

**Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ:**
- 53% Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ ÑƒĞ´Ğ°Ğ»ÑÑÑ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ Ğ¿Ğ»Ğ¾Ñ…Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒÑ
- Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ² 100Ğ¼Ñ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº "Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ½Ğµ Ñ‚Ğ°Ğº"
- Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ² 1 ÑĞµĞºÑƒĞ½Ğ´Ñƒ Ğ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ñ‚Ğ¾Ğº Ğ¼Ñ‹ÑĞ»ĞµĞ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frame Budget                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  60 FPS:  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 16.67ms Ğ½Ğ° Ğ²ÑÑ‘                 â”‚
â”‚ 120 FPS:  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|         8.33ms â€” Ğ² 2 Ñ€Ğ°Ğ·Ğ° Ğ¼ĞµĞ½ÑŒÑˆĞµ!      â”‚
â”‚                                                              â”‚
â”‚  Ğ§Ñ‚Ğ¾ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ ÑƒĞ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒÑÑ:                                       â”‚
â”‚  â€¢ Layout ÑÑ‡ĞµĞµĞº                                              â”‚
â”‚  â€¢ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹                                      â”‚
â”‚  â€¢ Ğ‘Ğ¸Ğ½Ğ´Ğ¸Ğ½Ğ³ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…                                            â”‚
â”‚  â€¢ ĞÑ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° Ñ‚ĞµĞ½ĞµĞ¹, ÑĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ğ¹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Ğ¸Ğ· Ğ¶Ğ¸Ğ·Ğ½Ğ¸

### 1. Cell Reuse = Ğ¢Ğ°Ñ€ĞµĞ»ĞºĞ¸ Ğ² Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½Ğµ ğŸ½ï¸

Ğ ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½ Ğ½Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²ÑƒÑ Ñ‚Ğ°Ñ€ĞµĞ»ĞºÑƒ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ³Ğ¾ÑÑ‚Ñ. Ğ“Ñ€ÑĞ·Ğ½Ñ‹Ğµ Ñ‚Ğ°Ñ€ĞµĞ»ĞºĞ¸ Ğ¼Ğ¾ÑÑ‚ Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ ÑĞ½Ğ¾Ğ²Ğ°.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞŸĞ¾ÑĞµÑ‚Ğ¸Ñ‚ĞµĞ»ÑŒ 1    ĞŸĞ¾ÑĞµÑ‚Ğ¸Ñ‚ĞµĞ»ÑŒ 2    ĞŸĞ¾ÑĞµÑ‚Ğ¸Ñ‚ĞµĞ»ÑŒ 3              â”‚
â”‚      â†“               â†“               â†“                      â”‚
â”‚   [Ğ¢Ğ°Ñ€ĞµĞ»ĞºĞ°]  â†’   [ĞœĞ¾ÑÑ‚]   â†’   [Ğ¢Ğ°Ñ€ĞµĞ»ĞºĞ°]  â†’   [ĞœĞ¾ÑÑ‚]   â†’    â”‚
â”‚                                                              â”‚
â”‚  Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ:                                                â”‚
â”‚  [Ğ¯Ñ‡ĞµĞ¹ĞºĞ° A]  â†’ [prepareForReuse] â†’ [Ğ¯Ñ‡ĞµĞ¹ĞºĞ° A Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Prefetching = ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ½Ñ‚ Ğ½ĞµÑÑ‘Ñ‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ Ğ±Ğ»ÑĞ´Ğ° Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ

ĞŸĞ¾ĞºĞ° Ğ²Ñ‹ ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ, Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ½Ñ‚ ÑƒĞ¶Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ½Ğ° ĞºÑƒÑ…Ğ½Ğµ. ĞĞµ Ğ¶Ğ´Ñ‘Ñ‚, Ğ¿Ğ¾ĞºĞ° Ğ²Ñ‹ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ğ’Ñ‹ Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ:     â”‚   Ğ£Ğ¶Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑÑ:                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 1â”‚    â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 5â”‚ â† prefetchRowsAt           â”‚
â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 2â”‚    â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 6â”‚                            â”‚
â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 3â”‚    â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 7â”‚                            â”‚
â”‚   â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 4â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Estimated Height = ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¿Ğ¾Ñ€Ñ†Ğ¸Ğ¸ Ğ² Ğ¼ĞµĞ½Ñ

ĞœĞµĞ½Ñ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ "Ğ¿Ğ¾Ñ€Ñ†Ğ¸Ñ ~300Ğ³", Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ. Ğ¢Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ²ĞµÑ ÑƒĞ·Ğ½Ğ°ĞµÑ‚Ğµ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ñ€Ğ¸Ğ½ĞµÑÑƒÑ‚.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  estimatedRowHeight = 80  â† "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹"         â”‚
â”‚                                                              â”‚
â”‚  Ğ—Ğ°Ñ‡ĞµĞ¼: ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ Ğ·Ğ½Ğ°ĞµÑ‚ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ scrollView             â”‚
â”‚  Ğ‘ĞµĞ· ÑÑ‚Ğ¾Ğ³Ğ¾: Ğ¿Ñ€Ñ‹Ğ³Ğ°ÑÑ‰Ğ¸Ğ¹ scroll indicator, Ğ´Ñ‘Ñ€Ğ³Ğ°Ğ½ÑŒĞµ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Self-Sizing Cells = Ğ¢Ğ°Ñ€ĞµĞ»ĞºĞ° Ğ¿Ğ¾Ğ´ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ´ ĞµĞ´Ñƒ

ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚Ğ°Ñ€ĞµĞ»ĞºÑƒ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ€Ğ°ÑÑ‚ÑĞ³Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ´ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ»ÑĞ´Ğ°.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚"           â†’  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                        â”‚ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚       â”‚  height: 44         â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                              â”‚
â”‚  "ĞÑ‡ĞµĞ½ÑŒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğ¹     â†’  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   Ñ‚ĞµĞºÑÑ‚ Ğ½Ğ°          â”‚  â”‚ ĞÑ‡ĞµĞ½ÑŒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğ¹â”‚                     â”‚
â”‚   Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ñ€Ğ¾Ğº"  â”‚  â”‚ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğ°     â”‚  height: 88         â”‚
â”‚                        â”‚ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾    â”‚                     â”‚
â”‚                        â”‚ ÑÑ‚Ñ€Ğ¾Ğº        â”‚                     â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Diffable Data Source = ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ½Ñ‚ Ğ·Ğ½Ğ°ĞµÑ‚ Ñ‡Ñ‚Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ² Ğ·Ğ°ĞºĞ°Ğ·Ğµ

Ğ’Ğ¼ĞµÑÑ‚Ğ¾ "Ğ¿ĞµÑ€ĞµĞ´ĞµĞ»Ğ°Ğ¹ Ğ²ĞµÑÑŒ Ğ·Ğ°ĞºĞ°Ğ·", Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ½Ñ‚ Ğ·Ğ½Ğ°ĞµÑ‚: "Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ Ğ´ĞµÑĞµÑ€Ñ‚, ÑƒĞ±ĞµÑ€Ğ¸ ÑÑƒĞ¿".

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ± (reloadData):                                â”‚
â”‚  "Ğ—Ğ°Ğ±ÑƒĞ´ÑŒ Ğ²ÑÑ‘, Ğ²Ğ¾Ñ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ· Ñ†ĞµĞ»Ğ¸ĞºĞ¾Ğ¼"                      â”‚
â”‚                                                              â”‚
â”‚  Diffable Data Source:                                       â”‚
â”‚  "Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° 3 ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°, ÑÑ‚Ñ€Ğ¾ĞºĞ° 7 Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°, ÑÑ‚Ñ€Ğ¾ĞºĞ° 2 Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ°"  â”‚
â”‚  â†’ ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ, Ğ±ĞµĞ· Ğ¼ĞµÑ€Ñ†Ğ°Ğ½Ğ¸Ñ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°

### ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ UIScrollView

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UIScrollView                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      contentSize                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                    ĞĞµĞ²Ğ¸Ğ´Ğ¸Ğ¼Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘              Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ (bounds)                â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  contentOffset.y = 200                               â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘                                                      â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â”‚ Cell (reused)                                  â”‚  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â”‚ Cell (reused)                                  â”‚  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â”‚ Cell (reused)                                  â”‚  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘ â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                    ĞĞµĞ²Ğ¸Ğ´Ğ¸Ğ¼Ğ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» ÑÑ‡ĞµĞ¹ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Cell Lifecycle                                   â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ Reuse    â”‚â”€â”€â”€â†’â”‚ cellForRowAt â”‚â”€â”€â”€â†’â”‚  Visible    â”‚               â”‚
â”‚   â”‚ Pool     â”‚    â”‚   configure  â”‚    â”‚  on screen  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚        â†‘                                      â”‚                      â”‚
â”‚        â”‚                                      â”‚ scrolled             â”‚
â”‚        â”‚                                      â”‚ off screen           â”‚
â”‚        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â†“                      â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚prepareForReuse â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                      â”‚
â”‚   Reuse Pool: [Cell] [Cell] [Cell] â€” Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UITableView vs UICollectionView

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       UITableView          â”‚         UICollectionView               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° 1               â”‚ â”‚ â”‚ Item â”‚ â”‚ Item â”‚ â”‚ Item â”‚           â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚ â”‚ Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° 2               â”‚ â”‚ â”‚ Item â”‚ â”‚ Item â”‚ â”‚ Item â”‚           â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚ â”‚ Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° 3               â”‚ â”‚ â”‚ Item â”‚ â”‚ Item â”‚ â”‚ Item â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚                                        â”‚
â”‚ â€¢ ĞĞ´Ğ½Ğ° ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ°            â”‚ â€¢ Ğ›ÑĞ±Ğ¾Ğ¹ layout                          â”‚
â”‚ â€¢ ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ API             â”‚ â€¢ Compositional Layout (iOS 13+)        â”‚
â”‚ â€¢ Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸        â”‚ â€¢ UICollectionViewFlowLayout            â”‚
â”‚ â€¢ Ğ¡ĞµĞºÑ†Ğ¸Ğ¸ Ğ¸ headers        â”‚ â€¢ Diffable Data Source                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Cell Reuse

### ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```swift
// Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ ÑÑ‡ĞµĞ¹ĞºĞ¸
tableView.register(MyCell.self, forCellReuseIdentifier: "MyCell")

// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑÑ‡ĞµĞ¹ĞºĞ¸ Ğ¸Ğ· Ğ¿ÑƒĞ»Ğ°
func tableView(_ tableView: UITableView,
               cellForRowAt indexPath: IndexPath) -> UITableViewCell {

    // dequeueReusableCell:
    // 1. Ğ˜Ñ‰ĞµÑ‚ ÑÑ‡ĞµĞ¹ĞºÑƒ Ğ² reuse pool
    // 2. Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²ÑƒÑ
    // 3. Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ prepareForReuse() Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ¾Ğ¼
    let cell = tableView.dequeueReusableCell(
        withIdentifier: "MyCell",
        for: indexPath
    ) as! MyCell

    // ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ¸Ñ€ÑƒĞµĞ¼ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
    cell.configure(with: items[indexPath.row])

    return cell
}
```

### ReuseIdentifier â€” ĞºĞ»ÑÑ‡ Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```swift
// Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ ÑÑ‡ĞµĞµĞº = Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹
enum CellIdentifier {
    static let text = "TextCell"
    static let image = "ImageCell"
    static let video = "VideoCell"
}

// Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
tableView.register(TextCell.self, forCellReuseIdentifier: CellIdentifier.text)
tableView.register(ImageCell.self, forCellReuseIdentifier: CellIdentifier.image)
tableView.register(VideoCell.self, forCellReuseIdentifier: CellIdentifier.video)

// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
func tableView(_ tableView: UITableView,
               cellForRowAt indexPath: IndexPath) -> UITableViewCell {

    let item = items[indexPath.row]

    switch item.type {
    case .text:
        let cell = tableView.dequeueReusableCell(
            withIdentifier: CellIdentifier.text,
            for: indexPath
        ) as! TextCell
        cell.configure(with: item)
        return cell

    case .image:
        let cell = tableView.dequeueReusableCell(
            withIdentifier: CellIdentifier.image,
            for: indexPath
        ) as! ImageCell
        cell.configure(with: item)
        return cell

    case .video:
        let cell = tableView.dequeueReusableCell(
            withIdentifier: CellIdentifier.video,
            for: indexPath
        ) as! VideoCell
        cell.configure(with: item)
        return cell
    }
}
```

### prepareForReuse() â€” ÑĞ±Ñ€Ğ¾Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ

```swift
class ImageCell: UITableViewCell {

    private let thumbnailImageView = UIImageView()
    private let titleLabel = UILabel()
    private var imageLoadTask: Task<Void, Never>?

    override func prepareForReuse() {
        super.prepareForReuse()

        // Ğ’ĞĞ–ĞĞ: ĞÑ‚Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ½ĞµĞ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
        imageLoadTask?.cancel()
        imageLoadTask = nil

        // Ğ¡Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
        thumbnailImageView.image = nil
        titleLabel.text = nil

        // Ğ¡Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ»ÑĞ±Ñ‹Ğµ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸
        thumbnailImageView.layer.removeAllAnimations()

        // ĞĞ• ÑĞ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ´ĞµÑÑŒ:
        // - Constraints (Ğ¾Ğ½Ğ¸ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ)
        // - Subviews (Ğ¾Ğ½Ğ¸ ÑƒĞ¶Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹)
        // - Ğ”ĞµĞ»ĞµĞ³Ğ°Ñ‚Ñ‹ (ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ² configure)
    }

    func configure(with item: Item) {
        titleLabel.text = item.title

        // ĞĞ¾Ğ²Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
        imageLoadTask = Task {
            if let image = await ImageLoader.load(item.imageURL) {
                // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ½Ğµ Ğ¾Ñ‚Ğ¼ĞµĞ½ĞµĞ½Ğ°
                guard !Task.isCancelled else { return }
                thumbnailImageView.image = image
            }
        }
    }
}
```

### Ğ Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Cell Reuse

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ£ÑĞ»Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ±ĞµĞ· else
override func prepareForReuse() {
    super.prepareForReuse()
}

func configure(with item: Item) {
    if item.isSpecial {
        backgroundColor = .yellow  // Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ special
    }
    // Ğ—Ğ°Ğ±Ñ‹Ğ»Ğ¸ ÑĞ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ñ… â€” Ğ¶Ñ‘Ğ»Ñ‚Ñ‹Ğ¹ Ñ„Ğ¾Ğ½ "Ğ¿Ñ€Ğ¾Ñ‚ĞµÑ‡Ñ‘Ñ‚"
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Ğ’ÑĞµĞ³Ğ´Ğ° ÑĞ²Ğ½Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ²ÑĞµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
func configure(with item: Item) {
    backgroundColor = item.isSpecial ? .yellow : .white
}

// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ subview Ğ² configure
func configure(with item: Item) {
    let badge = BadgeView()  // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ·!
    contentView.addSubview(badge)  // ĞĞ°ĞºĞ°Ğ¿Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ!
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Subviews ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ² init
class MyCell: UITableViewCell {
    private let badge = BadgeView()

    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        contentView.addSubview(badge)  // ĞĞ´Ğ¸Ğ½ Ñ€Ğ°Ğ·
    }

    func configure(with item: Item) {
        badge.isHidden = !item.showBadge
    }
}
```

---

## Self-Sizing Cells

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹

```swift
// UITableView
tableView.rowHeight = UITableView.automaticDimension
tableView.estimatedRowHeight = 80  // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°!

// UICollectionView Ñ Flow Layout
if let layout = collectionView.collectionViewLayout as? UICollectionViewFlowLayout {
    layout.estimatedItemSize = UICollectionViewFlowLayout.automaticSize
}
```

### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ constraints Ğ´Ğ»Ñ self-sizing

```swift
class SelfSizingCell: UITableViewCell {

    private let titleLabel = UILabel()
    private let bodyLabel = UILabel()

    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        setupUI()
    }

    private func setupUI() {
        // ĞœĞ½Ğ¾Ğ³Ğ¾ÑÑ‚Ñ€Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ»ĞµĞ¹Ğ±Ğ»Ñ‹
        titleLabel.numberOfLines = 0
        bodyLabel.numberOfLines = 0

        // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² contentView, ĞĞ• Ğ² self
        contentView.addSubview(titleLabel)
        contentView.addSubview(bodyLabel)

        titleLabel.translatesAutoresizingMaskIntoConstraints = false
        bodyLabel.translatesAutoresizingMaskIntoConstraints = false

        // ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ: ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° constraints Ğ¾Ñ‚ top Ğ´Ğ¾ bottom
        NSLayoutConstraint.activate([
            // Title Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Ğ²ĞµÑ€Ñ…Ñƒ
            titleLabel.topAnchor.constraint(equalTo: contentView.topAnchor, constant: 16),
            titleLabel.leadingAnchor.constraint(equalTo: contentView.leadingAnchor, constant: 16),
            titleLabel.trailingAnchor.constraint(equalTo: contentView.trailingAnchor, constant: -16),

            // Body Ğ¿Ğ¾Ğ´ title
            bodyLabel.topAnchor.constraint(equalTo: titleLabel.bottomAnchor, constant: 8),
            bodyLabel.leadingAnchor.constraint(equalTo: contentView.leadingAnchor, constant: 16),
            bodyLabel.trailingAnchor.constraint(equalTo: contentView.trailingAnchor, constant: -16),

            // Body Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Ğ½Ğ¸Ğ·Ñƒ â€” ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ!
            bodyLabel.bottomAnchor.constraint(equalTo: contentView.bottomAnchor, constant: -16)
        ])
    }

    required init?(coder: NSCoder) { fatalError() }
}
```

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° constraints Ğ´Ğ»Ñ self-sizing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        contentView                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TOP (16pt)                                                     â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ titleLabel                                               â”‚   â”‚  â”‚
â”‚  â”‚ â”‚ (numberOfLines = 0)                                      â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚ SPACING (8pt)                                                  â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ bodyLabel                                                â”‚   â”‚  â”‚
â”‚  â”‚ â”‚ (numberOfLines = 0)                                      â”‚   â”‚  â”‚
â”‚  â”‚ â”‚ ĞœĞ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹!                                 â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚ BOTTOM (16pt)                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  Ğ¦ĞµĞ¿Ğ¾Ñ‡ĞºĞ°: top â†’ titleLabel â†’ bodyLabel â†’ bottom                     â”‚
â”‚  Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ÑÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼!                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ estimatedRowHeight Ğ²Ğ°Ğ¶ĞµĞ½

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: ĞĞµÑ‚ estimated height
tableView.rowHeight = UITableView.automaticDimension
// Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: iOS Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ Ğ’Ğ¡Ğ• Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ = Ñ‚Ğ¾Ñ€Ğ¼Ğ¾Ğ·Ğ° Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Ğ¡ estimated height
tableView.rowHeight = UITableView.automaticDimension
tableView.estimatedRowHeight = 80
// Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: iOS Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ 80 Ğ´Ğ»Ñ Ğ½ĞµĞ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ñ…,
//           Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ Ñ€ĞµĞ°Ğ»ÑŒĞ½ÑƒÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ñ…
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1000 ÑÑ‡ĞµĞµĞº, Ñ€Ğ°Ğ·Ğ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°                                          â”‚
â”‚                                                                      â”‚
â”‚  Ğ‘ĞµĞ· estimatedRowHeight:                                             â”‚
â”‚  [Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ][Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ][Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ]...[Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ] = 1000 Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹  â”‚
â”‚  Ğ’Ñ€ĞµĞ¼Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸: ~2-3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹                                        â”‚
â”‚                                                                      â”‚
â”‚  Ğ¡ estimatedRowHeight = 80:                                          â”‚
â”‚  [80][80][80]...[Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ğµ ~10] = 10 Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹             â”‚
â”‚  Ğ’Ñ€ĞµĞ¼Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸: Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾                                           â”‚
â”‚                                                                      â”‚
â”‚  Scroll indicator Ğ¼Ğ¾Ğ¶ĞµÑ‚ "Ğ¿Ñ€Ñ‹Ğ³Ğ°Ñ‚ÑŒ", Ğ½Ğ¾ ÑÑ‚Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ Ñ‡ĞµĞ¼ Ñ‚Ğ¾Ñ€Ğ¼Ğ¾Ğ·Ğ°!        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Prefetching

### UITableViewDataSourcePrefetching

```swift
class FeedViewController: UIViewController {

    private let tableView = UITableView()
    private var items: [FeedItem] = []
    private let imageLoader = ImageLoader()

    override func viewDidLoad() {
        super.viewDidLoad()

        tableView.dataSource = self
        tableView.prefetchDataSource = self  // Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ prefetching
    }
}

extension FeedViewController: UITableViewDataSourcePrefetching {

    // Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ ĞºĞ¾Ğ³Ğ´Ğ° ÑÑ‡ĞµĞ¹ĞºĞ¸ Ğ¡ĞšĞĞ Ğ Ğ¿Ğ¾ÑĞ²ÑÑ‚ÑÑ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ
    func tableView(_ tableView: UITableView,
                   prefetchRowsAt indexPaths: [IndexPath]) {

        for indexPath in indexPaths {
            let item = items[indexPath.row]

            // ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ
            imageLoader.prefetch(url: item.imageURL)
        }
    }

    // Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ» Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°
    // Ğ¸Ğ»Ğ¸ ÑÑ‡ĞµĞ¹ĞºĞ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ğ¿Ğ¾Ğ½Ğ°Ğ´Ğ¾Ğ±ÑÑ‚ÑÑ
    func tableView(_ tableView: UITableView,
                   cancelPrefetchingForRowsAt indexPaths: [IndexPath]) {

        for indexPath in indexPaths {
            let item = items[indexPath.row]

            // ĞÑ‚Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ½ĞµĞ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
            imageLoader.cancelPrefetch(url: item.imageURL)
        }
    }
}
```

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° prefetching

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Prefetching Timeline                              â”‚
â”‚                                                                      â”‚
â”‚  Ğ¡ĞºÑ€Ğ¾Ğ»Ğ» Ğ²Ğ½Ğ¸Ğ· â†“                                                       â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 1  [Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ°]                      â”‚                        â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 2  [Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ°]                      â”‚                        â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 3  [Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ°]                      â”‚                        â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 4  [Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ°]                      â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚  - - - - - - - - - - - - - - - - - - - - - - - edge of screen       â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 5  [prefetchRowsAt Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½]       â”‚ â† Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°ÑÑŒ    â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 6  [prefetchRowsAt Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½]       â”‚                        â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 7  [prefetchRowsAt Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½]       â”‚                        â”‚
â”‚  â”‚ Ğ¯Ñ‡ĞµĞ¹ĞºĞ° 8  [prefetchRowsAt Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½]       â”‚                        â”‚
â”‚                                                                      â”‚
â”‚  Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ€ĞµĞ·ĞºĞ¾ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ¸Ñ‚ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ â†‘:                        â”‚
â”‚  â†’ cancelPrefetchingForRowsAt Ğ´Ğ»Ñ 5, 6, 7, 8                        â”‚
â”‚  â†’ prefetchRowsAt Ğ´Ğ»Ñ 0 (ĞµÑĞ»Ğ¸ Ğ±Ñ‹Ğ»Ğ° Ğ±Ñ‹ Ğ²Ñ‹ÑˆĞµ)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹

```swift
class ImageLoader {

    private var prefetchTasks: [URL: Task<UIImage?, Never>] = [:]
    private let cache = NSCache<NSURL, UIImage>()

    // Prefetch: Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ, ĞºÑÑˆĞ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
    func prefetch(url: URL) {
        guard prefetchTasks[url] == nil else { return }
        guard cache.object(forKey: url as NSURL) == nil else { return }

        prefetchTasks[url] = Task {
            do {
                let (data, _) = try await URLSession.shared.data(from: url)
                if let image = UIImage(data: data) {
                    cache.setObject(image, forKey: url as NSURL)
                    return image
                }
            } catch {
                // ĞÑˆĞ¸Ğ±ĞºĞ° prefetch â€” Ğ½Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾
            }
            return nil
        }
    }

    // ĞÑ‚Ğ¼ĞµĞ½Ğ° prefetch
    func cancelPrefetch(url: URL) {
        prefetchTasks[url]?.cancel()
        prefetchTasks[url] = nil
    }

    // Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ ĞºÑÑˆĞ° Ğ¸ prefetch)
    func load(url: URL) async -> UIImage? {
        // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞºÑÑˆ
        if let cached = cache.object(forKey: url as NSURL) {
            return cached
        }

        // Ğ–Ğ´Ñ‘Ğ¼ prefetch ĞµÑĞ»Ğ¸ Ğ¾Ğ½ ÑƒĞ¶Ğµ Ğ¸Ğ´Ñ‘Ñ‚
        if let prefetchTask = prefetchTasks[url] {
            return await prefetchTask.value
        }

        // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ
        do {
            let (data, _) = try await URLSession.shared.data(from: url)
            if let image = UIImage(data: data) {
                cache.setObject(image, forKey: url as NSURL)
                return image
            }
        } catch {
            return nil
        }
        return nil
    }
}
```

---

## Diffable Data Source

### ĞÑĞ½Ğ¾Ğ²Ñ‹ NSDiffableDataSourceSnapshot

```swift
// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ´Ğ»Ñ ÑĞµĞºÑ†Ğ¸Ğ¹ Ğ¸ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
enum Section: Hashable {
    case featured
    case regular
}

struct Item: Hashable {
    let id: UUID
    let title: String
    let subtitle: String

    // Hashable Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ id
    func hash(into hasher: inout Hasher) {
        hasher.combine(id)
    }

    static func == (lhs: Item, rhs: Item) -> Bool {
        lhs.id == rhs.id
    }
}

class FeedViewController: UIViewController {

    private var dataSource: UITableViewDiffableDataSource<Section, Item>!
    private let tableView = UITableView()

    override func viewDidLoad() {
        super.viewDidLoad()
        configureDataSource()
    }

    private func configureDataSource() {
        dataSource = UITableViewDiffableDataSource<Section, Item>(
            tableView: tableView
        ) { tableView, indexPath, item in

            let cell = tableView.dequeueReusableCell(
                withIdentifier: "Cell",
                for: indexPath
            )
            cell.textLabel?.text = item.title
            cell.detailTextLabel?.text = item.subtitle
            return cell
        }
    }

    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
    func updateData(featured: [Item], regular: [Item]) {
        var snapshot = NSDiffableDataSourceSnapshot<Section, Item>()

        snapshot.appendSections([.featured, .regular])
        snapshot.appendItems(featured, toSection: .featured)
        snapshot.appendItems(regular, toSection: .regular)

        // animatingDifferences: true = Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸
        dataSource.apply(snapshot, animatingDifferences: true)
    }
}
```

### ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ

```swift
// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°
func addItem(_ item: Item, after existingItem: Item) {
    var snapshot = dataSource.snapshot()
    snapshot.insertItems([item], afterItem: existingItem)
    dataSource.apply(snapshot, animatingDifferences: true)
}

// Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°
func removeItem(_ item: Item) {
    var snapshot = dataSource.snapshot()
    snapshot.deleteItems([item])
    dataSource.apply(snapshot, animatingDifferences: true)
}

// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ° (iOS 15+)
func updateItem(_ item: Item) {
    var snapshot = dataSource.snapshot()
    snapshot.reconfigureItems([item])  // ĞĞµ Ğ¿ĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑÑ‡ĞµĞ¹ĞºÑƒ, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚
    dataSource.apply(snapshot, animatingDifferences: true)
}

// ĞŸĞµÑ€ĞµĞ¼ĞµÑ‰ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°
func moveItem(_ item: Item, after other: Item) {
    var snapshot = dataSource.snapshot()
    snapshot.moveItem(item, afterItem: other)
    dataSource.apply(snapshot, animatingDifferences: true)
}
```

### Section Snapshots (iOS 14+)

```swift
// Ğ”Ğ»Ñ Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (expandable sections)
struct OutlineItem: Hashable {
    let id: UUID
    let title: String
    let children: [OutlineItem]
}

func applySnapshot(items: [OutlineItem]) {
    var sectionSnapshot = NSDiffableDataSourceSectionSnapshot<OutlineItem>()

    func addItems(_ items: [OutlineItem], to parent: OutlineItem?) {
        sectionSnapshot.append(items, to: parent)
        for item in items where !item.children.isEmpty {
            addItems(item.children, to: item)
        }
    }

    addItems(items, to: nil)

    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ Ğº ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ ÑĞµĞºÑ†Ğ¸Ğ¸
    dataSource.apply(sectionSnapshot, to: .main, animatingDifferences: true)
}
```

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Diffable Data Source

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ± (reloadData)        vs    Diffable Data Source       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  reloadData():                          apply(snapshot):             â”‚
â”‚  â€¢ ĞŸĞµÑ€ĞµÑ€Ğ¸ÑĞ¾Ğ²Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ’Ğ¡Ğ                  â€¢ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ñ‹Ğµ ÑÑ‡ĞµĞ¹ĞºĞ¸   â”‚
â”‚  â€¢ ĞĞµÑ‚ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¹                        â€¢ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸    â”‚
â”‚  â€¢ ĞœĞµÑ€Ñ†Ğ°Ğ½Ğ¸Ğµ ÑĞºÑ€Ğ°Ğ½Ğ°                     â€¢ ĞŸĞ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹           â”‚
â”‚  â€¢ Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ tracking Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹          â€¢ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ diff         â”‚
â”‚  â€¢ Crashes Ğ¿Ñ€Ğ¸ Ğ½ĞµÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¸           â€¢ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾, Ğ½ĞµÑ‚ crashes      â”‚
â”‚                                                                      â”‚
â”‚  func update() {                       func update() {               â”‚
â”‚    // ğŸ˜° ĞĞ°Ğ´Ğ¾ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ!        var snap = snapshot()         â”‚
â”‚    tableView.beginUpdates()             snap.deleteItems([old])      â”‚
â”‚    items.remove(at: 0)                  snap.appendItems([new])      â”‚
â”‚    tableView.deleteRows(...)            apply(snap)  // Done!        â”‚
â”‚    items.append(new)                   }                             â”‚
â”‚    tableView.insertRows(...)                                         â”‚
â”‚    tableView.endUpdates()                                            â”‚
â”‚    // ğŸ’¥ Crash ĞµÑĞ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°!                                          â”‚
â”‚  }                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## UICollectionView Compositional Layout

### Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ğº layout (iOS 13+)

```swift
func createLayout() -> UICollectionViewLayout {

    // Item
    let itemSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(1.0),
        heightDimension: .estimated(100)
    )
    let item = NSCollectionLayoutItem(layoutSize: itemSize)

    // Group
    let groupSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(1.0),
        heightDimension: .estimated(100)
    )
    let group = NSCollectionLayoutGroup.vertical(
        layoutSize: groupSize,
        subitems: [item]
    )

    // Section
    let section = NSCollectionLayoutSection(group: group)
    section.interGroupSpacing = 10
    section.contentInsets = NSDirectionalEdgeInsets(
        top: 10, leading: 16, bottom: 10, trailing: 16
    )

    return UICollectionViewCompositionalLayout(section: section)
}
```

### Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ layout: Grid + List + Carousel

```swift
func createComplexLayout() -> UICollectionViewLayout {

    return UICollectionViewCompositionalLayout { sectionIndex, environment in

        switch sectionIndex {
        case 0:
            // Carousel (Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¾Ğ»Ğ»)
            return self.createCarouselSection()
        case 1:
            // Grid 2x2
            return self.createGridSection()
        default:
            // List
            return self.createListSection()
        }
    }
}

private func createCarouselSection() -> NSCollectionLayoutSection {
    let itemSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(1.0),
        heightDimension: .fractionalHeight(1.0)
    )
    let item = NSCollectionLayoutItem(layoutSize: itemSize)

    let groupSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(0.85),
        heightDimension: .absolute(200)
    )
    let group = NSCollectionLayoutGroup.horizontal(
        layoutSize: groupSize,
        subitems: [item]
    )

    let section = NSCollectionLayoutSection(group: group)
    section.orthogonalScrollingBehavior = .groupPagingCentered
    section.interGroupSpacing = 16

    return section
}

private func createGridSection() -> NSCollectionLayoutSection {
    let itemSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(0.5),
        heightDimension: .fractionalWidth(0.5)
    )
    let item = NSCollectionLayoutItem(layoutSize: itemSize)
    item.contentInsets = NSDirectionalEdgeInsets(
        top: 4, leading: 4, bottom: 4, trailing: 4
    )

    let groupSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(1.0),
        heightDimension: .fractionalWidth(0.5)
    )
    let group = NSCollectionLayoutGroup.horizontal(
        layoutSize: groupSize,
        subitem: item,
        count: 2
    )

    return NSCollectionLayoutSection(group: group)
}
```

### List Configuration (iOS 14+)

```swift
// UICollectionView ĞºĞ°Ğº UITableView â€” Ğ»ÑƒÑ‡ÑˆĞµ Ğ¾Ğ±Ğ¾Ğ¸Ñ… Ğ¼Ğ¸Ñ€Ğ¾Ğ²!
func createListLayout() -> UICollectionViewLayout {

    var config = UICollectionLayoutListConfiguration(appearance: .insetGrouped)
    config.showsSeparators = true
    config.headerMode = .supplementary

    // Swipe actions
    config.trailingSwipeActionsConfigurationProvider = { indexPath in
        let deleteAction = UIContextualAction(
            style: .destructive,
            title: "Delete"
        ) { action, view, completion in
            // Handle delete
            completion(true)
        }
        return UISwipeActionsConfiguration(actions: [deleteAction])
    }

    return UICollectionViewCompositionalLayout.list(using: config)
}
```

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Compositional Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Compositional Layout Benefits                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. Ğ”ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ                                          â”‚
â”‚     â€¢ ĞĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ§Ğ¢Ğ Ñ…Ğ¾Ñ‚Ğ¸Ğ¼, Ğ½Ğµ ĞšĞĞš                                    â”‚
â”‚     â€¢ ĞĞµÑ‚ delegate Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ²                              â”‚
â”‚                                                                      â”‚
â”‚  2. ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ                                                        â”‚
â”‚     â€¢ Item â†’ Group â†’ Section â†’ Layout                                â”‚
â”‚     â€¢ ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹                                    â”‚
â”‚                                                                      â”‚
â”‚  3. ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ                                                â”‚
â”‚     â€¢ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Apple                                           â”‚
â”‚     â€¢ Self-sizing Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸                                         â”‚
â”‚     â€¢ Orthogonal scrolling Ğ±ĞµĞ· Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ… scroll views                â”‚
â”‚                                                                      â”‚
â”‚  4. Ğ“Ğ¸Ğ±ĞºĞ¾ÑÑ‚ÑŒ                                                          â”‚
â”‚     â€¢ Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ layouts Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑĞµĞºÑ†Ğ¸Ğ¹                               â”‚
â”‚     â€¢ Adaptive layouts Ñ environment                                  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Header                                                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [Carousel â†’ â†’ â†’]                    â† orthogonalScrolling     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [Grid] [Grid]                                                  â”‚  â”‚
â”‚  â”‚ [Grid] [Grid]                       â† fractionalWidth(0.5)    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [List item                        ]                            â”‚  â”‚
â”‚  â”‚ [List item                        ] â† .list(using: config)    â”‚  â”‚
â”‚  â”‚ [List item                        ]                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SwiftUI List Performance

### LazyVStack vs List

```swift
// List â€” Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ½ÑÑ‚Ğ²Ğ° ÑĞ»ÑƒÑ‡Ğ°ĞµĞ²
struct ContentView: View {
    let items: [Item]

    var body: some View {
        List(items) { item in
            ItemRow(item: item)
        }
    }
}

// LazyVStack â€” Ğ´Ğ»Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°
struct CustomListView: View {
    let items: [Item]

    var body: some View {
        ScrollView {
            LazyVStack(spacing: 0) {  // LAZY â€” Ğ½Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ²ÑĞµ view ÑÑ€Ğ°Ğ·Ñƒ
                ForEach(items) { item in
                    ItemRow(item: item)
                }
            }
        }
    }
}

// âŒ ĞŸĞ›ĞĞ¥Ğ: VStack ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ’Ğ¡Ğ• view ÑÑ€Ğ°Ğ·Ñƒ
struct BadListView: View {
    let items: [Item]  // 10000 items

    var body: some View {
        ScrollView {
            VStack {  // ğŸ’€ Ğ¡Ğ¾Ğ·Ğ´Ğ°ÑÑ‚ 10000 views Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ!
                ForEach(items) { item in
                    ItemRow(item: item)
                }
            }
        }
    }
}
```

### .id() Ğ´Ğ»Ñ identity

```swift
struct Item: Identifiable {
    let id: UUID  // Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€
    var title: String
    var count: Int
}

// SwiftUI Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ id Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ identity
List(items) { item in
    ItemRow(item: item)
}

// Ğ­ĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚Ğ½Ğ¾:
List(items, id: \.id) { item in
    ItemRow(item: item)
}

// âŒ ĞŸĞ›ĞĞ¥Ğ: ĞĞµÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ id
List(items, id: \.title) { item in  // Ğ•ÑĞ»Ğ¸ title Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑÑ â€” view Ğ¿ĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ!
    ItemRow(item: item)
}

// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ˜Ğ½Ğ´ĞµĞºÑ ĞºĞ°Ğº id
ForEach(Array(items.enumerated()), id: \.offset) { index, item in
    ItemRow(item: item)  // ĞŸÑ€Ğ¸ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğ¸ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ° â€” Ğ²ÑÑ‘ ÑĞ»Ğ¾Ğ¼Ğ°ĞµÑ‚ÑÑ
}
```

### @StateObject vs @ObservedObject Ğ² ÑÑ‡ĞµĞ¹ĞºĞ°Ñ…

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: @StateObject Ğ² ÑÑ‡ĞµĞ¹ĞºĞµ List
struct ItemRow: View {
    let itemId: UUID
    @StateObject private var viewModel = ItemViewModel()  // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑÑ‡ĞµĞ¹ĞºĞ¸!

    var body: some View {
        Text(viewModel.title)
            .onAppear {
                viewModel.load(id: itemId)
            }
    }
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: ViewModel Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ÑÑ Ğ¸Ğ·Ğ²Ğ½Ğµ
struct ItemRow: View {
    @ObservedObject var viewModel: ItemViewModel

    var body: some View {
        Text(viewModel.title)
    }
}

// Ğ’ Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ¼ view:
struct ContentView: View {
    @StateObject private var store = ItemStore()

    var body: some View {
        List(store.items) { item in
            ItemRow(viewModel: store.viewModel(for: item))
        }
    }
}
```

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ SwiftUI List

```swift
struct OptimizedList: View {
    let items: [Item]

    var body: some View {
        List(items) { item in
            ItemRow(item: item)
                .listRowInsets(EdgeInsets())  // Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ padding ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½
                .listRowSeparator(.hidden)     // Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»Ğ¸
        }
        .listStyle(.plain)
        .scrollContentBackground(.hidden)  // iOS 16+ Ğ´Ğ»Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ğ½Ğ°
    }
}

// Ğ”Ğ»Ñ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²
struct LargeList: View {
    @State private var items: [Item] = []

    var body: some View {
        List(items) { item in
            ItemRow(item: item)
        }
        .task {
            // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾
            items = await loadItems()
        }
    }
}
```

---

## Ğ Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

### 1. Ğ¢ÑĞ¶Ñ‘Ğ»Ñ‹Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ğ² cellForRowAt

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ğ² cellForRowAt Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒÑÑ‚ main thread
func tableView(_ tableView: UITableView,
               cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath)

    let item = items[indexPath.row]

    // ğŸ’€ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ñ‚Ñ‹ â€” Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ!
    let formatter = DateFormatter()
    formatter.dateStyle = .long
    formatter.timeStyle = .short
    cell.detailTextLabel?.text = formatter.string(from: item.date)

    // ğŸ’€ Attributed string computation
    let attributed = NSMutableAttributedString(string: item.longText)
    // ... ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹
    cell.textLabel?.attributedText = attributed

    return cell
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: ĞŸÑ€ĞµĞ´Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
struct Item {
    let title: String
    let date: Date

    // ĞŸÑ€ĞµĞ´Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ
    let formattedDate: String
    let attributedTitle: NSAttributedString

    init(title: String, date: Date) {
        self.title = title
        self.date = date

        // ĞĞ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸
        let formatter = DateFormatter()
        formatter.dateStyle = .long
        self.formattedDate = formatter.string(from: date)

        self.attributedTitle = Self.computeAttributedTitle(title)
    }
}

func tableView(_ tableView: UITableView,
               cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath)
    let item = items[indexPath.row]

    // ĞŸÑ€Ğ¾ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¸ÑĞ²Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ
    cell.textLabel?.attributedText = item.attributedTitle
    cell.detailTextLabel?.text = item.formattedDate

    return cell
}
```

### 2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ² main thread

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ UI
func tableView(_ tableView: UITableView,
               cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath)

    let imageURL = items[indexPath.row].imageURL

    // ğŸ’€ Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°!
    if let data = try? Data(contentsOf: imageURL) {
        cell.imageView?.image = UIImage(data: data)
    }

    return cell
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¾Ğ¹
class ImageCell: UITableViewCell {
    private var currentURL: URL?
    private var loadTask: Task<Void, Never>?

    override func prepareForReuse() {
        super.prepareForReuse()
        loadTask?.cancel()
        imageView?.image = nil
        currentURL = nil
    }

    func configure(with url: URL) {
        currentURL = url

        loadTask = Task {
            // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ² background
            guard let image = await ImageLoader.shared.load(url: url) else { return }

            // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‡Ñ‚Ğ¾ ÑÑ‡ĞµĞ¹ĞºĞ° Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑÑ‚Ğ¾Ñ‚ URL
            guard currentURL == url, !Task.isCancelled else { return }

            // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ UI Ğ² main thread
            imageView?.image = image
        }
    }
}
```

### 3. ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ prefetching

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ³Ğ´Ğ° ÑÑ‡ĞµĞ¹ĞºĞ° Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ
func tableView(_ tableView: UITableView,
               cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: "Cell", for: indexPath) as! ImageCell

    // Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ
    cell.loadImage(from: items[indexPath.row].imageURL)

    return cell
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Prefetching + ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
extension ViewController: UITableViewDataSourcePrefetching {

    func tableView(_ tableView: UITableView,
                   prefetchRowsAt indexPaths: [IndexPath]) {
        let urls = indexPaths.map { items[$0.row].imageURL }
        imageLoader.prefetch(urls: urls)
    }

    func tableView(_ tableView: UITableView,
                   cancelPrefetchingForRowsAt indexPaths: [IndexPath]) {
        let urls = indexPaths.map { items[$0.row].imageURL }
        imageLoader.cancelPrefetch(urls: urls)
    }
}
```

### 4. ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ estimatedRowHeight

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğ¹ estimated height
tableView.estimatedRowHeight = 10  // Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° ~150

// Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: scroll indicator Ğ¿Ñ€Ñ‹Ğ³Ğ°ĞµÑ‚, Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ scrollToRow

// âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ estimated height
tableView.estimatedRowHeight = 500  // Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° ~50

// Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ contentSize, Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ layout

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Ğ‘Ğ»Ğ¸Ğ·ĞºĞ¾ Ğº ÑÑ€ĞµĞ´Ğ½ĞµĞ¹ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ğµ
tableView.estimatedRowHeight = 120  // Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° ÑÑ‡ĞµĞµĞº ~100-150
```

### 5. ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‡ĞµĞµĞº

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: ĞĞµ ÑĞ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
class ToggleCell: UITableViewCell {
    let toggle = UISwitch()

    func configure(isOn: Bool) {
        // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ isOn = true, Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼
        if isOn {
            toggle.isOn = true
        }
        // Ğ•ÑĞ»Ğ¸ isOn = false â€” toggle Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ Ğ² Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸!
    }
}

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Ğ¯Ğ²Ğ½Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ²ÑĞµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
class ToggleCell: UITableViewCell {
    let toggle = UISwitch()

    override func prepareForReuse() {
        super.prepareForReuse()
        toggle.isOn = false  // Ğ¡Ğ±Ñ€Ğ¾Ñ Ğº default
    }

    func configure(isOn: Bool) {
        toggle.isOn = isOn  // Ğ’ÑĞµĞ³Ğ´Ğ° ÑĞ²Ğ½Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼
    }
}
```

### 6. Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ¸Ğµ Ñ‚ĞµĞ½Ğ¸ Ğ¸ ÑĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ñ

```swift
// âŒ ĞŸĞ›ĞĞ¥Ğ: Offscreen rendering ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ĞºĞ°Ğ´Ñ€
cell.layer.shadowColor = UIColor.black.cgColor
cell.layer.shadowOffset = CGSize(width: 0, height: 2)
cell.layer.shadowRadius = 4
cell.layer.shadowOpacity = 0.2
// ĞĞµÑ‚ shadowPath = Ğ¿ĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ Ñ‚ĞµĞ½Ğ¸ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ĞºĞ°Ğ´Ñ€!

cell.layer.cornerRadius = 12
cell.layer.masksToBounds = true  // Clipping = Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾

// âœ… Ğ¥ĞĞ ĞĞ¨Ğ: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµĞ½Ğ¸
cell.layer.shadowColor = UIColor.black.cgColor
cell.layer.shadowOffset = CGSize(width: 0, height: 2)
cell.layer.shadowRadius = 4
cell.layer.shadowOpacity = 0.2
cell.layer.shadowPath = UIBezierPath(
    roundedRect: cell.bounds,
    cornerRadius: 12
).cgPath  // ĞŸÑ€ĞµĞ´Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ path!

// Ğ”Ğ»Ñ cornerRadius Ğ±ĞµĞ· clipping
cell.layer.cornerRadius = 12
cell.layer.masksToBounds = false  // ĞĞµ clipĞ¿Ğ¸Ğ¼

// Ğ˜Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ CAShapeLayer Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼
let maskLayer = CAShapeLayer()
maskLayer.path = UIBezierPath(
    roundedRect: bounds,
    cornerRadius: 12
).cgPath
cell.layer.mask = maskLayer

// âœ… Ğ›Ğ£Ğ§Ğ¨Ğ•: shouldRasterize Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
cell.layer.shouldRasterize = true
cell.layer.rasterizationScale = UIScreen.main.scale
```

---

## ĞœĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸

### 1. "16 Ğ¼Ğ¸Ğ»Ğ»Ğ¸ÑĞµĞºÑƒĞ½Ğ´ Ğ¸Ğ»Ğ¸ ÑĞ¼ĞµÑ€Ñ‚ÑŒ"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frame Budget Mental Model                         â”‚
â”‚                                                                      â”‚
â”‚  ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 16.67Ğ¼Ñ (60 FPS) Ğ¸Ğ»Ğ¸ 8.33Ğ¼Ñ (120 FPS):                      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 0ms        8ms        16ms       â”‚                          â”‚     â”‚
â”‚  â”‚ |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|          â”‚                          â”‚     â”‚
â”‚  â”‚ â”œâ”€Layoutâ”€â”€â”€â”¼â”€Drawâ”€â”€â”€â”€â”€â”¤ âœ… OK    â”‚ Smooth 60 FPS           â”‚     â”‚
â”‚  â”‚ â”œâ”€Layoutâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€Drawâ”€â”€â”€â”€â”¤ âš ï¸ Dropped frame        â”‚     â”‚
â”‚  â”‚ â”œâ”€Layoutâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤ ğŸ’€ Jank!          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â”‚  ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾: cellForRowAt Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒÑÑ < 1-2ms                   â”‚
â”‚  Ğ’ÑÑ‘ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ â€” Ğ² background Ğ¸Ğ»Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¾                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. "ĞšĞ¾Ğ½Ğ²ĞµĞ¹ĞµÑ€ ÑÑ‡ĞµĞµĞº"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cell Conveyor Belt                                â”‚
â”‚                                                                      â”‚
â”‚  ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ½Ğ²ĞµĞ¹ĞµÑ€ Ğ½Ğ° Ğ·Ğ°Ğ²Ğ¾Ğ´Ğµ:                                     â”‚
â”‚                                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”                                        â”‚
â”‚  â”€â”€â”€â”‚Cellâ”‚â”€â”€â”€â”‚Cellâ”‚â”€â”€â”€â”‚Cellâ”‚â”€â”€â”€â†’ Visible Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ                  â”‚
â”‚     â””â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”˜                                        â”‚
â”‚        â†‘                                                             â”‚
â”‚        â”‚ dequeue                                                     â”‚
â”‚        â”‚                                                             â”‚
â”‚     â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚     â”‚    Reuse Pool       â”‚  â† Ğ¯Ñ‡ĞµĞ¹ĞºĞ¸ Ğ¶Ğ´ÑƒÑ‚ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ        â”‚
â”‚     â”‚  [Cell] [Cell] [Cell]â”‚                                         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚        â†‘                                                             â”‚
â”‚        â”‚ prepareForReuse                                             â”‚
â”‚        â”‚                                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”                                        â”‚
â”‚  â†â”€â”€â”‚Cellâ”‚â”€â”€â”€â”‚Cellâ”‚â”€â”€â”€â”‚Cellâ”‚â”€â”€â”€ Ğ£ÑˆĞ»Ğ¸ Ğ·Ğ° ÑĞºÑ€Ğ°Ğ½                       â”‚
â”‚     â””â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                      â”‚
â”‚  Ğ¯Ñ‡ĞµĞ¹ĞºĞ° Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ĞµÑ‚ÑÑ â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ğ¾ĞµÑ‚ÑÑ Ğ¸ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. "ĞĞºĞ½Ğ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Visibility Window                                 â”‚
â”‚                                                                      â”‚
â”‚  Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ: [0][1][2][3][4][5][6][7][8][9][10][11][12]...              â”‚
â”‚                     â†‘                                                â”‚
â”‚                     â”‚                                                â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚           â”‚   Visible Window   â”‚                                     â”‚
â”‚           â”‚    [3][4][5][6]    â”‚                                     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                      â”‚
â”‚  ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 4 ÑÑ‡ĞµĞ¹ĞºĞ¸, Ğ½Ğ¾:                            â”‚
â”‚  â€¢ Prefetch Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ [7][8][9]                                       â”‚
â”‚  â€¢ Reuse pool Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ [0][1][2] Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                â”‚
â”‚                                                                      â”‚
â”‚  ĞŸÑ€Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ Ğ¾ĞºĞ½Ğ¾ Ğ´Ğ²Ğ¸Ğ³Ğ°ĞµÑ‚ÑÑ:                                         â”‚
â”‚  [4][5][6][7] â†’ prefetch [8][9][10]                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. "Diff ĞºĞ°Ğº Git"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Diffable = Git for UI                             â”‚
â”‚                                                                      â”‚
â”‚  ĞšĞ°Ğº Git diff Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² ĞºĞ¾Ğ´Ğµ,                           â”‚
â”‚  Diffable Data Source Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:                â”‚
â”‚                                                                      â”‚
â”‚  Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ snapshot:        ĞĞ¾Ğ²Ñ‹Ğ¹ snapshot:                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ Item A       â”‚        â”‚ Item A       â”‚  â† Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹          â”‚
â”‚  â”‚ Item B       â”‚   â†’    â”‚ Item B       â”‚  â† Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹          â”‚
â”‚  â”‚ Item C       â”‚        â”‚ Item D       â”‚  â† Ğ”ĞĞ‘ĞĞ’Ğ›Ğ•Ğ               â”‚
â”‚  â”‚ Item E       â”‚        â”‚ Item C       â”‚  â† Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰Ñ‘Ğ½              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ Item E       â”‚  â† Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹          â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                      â”‚
â”‚  Diff: +Item D, move Item C after Item B                            â”‚
â”‚  â†’ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ¸Ñ€ÑƒÑÑ‚ÑÑ!                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. "Estimated = Ğ‘ÑĞ´Ğ¶ĞµÑ‚"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Estimated Height = Budget                         â”‚
â”‚                                                                      â”‚
â”‚  ĞšĞ°Ğº Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚:                                               â”‚
â”‚  â€¢ ĞÑ†ĞµĞ½ĞºĞ°: 100,000â‚½                                                  â”‚
â”‚  â€¢ Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ 80,000â‚½ Ğ¸Ğ»Ğ¸ 150,000â‚½                      â”‚
â”‚                                                                      â”‚
â”‚  estimatedRowHeight = 80:                                            â”‚
â”‚  â€¢ iOS Ğ´ÑƒĞ¼Ğ°ĞµÑ‚: contentSize = 80 * 1000 = 80,000pt                   â”‚
â”‚  â€¢ Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ¾: Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ 50,000pt Ğ¸Ğ»Ğ¸ 120,000pt                       â”‚
â”‚                                                                      â”‚
â”‚  Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ½ÑƒĞ¶Ğ½Ğ¾:                                                        â”‚
â”‚  â€¢ Scroll indicator Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½ÑƒÑ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ                    â”‚
â”‚  â€¢ scrollToRow Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾                                       â”‚
â”‚  â€¢ ĞĞµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑÑ‚ÑŒ 1000 Ğ²Ñ‹ÑĞ¾Ñ‚ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ                            â”‚
â”‚                                                                      â”‚
â”‚  ĞšĞ¾Ğ¼Ğ¿Ñ€Ğ¾Ğ¼Ğ¸ÑÑ: Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ scroll indicator vs ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ Ñ‚ĞµĞ¼Ğ°Ğ¼Ğ¸

**[[android-recyclerview-internals]]** â€” Android RecyclerView Ñ€ĞµÑˆĞ°ĞµÑ‚ Ñ‚Ğµ Ğ¶Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (cell reuse, prefetching, diffing), Ğ½Ğ¾ Ñ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹: ViewHolder pattern vs UITableViewCell reuse, DiffUtil vs NSDiffableDataSourceSnapshot, ItemDecoration vs UICollectionViewFlowLayout. Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ²ÑƒÑ… Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ² Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ² onBindViewHolder/cellForRowAt, Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹) Ğ¸ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ¾-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸. ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ ĞºÑ€Ğ¾ÑÑ-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ñ‹Ñ… Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ².

**[[ios-view-rendering]]** â€” Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ rendering pipeline: ĞºĞ°Ğ¶Ğ´Ğ°Ñ ÑÑ‡ĞµĞ¹ĞºĞ° Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‡ĞµÑ€ĞµĞ· layout-display-prepare-commit Ñ†Ğ¸ĞºĞ», Ğ¸ ĞµÑĞ»Ğ¸ ÑÑƒĞ¼Ğ¼Ğ°Ñ€Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞ°ĞµÑ‚ frame budget (16.67ms Ğ¿Ñ€Ğ¸ 60 FPS), Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ dropped frame. ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ offscreen rendering, blending Ğ¸ rasterization Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹ jank-Ğ° Ğ² ÑĞ¿Ğ¸ÑĞºĞ°Ñ…. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ ĞºĞ°Ğº Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ prerequisite Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°.

**[[ios-performance-profiling]]** â€” Instruments (Core Animation instrument, Time Profiler, Allocations) ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğ¼ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼ Ğ´Ğ»Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°: Color Blended Layers Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ overdraw, Color Offscreen-Rendered Ğ²Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¸Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ°, Ğ° Time Profiler Ğ²Ñ‹ÑĞ²Ğ»ÑĞµÑ‚ bottleneck-Ğ¸ Ğ² cellForRowAt. Ğ‘ĞµĞ· Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ Instruments Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° ÑĞ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğº Ğ³Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ.

---

## Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ Ğ¸ Ğ´Ğ°Ğ»ÑŒĞ½ĞµĞ¹ÑˆĞµĞµ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ

### ĞšĞ½Ğ¸Ğ³Ğ¸
- Keur C., Hillegass A. (2020). *iOS Programming: Big Nerd Ranch Guide.* â€” Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€ UITableView Ğ¸ UICollectionView Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸ cell reuse, custom cells Ğ¸ optimization techniques; Ğ»ÑƒÑ‡ÑˆĞ°Ñ ĞºĞ½Ğ¸Ğ³Ğ° Ğ´Ğ»Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ°Ğ¼Ğ¸.
- Neuburg M. (2023). *iOS 17 Programming Fundamentals with Swift.* â€” Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Diffable Data Sources, Compositional Layout Ğ¸ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ API UICollectionView; Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ¾ÑĞ²Ğ¾ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²ĞµĞ¹ÑˆĞ¸Ñ… Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ² Apple Ğº ÑĞ¿Ğ¸ÑĞºĞ°Ğ¼.
- Eidhof C. et al. (2020). *Thinking in SwiftUI.* â€” Ğ¾Ğ±ÑŠÑÑĞ½ÑĞµÑ‚ ĞºĞ°Ğº SwiftUI List Ğ¸ LazyVStack ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒÑ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° Ñ‡ĞµÑ€ĞµĞ· lazy evaluation Ğ¸ identity-based diffing; Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ° Ğ´Ğ»Ñ SwiftUI-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ².

### WWDC Sessions

| Ğ“Ğ¾Ğ´ | Ğ¡ĞµÑÑĞ¸Ñ | Ğ¢ĞµĞ¼Ğ° |
|-----|--------|------|
| 2019 | [Advances in Collection View Layout](https://developer.apple.com/videos/play/wwdc2019/215/) | Compositional Layout |
| 2019 | [Advances in UI Data Sources](https://developer.apple.com/videos/play/wwdc2019/220/) | Diffable Data Source |
| 2020 | [Advances in Diffable Data Sources](https://developer.apple.com/videos/play/wwdc2020/10045/) | Section Snapshots |
| 2021 | [Make blazing fast lists and collection views](https://developer.apple.com/videos/play/wwdc2021/10252/) | Cell Configuration |

### Apple Documentation

- [UITableView](https://developer.apple.com/documentation/uikit/uitableview)
- [UICollectionView](https://developer.apple.com/documentation/uikit/uicollectionview)
- [UICollectionViewCompositionalLayout](https://developer.apple.com/documentation/uikit/uicollectionviewcompositionallayout)
- [Prefetching Collection View Data](https://developer.apple.com/documentation/uikit/uicollectionviewdatasourceprefetching)

---

## ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ ÑĞµĞ±Ñ

> [!question]- ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ dequeueReusableCell ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ°Ğ¶ĞµĞ½ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°?
> Ğ‘ĞµĞ· cell reuse Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ° Ğ¸Ğ· 10000 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ 10000 UITableViewCell Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸. Ğ¡ reuse ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ~15 ÑÑ‡ĞµĞµĞº (Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ğµ + Ğ±ÑƒÑ„ĞµÑ€). dequeueReusableCell Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ ÑÑ‡ĞµĞ¹ĞºĞ¸, Ğ²Ñ‹ÑˆĞµĞ´ÑˆĞ¸Ğµ Ğ·Ğ° ÑĞºÑ€Ğ°Ğ½, Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…. Ğ­Ñ‚Ğ¾ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‚ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸.

> [!question]- Ğ¡ĞºÑ€Ğ¾Ğ»Ğ» Ğ´Ñ‘Ñ€Ğ³Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¼ Ğ¿Ñ€Ğ¾Ğ»Ğ¸ÑÑ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ»ĞµĞ½Ñ‚Ñ‹ Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸. ĞĞ°Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ 3 Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹.
> 1) Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°/Ğ´ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° main thread (Ğ½ÑƒĞ¶Ğ½Ğ¾ async Ğ´ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° background queue). 2) ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ· ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾). 3) Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ layout Ğ² cellForRowAt -- Auto Layout Ğ¿ĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ Ğ¸Ğ»Ğ¸ Ñ‚ÑĞ¶Ñ‘Ğ»Ñ‹Ğµ shadow/cornerRadius Ğ±ĞµĞ· shouldRasterize.

> [!question]- ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ prefetchDataSource ÑƒĞ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ UX Ğ¿Ñ€Ğ¸ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾Ğ¼ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ?
> UICollectionViewDataSourcePrefetching Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ prefetchItemsAt Ğ´Ğ»Ñ ÑÑ‡ĞµĞµĞº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ÑĞºĞ¾Ñ€Ğ¾ Ğ¿Ğ¾ÑĞ²ÑÑ‚ÑÑ. Ğ­Ñ‚Ğ¾ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…/Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ·Ğ°Ñ€Ğ°Ğ½ĞµĞµ, Ğ´Ğ¾ Ñ‚Ğ¾Ğ³Ğ¾ ĞºĞ°Ğº ÑÑ‡ĞµĞ¹ĞºĞ° ÑÑ‚Ğ°Ğ½ĞµÑ‚ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾Ğ¹. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ÑƒĞ¶Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ placeholder.

---

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸

ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ cell reuse Ğ² UITableView/UICollectionView?
?
register(_:forCellReuseIdentifier:) Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚Ğ¸Ğ¿ ÑÑ‡ĞµĞ¹ĞºĞ¸. dequeueReusableCell(withIdentifier:for:) Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ½ÑƒÑ Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ²ÑƒÑ ÑÑ‡ĞµĞ¹ĞºÑƒ. prepareForReuse() Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿ĞµÑ€ĞµĞ´ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¼ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ´Ğ»Ñ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¸ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ.

ĞšĞ°ĞºĞ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ¾Ğ´Ğ¸Ğ½ ĞºĞ°Ğ´Ñ€ Ğ¿Ñ€Ğ¸ 60/120 FPS?
?
60 FPS = 16.67ms Ğ½Ğ° ĞºĞ°Ğ´Ñ€, 120 FPS (ProMotion) = 8.33ms. Ğ’ÑÑ‘, Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ² cellForRowAt, layoutSubviews Ğ¸ draw(_:), Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ ÑƒĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ² ÑÑ‚Ğ¾Ñ‚ Ğ±ÑĞ´Ğ¶ĞµÑ‚. ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ = dropped frames = jank.

Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Self-Sizing Cells?
?
Ğ¯Ñ‡ĞµĞ¹ĞºĞ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑÑÑ‚ Ğ²Ñ‹ÑĞ¾Ñ‚Ñƒ Ñ‡ĞµÑ€ĞµĞ· Auto Layout. Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ tableView.rowHeight = UITableView.automaticDimension Ğ¸ estimatedRowHeight. Constraints Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ÑÑ‡ĞµĞ¹ĞºĞ¸ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑÑ‚ÑŒ Ğ²Ñ‹ÑĞ¾Ñ‚Ñƒ Ğ¾Ñ‚ top Ğ´Ğ¾ bottom contentView.

ĞšĞ°Ğº Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ½Ğ¸ Ğ¸ ÑĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°?
?
layer.shadowPath = UIBezierPath Ğ²Ğ¼ĞµÑÑ‚Ğ¾ dynamic shadow calculation. layer.shouldRasterize = true Ğ´Ğ»Ñ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ. cornerRadius Ñ‡ĞµÑ€ĞµĞ· layer.cornerCurve = .continuous. Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ñ‚ÑŒ masksToBounds + shadow Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ (Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ off-screen rendering).

Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Compositional Layout?
?
UICollectionViewCompositionalLayout (iOS 13+) -- Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ layout Ğ¸Ğ· Item -> Group -> Section. ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ orthogonal scrolling, estimated sizes, supplementary views. Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ UICollectionViewFlowLayout Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… layouts.

---

## ĞšÑƒĞ´Ğ° Ğ´Ğ°Ğ»ÑŒÑˆĞµ

| ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ | ĞšÑƒĞ´Ğ° | Ğ—Ğ°Ñ‡ĞµĞ¼ |
|-------------|------|-------|
| Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³ | [[ios-view-rendering]] | ĞŸĞ¾Ğ½ÑÑ‚ÑŒ render pipeline Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ |
| Ğ£Ğ³Ğ»ÑƒĞ±Ğ¸Ñ‚ÑŒÑÑ | [[ios-performance-profiling]] | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Instruments Ğ´Ğ»Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ¸ jank |
| Ğ¡Ğ¼ĞµĞ¶Ğ½Ğ°Ñ Ñ‚ĞµĞ¼Ğ° | [[android-recyclerview-internals]] | Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ RecyclerView Ñ UICollectionView |
| ĞĞ±Ğ·Ğ¾Ñ€ | [[ios-overview]] | Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº ĞºĞ°Ñ€Ñ‚Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ° |
